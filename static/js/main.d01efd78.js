/*! For license information please see main.d01efd78.js.LICENSE.txt */
(()=>{var e={442:(e,t,n)=>{var i,r;void 0===(r="function"===typeof(i=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function u(e){var t=a();return function(){var n,i=o(e);if(t){var r=o(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}function d(){return d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=h(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},d.apply(this,arguments)}var p=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return i(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],i=0,r=n.length;i<r;i++)if(n[i].callback===t)return void n.splice(i,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,i=t.length;n<i;n++){var r=t[n];try{r.callback.call(this,e)}catch(o){Promise.resolve().then((function(){throw o}))}r.options&&r.options.once&&this.removeEventListener(e.type,r.callback)}return!e.defaultPrevented}}}]),t}(),f=function(t){r(s,t);var n=u(s);function s(){var t;return e(this,s),(t=n.call(this)).listeners||p.call(l(t)),Object.defineProperty(l(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(t),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(l(t),"reason",{value:void 0,writable:!0,configurable:!0}),t}return i(s,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"===typeof this.onabort&&this.onabort.call(this,e)),d(o(s.prototype),"dispatchEvent",this).call(this,e)}}]),s}(p),m=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new f,writable:!0,configurable:!0})}return i(t,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch(i){"undefined"!==typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}var n=e;if(void 0===n)if("undefined"===typeof document)(n=new Error("This operation was aborted")).name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch(r){(n=new Error("This operation was aborted")).name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();function g(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"===typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!==typeof Symbol&&Symbol.toStringTag&&(m.prototype[Symbol.toStringTag]="AbortController",f.prototype[Symbol.toStringTag]="AbortSignal"),function(e){g(e)&&(e.AbortController=m,e.AbortSignal=f)}("undefined"!==typeof self?self:n.g)})?i.call(t,n,t,e):i)||(e.exports=r)},110:(e,t,n)=>{"use strict";var i=n(309),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return i.isMemo(e)?s:a[e.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(f){var r=p(n);r&&r!==f&&e(t,r,i)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var y=s[g];if(!o[y]&&(!i||!i[y])&&(!m||!m[y])&&(!a||!a[y])){var _=d(n,y);try{c(t,y,_)}catch(v){}}}}return t}},746:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case h:case o:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case r:return t}}}function w(e){return x(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=r,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||x(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===r},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===_||e.$$typeof===v||e.$$typeof===b||e.$$typeof===y)},t.typeOf=x},309:(e,t,n)=>{"use strict";e.exports=n(746)},888:(e,t,n)=>{"use strict";var i=n(47);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var i=n(791),r=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function v(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var z=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var D,F=Object.assign;function N(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function j(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function V(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Z(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){$(e,t);var n=G(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),i=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,ke=null;function Ce(e){if(e=vr(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=xr(t),we(e.stateNode,e.type,t))}}function Ee(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Te(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Pe(e,t){return e(t)}function Ie(){}var Me=!1;function Ae(e,t,n){if(Me)return e(t,n);Me=!0;try{return Pe(e,t,n)}finally{Me=!1,(null!==Se||null!==ke)&&(Ie(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var ze=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){ze=!1}function Oe(e,t,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Fe=null,Ne=!1,Be=null,je={onError:function(e){De=!0,Fe=e}};function Ve(e,t,n,i,r,o,s,a,l){De=!1,Fe=null,Oe.apply(je,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ue(e)!==e)throw Error(o(188))}function Ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Ge(r),e;if(s===i)return Ge(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ye=r.unstable_requestPaint,$e=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Qe=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=ht(a):0!==(o&=s)&&(i=ht(o))}else 0!==(s=n&~r)?i=ht(s):0!==o&&(i=ht(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,St,kt,Ct,Et=!1,Tt=[],Pt=null,It=null,Mt=null,At=new Map,Rt=new Map,zt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=vr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=_r(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Bt(e,t,n){Nt(e)&&n.delete(t)}function jt(){Et=!1,null!==Pt&&Nt(Pt)&&(Pt=null),null!==It&&Nt(It)&&(It=null),null!==Mt&&Nt(Mt)&&(Mt=null),At.forEach(Bt),Rt.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jt)))}function Ut(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Pt&&Vt(Pt,e),null!==It&&Vt(It,e),null!==Mt&&Vt(Mt,e),At.forEach(t),Rt.forEach(t),n=0;n<zt.length;n++)(i=zt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<zt.length&&null===(n=zt[0]).blockedOn;)Ft(n),null===n.blockedOn&&zt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Zt(e,t,n,i){var r=vt,o=qt.transition;qt.transition=null;try{vt=1,Wt(e,t,n,i)}finally{vt=r,qt.transition=o}}function Ht(e,t,n,i){var r=vt,o=qt.transition;qt.transition=null;try{vt=4,Wt(e,t,n,i)}finally{vt=r,qt.transition=o}}function Wt(e,t,n,i){if(Gt){var r=Xt(e,t,n,i);if(null===r)Gi(e,t,i,Kt,n),Ot(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Pt=Dt(Pt,e,t,n,i,r),!0;case"dragenter":return It=Dt(It,e,t,n,i,r),!0;case"mouseover":return Mt=Dt(Mt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return At.set(o,Dt(At.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Rt.set(o,Dt(Rt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Ot(e,i),4&t&&-1<Lt.indexOf(e)){for(;null!==r;){var o=vr(r);if(null!==o&&xt(o),null===(o=Xt(e,t,n,i))&&Gi(e,t,i,Kt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Gi(e,t,i,null,n)}}var Kt=null;function Xt(e,t,n,i){if(Kt=null,null!==(e=_r(e=xe(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,i=n.length,r="value"in $t?$t.value:$t.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Qt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=F({},cn,{view:0,detail:0}),dn=on(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(F({},pn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),yn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(_n),bn=on(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return kn}var En=F({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(En),Pn=on(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Mn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(An),zn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Dn=u&&"TextEvent"in window&&!On,Fn=u&&(!Ln||On&&8<On&&11>=On),Nn=String.fromCharCode(32),Bn=!1;function jn(e,t){switch(e){case"keyup":return-1!==zn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Zn(e,t,n,i){Ee(i),0<(t=Hi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Kn(e){Ni(e,0)}function Xn(e){if(W(br(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Qn="oninput"in document;if(!Qn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Qn="function"===typeof ei.oninput}Jn=Qn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Hn&&(Hn.detachEvent("onpropertychange",ni),Wn=Hn=null)}function ni(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Zn(t,Wn,e,xe(e)),Ae(Kn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Wn=n,(Hn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function oi(e,t){if("click"===e)return Xn(t)}function si(e,t){if("input"===e||"change"===e)return Xn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var s=ui(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,yi=null,_i=null,vi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==gi||gi!==K(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},_i&&li(_i,i)||(_i=i,0<(i=Hi(yi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},Si={},ki={};function Ci(e){if(Si[e])return Si[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in ki)return Si[e]=n[t];return e}u&&(ki=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ei=Ci("animationend"),Ti=Ci("animationiteration"),Pi=Ci("animationstart"),Ii=Ci("transitionend"),Mi=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(e,t){Mi.set(e,t),l(t,[e])}for(var zi=0;zi<Ai.length;zi++){var Li=Ai[zi];Ri(Li.toLowerCase(),"on"+(Li[0].toUpperCase()+Li.slice(1)))}Ri(Ei,"onAnimationEnd"),Ri(Ti,"onAnimationIteration"),Ri(Pi,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Ii,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Fi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,a,l,c){if(Ve.apply(this,arguments),De){if(!De)throw Error(o(198));var u=Fe;De=!1,Fe=null,Ne||(Ne=!0,Be=u)}}(i,t,void 0,e),e.currentTarget=null}function Ni(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;Fi(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;Fi(r,a,c),o=l}}}if(Ne)throw e=Be,Ne=!1,Be=null,e}function Bi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(qi(t,e,2,!1),n.add(i))}function ji(e,t,n){var i=0;t&&(i|=4),qi(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Vi]){e[Vi]=!0,s.forEach((function(t){"selectionchange"!==t&&(Di.has(t)||ji(t,!1,e),ji(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,ji("selectionchange",!1,t))}}function qi(e,t,n,i){switch(Yt(t)){case 1:var r=Zt;break;case 4:r=Ht;break;default:r=Wt}n=r.bind(null,t,n,e),r=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Gi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=_r(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue e}a=a.parentNode}}i=i.return}Ae((function(){var i=o,r=xe(n),s=[];e:{var a=Mi.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Ei:case Ti:case Pi:l=yn;break;case Ii:l=Mn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Re(f,d))&&u.push(Zi(f,m,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!_r(c)&&!c[fr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?_r(c):null)&&(c!==(h=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:br(l),p=null==c?a:br(c),(a=new u(m,f+"leave",l,n,r)).target=h,a.relatedTarget=p,m=null,_r(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Wi(p))f++;for(p=0,m=d;m;m=Wi(m))p++;for(;0<f-p;)u=Wi(u),f--;for(;0<p-f;)d=Wi(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wi(u),d=Wi(d)}u=null}else u=null;null!==l&&Ki(s,a,l,u,!1),null!==c&&null!==h&&Ki(s,h,c,u,!0)}if("select"===(l=(a=i?br(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Gn(a))if($n)g=si;else{g=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=oi);switch(g&&(g=g(e,i))?Zn(s,g,n,r):(y&&y(e,a,i),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=i?br(i):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(gi=y,yi=i,_i=null);break;case"focusout":_i=yi=gi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,bi(s,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":bi(s,n,r)}var _;if(Ln)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Un?jn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Fn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==v?"onCompositionEnd"===v&&Un&&(_=en()):(Jt="value"in($t=r)?$t.value:$t.textContent,Un=!0)),0<(y=Hi(i,v)).length&&(v=new bn(v,e,null,n,r),s.push({event:v,listeners:y}),_?v.data=_:null!==(_=Vn(n))&&(v.data=_))),(_=Dn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Ln&&jn(e,t)?(e=en(),Qt=Jt=$t=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Hi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=_))}Ni(s,t)}))}function Zi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Re(e,n))&&i.unshift(Zi(e,o,r)),null!=(o=Re(e,t))&&i.push(Zi(e,o,r))),e=e.return}return i}function Wi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Re(n,o))&&s.unshift(Zi(n,l,a)):r||null!=(l=Re(n,o))&&s.push(Zi(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xi=/\r\n?/g,Yi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Xi,"\n").replace(Yi,"")}function Ji(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(o(425))}function Qi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ut(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ut(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,mr="__reactEvents$"+hr,gr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function _r(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function vr(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xr(e){return e[pr]||null}var wr=[],Sr=-1;function kr(e){return{current:e}}function Cr(e){0>Sr||(e.current=wr[Sr],wr[Sr]=null,Sr--)}function Er(e,t){Sr++,wr[Sr]=e.current,e.current=t}var Tr={},Pr=kr(Tr),Ir=kr(!1),Mr=Tr;function Ar(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function zr(){Cr(Ir),Cr(Pr)}function Lr(e,t,n){if(Pr.current!==Tr)throw Error(o(168));Er(Pr,t),Er(Ir,n)}function Or(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,q(e)||"Unknown",r));return F({},n,i)}function Dr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Mr=Pr.current,Er(Pr,e),Er(Ir,Ir.current),!0}function Fr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Or(e,t,Mr),i.__reactInternalMemoizedMergedChildContext=e,Cr(Ir),Cr(Pr),Er(Pr,e)):Cr(Ir),Er(Ir,n)}var Nr=null,Br=!1,jr=!1;function Vr(e){null===Nr?Nr=[e]:Nr.push(e)}function Ur(){if(!jr&&null!==Nr){jr=!0;var e=0,t=vt;try{var n=Nr;for(vt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Nr=null,Br=!1}catch(r){throw null!==Nr&&(Nr=Nr.slice(e+1)),We(Qe,Ur),r}finally{vt=t,jr=!1}}return null}var qr=[],Gr=0,Zr=null,Hr=0,Wr=[],Kr=0,Xr=null,Yr=1,$r="";function Jr(e,t){qr[Gr++]=Hr,qr[Gr++]=Zr,Zr=e,Hr=t}function Qr(e,t,n){Wr[Kr++]=Yr,Wr[Kr++]=$r,Wr[Kr++]=Xr,Xr=e;var i=Yr;e=$r;var r=32-st(i)-1;i&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Yr=1<<32-st(t)+r|n<<r|i,$r=o+e}else Yr=1<<o|n<<r|i,$r=e}function eo(e){null!==e.return&&(Jr(e,1),Qr(e,1,0))}function to(e){for(;e===Zr;)Zr=qr[--Gr],qr[Gr]=null,Hr=qr[--Gr],qr[Gr]=null;for(;e===Xr;)Xr=Wr[--Kr],Wr[Kr]=null,$r=Wr[--Kr],Wr[Kr]=null,Yr=Wr[--Kr],Wr[Kr]=null}var no=null,io=null,ro=!1,oo=null;function so(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xr?{id:Yr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ro){var t=io;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=cr(n.nextSibling);var i=no;t&&ao(e,t)?so(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?cr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=cr(e.nextSibling)}function fo(){io=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var _o=kr(null),vo=null,bo=null,xo=null;function wo(){xo=bo=vo=null}function So(e){var t=_o.current;Cr(_o),e._currentValue=t}function ko(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Co(e,t){vo=e,xo=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Eo(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===vo)throw Error(o(308));bo=e,vo.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var To=null;function Po(e){null===To?To=[e]:To.push(e)}function Io(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Po(t)):(n.next=r.next,r.next=n),t.interleaved=n,Mo(e,i)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function Ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Il)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Mo(e,n)}return null===(r=i.interleaved)?(t.next=t,Po(i)):(t.next=r.next,r.next=t),i.interleaved=t,Mo(e,n)}function Do(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,_t(e,n)}}function Fo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function No(e,t,n,i){var r=e.updateQueue;Ao=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,p=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Ao=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,s|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=h}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var jo=(new i.Component).refs;function Vo(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Uo={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),o=Lo(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Oo(e,o,r))&&(ic(t,e,r,i),Do(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),o=Lo(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Oo(e,o,r))&&(ic(t,e,r,i),Do(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),r=Lo(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Oo(e,r,i))&&(ic(t,e,i,n),Do(t,e,i))}};function qo(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function Go(e,t,n){var i=!1,r=Tr,o=t.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(r=Rr(t)?Mr:Pr.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ar(e,r):Tr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Uo,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function Zo(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Uo.enqueueReplaceState(t,t.state,null)}function Ho(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=jo,Ro(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Eo(o):(o=Rr(t)?Mr:Pr.current,r.context=Ar(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Uo.enqueueReplaceState(r,r.state,null),No(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Wo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===jo&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ko(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Nc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var o=n.type;return o===S?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&Xo(o)===t.type)?((i=r(t,n.props)).ref=Wo(e,t,n),i.return=e,i):((i=Oc(n.type,n.key,n.props,null,e.mode,i)).ref=Wo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,o){return null===t||7!==t.tag?((t=Dc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Nc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Wo(e,null,t),n.return=e,n;case w:return(t=Bc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Dc(t,e.mode,n,null)).return=e,t;Ko(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case R:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||O(n))return null!==r?null:h(e,t,n,i,null);Ko(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case R:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||O(i))return h(t,e=e.get(n)||null,i,r,null);Ko(t,i)}return null}function m(r,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(r,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(r,h),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(r,h),ro&&Jr(r,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(r,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return ro&&Jr(r,m),c}for(h=i(r,h);m<a.length;m++)null!==(g=f(h,r,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(r,e)})),ro&&Jr(r,m),c}function g(r,a,l,c){var u=O(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,y=null,_=l.next();null!==m&&!_.done;g++,_=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=p(r,m,_.value,c);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(r,m),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v,m=y}if(_.done)return n(r,m),ro&&Jr(r,g),u;if(null===m){for(;!_.done;g++,_=l.next())null!==(_=d(r,_.value,c))&&(a=s(_,a,g),null===h?u=_:h.sibling=_,h=_);return ro&&Jr(r,g),u}for(m=i(r,m);!_.done;g++,_=l.next())null!==(_=f(m,r,g,_.value,c))&&(e&&null!==_.alternate&&m.delete(null===_.key?g:_.key),a=s(_,a,g),null===h?u=_:h.sibling=_,h=_);return e&&m.forEach((function(e){return t(r,e)})),ro&&Jr(r,g),u}return function e(i,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(i,u.sibling),(o=r(u,s.props.children)).return=i,i=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Xo(c)===u.type){n(i,u.sibling),(o=r(u,s.props)).ref=Wo(i,u,s),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}s.type===S?((o=Dc(s.props.children,i.mode,l,s.key)).return=i,i=o):((l=Oc(s.type,s.key,s.props,null,i.mode,l)).ref=Wo(i,o,s),l.return=i,i=l)}return a(i);case w:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Bc(s,i.mode,l)).return=i,i=o}return a(i);case R:return e(i,o,(u=s._init)(s._payload),l)}if(te(s))return m(i,o,s,l);if(O(s))return g(i,o,s,l);Ko(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=Nc(s,i.mode,l)).return=i,i=o),a(i)):n(i,o)}}var $o=Yo(!0),Jo=Yo(!1),Qo={},es=kr(Qo),ts=kr(Qo),ns=kr(Qo);function is(e){if(e===Qo)throw Error(o(174));return e}function rs(e,t){switch(Er(ns,t),Er(ts,e),Er(es,Qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(es),Er(es,t)}function os(){Cr(es),Cr(ts),Cr(ns)}function ss(e){is(ns.current);var t=is(es.current),n=le(t,e.type);t!==n&&(Er(ts,e),Er(es,n))}function as(e){ts.current===e&&(Cr(es),Cr(ts))}var ls=kr(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=b.ReactCurrentDispatcher,ps=b.ReactCurrentBatchConfig,fs=0,ms=null,gs=null,ys=null,_s=!1,vs=!1,bs=0,xs=0;function ws(){throw Error(o(321))}function Ss(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function ks(e,t,n,i,r,s){if(fs=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:la,e=n(i,r),vs){s=0;do{if(vs=!1,bs=0,25<=s)throw Error(o(301));s+=1,ys=gs=null,t.updateQueue=null,ds.current=ca,e=n(i,r)}while(vs)}if(ds.current=sa,t=null!==gs&&null!==gs.next,fs=0,ys=gs=ms=null,_s=!1,t)throw Error(o(300));return e}function Cs(){var e=0!==bs;return bs=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?ms.memoizedState=ys=e:ys=ys.next=e,ys}function Ts(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===ys?ms.memoizedState:ys.next;if(null!==t)ys=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ys?ms.memoizedState=ys=e:ys=ys.next=e}return ys}function Ps(e,t){return"function"===typeof t?t(e):t}function Is(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=gs,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((fs&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,ms.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==s);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(ba=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,ms.lanes|=s,Fl|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ms(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ai(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function As(){}function Rs(e,t){var n=ms,i=Ts(),r=t(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,ba=!0),i=i.queue,Gs(Os.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,Bs(9,Ls.bind(null,n,i,r,t),void 0,null),null===Ml)throw Error(o(349));0!==(30&fs)||zs(n,t,r)}return r}function zs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,i){t.value=n,t.getSnapshot=i,Ds(t)&&Fs(e)}function Os(e,t,n){return n((function(){Ds(t)&&Fs(e)}))}function Ds(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Fs(e){var t=Mo(e,1);null!==t&&ic(t,e,1,-1)}function Ns(e){var t=Es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function Bs(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function js(){return Ts().memoizedState}function Vs(e,t,n,i){var r=Es();ms.flags|=e,r.memoizedState=Bs(1|t,n,void 0,void 0===i?null:i)}function Us(e,t,n,i){var r=Ts();i=void 0===i?null:i;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==i&&Ss(i,s.deps))return void(r.memoizedState=Bs(t,n,o,i))}ms.flags|=e,r.memoizedState=Bs(1|t,n,o,i)}function qs(e,t){return Vs(8390656,8,e,t)}function Gs(e,t){return Us(2048,8,e,t)}function Zs(e,t){return Us(4,2,e,t)}function Hs(e,t){return Us(4,4,e,t)}function Ws(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ks(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4,4,Ws.bind(null,t,e),n)}function Xs(){}function Ys(e,t){var n=Ts();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ss(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function $s(e,t){var n=Ts();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ss(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Js(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ai(n,t)||(n=mt(),ms.lanes|=n,Fl|=n,e.baseState=!0),t)}function Qs(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var i=ps.transition;ps.transition={};try{e(!1),t()}finally{vt=n,ps.transition=i}}function ea(){return Ts().memoizedState}function ta(e,t,n){var i=nc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))ra(t,n);else if(null!==(n=Io(e,t,n,i))){ic(n,e,i,tc()),oa(n,t,i)}}function na(e,t,n){var i=nc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))ra(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var l=t.interleaved;return null===l?(r.next=r,Po(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Io(e,t,r,i))&&(ic(n,e,i,r=tc()),oa(n,t,i))}}function ia(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ra(e,t){vs=_s=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,_t(e,n)}}var sa={readContext:Eo,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},aa={readContext:Eo,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:Eo,useEffect:qs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4194308,4,Ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vs(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Es();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ta.bind(null,ms,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ns,useDebugValue:Xs,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ns(!1),t=e[0];return e=Qs.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ms,r=Es();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ml)throw Error(o(349));0!==(30&fs)||zs(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,qs(Os.bind(null,i,s,e),[e]),i.flags|=2048,Bs(9,Ls.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=Es(),t=Ml.identifierPrefix;if(ro){var n=$r;t=":"+t+"R"+(n=(Yr&~(1<<32-st(Yr)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Eo,useCallback:Ys,useContext:Eo,useEffect:Gs,useImperativeHandle:Ks,useInsertionEffect:Zs,useLayoutEffect:Hs,useMemo:$s,useReducer:Is,useRef:js,useState:function(){return Is(Ps)},useDebugValue:Xs,useDeferredValue:function(e){return Js(Ts(),gs.memoizedState,e)},useTransition:function(){return[Is(Ps)[0],Ts().memoizedState]},useMutableSource:As,useSyncExternalStore:Rs,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Eo,useCallback:Ys,useContext:Eo,useEffect:Gs,useImperativeHandle:Ks,useInsertionEffect:Zs,useLayoutEffect:Hs,useMemo:$s,useReducer:Ms,useRef:js,useState:function(){return Ms(Ps)},useDebugValue:Xs,useDeferredValue:function(e){var t=Ts();return null===gs?t.memoizedState=e:Js(t,gs.memoizedState,e)},useTransition:function(){return[Ms(Ps)[0],Ts().memoizedState]},useMutableSource:As,useSyncExternalStore:Rs,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Zl||(Zl=!0,Hl=i),da(0,t)},n}function ma(e,t,n){(n=Lo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new pa;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Oo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var va=b.ReactCurrentOwner,ba=!1;function xa(e,t,n,i){t.child=null===e?Jo(t,null,n,i):$o(t,e.child,n,i)}function wa(e,t,n,i,r){n=n.render;var o=t.ref;return Co(t,r),i=ks(e,t,n,i,o,r),n=Cs(),null===e||ba?(ro&&n&&eo(t),t.flags|=1,xa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Za(e,t,r))}function Sa(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||zc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ka(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&e.ref===t.ref)return Za(e,t,r)}return t.flags|=1,(e=Lc(o,i)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(ba=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Za(e,t,r);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,i,r)}function Ca(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Ll,zl),zl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Ll,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Er(Ll,zl),zl|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Er(Ll,zl),zl|=i;return xa(e,t,r,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,i,r){var o=Rr(n)?Mr:Pr.current;return o=Ar(t,o),Co(t,r),n=ks(e,t,n,i,o,r),i=Cs(),null===e||ba?(ro&&i&&eo(t),t.flags|=1,xa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Za(e,t,r))}function Pa(e,t,n,i,r){if(Rr(n)){var o=!0;Dr(t)}else o=!1;if(Co(t,r),null===t.stateNode)Ga(e,t),Go(t,n,i),Ho(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Eo(c):c=Ar(t,c=Rr(n)?Mr:Pr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&Zo(t,s,i,c),Ao=!1;var d=t.memoizedState;s.state=d,No(t,i,s,r),l=t.memoizedState,a!==i||d!==l||Ir.current||Ao?("function"===typeof u&&(Vo(t,n,u,i),l=t.memoizedState),(a=Ao||qo(t,n,a,i,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,zo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:yo(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Eo(l):l=Ar(t,l=Rr(n)?Mr:Pr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Zo(t,s,i,l),Ao=!1,d=t.memoizedState,s.state=d,No(t,i,s,r);var f=t.memoizedState;a!==h||d!==f||Ir.current||Ao?("function"===typeof p&&(Vo(t,n,p,i),f=t.memoizedState),(c=Ao||qo(t,n,c,i,d,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Ia(e,t,n,i,o,r)}function Ia(e,t,n,i,r,o){Ea(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&Fr(t,n,!1),Za(e,t,o);i=t.stateNode,va.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=$o(t,e.child,null,o),t.child=$o(t,null,a,o)):xa(e,t,a,o),t.memoizedState=i.state,r&&Fr(t,n,!0),t.child}function Ma(e){var t=e.stateNode;t.pendingContext?Lr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lr(0,t.context,!1),rs(e,t.containerInfo)}function Aa(e,t,n,i,r){return fo(),mo(r),t.flags|=256,xa(e,t,n,i),t.child}var Ra,za,La,Oa,Da={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Na(e,t,n){var i,r=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Er(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,r,0,null),e=Dc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Da,e):Ba(t,l));if(null!==(s=e.memoizedState)&&null!==(i=s.dehydrated))return function(e,t,n,i,r,s,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,i=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Fc({mode:"visible",children:i.children},r,0,null),(s=Dc(s,r,a,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&$o(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Da,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,ja(e,t,a,i=ha(s=Error(o(419)),i,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(i=Ml)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Mo(e,r),ic(i,e,r,-1))}return gc(),ja(e,t,a,i=ha(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Pc.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,io=cr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Wr[Kr++]=Yr,Wr[Kr++]=$r,Wr[Kr++]=Xr,Yr=e.id,$r=e.overflow,Xr=t),t=Ba(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,s,n);if(a){a=r.fallback,l=t.mode,i=(s=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Lc(i,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,r}return e=(a=e.child).sibling,r=Lc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ba(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,i){return null!==i&&mo(i),$o(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ko(e.return,t,n)}function Ua(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function qa(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(xa(e,t,i.children,n),0!==(2&(i=ls.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Er(ls,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ua(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===cs(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ua(t,!0,n,null,o);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Za(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ka(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Rr(t.type)&&zr(),Wa(t),null;case 3:return i=t.stateNode,os(),Cr(Ir),Cr(Pr),hs(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),za(e,t),Wa(t),null;case 5:as(t);var r=is(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Wa(t),null}if(e=is(es.current),ho(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[dr]=t,i[pr]=s,e=0!==(1&t.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(r=0;r<Oi.length;r++)Bi(Oi[r],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":Y(i,s),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Bi("invalid",i);break;case"textarea":re(i,s),Bi("invalid",i)}for(var l in _e(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==s.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":H(i),Q(i,s,!0);break;case"textarea":H(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Qi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[pr]=i,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,i),n){case"dialog":Bi("cancel",e),Bi("close",e),r=i;break;case"iframe":case"object":case"embed":Bi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Oi.length;r++)Bi(Oi[r],e);r=i;break;case"source":Bi("error",e),r=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),r=i;break;case"details":Bi("toggle",e),r=i;break;case"input":Y(e,i),r=X(e,i),Bi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Bi("invalid",e)}for(s in _e(n,r),c=r)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Bi("scroll",e):null!=u&&v(e,s,u,l))}switch(n){case"input":H(e),Q(e,i,!1);break;case"textarea":H(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+G(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Qi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=is(ns.current),is(es.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(s=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Wa(t),null;case 13:if(Cr(ls),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[dr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return os(),za(e,t),null===e&&Ui(t.stateNode.containerInfo),Wa(t),null;case 10:return So(t.type._context),Wa(t),null;case 19:if(Cr(ls),null===(s=t.memoizedState))return Wa(t),null;if(i=0!==(128&t.flags),null===(l=s.rendering))if(i)Ha(s,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ha(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&$e()>ql&&(t.flags|=128,i=!0,Ha(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=cs(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return Wa(t),null}else 2*$e()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,i=!0,Ha(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,n=ls.current,Er(ls,i?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&zl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xa(e,t){switch(to(t),t.tag){case 1:return Rr(t.type)&&zr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Cr(Ir),Cr(Pr),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Cr(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(ls),null;case 4:return os(),null;case 10:return So(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},za=function(){},La=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,is(es.current);var o,s=null;switch(n){case"input":r=X(e,r),i=X(e,i),s=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Qi)}for(u in _e(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Bi("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ya=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Qa=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Cc(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){Cc(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&tl(t,n,o)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[mr],delete t[gr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qi));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:$a||el(n,t);case 6:var i=hl,r=dl;hl=null,pl(e,t,n),dl=r,null!==(hl=i)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ut(e)):lr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,pl(e,t,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),r=r.next}while(r!==i)}pl(e,t,n);break;case 1:if(!$a&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Cc(n,t,a)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?($a=(i=$a)||null!==n.memoizedState,pl(e,t,n),$a=i):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var i=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));fl(s,a,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Cc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),_l(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(g){Cc(e,e.return,g)}try{il(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:gl(t,e),_l(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),_l(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(g){Cc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(r,s),ve(l,a);var u=ve(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):v(r,h,d,u)}switch(l){case"input":J(r,s);break;case"textarea":oe(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[pr]=s}catch(g){Cc(e,e.return,g)}}break;case 6:if(gl(t,e),_l(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){Cc(e,e.return,g)}}break;case 3:if(gl(t,e),_l(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:gl(t,e),_l(e);break;case 13:gl(t,e),_l(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=$e())),4&i&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,gl(t,e),$a=u):gl(t,e),_l(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Qa=e,h=e.child;null!==h;){for(d=Qa=h;null!==Qa;){switch(f=(p=Qa).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(i,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Qa=f):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Cc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),_l(e),4&i&&ml(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),ul(e,ll(e),r);break;case 3:case 4:var s=i.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qa=e,bl(e,t,n)}function bl(e,t,n){for(var i=0!==(1&e.mode);null!==Qa;){var r=Qa,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Ya;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Ya;var c=$a;if(Ya=s,($a=l)&&!c)for(Qa=r;null!==Qa;)l=(s=Qa).child,22===s.tag&&null!==s.memoizedState?Sl(r):null!==l?(l.return=s,Qa=l):Sl(r);for(;null!==o;)Qa=o,bl(o,t,n),o=o.sibling;Qa=r,Ya=a,$a=c}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Qa=o):xl(e)}}function xl(e){for(;null!==Qa;){var t=Qa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!$a)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Bo(t,s,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(o(163))}$a||512&t.flags&&ol(t)}catch(p){Cc(t,t.return,p)}}if(t===e){Qa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qa=n;break}Qa=t.return}}function wl(e){for(;null!==Qa;){var t=Qa;if(t===e){Qa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qa=n;break}Qa=t.return}}function Sl(e){for(;null!==Qa;){var t=Qa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Cc(t,r,l)}}var o=t.return;try{ol(t)}catch(l){Cc(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Cc(t,s,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Qa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Qa=a;break}Qa=t.return}}var kl,Cl=Math.ceil,El=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Pl=b.ReactCurrentBatchConfig,Il=0,Ml=null,Al=null,Rl=0,zl=0,Ll=kr(0),Ol=0,Dl=null,Fl=0,Nl=0,Bl=0,jl=null,Vl=null,Ul=0,ql=1/0,Gl=null,Zl=!1,Hl=null,Wl=null,Kl=!1,Xl=null,Yl=0,$l=0,Jl=null,Ql=-1,ec=0;function tc(){return 0!==(6&Il)?$e():-1!==Ql?Ql:Ql=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Rl?Rl&-Rl:null!==go.transition?(0===ec&&(ec=mt()),ec):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ic(e,t,n,i){if(50<$l)throw $l=0,Jl=null,Error(o(185));yt(e,n,i),0!==(2&Il)&&e===Ml||(e===Ml&&(0===(2&Il)&&(Nl|=n),4===Ol&&lc(e,Rl)),rc(e,i),1===n&&0===Il&&0===(1&t.mode)&&(ql=$e()+500,Br&&Ur()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=dt(e,e===Ml?Rl:0);if(0===i)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Br=!0,Vr(e)}(cc.bind(null,e)):Vr(cc.bind(null,e)),sr((function(){0===(6&Il)&&Ur()})),n=null;else{switch(bt(i)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Mc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Ql=-1,ec=0,0!==(6&Il))throw Error(o(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var i=dt(e,e===Ml?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=yc(e,i);else{t=i;var r=Il;Il|=2;var s=mc();for(Ml===e&&Rl===t||(Gl=null,ql=$e()+500,pc(e,t));;)try{vc();break}catch(l){fc(e,l)}wo(),El.current=s,Il=r,null!==Al?t=0:(Ml=null,Rl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=sc(e,r))),1===t)throw n=Dl,pc(e,0),lc(e,i),rc(e,$e()),n;if(6===t)lc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=yc(e,i))&&(0!==(s=ft(e))&&(i=s,t=sc(e,s))),1===t))throw n=Dl,pc(e,0),lc(e,i),rc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Vl,Gl);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=Ul+500-$e())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wc.bind(null,e,Vl,Gl),t);break}wc(e,Vl,Gl);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-st(i);s=1<<a,(a=t[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cl(i/1960))-i)){e.timeoutHandle=ir(wc.bind(null,e,Vl,Gl),i);break}wc(e,Vl,Gl);break;default:throw Error(o(329))}}}return rc(e,$e()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~Bl,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!==(6&Il))throw Error(o(327));Sc();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=Dl,pc(e,0),lc(e,t),rc(e,$e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Gl),rc(e,$e()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(ql=$e()+500,Br&&Ur())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&Il)&&Sc();var t=Il;Il|=1;var n=Pl.transition,i=vt;try{if(Pl.transition=null,vt=1,e)return e()}finally{vt=i,Pl.transition=n,0===(6&(Il=t))&&Ur()}}function dc(){zl=Ll.current,Cr(Ll)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Al)for(n=Al.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&zr();break;case 3:os(),Cr(Ir),Cr(Pr),hs();break;case 5:as(i);break;case 4:os();break;case 13:case 19:Cr(ls);break;case 10:So(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Ml=e,Al=e=Lc(e.current,null),Rl=zl=t,Ol=0,Dl=null,Bl=Nl=Fl=0,Vl=jl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(i=(n=To[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}To=null}return e}function fc(e,t){for(;;){var n=Al;try{if(wo(),ds.current=sa,_s){for(var i=ms.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}_s=!1}if(fs=0,ys=gs=ms=null,vs=!1,bs=0,Tl.current=null,null===n||null===n.return){Ol=1,Dl=t,Al=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,_a(f,a,l,0,t),1&f.mode&&ga(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),_a(y,a,l,0,t),mo(ua(c,l));break e}}s=c=ua(c,l),4!==Ol&&(Ol=2),null===jl?jl=[s]:jl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,fa(0,c,t));break e;case 1:l=c;var _=s.type,v=s.stateNode;if(0===(128&s.flags)&&("function"===typeof _.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Wl||!Wl.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,ma(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mc(){var e=El.current;return El.current=sa,null===e?sa:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Ml||0===(268435455&Fl)&&0===(268435455&Nl)||lc(Ml,Rl)}function yc(e,t){var n=Il;Il|=2;var i=mc();for(Ml===e&&Rl===t||(Gl=null,pc(e,t));;)try{_c();break}catch(r){fc(e,r)}if(wo(),Il=n,El.current=i,null!==Al)throw Error(o(261));return Ml=null,Rl=0,Ol}function _c(){for(;null!==Al;)bc(Al)}function vc(){for(;null!==Al&&!Xe();)bc(Al)}function bc(e){var t=kl(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?xc(e):Al=t,Tl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,zl)))return void(Al=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,n){var i=vt,r=Pl.transition;try{Pl.transition=null,vt=1,function(e,t,n,i){do{Sc()}while(null!==Xl);if(0!==(6&Il))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Ml&&(Al=Ml=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Mc(tt,(function(){return Sc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Pl.transition,Pl.transition=null;var a=vt;vt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(er=Gt,pi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==s||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(l=a),p===s&&++h===i&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Gt=!1,Qa=t;null!==Qa;)if(e=(t=Qa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qa=e;else for(;null!==Qa;){t=Qa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,_=t.stateNode,v=_.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qa=e;break}Qa=t.return}m=nl,nl=!1}(e,n),yl(n,e),fi(tr),Gt=!!er,tr=er=null,e.current=n,vl(n,e,r),Ye(),Il=l,vt=a,Pl.transition=s}else e.current=n;if(Kl&&(Kl=!1,Xl=e,Yl=r),s=e.pendingLanes,0===s&&(Wl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Zl)throw Zl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&Sc(),s=e.pendingLanes,0!==(1&s)?e===Jl?$l++:($l=0,Jl=e):$l=0,Ur()}(e,t,n,i)}finally{Pl.transition=r,vt=i}return null}function Sc(){if(null!==Xl){var e=bt(Yl),t=Pl.transition,n=vt;try{if(Pl.transition=null,vt=16>e?16:e,null===Xl)var i=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Il))throw Error(o(331));var r=Il;for(Il|=4,Qa=e.current;null!==Qa;){var s=Qa,a=s.child;if(0!==(16&Qa.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qa=u;null!==Qa;){var h=Qa;switch(h.tag){case 0:case 11:case 15:il(8,h,s)}var d=h.child;if(null!==d)d.return=h,Qa=d;else for(;null!==Qa;){var p=(h=Qa).sibling,f=h.return;if(sl(h),h===u){Qa=null;break}if(null!==p){p.return=f,Qa=p;break}Qa=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Qa=a;else e:for(;null!==Qa;){if(0!==(2048&(s=Qa).flags))switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var _=s.sibling;if(null!==_){_.return=s.return,Qa=_;break e}Qa=s.return}}var v=e.current;for(Qa=v;null!==Qa;){var b=(a=Qa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Qa=b;else e:for(a=v;null!==Qa;){if(0!==(2048&(l=Qa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Cc(l,l.return,w)}if(l===a){Qa=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Qa=x;break e}Qa=l.return}}if(Il=r,Ur(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{vt=n,Pl.transition=t}}return!1}function kc(e,t,n){e=Oo(e,t=fa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Wl||!Wl.has(i))){t=Oo(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ml===e&&(Rl&n)===n&&(4===Ol||3===Ol&&(130023424&Rl)===Rl&&500>$e()-Ul?pc(e,0):Bl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Mo(e,t))&&(yt(e,t,n),rc(e,n))}function Pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Tc(e,n)}function Mc(e,t){return We(e,t)}function Ac(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,i){return new Ac(e,t,n,i)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,i,r,s){var a=2;if(i=e,"function"===typeof e)zc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Dc(n.children,r,s,t);case k:a=8,r|=8;break;case C:return(e=Rc(12,n,t,2|r)).elementType=C,e.lanes=s,e;case I:return(e=Rc(13,n,t,r)).elementType=I,e.lanes=s,e;case M:return(e=Rc(19,n,t,r)).elementType=M,e.lanes=s,e;case z:return Fc(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case T:a=9;break e;case P:a=11;break e;case A:a=14;break e;case R:a=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Dc(e,t,n,i){return(e=Rc(7,e,i,t)).lanes=n,e}function Fc(e,t,n,i){return(e=Rc(22,e,i,t)).elementType=z,e.lanes=n,e.stateNode={isHidden:!1},e}function Nc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,i,r,o,s,a,l){return e=new jc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(o),e}function Uc(e){if(!e)return Tr;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Rr(n))return Or(e,n,t)}return t}function qc(e,t,n,i,r,o,s,a,l){return(e=Vc(n,i,!0,e,0,o,0,a,l)).context=Uc(null),n=e.current,(o=Lo(i=tc(),r=nc(n))).callback=void 0!==t&&null!==t?t:null,Oo(n,o,r),e.current.lanes=r,yt(e,r,i),rc(e,i),e}function Gc(e,t,n,i){var r=t.current,o=tc(),s=nc(r);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Oo(r,t,s))&&(ic(e,r,s,o),Do(e,r,s)),s}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ir.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ma(t),fo();break;case 5:ss(t);break;case 1:Rr(t.type)&&Dr(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Er(_o,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Er(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Na(e,t,n):(Er(ls,1&ls.current),null!==(e=Za(e,t,n))?e.sibling:null);Er(ls,1&ls.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return qa(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(ls,ls.current),i)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Za(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,ro&&0!==(1048576&t.flags)&&Qr(t,Hr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ga(e,t),e=t.pendingProps;var r=Ar(t,Pr.current);Co(t,n),r=ks(null,t,i,e,r,n);var s=Cs();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(i)?(s=!0,Dr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ro(t),r.updater=Uo,t.stateNode=r,r._reactInternals=t,Ho(t,i,e,n),t=Ia(null,t,i,!0,s,n)):(t.tag=0,ro&&s&&eo(t),xa(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return zc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===A)return 14}return 2}(i),e=yo(i,e),r){case 0:t=Ta(null,t,i,e,n);break e;case 1:t=Pa(null,t,i,e,n);break e;case 11:t=wa(null,t,i,e,n);break e;case 14:t=Sa(null,t,i,yo(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ta(e,t,i,r=t.elementType===i?r:yo(i,r),n);case 1:return i=t.type,r=t.pendingProps,Pa(e,t,i,r=t.elementType===i?r:yo(i,r),n);case 3:e:{if(Ma(t),null===e)throw Error(o(387));i=t.pendingProps,r=(s=t.memoizedState).element,zo(e,t),No(t,i,null,n);var a=t.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Aa(e,t,i,n,r=ua(Error(o(423)),t));break e}if(i!==r){t=Aa(e,t,i,n,r=ua(Error(o(424)),t));break e}for(io=cr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=Jo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=Za(e,t,n);break e}xa(e,t,i,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(t.flags|=32),Ea(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Na(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=$o(t,null,i,n):xa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wa(e,t,i,r=t.elementType===i?r:yo(i,r),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Er(_o,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Ir.current){t=Za(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=Lo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ko(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ko(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Co(t,n),i=i(r=Eo(r)),t.flags|=1,xa(e,t,i,n),t.child;case 14:return r=yo(i=t.type,t.pendingProps),Sa(e,t,i,r=yo(i.type,r),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:yo(i,r),Ga(e,t),t.tag=1,Rr(i)?(e=!0,Dr(t)):e=!1,Co(t,n),Go(t,i,r),Ho(t,i,r,n),Ia(null,t,i,!0,e,n);case 19:return qa(e,t,n);case 22:return Ca(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function eu(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=Zc(s);a.call(e)}}Gc(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Zc(s);o.call(e)}}var s=qc(t,i,e,0,null,!1,0,"",Qc);return e._reactRootContainer=s,e[fr]=s.current,Ui(8===e.nodeType?e.parentNode:e),hc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Zc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fr]=l.current,Ui(8===e.nodeType?e.parentNode:e),hc((function(){Gc(t,l,n,i)})),l}(n,t,e,r,i);return Zc(s)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Gc(null,e,null,null)})),t[fr]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&0!==t&&t<zt[n].priority;n++);zt.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(_t(t,1|n),rc(t,$e()),0===(6&Il)&&(ql=$e()+500,Ur()))}break;case 13:hc((function(){var t=Mo(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}})),Wc(e,1)}},wt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)ic(t,e,134217728,tc());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Mo(e,t);if(null!==n)ic(n,e,t,tc());Wc(e,t)}},kt=function(){return vt},Ct=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=xr(i);if(!r)throw Error(o(90));W(i),J(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=uc,Ie=hc;var tu={usingClientEntryPoint:!1,Events:[vr,br,xr,Ee,Te,uc]},nu={findFiberByHostInstance:_r,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(o(299));var n=!1,i="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,r,0,s,a),e[fr]=t.current,Ui(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var i=n(164);t.s=i.createRoot,i.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:(e,t)=>{"use strict";var n,i=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case o:case a:case s:case d:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case f:case l:return e;default:return t}}case r:return t}}}n=Symbol.for("react.module.reference")},441:(e,t,n)=>{"use strict";n(372)},945:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),i=new RegExp("("+t+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(n),r(i))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n)||[],i=1;i<t.length;i++)t=(e=r(t,i).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=i.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var s=o(r[0]);s!==r[0]&&(n[r[0]]=s)}r=i.exec(e)}n["%C2"]="\ufffd";for(var a=Object.keys(n),l=0;l<a.length;l++){var c=a[l];e=e.replace(new RegExp(c,"g"),n[c])}return e}(e)}}},139:e=>{"use strict";e.exports=function(e,t){for(var n={},i=Object.keys(e),r=Array.isArray(t),o=0;o<i.length;o++){var s=i[o],a=e[s];(r?-1!==t.indexOf(s):t(s,a,e))&&(n[s]=a)}return n}},318:(e,t,n)=>{"use strict";const i=n(499),r=n(945),o=n(299),s=n(139),a=Symbol("encodeFragmentIdentifier");function l(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function u(e,t){return t.decode?r(e):e}function h(e){return Array.isArray(e)?e.sort():"object"===typeof e?h(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function p(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function m(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,i)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=n):i[e]=n};case"bracket":return(e,n,i)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"comma":case"separator":return(t,n,i)=>{const r="string"===typeof n&&n.includes(e.arrayFormatSeparator),o="string"===typeof n&&!r&&u(n,e).includes(e.arrayFormatSeparator);n=o?u(n,e):n;const s=r||o?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);i[t]=s};case"bracket-separator":return(t,n,i)=>{const r=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!r)return void(i[t]=n?u(n,e):n);const o=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==i[t]?i[t]=[].concat(i[t],o):i[t]=o};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!==typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const r of e.split("&")){if(""===r)continue;let[e,s]=o(t.decode?r.replace(/\+/g," "):r,"=");s=void 0===s?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:u(s,t),n(u(e,t),s,i)}for(const r of Object.keys(i)){const e=i[r];if("object"===typeof e&&null!==e)for(const n of Object.keys(e))e[n]=f(e[n],t);else i[r]=f(e,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=h(n):e[t]=n,e}),Object.create(null))}t.extract=p,t.parse=m,t.stringify=(e,t)=>{if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>{return t.skipNull&&(null===(i=e[n])||void 0===i)||t.skipEmptyString&&""===e[n];var i},i=function(e){switch(e.arrayFormat){case"index":return t=>(n,i)=>{const r=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[c(t,e),"[",r,"]"].join("")]:[...n,[c(t,e),"[",c(r,e),"]=",c(i,e)].join("")]};case"bracket":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[c(t,e),"[]"].join("")]:[...n,[c(t,e),"[]=",c(i,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(i,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:(r=null===r?"":r,0===i.length?[[c(n,e),t,c(r,e)].join("")]:[[i,c(r,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,c(t,e)]:[...n,[c(t,e),"=",c(i,e)].join("")]}}(t),r={};for(const s of Object.keys(e))n(s)||(r[s]=e[s]);const o=Object.keys(r);return!1!==t.sort&&o.sort(t.sort),o.map((n=>{const r=e[n];return void 0===r?"":null===r?c(n,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?c(n,t)+"[]":r.reduce(i(n),[]).join("&"):c(n,t)+"="+c(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:m(p(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:u(i,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const i=d(e.url).split("?")[0]||"",r=t.extract(e.url),o=t.parse(r,{sort:!1}),s=Object.assign(o,e.query);let l=t.stringify(s,n);l&&(l="?".concat(l));let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u="#".concat(n[a]?c(e.fragmentIdentifier,n):e.fragmentIdentifier)),"".concat(i).concat(l).concat(u)},t.pick=(e,n,i)=>{i=Object.assign({parseFragmentIdentifier:!0,[a]:!1},i);const{url:r,query:o,fragmentIdentifier:l}=t.parseUrl(e,i);return t.stringifyUrl({url:r,query:s(o,n),fragmentIdentifier:l},i)},t.exclude=(e,n,i)=>{const r=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,r,i)}},299:e=>{"use strict";e.exports=(e,t)=>{if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},274:(e,t,n)=>{"use strict";var i=n(177);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},37:(e,t,n)=>{e.exports=n(274)()},177:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},374:(e,t,n)=>{"use strict";var i=n(791),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function _(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var b=v.prototype=new _;b.constructor=v,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,i){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,r)&&!k.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=e),e=""===o?"."+P(l,0):o,x(s)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),I(s,t,r,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+P(a=e[c],c);l+=I(a,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,r,u=o+P(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function M(e,t,n){if(null==e)return e;var i=[],r=0;return I(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},z={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:z,ReactCurrentOwner:S};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=s,t.PureComponent=v,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=z.transition;z.transition={};try{e()}finally{z.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<r&&0>o(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>o(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function x(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,z(w);else{var t=i(u);null!==t&&L(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,_(E),E=-1),f=!0;var o=p;try{for(b(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),b(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&L(x,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,C=null,E=-1,T=5,P=-1;function I(){return!(t.unstable_now()-P<T)}function M(){if(null!==C){var e=t.unstable_now();P=e;var n=!0;try{n=C(!0,e)}finally{n?S():(k=!1,C=null)}}else k=!1}if("function"===typeof v)S=function(){v(M)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=M,S=function(){R.postMessage(null)}}else S=function(){y(M,0)};function z(e){C=e,k||(k=!0,S())}function L(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,z(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===i(c)&&e===i(u)&&(g?(_(E),E=-1):g=!0,L(x,o-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,z(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},499:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%".concat(e.charCodeAt(0).toString(16).toUpperCase())))},561:(e,t,n)=>{"use strict";var i=n(791);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useState,s=i.useEffect,a=i.useLayoutEffect,l=i.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(i){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=o({inst:{value:n,getSnapshot:t}}),r=i[0].inst,u=i[1];return a((function(){r.value=n,r.getSnapshot=t,c(r)&&u({inst:r})}),[e,n,t]),s((function(){return c(r)&&u({inst:r}),e((function(){c(r)&&u({inst:r})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},595:(e,t,n)=>{"use strict";var i=n(791),r=n(248);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,a=i.useRef,l=i.useEffect,c=i.useMemo,u=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function e(e){if(!l){if(l=!0,s=e,e=i(e),void 0!==r&&d.hasValue){var t=d.value;if(r(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=i(e);return void 0!==r&&r(t,n)?t:(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,i,r]);var p=s(e,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=p}),[p]),u(p),p}},248:(e,t,n)=>{"use strict";e.exports=n(561)},327:(e,t,n)=>{"use strict";e.exports=n(595)},399:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},596:function(e){e.exports=function(){"use strict";var e={},t={};function n(n,i,r){if(t[n]=r,"index"===n){var o="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",s={};return t.shared(s),t.index(e,s),"undefined"!==typeof window&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),e}}return n("shared",["exports"],(function(e){function t(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var i=r;function r(e,t){this.x=e,this.y=t}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),i=Math.sin(e),r=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-i*(this.y-t.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e};var o=n(i),s=a;function a(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var r=this.sampleCurveX(n)-e;if(Math.abs(r)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=r/o}var s=0,a=1;for(n=e,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-e)<t));i++)e>r?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var l=n(s);let c,u;function h(){return null==c&&(c="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),c}function d(){if(null==u&&(u=!1,h())){const e=5,t=new OffscreenCanvas(e,e).getContext("2d",{willReadFrequently:!0});if(t){for(let i=0;i<e*e;i++){const n=4*i;t.fillStyle="rgb(".concat(n,",").concat(n+1,",").concat(n+2,")"),t.fillRect(i%e,Math.floor(i/e),1,1)}const n=t.getImageData(0,0,e,e).data;for(let t=0;t<e*e*4;t++)if(t%4!=3&&n[t]!==t){u=!0;break}}}return u||!1}function p(e,t,n,i){const r=new l(e,t,n,i);return e=>r.solve(e)}const f=p(.25,.1,.25,1);function m(e,t,n){return Math.min(n,Math.max(t,e))}function g(e,t,n){const i=n-t,r=((e-t)%i+i)%i+t;return r===t?n:r}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)for(const t in r)e[t]=r[t];return e}let _=1;function v(e,t,n){const i={};for(const r in e)i[r]=t.call(this,e[r],r,e);return i}function b(e,t,n){const i={};for(const r in e)t.call(this,e[r],r,e)&&(i[r]=e[r]);return i}function x(e){return Array.isArray(e)?e.map(x):"object"==typeof e&&e?v(e,x):e}const w={};function S(e){w[e]||("undefined"!=typeof console&&console.warn(e),w[e]=!0)}function k(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function C(e){return"undefined"!=typeof WorkerGlobalScope&&void 0!==e&&e instanceof WorkerGlobalScope}let E=null;function T(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function I(e,n,i,r,o){return t(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const t=new VideoFrame(e,{timestamp:0});try{const s=null==t?void 0:t.format;if(!s||!s.startsWith("BGR")&&!s.startsWith("RGB"))throw new Error("Unrecognized format ".concat(s));const a=s.startsWith("BGR"),l=new Uint8ClampedArray(r*o*4);if(yield t.copyTo(l,function(e,t,n,i,r){const o=4*Math.max(-t,0),s=(Math.max(0,n)-n)*i*4+o,a=4*i,l=Math.max(0,t),c=Math.max(0,n);return{rect:{x:l,y:c,width:Math.min(e.width,t+i)-l,height:Math.min(e.height,n+r)-c},layout:[{offset:s,stride:a}]}}(e,n,i,r,o)),a)for(let e=0;e<l.length;e+=4){const t=l[e];l[e]=l[e+2],l[e+2]=t}return l}finally{t.close()}}))}let M,A;const R="AbortError";function z(){return new Error(R)}const L={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function O(e){return L.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}const D="global-dispatcher";class F extends Error{constructor(e,t,n,i){super("AJAXError: ".concat(t," (").concat(e,"): ").concat(n)),this.status=e,this.statusText=t,this.url=n,this.body=i}}const N=()=>C(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,B=function(e,n){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){const t=O(e.url);if(t)return t(e,n);if(C(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,targetMapId:D},n)}if(!(/^file:/.test(i=e.url)||/^file:/.test(N())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(e,n){return t(this,void 0,void 0,(function*(){const t=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:N(),signal:n.signal});"json"!==e.type||t.headers.has("Accept")||t.headers.set("Accept","application/json");const i=yield fetch(t);if(!i.ok){const t=yield i.blob();throw new F(i.status,i.statusText,e.url,t)}let r;r="arrayBuffer"===e.type||"image"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text();const o=yield r;if(n.signal.aborted)throw z();return{data:o,cacheControl:i.headers.get("Cache-Control"),expires:i.headers.get("Expires")}}))}(e,n);if(C(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,mustQueue:!0,targetMapId:D},n)}var i;return function(e,t){return new Promise(((n,i)=>{var r;const o=new XMLHttpRequest;o.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(o.responseType="arraybuffer");for(const t in e.headers)o.setRequestHeader(t,e.headers[t]);"json"===e.type&&(o.responseType="text",(null===(r=e.headers)||void 0===r?void 0:r.Accept)||o.setRequestHeader("Accept","application/json")),o.withCredentials="include"===e.credentials,o.onerror=()=>{i(new Error(o.statusText))},o.onload=()=>{if(!t.signal.aborted)if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){let t=o.response;if("json"===e.type)try{t=JSON.parse(o.response)}catch(e){return void i(e)}n({data:t,cacheControl:o.getResponseHeader("Cache-Control"),expires:o.getResponseHeader("Expires")})}else{const t=new Blob([o.response],{type:o.getResponseHeader("Content-Type")});i(new F(o.status,o.statusText,e.url,t))}},t.signal.addEventListener("abort",(()=>{o.abort(),i(z())})),o.send(e.body)}))}(e,n)};function j(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function V(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function U(e,t,n){if(n&&n[e]){const i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}class q{constructor(e){y(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=e}}class G extends q{constructor(e){super("error",y({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class Z{on(e,t){return this._listeners=this._listeners||{},V(e,t,this._listeners),this}off(e,t){return U(e,t,this._listeners),U(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},V(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new q(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of i)U(n,o,this._oneTimeListeners),o.call(this,e);const r=this._eventedParent;r&&(y(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(e))}else e instanceof G&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var H={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const W=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function K(e,t){const n={};for(const i in e)"ref"!==i&&(n[i]=e[i]);return W.forEach((e=>{e in t&&(n[e]=t[e])})),n}function X(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!X(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!X(e[n],t[n]))return!1;return!0}return e===t}function Y(e,t){e.push(t)}function $(e,t,n){Y(n,{command:"addSource",args:[e,t[e]]})}function J(e,t,n){Y(t,{command:"removeSource",args:[e]}),n[e]=!0}function Q(e,t,n,i){J(e,n,i),$(e,t,n)}function ee(e,t,n){let i;for(i in e[n])if(Object.prototype.hasOwnProperty.call(e[n],i)&&"data"!==i&&!X(e[n][i],t[n][i]))return!1;for(i in t[n])if(Object.prototype.hasOwnProperty.call(t[n],i)&&"data"!==i&&!X(e[n][i],t[n][i]))return!1;return!0}function te(e,t,n,i,r,o){e=e||{},t=t||{};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(X(e[s],t[s])||n.push({command:o,args:[i,s,t[s],r]}));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&!Object.prototype.hasOwnProperty.call(e,s)&&(X(e[s],t[s])||n.push({command:o,args:[i,s,t[s],r]}))}function ne(e){return e.id}function ie(e,t){return e[t.id]=t,e}class re{constructor(e,t,n,i){this.message=(e?"".concat(e,": "):"")+n,i&&(this.identifier=i),null!=t&&t.__line__&&(this.line=t.__line__)}}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)for(const t in r)e[t]=r[t];return e}class se extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class ae{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[n,i]of t)this.bindings[n]=i}concat(e){return new ae(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const le={kind:"null"},ce={kind:"number"},ue={kind:"string"},he={kind:"boolean"},de={kind:"color"},pe={kind:"object"},fe={kind:"value"},me={kind:"collator"},ge={kind:"formatted"},ye={kind:"padding"},_e={kind:"resolvedImage"},ve={kind:"variableAnchorOffsetCollection"};function be(e,t){return{kind:"array",itemType:e,N:t}}function xe(e){if("array"===e.kind){const t=xe(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}const we=[le,ce,ue,he,de,ge,pe,be(fe),ye,_e,ve];function Se(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Se(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of we)if(!Se(e,t))return null}return"Expected ".concat(xe(e)," but found ").concat(xe(t)," instead.")}function ke(e,t){return t.some((t=>t.kind===e.kind))}function Ce(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function Ee(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const Te=.96422,Pe=.82521,Ie=4/29,Me=6/29,Ae=3*Me*Me,Re=Me*Me*Me,ze=Math.PI/180,Le=180/Math.PI;function Oe(e){return(e%=360)<0&&(e+=360),e}function De(e){let t,n,[i,r,o,s]=e;const a=Ne((.2225045*(i=Fe(i))+.7168786*(r=Fe(r))+.0606169*(o=Fe(o)))/1);i===r&&r===o?t=n=a:(t=Ne((.4360747*i+.3850649*r+.1430804*o)/Te),n=Ne((.0139322*i+.0971045*r+.7141733*o)/Pe));const l=116*a-16;return[l<0?0:l,500*(t-a),200*(a-n),s]}function Fe(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ne(e){return e>Re?Math.pow(e,1/3):e/Ae+Ie}function Be(e){let[t,n,i,r]=e,o=(t+16)/116,s=isNaN(n)?o:o+n/500,a=isNaN(i)?o:o-i/200;return o=1*Ve(o),s=Te*Ve(s),a=Pe*Ve(a),[je(3.1338561*s-1.6168667*o-.4906146*a),je(-.9787684*s+1.9161415*o+.033454*a),je(.0719453*s-.2289914*o+1.4052427*a),r]}function je(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function Ve(e){return e>Me?e*e*e:Ae*(e-Ie)}function Ue(e){return parseInt(e.padEnd(2,e),16)/255}function qe(e,t){return Ge(t?e/100:e,0,1)}function Ge(e,t,n){return Math.min(Math.max(t,e),n)}function Ze(e){return!e.some(Number.isNaN)}const He={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class We{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.r=e,this.g=t,this.b=n,this.a=i,r||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,n,i]))}static parse(e){if(e instanceof We)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=He[e];if(t){const[e,n,i]=t;return[e/255,n/255,i/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let n=1;return[Ue(e.slice(n,n+=t)),Ue(e.slice(n,n+=t)),Ue(e.slice(n,n+=t)),Ue(e.slice(n,n+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,n,i,r,o,s,a,l,c,u,h,d]=t,p=[r||" ",a||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[i,s,c].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[Ge(+n/t,0,1),Ge(+o/t,0,1),Ge(+l/t,0,1),h?qe(+h,d):1];if(Ze(e))return e}}return}}const n=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(n){const[e,t,i,r,o,s,a,l,c]=n,u=[i||" ",o||" ",a].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const e=[+t,Ge(+r,0,100),Ge(+s,0,100),l?qe(+l,c):1];if(Ze(e))return function(e){let[t,n,i,r]=e;function o(e){const r=(e+t/30)%12,o=n*Math.min(i,1-i);return i-o*Math.max(-1,Math.min(r-3,9-r,1))}return t=Oe(t),n/=100,i/=100,[o(0),o(8),o(4),r]}(e)}}}(e);return t?new We(...t,!1):void 0}get rgb(){const{r:e,g:t,b:n,a:i}=this,r=i||1/0;return this.overwriteGetter("rgb",[e/r,t/r,n/r,i])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,n,i,r]=De(e),o=Math.sqrt(n*n+i*i);return[Math.round(1e4*o)?Oe(Math.atan2(i,n)*Le):NaN,o,t,r]}(this.rgb))}get lab(){return this.overwriteGetter("lab",De(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,n,i]=this.rgb;return"rgba(".concat([e,t,n].map((e=>Math.round(255*e))).join(","),",").concat(i,")")}}We.black=new We(0,0,0,1),We.white=new We(1,1,1,1),We.transparent=new We(0,0,0,0),We.red=new We(1,0,0,1);class Ke{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Xe{constructor(e,t,n,i,r){this.text=e,this.image=t,this.scale=n,this.fontStack=i,this.textColor=r}}class Ye{constructor(e){this.sections=e}static fromString(e){return new Ye([new Xe(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Ye?e:Ye.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class $e{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof $e)return e;if("number"==typeof e)return new $e([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new $e(e)}}toString(){return JSON.stringify(this.values)}}const Je=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qe{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Qe)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const n=e[t],i=e[t+1];if("string"!=typeof n||!Je.has(n))return;if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])return}return new Qe(e)}}toString(){return JSON.stringify(this.values)}}class et{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new et({name:e,available:!1}):null}}function tt(e,t,n,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value [".concat([e,t,n,i].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof i?[e,t,n,i]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function nt(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof We||e instanceof Ke||e instanceof Ye||e instanceof $e||e instanceof Qe||e instanceof et)return!0;if(Array.isArray(e)){for(const t of e)if(!nt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!nt(e[t]))return!1;return!0}return!1}function it(e){if(null===e)return le;if("string"==typeof e)return ue;if("boolean"==typeof e)return he;if("number"==typeof e)return ce;if(e instanceof We)return de;if(e instanceof Ke)return me;if(e instanceof Ye)return ge;if(e instanceof $e)return ye;if(e instanceof Qe)return ve;if(e instanceof et)return _e;if(Array.isArray(e)){const t=e.length;let n;for(const i of e){const e=it(i);if(n){if(n===e)continue;n=fe;break}n=e}return be(n||fe,t)}return pe}function rt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof We||e instanceof Ye||e instanceof $e||e instanceof Qe||e instanceof et?e.toString():JSON.stringify(e)}class ot{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!nt(e[1]))return t.error("invalid value");const n=e[1];let i=it(n);const r=t.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new ot(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class st{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const at={string:ue,number:ce,boolean:he,object:pe};class lt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,i=1;const r=e[0];if("array"===r){let r,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in at)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=at[n],i++}else r=fe;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],i++}n=be(r,o)}else{if(!at[r])throw new Error("Types doesn't contain name = ".concat(r));n=at[r]}const o=[];for(;i<e.length;i++){const n=t.parse(e[i],i,fe);if(!n)return null;o.push(n)}return new lt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!Se(this.type,it(n)))return n;if(t===this.args.length-1)throw new st("Expected value to be of type ".concat(xe(this.type),", but found ").concat(xe(it(n))," instead."))}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const ct={"to-boolean":he,"to-color":de,"to-number":ce,"to-string":ue};class ut{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(!ct[n])throw new Error("Can't parse ".concat(n," as it is not part of the known types"));if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const i=ct[n],r=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,fe);if(!n)return null;r.push(n)}return new ut(i,r)}evaluate(e){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(e));case"color":{let t,n;for(const i of this.args){if(t=i.evaluate(e),n=null,t instanceof We)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):tt(t[0],t[1],t[2],t[3]),!n))return new We(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new st(n||"Could not parse color from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"padding":{let t;for(const n of this.args){t=n.evaluate(e);const i=$e.parse(t);if(i)return i}throw new st("Could not parse padding from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"variableAnchorOffsetCollection":{let t;for(const n of this.args){t=n.evaluate(e);const i=Qe.parse(t);if(i)return i}throw new st("Could not parse variableAnchorOffsetCollection from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"number":{let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const i=Number(t);if(!isNaN(i))return i}throw new st("Could not convert ".concat(JSON.stringify(t)," to number."))}case"formatted":return Ye.fromString(rt(this.args[0].evaluate(e)));case"resolvedImage":return et.fromString(rt(this.args[0].evaluate(e)));default:return rt(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const ht=["Unknown","Point","LineString","Polygon"];class dt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ht[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=We.parse(e)),t}}class pt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new ae,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];this.registry=e,this.path=n,this.key=n.map((e=>"[".concat(e,"]"))).join(""),this.scope=r,this.errors=o,this.expectedType=i,this._isConstant=t}parse(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,i)._parse(e,r):this._parse(e,r)}_parse(e,t){function n(e,t,n){return"assert"===n?new lt(t,[e]):"coerce"===n?new ut(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found ".concat(typeof i,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const r=this.registry[i];if(r){let i=r.parse(e,this);if(!i)return null;if(this.expectedType){const e=this.expectedType,r=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==r.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==r.kind&&"string"!==r.kind)if("padding"!==e.kind||"value"!==r.kind&&"number"!==r.kind&&"array"!==r.kind)if("variableAnchorOffsetCollection"!==e.kind||"value"!==r.kind&&"array"!==r.kind){if(this.checkSubtype(e,r))return null}else i=n(i,e,t.typeAnnotation||"coerce");else i=n(i,e,t.typeAnnotation||"coerce");else i=n(i,e,t.typeAnnotation||"coerce");else i=n(i,e,t.typeAnnotation||"assert")}if(!(i instanceof ot)&&"resolvedImage"!==i.type.kind&&this._isConstant(i)){const t=new dt;try{i=new ot(i.type,i.evaluate(t))}catch(e){return this.error(e.message),null}}return i}return this.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}concat(e,t,n){const i="number"==typeof e?this.path.concat(e):this.path,r=n?this.scope.concat(n):this.scope;return new pt(this.registry,this._isConstant,i,t||null,r,this.errors)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r="".concat(this.key).concat(n.map((e=>"[".concat(e,"]"))).join(""));this.errors.push(new se(r,e))}checkSubtype(e,t){const n=Se(e,t);return n&&this.error(n),n}}class ft{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));const n=[];for(let r=1;r<e.length-1;r+=2){const i=e[r];if("string"!=typeof i)return t.error("Expected string, but found ".concat(typeof i," instead."),r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return i?new ft(n,i):null}outputDefined(){return this.result.outputDefined()}}class mt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new mt(n,t.scope.get(n)):t.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class gt{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,ce),i=t.parse(e[2],2,be(t.expectedType||fe));return n&&i?new gt(i.type.itemType,n,i):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new st("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new st("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new st("Array index must be an integer, but found ".concat(t," instead."));return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class yt{constructor(e,t){this.type=he,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,fe),i=t.parse(e[2],2,fe);return n&&i?ke(n.type,[he,ue,ce,le,fe])?new yt(n,i):t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(xe(n.type)," instead")):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Ce(t,["boolean","string","number","null"]))throw new st("Expected first argument to be of type boolean, string, number or null, but found ".concat(xe(it(t))," instead."));if(!Ce(n,["string","array"]))throw new st("Expected second argument to be of type array or string, but found ".concat(xe(it(n))," instead."));return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class _t{constructor(e,t,n){this.type=ce,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,fe),i=t.parse(e[2],2,fe);if(!n||!i)return null;if(!ke(n.type,[he,ue,ce,le,fe]))return t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(xe(n.type)," instead"));if(4===e.length){const r=t.parse(e[3],3,ce);return r?new _t(n,i,r):null}return new _t(n,i)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Ce(t,["boolean","string","number","null"]))throw new st("Expected first argument to be of type boolean, string, number or null, but found ".concat(xe(it(t))," instead."));let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Ce(n,["string"])){const e=n.indexOf(t,i);return-1===e?-1:[...n.slice(0,e)].length}if(Ce(n,["array"]))return n.indexOf(t,i);throw new st("Expected second argument to be of type array or string, but found ".concat(xe(it(n))," instead."))}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class vt{constructor(e,t,n,i,r,o){this.inputType=e,this.type=t,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const r={},o=[];for(let l=2;l<e.length-1;l+=2){let s=e[l];const a=e[l+1];Array.isArray(s)||(s=[s]);const c=t.concat(l);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,it(e)))return null}else n=it(e);if(void 0!==r[String(e)])return c.error("Branch labels must be unique.");r[String(e)]=o.length}const u=t.parse(a,l,i);if(!u)return null;i=i||u.type,o.push(u)}const s=t.parse(e[1],1,fe);if(!s)return null;const a=t.parse(e[e.length-1],e.length-1,i);return a?"value"!==s.type.kind&&t.concat(1).checkSubtype(n,s.type)?null:new vt(n,i,s,r,o,a):null}evaluate(e){const t=this.input.evaluate(e);return(it(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class bt{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i=[];for(let o=1;o<e.length-1;o+=2){const r=t.parse(e[o],o,he);if(!r)return null;const s=t.parse(e[o+1],o+1,n);if(!s)return null;i.push([r,s]),n=n||s.type}const r=t.parse(e[e.length-1],e.length-1,n);if(!r)return null;if(!n)throw new Error("Can't infer output type");return new bt(n,i,r)}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((e=>{let[t,n]=e;return n.outputDefined()}))&&this.otherwise.outputDefined()}}class xt{constructor(e,t,n,i){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,fe),i=t.parse(e[2],2,ce);if(!n||!i)return null;if(!ke(n.type,[be(fe),ue,fe]))return t.error("Expected first argument to be of type array or string, but found ".concat(xe(n.type)," instead"));if(4===e.length){const r=t.parse(e[3],3,ce);return r?new xt(n.type,n,i,r):null}return new xt(n.type,n,i)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Ce(t,["string"]))return[...t].slice(n,i).join("");if(Ce(t,["array"]))return t.slice(n,i);throw new st("Expected first argument to be of type array or string, but found ".concat(xe(it(t))," instead."))}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function wt(e,t){const n=e.length-1;let i,r,o=0,s=n,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),i=e[a],r=e[a+1],i<=t){if(a===n||t<r)return a;o=a+1}else{if(!(i>t))throw new st("Input is not a number.");s=a-1}return 0}class St{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,r]of n)this.labels.push(i),this.outputs.push(r)}static parse(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ce);if(!n)return null;const i=[];let r=null;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],s=e[o+1],a=o,l=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(i.length&&i[i.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const c=t.parse(s,l,r);if(!c)return null;r=r||c.type,i.push([n,c])}return new St(r,n,i)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const r=t.length;return i>=t[r-1]?n[r-1].evaluate(e):n[wt(t,i)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function kt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ct=Et;function Et(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}Et.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var r=this.sampleCurveX(n)-e;if(Math.abs(r)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=r/o}var s=0,a=1;for(n=e,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-e)<t));i++)e>r?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var Tt=kt(Ct);function Pt(e,t,n){return e+n*(t-e)}function It(e,t,n){return e.map(((e,i)=>Pt(e,t[i],n)))}const Mt={number:Pt,color:function(e,t,n){switch(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb"){case"rgb":{const[i,r,o,s]=It(e.rgb,t.rgb,n);return new We(i,r,o,s,!1)}case"hcl":{const[i,r,o,s]=e.hcl,[a,l,c,u]=t.hcl;let h,d;if(isNaN(i)||isNaN(a))isNaN(i)?isNaN(a)?h=NaN:(h=a,1!==o&&0!==o||(d=l)):(h=i,1!==c&&0!==c||(d=r));else{let e=a-i;a>i&&e>180?e-=360:a<i&&i-a>180&&(e+=360),h=i+n*e}const[p,f,m,g]=function(e){let[t,n,i,r]=e;return t=isNaN(t)?0:t*ze,Be([i,Math.cos(t)*n,Math.sin(t)*n,r])}([h,null!=d?d:Pt(r,l,n),Pt(o,c,n),Pt(s,u,n)]);return new We(p,f,m,g,!1)}case"lab":{const[i,r,o,s]=Be(It(e.lab,t.lab,n));return new We(i,r,o,s,!1)}}},array:It,padding:function(e,t,n){return new $e(It(e.values,t.values,n))},variableAnchorOffsetCollection:function(e,t,n){const i=e.values,r=t.values;if(i.length!==r.length)throw new st("Cannot interpolate values of different length. from: ".concat(e.toString(),", to: ").concat(t.toString()));const o=[];for(let s=0;s<i.length;s+=2){if(i[s]!==r[s])throw new st("Cannot interpolate values containing mismatched anchors. from[".concat(s,"]: ").concat(i[s],", to[").concat(s,"]: ").concat(r[s]));o.push(i[s]);const[e,t]=i[s+1],[a,l]=r[s+1];o.push([Pt(e,a,n),Pt(t,l,n)])}return new Qe(o)}};class At{constructor(e,t,n,i,r){this.type=e,this.operator=t,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[o,s]of r)this.labels.push(o),this.outputs.push(s)}static interpolationFactor(e,t,n,i){let r=0;if("exponential"===e.name)r=Rt(t,e.base,n,i);else if("linear"===e.name)r=Rt(t,1,n,i);else if("cubic-bezier"===e.name){const o=e.controlPoints;r=new Tt(o[0],o[1],o[2],o[3]).solve(Rt(t,1,n,i))}return r}static parse(e,t){let[n,i,r,...o]=e;if(!Array.isArray(i)||0===i.length)return t.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const e=i[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:e}}else{if("cubic-bezier"!==i[0])return t.error("Unknown interpolation type ".concat(String(i[0])),1,0);{const e=i.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(r=t.parse(r,2,ce),!r)return null;const s=[];let a=null;"interpolate-hcl"===n||"interpolate-lab"===n?a=de:t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(let l=0;l<o.length;l+=2){const e=o[l],n=o[l+1],i=l+3,r=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(s.length&&s[s.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(n,r,a);if(!c)return null;a=a||c.type,s.push([e,c])}return Ee(a,ce)||Ee(a,de)||Ee(a,ye)||Ee(a,ve)||Ee(a,be(ce))?new At(a,n,i,r,s):t.error("Type ".concat(xe(a)," is not interpolatable."))}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const r=t.length;if(i>=t[r-1])return n[r-1].evaluate(e);const o=wt(t,i),s=At.interpolationFactor(this.interpolation,i,t[o],t[o+1]),a=n[o].evaluate(e),l=n[o+1].evaluate(e);switch(this.operator){case"interpolate":return Mt[this.type.kind](a,l,s);case"interpolate-hcl":return Mt.color(a,l,s,"hcl");case"interpolate-lab":return Mt.color(a,l,s,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Rt(e,t,n,i){const r=i-n,o=e-n;return 0===r?0:1===t?o/r:(Math.pow(t,o)-1)/(Math.pow(t,r)-1)}class zt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const i=t.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const s of e.slice(1)){const e=t.parse(s,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,r.push(e)}if(!n)throw new Error("No output type");const o=i&&r.some((e=>Se(i,e.type)));return new zt(o?fe:n,r)}evaluate(e){let t,n=null,i=0;for(const r of this.args)if(i++,n=r.evaluate(e),n&&n instanceof et&&!n.available&&(t||(t=n.name),n=null,i===this.args.length&&(n=t)),null!==n)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function Lt(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Ot(e,t,n,i){return 0===i.compare(t,n)}function Dt(e,t,n){const i="=="!==e&&"!="!==e;return class r{constructor(e,t,n){this.type=he,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,fe);if(!o)return null;if(!Lt(n,o.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(xe(o.type),"'."));let s=t.parse(e[2],2,fe);if(!s)return null;if(!Lt(n,s.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(xe(s.type),"'."));if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return t.error("Cannot compare types '".concat(xe(o.type),"' and '").concat(xe(s.type),"'."));i&&("value"===o.type.kind&&"value"!==s.type.kind?o=new lt(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new lt(o.type,[s])));let a=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return t.error("Cannot use collator to compare non-string types.");if(a=t.parse(e[3],3,me),!a)return null}return new r(o,s,a)}evaluate(r){const o=this.lhs.evaluate(r),s=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const t=it(o),n=it(s);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new st('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(t.kind,", ").concat(n.kind,") instead."))}if(this.collator&&!i&&this.hasUntypedArgument){const e=it(o),n=it(s);if("string"!==e.kind||"string"!==n.kind)return t(r,o,s)}return this.collator?n(r,o,s,this.collator.evaluate(r)):t(r,o,s)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const Ft=Dt("==",(function(e,t,n){return t===n}),Ot),Nt=Dt("!=",(function(e,t,n){return t!==n}),(function(e,t,n,i){return!Ot(0,t,n,i)})),Bt=Dt("<",(function(e,t,n){return t<n}),(function(e,t,n,i){return i.compare(t,n)<0})),jt=Dt(">",(function(e,t,n){return t>n}),(function(e,t,n,i){return i.compare(t,n)>0})),Vt=Dt("<=",(function(e,t,n){return t<=n}),(function(e,t,n,i){return i.compare(t,n)<=0})),Ut=Dt(">=",(function(e,t,n){return t>=n}),(function(e,t,n,i){return i.compare(t,n)>=0}));class qt{constructor(e,t,n){this.type=me,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const i=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,he);if(!i)return null;const r=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,he);if(!r)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,ue),!o)?null:new qt(i,r,o)}evaluate(e){return new Ke(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class Gt{constructor(e,t,n,i,r){this.type=ue,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ce);if(!n)return null;const i=e[2];if("object"!=typeof i||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=t.parse(i.locale,1,ue),!r))return null;let o=null;if(i.currency&&(o=t.parse(i.currency,1,ue),!o))return null;let s=null;if(i["min-fraction-digits"]&&(s=t.parse(i["min-fraction-digits"],1,ce),!s))return null;let a=null;return i["max-fraction-digits"]&&(a=t.parse(i["max-fraction-digits"],1,ce),!a)?null:new Gt(n,r,o,s,a)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Zt{constructor(e){this.type=ge,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const i=[];let r=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(r&&"object"==typeof n&&!Array.isArray(n)){r=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,ce),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,be(ue)),!o))return null;let s=null;if(n["text-color"]&&(s=t.parse(n["text-color"],1,de),!s))return null;const a=i[i.length-1];a.scale=e,a.font=o,a.textColor=s}else{const n=t.parse(e[o],1,fe);if(!n)return null;const s=n.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:n,scale:null,font:null,textColor:null})}}return new Zt(i)}evaluate(e){return new Ye(this.sections.map((t=>{const n=t.content.evaluate(e);return it(n)===_e?new Xe("",n,null,null,null):new Xe(rt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class Ht{constructor(e){this.type=_e,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ue);return n?new Ht(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=et.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class Wt{constructor(e){this.type=ce,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found ".concat(xe(n.type)," instead.")):new Wt(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new st("Expected value to be of type string or array, but found ".concat(xe(it(t))," instead."))}eachChild(e){e(this.input)}outputDefined(){return!1}}const Kt=8192;function Xt(e,t){const n=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,r=Math.pow(2,t.z);return[Math.round(n*r*Kt),Math.round(i*r*Kt)]}function Yt(e,t){const n=Math.pow(2,t.z);return[(r=(e[0]/Kt+t.x)/n,360*r-180),(i=(e[1]/Kt+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90)];var i,r}function $t(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Jt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Qt(e,t,n){const i=e[0]-t[0],r=e[1]-t[1],o=e[0]-n[0],s=e[1]-n[1];return i*s-o*r==0&&i*o<=0&&r*s<=0}function en(e,t,n,i){return 0!=(r=[i[0]-n[0],i[1]-n[1]])[0]*(o=[t[0]-e[0],t[1]-e[1]])[1]-r[1]*o[0]&&!(!an(e,t,n,i)||!an(n,i,e,t));var r,o}function tn(e,t,n){for(const i of n)for(let n=0;n<i.length-1;++n)if(en(e,t,i[n],i[n+1]))return!0;return!1}function nn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;for(const a of t)for(let t=0;t<a.length-1;t++){if(Qt(e,a[t],a[t+1]))return n;(o=a[t])[1]>(r=e)[1]!=(s=a[t+1])[1]>r[1]&&r[0]<(s[0]-o[0])*(r[1]-o[1])/(s[1]-o[1])+o[0]&&(i=!i)}var r,o,s;return i}function rn(e,t){for(const n of t)if(nn(e,n))return!0;return!1}function on(e,t){for(const n of e)if(!nn(n,t))return!1;for(let n=0;n<e.length-1;++n)if(tn(e[n],e[n+1],t))return!1;return!0}function sn(e,t){for(const n of t)if(on(e,n))return!0;return!1}function an(e,t,n,i){const r=i[0]-n[0],o=i[1]-n[1],s=(e[0]-n[0])*o-r*(e[1]-n[1]),a=(t[0]-n[0])*o-r*(t[1]-n[1]);return s>0&&a<0||s<0&&a>0}function ln(e,t,n){const i=[];for(let r=0;r<e.length;r++){const o=[];for(let i=0;i<e[r].length;i++){const s=Xt(e[r][i],n);$t(t,s),o.push(s)}i.push(o)}return i}function cn(e,t,n){const i=[];for(let r=0;r<e.length;r++){const o=ln(e[r],t,n);i.push(o)}return i}function un(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){const t=.5*i;let r=e[0]-n[0]>t?-i:n[0]-e[0]>t?i:0;0===r&&(r=e[0]-n[2]>t?-i:n[2]-e[0]>t?i:0),e[0]+=r}$t(t,e)}function hn(e,t,n,i){const r=Math.pow(2,i.z)*Kt,o=[i.x*Kt,i.y*Kt],s=[];for(const a of e)for(const e of a){const i=[e.x+o[0],e.y+o[1]];un(i,t,n,r),s.push(i)}return s}function dn(e,t,n,i){const r=Math.pow(2,i.z)*Kt,o=[i.x*Kt,i.y*Kt],s=[];for(const l of e){const e=[];for(const n of l){const i=[n.x+o[0],n.y+o[1]];$t(t,i),e.push(i)}s.push(e)}if(t[2]-t[0]<=r/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const e of s)for(const i of e)un(i,t,n,r)}var a;return s}class pn{constructor(e,t){this.type=he,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(nt(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const n of t.features){const{type:t,coordinates:i}=n.geometry;"Polygon"===t&&e.push(i),"MultiPolygon"===t&&e.push(...i)}if(e.length)return new pn(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new pn(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new pn(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){const o=ln(t.coordinates,i,r),s=hn(e.geometry(),n,i,r);if(!Jt(n,i))return!1;for(const e of s)if(!nn(e,o))return!1}if("MultiPolygon"===t.type){const o=cn(t.coordinates,i,r),s=hn(e.geometry(),n,i,r);if(!Jt(n,i))return!1;for(const e of s)if(!rn(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){const o=ln(t.coordinates,i,r),s=dn(e.geometry(),n,i,r);if(!Jt(n,i))return!1;for(const e of s)if(!on(e,o))return!1}if("MultiPolygon"===t.type){const o=cn(t.coordinates,i,r),s=dn(e.geometry(),n,i,r);if(!Jt(n,i))return!1;for(const e of s)if(!sn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let fn=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1);const o=i+1;if(o<this.length&&n(t[o],t[i])<0&&(i=o),n(t[i],r)>=0)break;t[e]=t[i],e=i}t[e]=r}};function mn(e,t,n,i,r){gn(e,t,n,i||e.length-1,r||_n)}function gn(e,t,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,s=t-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);gn(e,t,Math.max(n,Math.floor(t-s*l/o+c)),Math.min(i,Math.floor(t+(o-s)*l/o+c)),r)}var u=e[t],h=n,d=i;for(yn(e,n,t),r(e[i],u)>0&&yn(e,n,i);h<d;){for(yn(e,h,d),h++,d--;r(e[h],u)<0;)h++;for(;r(e[d],u)>0;)d--}0===r(e[n],u)?yn(e,n,d):yn(e,++d,i),d<=t&&(n=d+1),t<=d&&(i=d-1)}}function yn(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function _n(e,t){return e<t?-1:e>t?1:0}function vn(e,t){if(e.length<=1)return[e];const n=[];let i,r;for(const o of e){const e=xn(o);0!==e&&(o.area=Math.abs(e),void 0===r&&(r=e<0),r===e<0?(i&&n.push(i),i=[o]):i.push(o))}if(i&&n.push(i),t>1)for(let o=0;o<n.length;o++)n[o].length<=t||(mn(n[o],t,1,n[o].length-1,bn),n[o]=n[o].slice(0,t));return n}function bn(e,t){return t.area-e.area}function xn(e){let t=0;for(let n,i,r=0,o=e.length,s=o-1;r<o;s=r++)n=e[r],i=e[s],t+=(i.x-n.x)*(n.y+i.y);return t}const wn=1/298.257223563,Sn=wn*(2-wn),kn=Math.PI/180;class Cn{constructor(e){const t=6378.137*kn*1e3,n=Math.cos(e*kn),i=1/(1-Sn*(1-n*n)),r=Math.sqrt(i);this.kx=t*r*n,this.ky=t*r*i*(1-Sn)}distance(e,t){const n=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(e,t){let n,i,r,o,s=1/0;for(let a=0;a<e.length-1;a++){let l=e[a][0],c=e[a][1],u=this.wrap(e[a+1][0]-l)*this.kx,h=(e[a+1][1]-c)*this.ky,d=0;0===u&&0===h||(d=(this.wrap(t[0]-l)*this.kx*u+(t[1]-c)*this.ky*h)/(u*u+h*h),d>1?(l=e[a+1][0],c=e[a+1][1]):d>0&&(l+=u/this.kx*d,c+=h/this.ky*d)),u=this.wrap(t[0]-l)*this.kx,h=(t[1]-c)*this.ky;const p=u*u+h*h;p<s&&(s=p,n=l,i=c,r=a,o=d)}return{point:[n,i],index:r,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function En(e,t){return t[0]-e[0]}function Tn(e){return e[1]-e[0]+1}function Pn(e,t){return e[1]>=e[0]&&e[1]<t}function In(e,t){if(e[0]>e[1])return[null,null];const n=Tn(e);if(t){if(2===n)return[e,null];const t=Math.floor(n/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===n)return[e,null];const i=Math.floor(n/2)-1;return[[e[0],e[0]+i],[e[0]+i+1,e[1]]]}function Mn(e,t){if(!Pn(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let i=t[0];i<=t[1];++i)$t(n,e[i]);return n}function An(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const e of n)$t(t,e);return t}function Rn(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function zn(e,t,n){if(!Rn(e)||!Rn(t))return NaN;let i=0,r=0;return e[2]<t[0]&&(i=t[0]-e[2]),e[0]>t[2]&&(i=e[0]-t[2]),e[1]>t[3]&&(r=e[1]-t[3]),e[3]<t[1]&&(r=t[1]-e[3]),n.distance([0,0],[i,r])}function Ln(e,t,n){const i=n.pointOnLine(t,e);return n.distance(e,i.point)}function On(e,t,n,i,r){const o=Math.min(Ln(e,[n,i],r),Ln(t,[n,i],r)),s=Math.min(Ln(n,[e,t],r),Ln(i,[e,t],r));return Math.min(o,s)}function Dn(e,t,n,i,r){if(!Pn(t,e.length)||!Pn(i,n.length))return 1/0;let o=1/0;for(let s=t[0];s<t[1];++s){const t=e[s],a=e[s+1];for(let e=i[0];e<i[1];++e){const i=n[e],s=n[e+1];if(en(t,a,i,s))return 0;o=Math.min(o,On(t,a,i,s,r))}}return o}function Fn(e,t,n,i,r){if(!Pn(t,e.length)||!Pn(i,n.length))return NaN;let o=1/0;for(let s=t[0];s<=t[1];++s)for(let t=i[0];t<=i[1];++t)if(o=Math.min(o,r.distance(e[s],n[t])),0===o)return o;return o}function Nn(e,t,n){if(nn(e,t,!0))return 0;let i=1/0;for(const r of t){const t=r[0],o=r[r.length-1];if(t!==o&&(i=Math.min(i,Ln(e,[o,t],n)),0===i))return i;const s=n.pointOnLine(r,e);if(i=Math.min(i,n.distance(e,s.point)),0===i)return i}return i}function Bn(e,t,n,i){if(!Pn(t,e.length))return NaN;for(let o=t[0];o<=t[1];++o)if(nn(e[o],n,!0))return 0;let r=1/0;for(let o=t[0];o<t[1];++o){const t=e[o],s=e[o+1];for(const e of n)for(let n=0,o=e.length,a=o-1;n<o;a=n++){const o=e[a],l=e[n];if(en(t,s,o,l))return 0;r=Math.min(r,On(t,s,o,l,i))}}return r}function jn(e,t){for(const n of e)for(const e of n)if(nn(e,t,!0))return!0;return!1}function Vn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const r=An(e),o=An(t);if(i!==1/0&&zn(r,o,n)>=i)return i;if(Jt(r,o)){if(jn(e,t))return 0}else if(jn(t,e))return 0;let s=1/0;for(const a of e)for(let e=0,i=a.length,r=i-1;e<i;r=e++){const i=a[r],o=a[e];for(const e of t)for(let t=0,r=e.length,a=r-1;t<r;a=t++){const r=e[a],l=e[t];if(en(i,o,r,l))return 0;s=Math.min(s,On(i,o,r,l,n))}}return s}function Un(e,t,n,i,r,o){if(!o)return;const s=zn(Mn(i,o),r,n);s<t&&e.push([s,o,[0,0]])}function qn(e,t,n,i,r,o,s){if(!o||!s)return;const a=zn(Mn(i,o),Mn(r,s),n);a<t&&e.push([a,o,s])}function Gn(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=Math.min(i.distance(e[0],n[0][0]),r);if(0===o)return o;const s=new fn([[0,[0,e.length-1],[0,0]]],En),a=An(n);for(;s.length>0;){const r=s.pop();if(r[0]>=o)continue;const l=r[1],c=t?50:100;if(Tn(l)<=c){if(!Pn(l,e.length))return NaN;if(t){const t=Bn(e,l,n,i);if(isNaN(t)||0===t)return t;o=Math.min(o,t)}else for(let t=l[0];t<=l[1];++t){const r=Nn(e[t],n,i);if(o=Math.min(o,r),0===o)return 0}}else{const n=In(l,t);Un(s,o,i,e,a,n[0]),Un(s,o,i,e,a,n[1])}}return o}function Zn(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,s=Math.min(o,r.distance(e[0],n[0]));if(0===s)return s;const a=new fn([[0,[0,e.length-1],[0,n.length-1]]],En);for(;a.length>0;){const o=a.pop();if(o[0]>=s)continue;const l=o[1],c=o[2],u=t?50:100,h=i?50:100;if(Tn(l)<=u&&Tn(c)<=h){if(!Pn(l,e.length)&&Pn(c,n.length))return NaN;let o;if(t&&i)o=Dn(e,l,n,c,r),s=Math.min(s,o);else if(t&&!i){const t=e.slice(l[0],l[1]+1);for(let e=c[0];e<=c[1];++e)if(o=Ln(n[e],t,r),s=Math.min(s,o),0===s)return s}else if(!t&&i){const t=n.slice(c[0],c[1]+1);for(let n=l[0];n<=l[1];++n)if(o=Ln(e[n],t,r),s=Math.min(s,o),0===s)return s}else o=Fn(e,l,n,c,r),s=Math.min(s,o)}else{const o=In(l,t),u=In(c,i);qn(a,s,r,e,n,o[0],u[0]),qn(a,s,r,e,n,o[0],u[1]),qn(a,s,r,e,n,o[1],u[0]),qn(a,s,r,e,n,o[1],u[1])}}return s}function Hn(e){return"MultiPolygon"===e.type?e.coordinates.map((e=>({type:"Polygon",coordinates:e}))):"MultiLineString"===e.type?e.coordinates.map((e=>({type:"LineString",coordinates:e}))):"MultiPoint"===e.type?e.coordinates.map((e=>({type:"Point",coordinates:e}))):[e]}class Wn{constructor(e,t){this.type=ce,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'distance' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(nt(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new Wn(t,t.features.map((e=>Hn(e.geometry))).flat());if("Feature"===t.type)return new Wn(t,Hn(t.geometry));if("type"in t&&"coordinates"in t)return new Wn(t,Hn(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=e.geometry(),i=n.flat().map((t=>Yt([t.x,t.y],e.canonical)));if(0===n.length)return NaN;const r=new Cn(i[0][1]);let o=1/0;for(const s of t){switch(s.type){case"Point":o=Math.min(o,Zn(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Zn(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Gn(i,!1,s.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=e.geometry(),i=n.flat().map((t=>Yt([t.x,t.y],e.canonical)));if(0===n.length)return NaN;const r=new Cn(i[0][1]);let o=1/0;for(const s of t){switch(s.type){case"Point":o=Math.min(o,Zn(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Zn(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Gn(i,!0,s.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){const n=e.geometry();if(0===n.length||0===n[0].length)return NaN;const i=vn(n,0).map((t=>t.map((t=>t.map((t=>Yt([t.x,t.y],e.canonical))))))),r=new Cn(i[0][0][0][1]);let o=1/0;for(const s of t)for(const e of i){switch(s.type){case"Point":o=Math.min(o,Gn([s.coordinates],!1,e,r,o));break;case"LineString":o=Math.min(o,Gn(s.coordinates,!0,e,r,o));break;case"Polygon":o=Math.min(o,Vn(e,s.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Kn={"==":Ft,"!=":Nt,">":jt,"<":Bt,">=":Ut,"<=":Vt,array:lt,at:gt,boolean:lt,case:bt,coalesce:zt,collator:qt,format:Zt,image:Ht,in:yt,"index-of":_t,interpolate:At,"interpolate-hcl":At,"interpolate-lab":At,length:Wt,let:ft,literal:ot,match:vt,number:lt,"number-format":Gt,object:lt,slice:xt,step:St,string:lt,"to-boolean":ut,"to-color":ut,"to-number":ut,"to-string":ut,var:mt,within:pn,distance:Wn};class Xn{constructor(e,t,n,i){this.name=e,this.type=t,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const n=e[0],i=Xn.definitions[n];if(!i)return t.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);const r=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=o.filter((t=>{let[n]=t;return!Array.isArray(n)||n.length===e.length-1}));let a=null;for(const[l,c]of s){a=new pt(t.registry,ei,t.path,null,t.scope);const i=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],r=Array.isArray(l)?l[t-1]:l.type,s=a.parse(n,1+i.length,r);if(!s){o=!0;break}i.push(s)}if(!o)if(Array.isArray(l)&&l.length!==i.length)a.error("Expected ".concat(l.length," arguments, but found ").concat(i.length," instead."));else{for(let e=0;e<i.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=i[e];a.concat(e+1).checkSubtype(t,n.type)}if(0===a.errors.length)return new Xn(n,r,c,i)}}if(1===s.length)t.errors.push(...a.errors);else{const n=(s.length?s:o).map((e=>{let[t]=e;return n=t,Array.isArray(n)?"(".concat(n.map(xe).join(", "),")"):"(".concat(xe(n.type),"...)");var n})).join(" | "),i=[];for(let r=1;r<e.length;r++){const n=t.parse(e[r],1+i.length);if(!n)return null;i.push(xe(n.type))}t.error("Expected arguments of type ".concat(n,", but found (").concat(i.join(", "),") instead."))}return null}static register(e,t){Xn.definitions=t;for(const n in t)e[n]=Xn}}function Yn(e,t){let[n,i,r,o]=t;n=n.evaluate(e),i=i.evaluate(e),r=r.evaluate(e);const s=o?o.evaluate(e):1,a=tt(n,i,r,s);if(a)throw new st(a);return new We(n/255,i/255,r/255,s,!1)}function $n(e,t){return e in t}function Jn(e,t){const n=t[e];return void 0===n?null:n}function Qn(e){return{type:e}}function ei(e){if(e instanceof mt)return ei(e.boundExpression);if(e instanceof Xn&&"error"===e.name)return!1;if(e instanceof qt)return!1;if(e instanceof pn)return!1;if(e instanceof Wn)return!1;const t=e instanceof ut||e instanceof lt;let n=!0;return e.eachChild((e=>{n=t?n&&ei(e):n&&e instanceof ot})),!!n&&ti(e)&&ii(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ti(e){if(e instanceof Xn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof pn)return!1;if(e instanceof Wn)return!1;let t=!0;return e.eachChild((e=>{t&&!ti(e)&&(t=!1)})),t}function ni(e){if(e instanceof Xn&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!ni(e)&&(t=!1)})),t}function ii(e,t){if(e instanceof Xn&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!ii(e,t)&&(n=!1)})),n}function ri(e){return{result:"success",value:e}}function oi(e){return{result:"error",value:e}}function si(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function ai(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function li(e){return!!e.expression&&e.expression.interpolated}function ci(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ui(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function hi(e){return e}function di(e,t){const n="color"===t.type,i=e.stops&&"object"==typeof e.stops[0][0],r=i||!(i||void 0!==e.property),o=e.type||(li(t)?"exponential":"interval");if(n||"padding"===t.type){const i=n?We.parse:$e.parse;(e=oe({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],i(e[1])]))),e.default=i(e.default?e.default:t.default)}if(e.colorSpace&&"rgb"!==(s=e.colorSpace)&&"hcl"!==s&&"lab"!==s)throw new Error('Unknown color space: "'.concat(e.colorSpace,'"'));var s;let a,l,c;if("exponential"===o)a=gi;else if("interval"===o)a=mi;else if("categorical"===o){a=fi,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error('Unknown function type "'.concat(o,'"'));a=yi}if(i){const n={},i=[];for(let t=0;t<e.stops.length;t++){const r=e.stops[t],o=r[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},i.push(o)),n[o].stops.push([r[0].value,r[1]])}const r=[];for(const e of i)r.push([n[e].zoom,di(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:At.interpolationFactor.bind(void 0,o),zoomStops:r.map((e=>e[0])),evaluate:(n,i)=>{let{zoom:o}=n;return gi({stops:r,base:e.base},t,o).evaluate(o,i)}}}if(r){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:At.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:n=>{let{zoom:i}=n;return a(e,t,i,l,c)}}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[e.property]:void 0;return void 0===r?pi(e.default,t.default):a(e,t,r,l,c)}}}function pi(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function fi(e,t,n,i,r){return pi(typeof n===r?i[n]:void 0,e.default,t.default)}function mi(e,t,n){if("number"!==ci(n))return pi(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const r=wt(e.stops.map((e=>e[0])),n);return e.stops[r][1]}function gi(e,t,n){const i=void 0!==e.base?e.base:1;if("number"!==ci(n))return pi(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const o=wt(e.stops.map((e=>e[0])),n),s=function(e,t,n,i){const r=i-n,o=e-n;return 0===r?0:1===t?o/r:(Math.pow(t,o)-1)/(Math.pow(t,r)-1)}(n,i,e.stops[o][0],e.stops[o+1][0]),a=e.stops[o][1],l=e.stops[o+1][1],c=Mt[t.type]||hi;return"function"==typeof a.evaluate?{evaluate(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const r=a.evaluate.apply(void 0,n),o=l.evaluate.apply(void 0,n);if(void 0!==r&&void 0!==o)return c(r,o,s,e.colorSpace)}}:c(a,l,s,e.colorSpace)}function yi(e,t,n){switch(t.type){case"color":n=We.parse(n);break;case"formatted":n=Ye.fromString(n.toString());break;case"resolvedImage":n=et.fromString(n.toString());break;case"padding":n=$e.parse(n);break;default:ci(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0)}return pi(n,e.default,t.default)}Xn.register(Kn,{error:[{kind:"error"},[ue],(e,t)=>{let[n]=t;throw new st(n.evaluate(e))}],typeof:[ue,[fe],(e,t)=>{let[n]=t;return xe(it(n.evaluate(e)))}],"to-rgba":[be(ce,4),[de],(e,t)=>{let[n]=t;const[i,r,o,s]=n.evaluate(e).rgb;return[255*i,255*r,255*o,s]}],rgb:[de,[ce,ce,ce],Yn],rgba:[de,[ce,ce,ce,ce],Yn],has:{type:he,overloads:[[[ue],(e,t)=>{let[n]=t;return $n(n.evaluate(e),e.properties())}],[[ue,pe],(e,t)=>{let[n,i]=t;return $n(n.evaluate(e),i.evaluate(e))}]]},get:{type:fe,overloads:[[[ue],(e,t)=>{let[n]=t;return Jn(n.evaluate(e),e.properties())}],[[ue,pe],(e,t)=>{let[n,i]=t;return Jn(n.evaluate(e),i.evaluate(e))}]]},"feature-state":[fe,[ue],(e,t)=>{let[n]=t;return Jn(n.evaluate(e),e.featureState||{})}],properties:[pe,[],e=>e.properties()],"geometry-type":[ue,[],e=>e.geometryType()],id:[fe,[],e=>e.id()],zoom:[ce,[],e=>e.globals.zoom],"heatmap-density":[ce,[],e=>e.globals.heatmapDensity||0],"line-progress":[ce,[],e=>e.globals.lineProgress||0],accumulated:[fe,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ce,Qn(ce),(e,t)=>{let n=0;for(const i of t)n+=i.evaluate(e);return n}],"*":[ce,Qn(ce),(e,t)=>{let n=1;for(const i of t)n*=i.evaluate(e);return n}],"-":{type:ce,overloads:[[[ce,ce],(e,t)=>{let[n,i]=t;return n.evaluate(e)-i.evaluate(e)}],[[ce],(e,t)=>{let[n]=t;return-n.evaluate(e)}]]},"/":[ce,[ce,ce],(e,t)=>{let[n,i]=t;return n.evaluate(e)/i.evaluate(e)}],"%":[ce,[ce,ce],(e,t)=>{let[n,i]=t;return n.evaluate(e)%i.evaluate(e)}],ln2:[ce,[],()=>Math.LN2],pi:[ce,[],()=>Math.PI],e:[ce,[],()=>Math.E],"^":[ce,[ce,ce],(e,t)=>{let[n,i]=t;return Math.pow(n.evaluate(e),i.evaluate(e))}],sqrt:[ce,[ce],(e,t)=>{let[n]=t;return Math.sqrt(n.evaluate(e))}],log10:[ce,[ce],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN10}],ln:[ce,[ce],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))}],log2:[ce,[ce],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN2}],sin:[ce,[ce],(e,t)=>{let[n]=t;return Math.sin(n.evaluate(e))}],cos:[ce,[ce],(e,t)=>{let[n]=t;return Math.cos(n.evaluate(e))}],tan:[ce,[ce],(e,t)=>{let[n]=t;return Math.tan(n.evaluate(e))}],asin:[ce,[ce],(e,t)=>{let[n]=t;return Math.asin(n.evaluate(e))}],acos:[ce,[ce],(e,t)=>{let[n]=t;return Math.acos(n.evaluate(e))}],atan:[ce,[ce],(e,t)=>{let[n]=t;return Math.atan(n.evaluate(e))}],min:[ce,Qn(ce),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ce,Qn(ce),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ce,[ce],(e,t)=>{let[n]=t;return Math.abs(n.evaluate(e))}],round:[ce,[ce],(e,t)=>{let[n]=t;const i=n.evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[ce,[ce],(e,t)=>{let[n]=t;return Math.floor(n.evaluate(e))}],ceil:[ce,[ce],(e,t)=>{let[n]=t;return Math.ceil(n.evaluate(e))}],"filter-==":[he,[ue,fe],(e,t)=>{let[n,i]=t;return e.properties()[n.value]===i.value}],"filter-id-==":[he,[fe],(e,t)=>{let[n]=t;return e.id()===n.value}],"filter-type-==":[he,[ue],(e,t)=>{let[n]=t;return e.geometryType()===n.value}],"filter-<":[he,[ue,fe],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r<o}],"filter-id-<":[he,[fe],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[he,[ue,fe],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r>o}],"filter-id->":[he,[fe],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[he,[ue,fe],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[he,[fe],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[he,[ue,fe],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[he,[fe],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[he,[fe],(e,t)=>{let[n]=t;return n.value in e.properties()}],"filter-has-id":[he,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[he,[be(ue)],(e,t)=>{let[n]=t;return n.value.indexOf(e.geometryType())>=0}],"filter-id-in":[he,[be(fe)],(e,t)=>{let[n]=t;return n.value.indexOf(e.id())>=0}],"filter-in-small":[he,[ue,be(fe)],(e,t)=>{let[n,i]=t;return i.value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[he,[ue,be(fe)],(e,t)=>{let[n,i]=t;return function(e,t,n,i){for(;n<=i;){const r=n+i>>1;if(t[r]===e)return!0;t[r]>e?i=r-1:n=r+1}return!1}(e.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:he,overloads:[[[he,he],(e,t)=>{let[n,i]=t;return n.evaluate(e)&&i.evaluate(e)}],[Qn(he),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:he,overloads:[[[he,he],(e,t)=>{let[n,i]=t;return n.evaluate(e)||i.evaluate(e)}],[Qn(he),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[he,[he],(e,t)=>{let[n]=t;return!n.evaluate(e)}],"is-supported-script":[he,[ue],(e,t)=>{let[n]=t;const i=e.globals&&e.globals.isSupportedScript;return!i||i(n.evaluate(e))}],upcase:[ue,[ue],(e,t)=>{let[n]=t;return n.evaluate(e).toUpperCase()}],downcase:[ue,[ue],(e,t)=>{let[n]=t;return n.evaluate(e).toLowerCase()}],concat:[ue,Qn(fe),(e,t)=>t.map((t=>rt(t.evaluate(e)))).join("")],"resolved-locale":[ue,[me],(e,t)=>{let[n]=t;return n.evaluate(e).resolvedLocale()}]});class _i{constructor(e,t){var n;this.expression=e,this._warningHistory={},this._evaluator=new dt,this._defaultValue=t?"color"===(n=t).type&&ui(n.default)?new We(0,0,0,0):"color"===n.type?We.parse(n.default)||null:"padding"===n.type?$e.parse(n.default)||null:"variableAnchorOffsetCollection"===n.type?Qe.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,i,r,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new st("Expected value to be one of ".concat(Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", "),", but found ").concat(JSON.stringify(e)," instead."));return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function vi(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Kn}function bi(e,t){const n=new pt(Kn,ei,[],t?function(e){const t={color:de,string:ue,number:ce,enum:ue,boolean:he,formatted:ge,padding:ye,resolvedImage:_e,variableAnchorOffsetCollection:ve};return"array"===e.type?be(t[e.value]||fe,e.length):t[e.type]}(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?ri(new _i(i,t)):oi(n.errors)}class xi{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!ni(t.expression)}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,o)}evaluate(e,t,n,i,r,o){return this._styleExpression.evaluate(e,t,n,i,r,o)}}class wi{constructor(e,t,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!ni(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,o)}evaluate(e,t,n,i,r,o){return this._styleExpression.evaluate(e,t,n,i,r,o)}interpolationFactor(e,t,n){return this.interpolationType?At.interpolationFactor(this.interpolationType,e,t,n):0}}function Si(e,t){const n=bi(e,t);if("error"===n.result)return n;const i=n.value.expression,r=ti(i);if(!r&&!si(t))return oi([new se("","data expressions not supported")]);const o=ii(i,["zoom"]);if(!o&&!ai(t))return oi([new se("","zoom expressions not supported")]);const s=Ci(i);return s||o?s instanceof se?oi([s]):s instanceof At&&!li(t)?oi([new se("",'"interpolate" expressions cannot be used with this property')]):ri(s?new wi(r?"camera":"composite",n.value,s.labels,s instanceof At?s.interpolation:void 0):new xi(r?"constant":"source",n.value)):oi([new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ki{constructor(e,t){this._parameters=e,this._specification=t,oe(this,di(this._parameters,this._specification))}static deserialize(e){return new ki(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ci(e){let t=null;if(e instanceof ft)t=Ci(e.result);else if(e instanceof zt){for(const n of e.args)if(t=Ci(n),t)break}else(e instanceof St||e instanceof At)&&e.input instanceof Xn&&"zoom"===e.input.name&&(t=e);return t instanceof se||e.eachChild((e=>{const n=Ci(e);n instanceof se?t=n:!t&&n?t=new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new se("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Ei(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Ei(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const Ti={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pi(e){if(null==e)return{filter:()=>!0,needGeometry:!1};Ei(e)||(e=Ai(e));const t=bi(e,Ti);if("error"===t.result)throw new Error(t.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));return{filter:(e,n,i)=>t.value.evaluate(e,n,{},i),needGeometry:Mi(e)}}function Ii(e,t){return e<t?-1:e>t?1:0}function Mi(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(Mi(e[t]))return!0;return!1}function Ai(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Ri(e[1],e[2],"=="):"!="===t?Oi(Ri(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Ri(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(Ai))):"all"===t?["all"].concat(e.slice(1).map(Ai)):"none"===t?["all"].concat(e.slice(1).map(Ai).map(Oi)):"in"===t?zi(e[1],e.slice(2)):"!in"===t?Oi(zi(e[1],e.slice(2))):"has"===t?Li(e[1]):"!has"!==t||Oi(Li(e[1]));var n}function Ri(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function zi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Ii)]]:["filter-in-small",e,["literal",t]]}}function Li(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Oi(e){return["!",e]}function Di(e){const t=typeof e;if("number"===t||"boolean"===t||"string"===t||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const n of e)t+="".concat(Di(n),",");return"".concat(t,"]")}const n=Object.keys(e).sort();let i="{";for(let r=0;r<n.length;r++)i+="".concat(JSON.stringify(n[r]),":").concat(Di(e[n[r]]),",");return"".concat(i,"}")}function Fi(e){let t="";for(const n of W)t+="/".concat(Di(e[n]));return t}function Ni(e){const t=e.value;return t?[new re(e.key,t,"constants have been deprecated as of v8")]:[]}function Bi(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ji(e){if(Array.isArray(e))return e.map(ji);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=ji(e[n]);return t}return Bi(e)}function Vi(e){const t=e.key,n=e.value,i=e.valueSpec||{},r=e.objectElementValidators||{},o=e.style,s=e.styleSpec,a=e.validateSpec;let l=[];const c=ci(n);if("object"!==c)return[new re(t,n,"object expected, ".concat(c," found"))];for(const u in n){const e=u.split(".")[0],c=i[e]||i["*"];let h;if(r[e])h=r[e];else if(i[e])h=a;else if(r["*"])h=r["*"];else{if(!i["*"]){l.push(new re(t,n[u],'unknown property "'.concat(u,'"')));continue}h=a}l=l.concat(h({key:(t?"".concat(t,"."):t)+u,value:n[u],valueSpec:c,style:o,styleSpec:s,object:n,objectKey:u,validateSpec:a},n))}for(const u in i)r[u]||i[u].required&&void 0===i[u].default&&void 0===n[u]&&l.push(new re(t,n,'missing required property "'.concat(u,'"')));return l}function Ui(e){const t=e.value,n=e.valueSpec,i=e.style,r=e.styleSpec,o=e.key,s=e.arrayElementValidator||e.validateSpec;if("array"!==ci(t))return[new re(o,t,"array expected, ".concat(ci(t)," found"))];if(n.length&&t.length!==n.length)return[new re(o,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new re(o,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];let a={type:n.value,values:n.values};r.$version<7&&(a.function=n.function),"object"===ci(n.value)&&(a=n.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(s({array:t,arrayIndex:c,value:t[c],valueSpec:a,validateSpec:e.validateSpec,style:i,styleSpec:r,key:"".concat(o,"[").concat(c,"]")}));return l}function qi(e){const t=e.key,n=e.value,i=e.valueSpec;let r=ci(n);return"number"===r&&n!=n&&(r="NaN"),"number"!==r?[new re(t,n,"number expected, ".concat(r," found"))]:"minimum"in i&&n<i.minimum?[new re(t,n,"".concat(n," is less than the minimum value ").concat(i.minimum))]:"maximum"in i&&n>i.maximum?[new re(t,n,"".concat(n," is greater than the maximum value ").concat(i.maximum))]:[]}function Gi(e){const t=e.valueSpec,n=Bi(e.value.type);let i,r,o,s={};const a="categorical"!==n&&void 0===e.value.property,l=!a,c="array"===ci(e.value.stops)&&"array"===ci(e.value.stops[0])&&"object"===ci(e.value.stops[0][0]),u=Vi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new re(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const i=e.value;return t=t.concat(Ui({key:e.key,value:i,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===ci(i)&&0===i.length&&t.push(new re(e.key,i,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&a&&u.push(new re(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new re(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!li(e.valueSpec)&&u.push(new re(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!si(e.valueSpec)?u.push(new re(e.key,e.value,"property functions not supported")):a&&!ai(e.valueSpec)&&u.push(new re(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new re(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const i=e.value,a=e.key;if("array"!==ci(i))return[new re(a,i,"array expected, ".concat(ci(i)," found"))];if(2!==i.length)return[new re(a,i,"array length 2 expected, length ".concat(i.length," found"))];if(c){if("object"!==ci(i[0]))return[new re(a,i,"object expected, ".concat(ci(i[0])," found"))];if(void 0===i[0].zoom)return[new re(a,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new re(a,i,"object stop key must have value")];if(o&&o>Bi(i[0].zoom))return[new re(a,i[0].zoom,"stop zoom values must appear in ascending order")];Bi(i[0].zoom)!==o&&(o=Bi(i[0].zoom),r=void 0,s={}),n=n.concat(Vi({key:"".concat(a,"[0]"),value:i[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:qi,value:d}}))}else n=n.concat(d({key:"".concat(a,"[0]"),value:i[0],valueSpec:{},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},i));return vi(ji(i[1]))?n.concat([new re("".concat(a,"[1]"),i[1],"expressions are not allowed in function stops.")]):n.concat(e.validateSpec({key:"".concat(a,"[1]"),value:i[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const a=ci(e.value),l=Bi(e.value),c=null!==e.value?e.value:o;if(i){if(a!==i)return[new re(e.key,c,"".concat(a," stop domain type must match previous stop domain type ").concat(i))]}else i=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new re(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==n){let i="number expected, ".concat(a," found");return si(t)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new re(e.key,c,i)]}return"categorical"!==n||"number"!==a||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===a&&void 0!==r&&l<r?[new re(e.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in s?[new re(e.key,c,"stop domain values must be unique")]:(s[l]=!0,[])):[new re(e.key,c,"integer expected, found ".concat(l))]}}function Zi(e){const t=("property"===e.expressionContext?Si:bi)(ji(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new re("".concat(e.key).concat(t.key),e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new re(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!ni(n))return[new re(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!ni(n))return[new re(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!ii(n,["zoom","feature-state"]))return[new re(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!ti(n))return[new re(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Hi(e){const t=e.key,n=e.value,i=e.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(Bi(n))&&r.push(new re(t,n,"expected one of [".concat(i.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(i.values).indexOf(Bi(n))&&r.push(new re(t,n,"expected one of [".concat(Object.keys(i.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),r}function Wi(e){return Ei(ji(e.value))?Zi(oe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ki(e)}function Ki(e){const t=e.value,n=e.key;if("array"!==ci(t))return[new re(n,t,"array expected, ".concat(ci(t)," found"))];const i=e.styleSpec;let r,o=[];if(t.length<1)return[new re(n,t,"filter array must have at least 1 element")];switch(o=o.concat(Hi({key:"".concat(n,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Bi(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Bi(t[1])&&o.push(new re(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&o.push(new re(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&(r=ci(t[1]),"string"!==r&&o.push(new re("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found"))));for(let s=2;s<t.length;s++)r=ci(t[s]),"$type"===Bi(t[1])?o=o.concat(Hi({key:"".concat(n,"[").concat(s,"]"),value:t[s],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new re("".concat(n,"[").concat(s,"]"),t[s],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(let i=1;i<t.length;i++)o=o.concat(Ki({key:"".concat(n,"[").concat(i,"]"),value:t[i],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=ci(t[1]),2!==t.length?o.push(new re(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==r&&o.push(new re("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")))}return o}function Xi(e,t){const n=e.key,i=e.validateSpec,r=e.style,o=e.styleSpec,s=e.value,a=e.objectKey,l=o["".concat(t,"_").concat(e.layerType)];if(!l)return[];const c=a.match(/^(.*)-transition$/);if("paint"===t&&c&&l[c[1]]&&l[c[1]].transition)return i({key:n,value:s,valueSpec:o.transition,style:r,styleSpec:o});const u=e.valueSpec||l[a];if(!u)return[new re(n,s,'unknown property "'.concat(a,'"'))];let h;if("string"===ci(s)&&si(u)&&!u.tokens&&(h=/^{([^}]+)}$/.exec(s)))return[new re(n,s,'"'.concat(a,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(h[1])," }`."))];const d=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&d.push(new re(n,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&ui(ji(s))&&"identity"===Bi(s.type)&&d.push(new re(n,s,'"text-font" does not support identity functions'))),d.concat(i({key:e.key,value:s,valueSpec:u,style:r,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:a}))}function Yi(e){return Xi(e,"paint")}function $i(e){return Xi(e,"layout")}function Ji(e){let t=[];const n=e.value,i=e.key,r=e.style,o=e.styleSpec;n.type||n.ref||t.push(new re(i,n,'either "type" or "ref" is required'));let s=Bi(n.type);const a=Bi(n.ref);if(n.id){const o=Bi(n.id);for(let s=0;s<e.arrayIndex;s++){const e=r.layers[s];Bi(e.id)===o&&t.push(new re(i,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(e.id.__line__)))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new re(i,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),r.layers.forEach((t=>{Bi(t.id)===a&&(e=t)})),e?e.ref?t.push(new re(i,n.ref,"ref cannot reference another ref layer")):s=Bi(e.type):t.push(new re(i,n.ref,'ref layer "'.concat(a,'" not found')))}else if("background"!==s)if(n.source){const e=r.sources&&r.sources[n.source],o=e&&Bi(e.type);e?"vector"===o&&"raster"===s?t.push(new re(i,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster-dem"!==o&&"hillshade"===s?t.push(new re(i,n.source,'layer "'.concat(n.id,'" requires a raster-dem source'))):"raster"===o&&"raster"!==s?t.push(new re(i,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==s?t.push(new re(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new re(i,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new re(i,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new re(i,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new re(i,n,'missing required property "source"'));return t=t.concat(Vi({key:i,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:"".concat(i,".type"),value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"}),filter:Wi,layout:e=>Vi({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>$i(oe({layerType:s},e))}}),paint:e=>Vi({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Yi(oe({layerType:s},e))}})}})),t}function Qi(e){const t=e.value,n=e.key,i=ci(t);return"string"!==i?[new re(n,t,"string expected, ".concat(i," found"))]:[]}const er={promoteId:function(e){let{key:t,value:n}=e;if("string"===ci(n))return Qi({key:t,value:n});{const e=[];for(const i in n)e.push(...Qi({key:"".concat(t,".").concat(i),value:n[i]}));return e}}};function tr(e){const t=e.value,n=e.key,i=e.styleSpec,r=e.style,o=e.validateSpec;if(!t.type)return[new re(n,t,'"type" is required')];const s=Bi(t.type);let a;switch(s){case"vector":case"raster":return a=Vi({key:n,value:t,valueSpec:i["source_".concat(s.replace("-","_"))],style:e.style,styleSpec:i,objectElementValidators:er,validateSpec:o}),a;case"raster-dem":return a=function(e){var t;const n=null!==(t=e.sourceName)&&void 0!==t?t:"",i=e.value,r=e.styleSpec,o=r.source_raster_dem,s=e.style;let a=[];const l=ci(i);if(void 0===i)return a;if("object"!==l)return a.push(new re("source_raster_dem",i,"object expected, ".concat(l," found"))),a;const c="custom"===Bi(i.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],h=e.value.encoding?'"'.concat(e.value.encoding,'"'):"Default";for(const d in i)!c&&u.includes(d)?a.push(new re(d,i[d],'In "'.concat(n,'": "').concat(d,'" is only valid when "encoding" is set to "custom". ').concat(h," encoding found"))):o[d]?a=a.concat(e.validateSpec({key:d,value:i[d],valueSpec:o[d],validateSpec:e.validateSpec,style:s,styleSpec:r})):a.push(new re(d,i[d],'unknown property "'.concat(d,'"')));return a}({sourceName:n,value:t,style:e.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=Vi({key:n,value:t,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:er}),t.cluster)for(const e in t.clusterProperties){const[i,r]=t.clusterProperties[e],s="string"==typeof i?[i,["accumulated"],["get",e]]:i;a.push(...Zi({key:"".concat(n,".").concat(e,".map"),value:r,validateSpec:o,expressionContext:"cluster-map"})),a.push(...Zi({key:"".concat(n,".").concat(e,".reduce"),value:s,validateSpec:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Vi({key:n,value:t,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return Vi({key:n,value:t,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new re(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Hi({key:"".concat(n,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,validateSpec:o,styleSpec:i})}}function nr(e){const t=e.value,n=e.styleSpec,i=n.light,r=e.style;let o=[];const s=ci(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new re("light",t,"object expected, ".concat(s," found"))]),o;for(const a in t){const s=a.match(/^(.*)-transition$/);o=o.concat(s&&i[s[1]]&&i[s[1]].transition?e.validateSpec({key:a,value:t[a],valueSpec:n.transition,validateSpec:e.validateSpec,style:r,styleSpec:n}):i[a]?e.validateSpec({key:a,value:t[a],valueSpec:i[a],validateSpec:e.validateSpec,style:r,styleSpec:n}):[new re(a,t[a],'unknown property "'.concat(a,'"'))])}return o}function ir(e){const t=e.value,n=e.styleSpec,i=n.sky,r=e.style,o=ci(t);if(void 0===t)return[];if("object"!==o)return[new re("sky",t,"object expected, ".concat(o," found"))];let s=[];for(const a in t)s=s.concat(i[a]?e.validateSpec({key:a,value:t[a],valueSpec:i[a],style:r,styleSpec:n}):[new re(a,t[a],'unknown property "'.concat(a,'"'))]);return s}function rr(e){const t=e.value,n=e.styleSpec,i=n.terrain,r=e.style;let o=[];const s=ci(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new re("terrain",t,"object expected, ".concat(s," found"))]),o;for(const a in t)o=o.concat(i[a]?e.validateSpec({key:a,value:t[a],valueSpec:i[a],validateSpec:e.validateSpec,style:r,styleSpec:n}):[new re(a,t[a],'unknown property "'.concat(a,'"'))]);return o}function or(e){let t=[];const n=e.value,i=e.key;if(Array.isArray(n)){const r=[],o=[];for(const s in n)n[s].id&&r.includes(n[s].id)&&t.push(new re(i,n,"all the sprites' ids must be unique, but ".concat(n[s].id," is duplicated"))),r.push(n[s].id),n[s].url&&o.includes(n[s].url)&&t.push(new re(i,n,"all the sprites' URLs must be unique, but ".concat(n[s].url," is duplicated"))),o.push(n[s].url),t=t.concat(Vi({key:"".concat(i,"[").concat(s,"]"),value:n[s],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return Qi({key:i,value:n})}const sr={"*":()=>[],array:Ui,boolean:function(e){const t=e.value,n=e.key,i=ci(t);return"boolean"!==i?[new re(n,t,"boolean expected, ".concat(i," found"))]:[]},number:qi,color:function(e){const t=e.key,n=e.value,i=ci(n);return"string"!==i?[new re(t,n,"color expected, ".concat(i," found"))]:We.parse(String(n))?[]:[new re(t,n,'color expected, "'.concat(n,'" found'))]},constants:Ni,enum:Hi,filter:Wi,function:Gi,layer:Ji,object:Vi,source:tr,light:nr,sky:ir,terrain:rr,projection:function(e){const t=e.value,n=e.styleSpec,i=n.projection,r=e.style,o=ci(t);if(void 0===t)return[];if("object"!==o)return[new re("projection",t,"object expected, ".concat(o," found"))];let s=[];for(const a in t)s=s.concat(i[a]?e.validateSpec({key:a,value:t[a],valueSpec:i[a],style:r,styleSpec:n}):[new re(a,t[a],'unknown property "'.concat(a,'"'))]);return s},string:Qi,formatted:function(e){return 0===Qi(e).length?[]:Zi(e)},resolvedImage:function(e){return 0===Qi(e).length?[]:Zi(e)},padding:function(e){const t=e.key,n=e.value;if("array"===ci(n)){if(n.length<1||n.length>4)return[new re(t,n,"padding requires 1 to 4 values; ".concat(n.length," values found"))];const i={type:"number"};let r=[];for(let o=0;o<n.length;o++)r=r.concat(e.validateSpec({key:"".concat(t,"[").concat(o,"]"),value:n[o],validateSpec:e.validateSpec,valueSpec:i}));return r}return qi({key:t,value:n,valueSpec:{}})},variableAnchorOffsetCollection:function(e){const t=e.key,n=e.value,i=ci(n),r=e.styleSpec;if("array"!==i||n.length<1||n.length%2!=0)return[new re(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<n.length;s+=2)o=o.concat(Hi({key:"".concat(t,"[").concat(s,"]"),value:n[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(Ui({key:"".concat(t,"[").concat(s+1,"]"),value:n[s+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:r}));return o},sprite:or};function ar(e){const t=e.value,n=e.valueSpec,i=e.styleSpec;return e.validateSpec=ar,n.expression&&ui(Bi(t))?Gi(e):n.expression&&vi(ji(t))?Zi(e):n.type&&sr[n.type]?sr[n.type](e):Vi(oe({},e,{valueSpec:n.type?i[n.type]:n}))}function lr(e){const t=e.value,n=e.key,i=Qi(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new re(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new re(n,t,'"glyphs" url must include a "{range}" token'))),i}function cr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,n=[];return n=n.concat(ar({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:ar,objectElementValidators:{glyphs:lr,"*":()=>[]}})),e.constants&&(n=n.concat(Ni({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:ar}))),hr(n)}function ur(e){return function(t){return e({...t,validateSpec:ar})}}function hr(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function dr(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return hr(e.apply(this,n))}}cr.source=dr(ur(tr)),cr.sprite=dr(ur(or)),cr.glyphs=dr(ur(lr)),cr.light=dr(ur(nr)),cr.sky=dr(ur(ir)),cr.terrain=dr(ur(rr)),cr.layer=dr(ur(Ji)),cr.filter=dr(ur(Wi)),cr.paintProperty=dr(ur(Yi)),cr.layoutProperty=dr(ur($i));const pr=cr,fr=pr.light,mr=pr.sky,gr=pr.paintProperty,yr=pr.layoutProperty;function _r(e,t){let n=!1;if(t&&t.length)for(const i of t)e.fire(new G(new Error(i.message))),n=!0;return n}class vr{constructor(e,t,n){const i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const r=new Int32Array(this.arrayBuffer);e=r[0],this.d=(t=r[1])+2*(n=r[2]);for(let e=0;e<this.d*this.d;e++){const t=r[3+e],n=r[3+e+1];i.push(t===n?null:r.subarray(t,n))}const o=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],o),this.bboxes=r.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*n;for(let e=0;e<this.d*this.d;e++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;const r=n/t*e;this.min=-r,this.max=e+r}insert(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,n,i,r,o){this.cells[r].push(o)}query(e,t,n,i,r){const o=this.min,s=this.max;if(e<=o&&t<=o&&s<=n&&s<=i&&!r)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,n,i,this._queryCell,o,{},r),o}}_queryCell(e,t,n,i,r,o,s,a){const l=this.cells[r];if(null!==l){const r=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===s[h]){const l=4*h;(a?a(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&n>=c[l+0]&&i>=c[l+1])?(s[h]=!0,o.push(r[h])):s[h]=!1}}}}_forEachCell(e,t,n,i,r,o,s,a){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(i);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++){const c=this.d*l+d;if((!a||a(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&r.call(this,e,t,n,i,c,o,s,a))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let n=0;for(let o=0;o<this.cells.length;o++)n+=this.cells[o].length;const i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;let r=t;for(let o=0;o<e.length;o++){const t=e[o];i[3+o]=r,i.set(t,r),r+=t.length}return i[3+e.length]=r,i.set(this.keys,r),r+=this.keys.length,i[3+e.length+1]=r,i.set(this.bboxes,r),r+=this.bboxes.length,i.buffer}static serialize(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}}static deserialize(e){return new vr(e.buffer)}}const br={};function xr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(br[e])throw new Error("".concat(e," is already registered."));Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),br[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}xr("Object",Object),xr("TransferableGridIndex",vr),xr("Color",We),xr("Error",Error),xr("AJAXError",F),xr("ResolvedImage",et),xr("StylePropertyFunction",ki),xr("StyleExpression",_i,{omit:["_evaluator"]}),xr("ZoomDependentExpression",wi),xr("ZoomConstantExpression",xi),xr("CompoundExpression",Xn,{omit:["_evaluate"]});for(const Nh in Kn)Kn[Nh]._classRegistryKey||xr("Expression_".concat(Nh),Kn[Nh]);function wr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Sr(e){return e.$name||e.constructor._classRegistryKey}function kr(e){return!function(e){if(null===e||"object"!=typeof e)return!1;const t=Sr(e);return!(!t||"Object"===t)}(e)&&(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||wr(e)||T(e)||ArrayBuffer.isView(e)||e instanceof ImageData)}function Cr(e,t){if(kr(e))return(wr(e)||T(e))&&t&&t.push(e),ArrayBuffer.isView(e)&&t&&t.push(e.buffer),e instanceof ImageData&&t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const i of e)n.push(Cr(i,t));return n}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);const n=Sr(e);if(!n)throw new Error("can't serialize object of unregistered class ".concat(e.constructor.name));if(!br[n])throw new Error("".concat(n," is not registered."));const{klass:i}=br[n],r=i.serialize?i.serialize(e,t):{};if(i.serialize){if(t&&r===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in e){if(!e.hasOwnProperty(i))continue;if(br[n].omit.indexOf(i)>=0)continue;const o=e[i];r[i]=br[n].shallow.indexOf(i)>=0?o:Cr(o,t)}e instanceof Error&&(r.message=e.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(r.$name=n),r}function Er(e){if(kr(e))return e;if(Array.isArray(e))return e.map(Er);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);const t=Sr(e)||"Object";if(!br[t])throw new Error("can't deserialize unregistered class ".concat(t));const{klass:n}=br[t];if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);const i=Object.create(n.prototype);for(const r of Object.keys(e)){if("$name"===r)continue;const n=e[r];i[r]=br[t].shallow.indexOf(r)>=0?n:Er(n)}return i}class Tr{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const Pr={"Latin-1 Supplement":e=>e>=128&&e<=255,"Hangul Jamo":e=>e>=4352&&e<=4607,Khmer:e=>e>=6016&&e<=6143,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Katakana:e=>e>=12448&&e<=12543,Kanbun:e=>e>=12688&&e<=12703,"CJK Strokes":e=>e>=12736&&e<=12783,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"Private Use Area":e=>e>=57344&&e<=63743,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function Ir(e){for(const t of e)if(Or(t.charCodeAt(0)))return!0;return!1}function Mr(e){for(const t of e)if(!zr(t.charCodeAt(0)))return!1;return!0}function Ar(e){const t=e.map((e=>{try{return new RegExp("\\p{sc=".concat(e,"}"),"u").source}catch(e){return null}})).filter((e=>e));return new RegExp(t.join("|"),"u")}const Rr=Ar(["Arab","Dupl","Mong","Ougr","Syrc"]);function zr(e){return!Rr.test(String.fromCodePoint(e))}const Lr=Ar(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Or(e){return!(746!==e&&747!==e&&(e<4352||!(Pr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Pr["CJK Compatibility"](e)||Pr["CJK Strokes"](e)||!(!Pr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Pr["Enclosed CJK Letters and Months"](e)||Pr["Ideographic Description Characters"](e)||Pr.Kanbun(e)||Pr.Katakana(e)&&12540!==e||!(!Pr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Pr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Pr["Vertical Forms"](e)||Pr["Yijing Hexagram Symbols"](e)||/\p{sc=Cans}/u.test(String.fromCodePoint(e))||/\p{sc=Hang}/u.test(String.fromCodePoint(e))||Lr.test(String.fromCodePoint(e)))))}function Dr(e){return!(Or(e)||function(e){return!!(Pr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Pr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Pr["Letterlike Symbols"](e)||Pr["Number Forms"](e)||Pr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Pr["Control Pictures"](e)&&9251!==e||Pr["Optical Character Recognition"](e)||Pr["Enclosed Alphanumerics"](e)||Pr["Geometric Shapes"](e)||Pr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Pr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Pr["CJK Symbols and Punctuation"](e)||Pr.Katakana(e)||Pr["Private Use Area"](e)||Pr["CJK Compatibility Forms"](e)||Pr["Small Form Variants"](e)||Pr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}const Fr=Ar(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Nr(e){return Fr.test(String.fromCodePoint(e))}function Br(e,t){return!(!t&&Nr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Pr.Khmer(e))}function jr(e){for(const t of e)if(Nr(t.charCodeAt(0)))return!0;return!1}const Vr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Ur{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Tr,this.transition={})}isSupportedScript(e){return function(e,t){for(const n of e)if(!Br(n.charCodeAt(0),t))return!1;return!0}(e,"loaded"===Vr.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}class qr{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(ui(e))return new ki(e,t);if(vi(e)){const n=Si(e,t);if("error"===n.result)throw new Error(n.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));return n.value}{let n=e;return"color"===t.type&&"string"==typeof e?n=We.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"variableAnchorOffsetCollection"===t.type&&Array.isArray(e)&&(n=Qe.parse(e)):n=$e.parse(e),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class Gr{constructor(e){this.property=e,this.value=new qr(e,void 0)}transitioned(e,t){return new Hr(this.property,this.value,t,y({},e.transition,this.transition),e.now)}untransitioned(){return new Hr(this.property,this.value,null,{},0)}}class Zr{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return x(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Gr(this._values[e].property)),this._values[e].value=new qr(this._values[e].property,null===t?void 0:x(t))}getTransition(e){return x(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Gr(this._values[e].property)),this._values[e].transition=x(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const i=this.getTransition(t);void 0!==i&&(e["".concat(t,"-transition")]=i)}return e}transitioned(e,t){const n=new Wr(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(e,t._values[i]);return n}untransitioned(){const e=new Wr(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Hr{constructor(e,t,n,i,r){this.property=e,this.value=t,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,e.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const i=e.now||0,r=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(e,t,n);{const s=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),r,function(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(s))}}return r}}class Wr{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const i=new Yr(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(e,t,n);return i}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Kr{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return void 0!==this._values[e].value}getValue(e){return x(this._values[e].value)}setValue(e,t){this._values[e]=new qr(this._values[e].property,null===t?void 0:x(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const i=new Yr(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(e,t,n);return i}}class Xr{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,i){return this.property.evaluate(this.value,this.parameters,e,t,n,i)}}class Yr{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class $r{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,n){const i=Mt[this.specification.type];return i?i(e,t,n):e}}class Jr{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,i){return new Xr(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,i)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Xr(this,{kind:"constant",value:void 0},e.parameters);const i=Mt[this.specification.type];if(i){const r=i(e.value.value,t.value.value,n);return new Xr(this,{kind:"constant",value:r},e.parameters)}return e}evaluate(e,t,n,i,r,o){return"constant"===e.kind?e.value:e.evaluate(t,n,i,r,o)}}class Qr extends Jr{possiblyEvaluate(e,t,n,i){if(void 0===e.value)return new Xr(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const r=e.expression.evaluate(t,null,{},n,i),o="resolvedImage"===e.property.specification.type&&"string"!=typeof r?r.name:r,s=this._calculate(o,o,o,t);return new Xr(this,{kind:"constant",value:s},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Xr(this,{kind:"constant",value:n},t)}return new Xr(this,e.expression,t)}evaluate(e,t,n,i,r,o){if("source"===e.kind){const s=e.evaluate(t,n,i,r,o);return this._calculate(s,s,s,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,i),e.evaluate({zoom:Math.floor(t.zoom)},n,i),e.evaluate({zoom:Math.floor(t.zoom)+1},n,i),t):e.value}_calculate(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class eo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,i){if(void 0!==e.value){if("constant"===e.expression.kind){const r=e.expression.evaluate(t,null,{},n,i);return this._calculate(r,r,r,t)}return this._calculate(e.expression.evaluate(new Ur(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Ur(Math.floor(t.zoom),t)),e.expression.evaluate(new Ur(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class to{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,i){return!!e.expression.evaluate(t,null,{},n,i)}interpolate(){return!1}}class no{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const i=this.defaultPropertyValues[t]=new qr(n,void 0),r=this.defaultTransitionablePropertyValues[t]=new Gr(n);this.defaultTransitioningPropertyValues[t]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=i.possiblyEvaluate({})}}}xr("DataDrivenProperty",Jr),xr("DataConstantProperty",$r),xr("CrossFadedDataDrivenProperty",Qr),xr("CrossFadedProperty",eo),xr("ColorRampProperty",to);const io="-transition";class ro extends Z{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Kr(t.layout)),t.paint)){this._transitionablePaint=new Zr(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yr(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(yr,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(io)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(gr,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(e.endsWith(io))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],i="cross-faded-data-driven"===n.property.specification["property-type"],r=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const s=this._transitionablePaint._values[e].value;return s.isDataDriven()||r||i||this._handleOverridablePaintPropertyUpdate(e,o,s)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),b(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&_r(this,e.call(pr,{key:t,layerType:this.type,objectKey:n,value:i,styleSpec:H,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Xr&&si(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const oo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class so{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ao{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function lo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;return{members:e.map((e=>{const r=oo[e.type].BYTES_PER_ELEMENT,o=n=co(n,Math.max(t,r)),s=e.components||1;return i=Math.max(i,r),n+=r*s,{name:e.name,type:e.type,components:s,offset:o}})),size:co(n,Math.max(i,t)),alignment:t}}function co(e,t){return Math.ceil(e/t)*t}class uo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.int16[i+0]=t,this.int16[i+1]=n,e}}uo.prototype.bytesPerElement=4,xr("StructArrayLayout2i4",uo);class ho extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.int16[r+0]=t,this.int16[r+1]=n,this.int16[r+2]=i,e}}ho.prototype.bytesPerElement=6,xr("StructArrayLayout3i6",ho);class po extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,e}}po.prototype.bytesPerElement=8,xr("StructArrayLayout4i8",po);class fo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,s){const a=6*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,this.int16[a+4]=o,this.int16[a+5]=s,e}}fo.prototype.bytesPerElement=12,xr("StructArrayLayout2i4i12",fo);class mo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,s){const a=4*e,l=8*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.uint8[l+4]=i,this.uint8[l+5]=r,this.uint8[l+6]=o,this.uint8[l+7]=s,e}}mo.prototype.bytesPerElement=8,xr("StructArrayLayout2i4ub8",mo);class go extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.float32[i+0]=t,this.float32[i+1]=n,e}}go.prototype.bytesPerElement=8,xr("StructArrayLayout2f8",go);class yo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,s,a,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,i,r,o,s,a,l,c)}emplace(e,t,n,i,r,o,s,a,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=s,this.uint16[h+6]=a,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}yo.prototype.bytesPerElement=20,xr("StructArrayLayout10ui20",yo);class _o extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,s,a,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,i,r,o,s,a,l,c,u,h)}emplace(e,t,n,i,r,o,s,a,l,c,u,h,d){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=r,this.uint16[p+4]=o,this.uint16[p+5]=s,this.uint16[p+6]=a,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,e}}_o.prototype.bytesPerElement=24,xr("StructArrayLayout4i4ui4i24",_o);class vo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.float32[r+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}vo.prototype.bytesPerElement=12,xr("StructArrayLayout3f12",vo);class bo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}bo.prototype.bytesPerElement=4,xr("StructArrayLayout1ul4",bo);class xo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,s,a,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,i,r,o,s,a,l)}emplace(e,t,n,i,r,o,s,a,l,c){const u=10*e,h=5*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=i,this.int16[u+3]=r,this.int16[u+4]=o,this.int16[u+5]=s,this.uint32[h+3]=a,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}xo.prototype.bytesPerElement=20,xr("StructArrayLayout6i1ul2ui20",xo);class wo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,s){const a=6*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,this.int16[a+4]=o,this.int16[a+5]=s,e}}wo.prototype.bytesPerElement=12,xr("StructArrayLayout2i2i2i12",wo);class So extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,r)}emplace(e,t,n,i,r,o){const s=4*e,a=8*e;return this.float32[s+0]=t,this.float32[s+1]=n,this.float32[s+2]=i,this.int16[a+6]=r,this.int16[a+7]=o,e}}So.prototype.bytesPerElement=16,xr("StructArrayLayout2f1f2i16",So);class ko extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,s){const a=16*e,l=4*e,c=8*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[l+1]=i,this.float32[l+2]=r,this.int16[c+6]=o,this.int16[c+7]=s,e}}ko.prototype.bytesPerElement=16,xr("StructArrayLayout2ub2f2i16",ko);class Co extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,this.uint16[r+2]=i,e}}Co.prototype.bytesPerElement=6,xr("StructArrayLayout3ui6",Co);class Eo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g)}emplace(e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,y){const _=24*e,v=12*e,b=48*e;return this.int16[_+0]=t,this.int16[_+1]=n,this.uint16[_+2]=i,this.uint16[_+3]=r,this.uint32[v+2]=o,this.uint32[v+3]=s,this.uint32[v+4]=a,this.uint16[_+10]=l,this.uint16[_+11]=c,this.uint16[_+12]=u,this.float32[v+7]=h,this.float32[v+8]=d,this.uint8[b+36]=p,this.uint8[b+37]=f,this.uint8[b+38]=m,this.uint32[v+10]=g,this.int16[_+22]=y,e}}Eo.prototype.bytesPerElement=48,xr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Eo);class To extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v,b,x,w,S,k,C,E,T){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v,b,x,w,S,k,C,E,T)}emplace(e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v,b,x,w,S,k,C,E,T,P){const I=32*e,M=16*e;return this.int16[I+0]=t,this.int16[I+1]=n,this.int16[I+2]=i,this.int16[I+3]=r,this.int16[I+4]=o,this.int16[I+5]=s,this.int16[I+6]=a,this.int16[I+7]=l,this.uint16[I+8]=c,this.uint16[I+9]=u,this.uint16[I+10]=h,this.uint16[I+11]=d,this.uint16[I+12]=p,this.uint16[I+13]=f,this.uint16[I+14]=m,this.uint16[I+15]=g,this.uint16[I+16]=y,this.uint16[I+17]=_,this.uint16[I+18]=v,this.uint16[I+19]=b,this.uint16[I+20]=x,this.uint16[I+21]=w,this.uint16[I+22]=S,this.uint32[M+12]=k,this.float32[M+13]=C,this.float32[M+14]=E,this.uint16[I+30]=T,this.uint16[I+31]=P,e}}To.prototype.bytesPerElement=64,xr("StructArrayLayout8i15ui1ul2f2ui64",To);class Po extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Po.prototype.bytesPerElement=4,xr("StructArrayLayout1f4",Po);class Io extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.uint16[6*e+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}Io.prototype.bytesPerElement=12,xr("StructArrayLayout1ui2f12",Io);class Mo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=4*e;return this.uint32[2*e+0]=t,this.uint16[r+2]=n,this.uint16[r+3]=i,e}}Mo.prototype.bytesPerElement=8,xr("StructArrayLayout1ul2ui8",Mo);class Ao extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,e}}Ao.prototype.bytesPerElement=4,xr("StructArrayLayout2ui4",Ao);class Ro extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Ro.prototype.bytesPerElement=2,xr("StructArrayLayout1ui2",Ro);class zo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,e}}zo.prototype.bytesPerElement=16,xr("StructArrayLayout4f16",zo);class Lo extends so{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new o(this.anchorPointX,this.anchorPointY)}}Lo.prototype.size=20;class Oo extends xo{get(e){return new Lo(this,e)}}xr("CollisionBoxArray",Oo);class Do extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Do.prototype.size=48;class Fo extends Eo{get(e){return new Do(this,e)}}xr("PlacedSymbolArray",Fo);class No extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}No.prototype.size=64;class Bo extends To{get(e){return new No(this,e)}}xr("SymbolInstanceArray",Bo);class jo extends Po{getoffsetX(e){return this.float32[1*e+0]}}xr("GlyphOffsetArray",jo);class Vo extends ho{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}xr("SymbolLineVertexArray",Vo);class Uo extends so{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Uo.prototype.size=12;class qo extends Io{get(e){return new Uo(this,e)}}xr("TextAnchorOffsetArray",qo);class Go extends so{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Go.prototype.size=8;class Zo extends Mo{get(e){return new Go(this,e)}}xr("FeatureIndexArray",Zo);class Ho extends uo{}class Wo extends uo{}class Ko extends uo{}class Xo extends fo{}class Yo extends mo{}class $o extends go{}class Jo extends yo{}class Qo extends _o{}class es extends vo{}class ts extends bo{}class ns extends wo{}class is extends ko{}class rs extends Co{}class os extends Ao{}const ss=lo([{name:"a_pos",components:2,type:"Int16"}],4),{members:as}=ss;class ls{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=e}prepareSegment(e,t,n,i){let r=this.segments[this.segments.length-1];return e>ls.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is ".concat(ls.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e)),(!r||r.vertexLength+e>ls.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,i){return new ls([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}function cs(e,t){return 256*(e=m(Math.floor(e),0,255))+m(Math.floor(t),0,255)}ls.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xr("SegmentVector",ls);const us=lo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var hs={exports:{}},ds={exports:{}};ds.exports=function(e,t){var n,i,r,o,s,a,l,c;for(i=e.length-(n=3&e.length),r=t,s=3432918353,a=461845907,c=0;c<i;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0};var ps=ds.exports,fs={exports:{}};fs.exports=function(e,t){for(var n,i=e.length,r=t^i,o=0;i>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0};var ms=ps,gs=fs.exports;hs.exports=ms,hs.exports.murmur3=ms,hs.exports.murmur2=gs;var ys=n(hs.exports);class _s{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,i){this.ids.push(vs(e)),this.positions.push(t,n,i)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=vs(e);let n=0,i=this.ids.length-1;for(;n<i;){const e=n+i>>1;this.ids[e]>=t?i=e:n=e+1}const r=[];for(;this.ids[n]===t;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r}static serialize(e,t){const n=new Float64Array(e.ids),i=new Uint32Array(e.positions);return bs(n,i,0,n.length-1),t&&t.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(e){const t=new _s;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function vs(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ys(String(e))}function bs(e,t,n,i){for(;n<i;){const r=e[n+i>>1];let o=n-1,s=i+1;for(;;){do{o++}while(e[o]<r);do{s--}while(e[s]>r);if(o>=s)break;xs(e,o,s),xs(t,3*o,3*s),xs(t,3*o+1,3*s+1),xs(t,3*o+2,3*s+2)}s-n<i-s?(bs(e,t,n,s),n=s+1):(bs(e,t,s+1,i),i=s)}}function xs(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}xr("FeaturePositionMap",_s);class ws{constructor(e,t){this.gl=e.gl,this.location=t}}class Ss extends ws{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class ks extends ws{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Cs extends ws{constructor(e,t){super(e,t),this.current=We.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Es=new Float32Array(16);function Ts(e){return[cs(255*e.r,255*e.g),cs(255*e.b,255*e.a)]}class Ps{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>"u_".concat(e))),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new Cs(e,t):new Ss(e,t)}}class Is{constructor(e,t){this.uniformNames=t.map((e=>"u_".concat(e))),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,n,i){const r="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&e.set(r)}getBinding(e,t,n){return"u_pattern"===n.substr(0,9)?new ks(e,t):new Ss(e,t)}}class Ms{constructor(e,t,n,i){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:"a_".concat(e),type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(e,t,n,i,r){const o=this.paintVertexArray.length,s=this.expression.evaluate(new Ur(0),t,{},i,[],r);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}updatePaintArray(e,t,n,i){const r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(e,t,r)}_setPaintValue(e,t,n){if("color"===this.type){const i=Ts(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class As{constructor(e,t,n,i,r,o){this.expression=e,this.uniformNames=t.map((e=>"u_".concat(e,"_t"))),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:"a_".concat(e),type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,i,r){const o=this.expression.evaluate(new Ur(this.zoom),t,{},i,[],r),s=this.expression.evaluate(new Ur(this.zoom+1),t,{},i,[],r),a=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(a,e,o,s)}updatePaintArray(e,t,n,i){const r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(e,t,r,o)}_setPaintValue(e,t,n,i){if("color"===this.type){const r=Ts(n),o=Ts(i);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1],o[0],o[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,i=m(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(i)}getBinding(e,t,n){return new Ss(e,t)}}class Rs{constructor(e,t,n,i,r,o){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r}populatePaintArray(e,t,n){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(i,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,i,r){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],r)}_setPaintValues(e,t,n,i){if(!i||!n)return;const{min:r,mid:o,max:s}=n,a=i[r],l=i[o],c=i[s];if(a&&l&&c)for(let u=e;u<t;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],l.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,us.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,us.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zs{constructor(e,t,n){this.binders={},this._buffers=[];const i=[];for(const r in e.paint._values){if(!n(r))continue;const o=e.paint.get(r);if(!(o instanceof Xr&&si(o.property.specification)))continue;const s=Os(r,e.type),a=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===a.kind)this.binders[r]=h?new Is(a.value,s):new Ps(a.value,s,l),i.push("/u_".concat(r));else if("source"===a.kind||h){const n=Ds(r,l,"source");this.binders[r]=h?new Rs(a,l,c,t,n,e.id):new Ms(a,s,l,n),i.push("/a_".concat(r))}else{const e=Ds(r,l,"composite");this.binders[r]=new As(a,s,l,c,t,e),i.push("/z_".concat(r))}}this.cacheKey=i.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Ms||t instanceof As?t.maxValue:0}populatePaintArrays(e,t,n,i,r){for(const o in this.binders){const s=this.binders[o];(s instanceof Ms||s instanceof As||s instanceof Rs)&&s.populatePaintArray(e,t,n,i,r)}}setConstantPatternPositions(e,t){for(const n in this.binders){const i=this.binders[n];i instanceof Is&&i.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,n,i,r){let o=!1;for(const s in e){const a=t.getPositions(s);for(const t of a){const a=n.feature(t.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof Ms||l instanceof As||l instanceof Rs)&&!0===l.expression.isStateDependent){const c=i.paint.get(n);l.expression=c.value,l.updatePaintArray(t.start,t.end,a,e[s],r),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Ps||n instanceof Is)&&e.push(...n.uniformNames.map((e=>"#define HAS_UNIFORM_".concat(e))))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Ms||n instanceof As)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name);else if(n instanceof Rs)for(let t=0;t<us.members.length;t++)e.push(us.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Ps||n instanceof Is||n instanceof As)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const i in this.binders){const r=this.binders[i];if(r instanceof Ps||r instanceof Is||r instanceof As)for(const o of r.uniformNames)if(t[o]){const s=r.getBinding(e,t[o],o);n.push({name:o,property:i,binding:s})}}return n}setUniforms(e,t,n,i){for(const{name:r,property:o,binding:s}of t)this.binders[o].setUniform(s,i,n.get(o),r)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof Rs){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof Ms||n instanceof As)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof Ms||n instanceof As||n instanceof Rs)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Ms||t instanceof As||t instanceof Rs)&&t.destroy()}}}class Ls{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const i of e)this.programConfigurations[i.id]=new zs(i,t,n);this.needsUpload=!1,this._featureMap=new _s,this._bufferOffset=0}populatePaintArrays(e,t,n,i,r,o){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,i,r,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,i){for(const r of n)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(e,this._featureMap,t,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Os(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}function Ds(e,t,n){const i={color:{source:go,composite:zo},number:{source:Po,composite:go}},r=function(e){return{"line-pattern":{source:Jo,composite:Jo},"fill-pattern":{source:Jo,composite:Jo},"fill-extrusion-pattern":{source:Jo,composite:Jo}}[e]}(e);return r&&r[n]||i[t][n]}xr("ConstantBinder",Ps),xr("CrossFadedConstantBinder",Is),xr("SourceExpressionBinder",Ms),xr("CrossFadedCompositeBinder",Rs),xr("CompositeExpressionBinder",As),xr("ProgramConfiguration",zs,{omit:["_buffers"]}),xr("ProgramConfigurationSet",Ls);const Fs=8192,Ns=Math.pow(2,14)-1,Bs=-Ns-1;function js(e){const t=Fs/e.extent,n=e.loadGeometry();for(let i=0;i<n.length;i++){const e=n[i];for(let n=0;n<e.length;n++){const i=e[n],r=Math.round(i.x*t),o=Math.round(i.y*t);i.x=m(r,Bs,Ns),i.y=m(o,Bs,Ns),(r<i.x||r>i.x+1||o<i.y||o>i.y+1)&&S("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Vs(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?js(e):[]}}function Us(e,t,n,i,r){e.emplaceBack(2*t+(i+1)/2,2*n+(r+1)/2)}class qs{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Wo,this.indexArray=new rs,this.segments=new ls,this.programConfigurations=new Ls(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){const i=this.layers[0],r=[];let o=null,s=!1;"circle"===i.type&&(o=i.layout.get("circle-sort-key"),s=!o.isConstant());for(const{feature:a,id:l,index:c,sourceLayerIndex:u}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Vs(a,e);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),t,n))continue;const i=s?o.evaluate(t,{},n):void 0,h={id:l,properties:a.properties,type:a.type,sourceLayerIndex:u,index:c,geometry:e?t.geometry:js(a),patterns:{},sortKey:i};r.push(h)}s&&r.sort(((e,t)=>e.sortKey-t.sortKey));for(const a of r){const{geometry:i,index:r,sourceLayerIndex:o}=a,s=e[r].feature;this.addFeature(a,i,r,n),t.featureIndex.insert(s,i,r,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,as),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,i){for(const r of t)for(const t of r){const n=t.x,i=t.y;if(n<0||n>=Fs||i<0||i>=Fs)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=r.vertexLength;Us(this.layoutVertexArray,n,i,-1,-1),Us(this.layoutVertexArray,n,i,1,-1),Us(this.layoutVertexArray,n,i,1,1),Us(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},i)}}function Gs(e,t){for(let n=0;n<e.length;n++)if(Qs(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Qs(e,t[n]))return!0;return!!Ks(e,t)}function Zs(e,t,n){return!!Qs(e,t)||!!Ys(t,e,n)}function Hs(e,t){if(1===e.length)return Js(t,e[0]);for(let n=0;n<t.length;n++){const i=t[n];for(let t=0;t<i.length;t++)if(Qs(e,i[t]))return!0}for(let n=0;n<e.length;n++)if(Js(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Ks(e,t[n]))return!0;return!1}function Ws(e,t,n){if(e.length>1){if(Ks(e,t))return!0;for(let i=0;i<t.length;i++)if(Ys(t[i],e,n))return!0}for(let i=0;i<e.length;i++)if(Ys(e[i],t,n))return!0;return!1}function Ks(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const i=e[n],r=e[n+1];for(let e=0;e<t.length-1;e++)if(Xs(i,r,t[e],t[e+1]))return!0}return!1}function Xs(e,t,n,i){return k(e,n,i)!==k(t,n,i)&&k(e,t,n)!==k(e,t,i)}function Ys(e,t,n){const i=n*n;if(1===t.length)return e.distSqr(t[0])<i;for(let r=1;r<t.length;r++)if($s(e,t[r-1],t[r])<i)return!0;return!1}function $s(e,t,n){const i=t.distSqr(n);if(0===i)return e.distSqr(t);const r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;return e.distSqr(r<0?t:r>1?n:n.sub(t)._mult(r)._add(t))}function Js(e,t){let n,i,r,o=!1;for(let s=0;s<e.length;s++){n=e[s];for(let e=0,s=n.length-1;e<n.length;s=e++)i=n[e],r=n[s],i.y>t.y!=r.y>t.y&&t.x<(r.x-i.x)*(t.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function Qs(e,t){let n=!1;for(let i=0,r=e.length-1;i<e.length;r=i++){const o=e[i],s=e[r];o.y>t.y!=s.y>t.y&&t.x<(s.x-o.x)*(t.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}function ea(e,t,n){const i=n[0],r=n[2];if(e.x<i.x&&t.x<i.x||e.x>r.x&&t.x>r.x||e.y<i.y&&t.y<i.y||e.y>r.y&&t.y>r.y)return!1;const o=k(e,t,n[0]);return o!==k(e,t,n[1])||o!==k(e,t,n[2])||o!==k(e,t,n[3])}function ta(e,t,n){const i=t.paint.get(e).value;return"constant"===i.kind?i.value:n.programConfigurations.get(t.id).getMaxValue(e)}function na(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ia(e,t,n,i,r){if(!t[0]&&!t[1])return e;const s=o.convert(t)._mult(r);"viewport"===n&&s._rotate(-i);const a=[];for(let o=0;o<e.length;o++)a.push(e[o].sub(s));return a}let ra,oa;xr("CircleBucket",qs,{omit:["layers"]});var sa={get paint(){return oa=oa||new no({"circle-radius":new Jr(H.paint_circle["circle-radius"]),"circle-color":new Jr(H.paint_circle["circle-color"]),"circle-blur":new Jr(H.paint_circle["circle-blur"]),"circle-opacity":new Jr(H.paint_circle["circle-opacity"]),"circle-translate":new $r(H.paint_circle["circle-translate"]),"circle-translate-anchor":new $r(H.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $r(H.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $r(H.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jr(H.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jr(H.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jr(H.paint_circle["circle-stroke-opacity"])})},get layout(){return ra=ra||new no({"circle-sort-key":new Jr(H.layout_circle["circle-sort-key"])})}},aa=1e-6,la="undefined"!=typeof Float32Array?Float32Array:Array;function ca(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ua(e,t,n){var i=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],_=t[15],v=n[0],b=n[1],x=n[2],w=n[3];return e[0]=v*i+b*a+x*h+w*m,e[1]=v*r+b*l+x*d+w*g,e[2]=v*o+b*c+x*p+w*y,e[3]=v*s+b*u+x*f+w*_,e[4]=(v=n[4])*i+(b=n[5])*a+(x=n[6])*h+(w=n[7])*m,e[5]=v*r+b*l+x*d+w*g,e[6]=v*o+b*c+x*p+w*y,e[7]=v*s+b*u+x*f+w*_,e[8]=(v=n[8])*i+(b=n[9])*a+(x=n[10])*h+(w=n[11])*m,e[9]=v*r+b*l+x*d+w*g,e[10]=v*o+b*c+x*p+w*y,e[11]=v*s+b*u+x*f+w*_,e[12]=(v=n[12])*i+(b=n[13])*a+(x=n[14])*h+(w=n[15])*m,e[13]=v*r+b*l+x*d+w*g,e[14]=v*o+b*c+x*p+w*y,e[15]=v*s+b*u+x*f+w*_,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ha,da=ua;function pa(e,t,n){var i=t[0],r=t[1],o=t[2],s=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,e[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,e[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,e[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,e}ha=new la(4),la!=Float32Array&&(ha[0]=0,ha[1]=0,ha[2]=0,ha[3]=0);class fa extends ro{constructor(e){super(e,sa)}createBucket(e){return new qs(e)}queryRadius(e){const t=e;return ta("circle-radius",this,t)+ta("circle-stroke-width",this,t)+na(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,i,r,o,s,a){const l=ia(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,s),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(e,t){return e.map((e=>ma(e,t)))}(l,a),d=u?c*s:c;for(const p of i)for(const e of p){const t=u?e:ma(e,a);let n=d;const i=pa([],[e.x,e.y,0,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=i[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=o.cameraToCenterDistance/i[3]),Zs(h,t,n))return!0}return!1}}function ma(e,t){const n=pa([],[e.x,e.y,0,1],t);return new o(n[0]/n[3],n[1]/n[3])}class ga extends qs{}let ya;xr("HeatmapBucket",ga,{omit:["layers"]});var _a={get paint(){return ya=ya||new no({"heatmap-radius":new Jr(H.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jr(H.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $r(H.paint_heatmap["heatmap-intensity"]),"heatmap-color":new to(H.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $r(H.paint_heatmap["heatmap-opacity"])})}};function va(e,t,n,i){let{width:r,height:o}=t;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*o*n)throw new RangeError("mismatched image size. expected: ".concat(i.length," but got: ").concat(r*o*n))}else i=new Uint8Array(r*o*n);return e.width=r,e.height=o,e.data=i,e}function ba(e,t,n){let{width:i,height:r}=t;if(i===e.width&&r===e.height)return;const o=va({},{width:i,height:r},n);xa(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,r)},n),e.width=i,e.height=r,e.data=o.data}function xa(e,t,n,i,r,o){if(0===r.width||0===r.height)return t;if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const s=e.data,a=t.data;if(s===a)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<r.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((i.y+l)*t.width+i.x)*o;for(let e=0;e<r.width*o;e++)a[u+e]=s[c+e]}return t}class wa{constructor(e,t){va(this,e,1,t)}resize(e){ba(this,e,1)}clone(){return new wa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,r){xa(e,t,n,i,r,1)}}class Sa{constructor(e,t){va(this,e,4,t)}resize(e){ba(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Sa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,r){xa(e,t,n,i,r,4)}}function ka(e){const t={},n=e.resolution||256,i=e.clips?e.clips.length:1,r=e.image||new Sa({width:n,height:i});if(Math.log(n)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - ".concat(n));const o=(n,i,o)=>{t[e.evaluationKey]=o;const s=e.expression.evaluate(t);r.data[n+i+0]=Math.floor(255*s.r/s.a),r.data[n+i+1]=Math.floor(255*s.g/s.a),r.data[n+i+2]=Math.floor(255*s.b/s.a),r.data[n+i+3]=Math.floor(255*s.a)};if(e.clips)for(let s=0,a=0;s<i;++s,a+=4*n)for(let t=0,i=0;t<n;t++,i+=4){const r=t/(n-1),{start:l,end:c}=e.clips[s];o(a,i,l*(1-r)+c*r)}else for(let s=0,a=0;s<n;s++,a+=4)o(0,a,s/(n-1));return r}xr("AlphaImage",wa),xr("RGBAImage",Sa);class Ca extends ro{createBucket(e){return new ga(e)}constructor(e){super(e,_a),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ka({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Ea;var Ta={get paint(){return Ea=Ea||new no({"hillshade-illumination-direction":new $r(H.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new $r(H.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $r(H.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $r(H.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $r(H.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $r(H.paint_hillshade["hillshade-accent-color"])})}};class Pa extends ro{constructor(e){super(e,Ta)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const Ia=lo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ma}=Ia;function Aa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=Ra(e,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(i&&(o=function(e,t,n,i){const r=[];for(let o=0,s=t.length;o<s;o++){const n=Ra(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i,!1);n===n.next&&(n.steiner=!0),r.push(qa(n))}r.sort(Ba);for(let o=0;o<r.length;o++)n=ja(r[o],n);return n}(e,t,o,n)),e.length>80*n){a=1/0,l=1/0;let t=-1/0,i=-1/0;for(let o=n;o<r;o+=n){const n=e[o],r=e[o+1];n<a&&(a=n),r<l&&(l=r),n>t&&(t=n),r>i&&(i=r)}c=Math.max(t-a,i-l),c=0!==c?32767/c:0}return La(o,s,n,a,l,c,0),s}function Ra(e,t,n,i,r){let o;if(r===function(e,t,n,i){let r=0;for(let o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,n,i)>0)for(let s=t;s<n;s+=i)o=Qa(s/i|0,e[s],e[s+1],o);else for(let s=n-i;s>=t;s-=i)o=Qa(s/i|0,e[s],e[s+1],o);return o&&Wa(o,o.next)&&(el(o),o=o.next),o}function za(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!Wa(i,i.next)&&0!==Ha(i.prev,i,i.next))i=i.next;else{if(el(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function La(e,t,n,i,r,o,s){if(!e)return;!s&&o&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=Ua(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n=1;do{let i,r=e;e=null;let o=null;for(t=0;r;){t++;let s=r,a=0;for(let e=0;e<n&&(a++,s=s.nextZ,s);e++);let l=n;for(;a>0||l>0&&s;)0!==a&&(0===l||!s||r.z<=s.z)?(i=r,r=r.nextZ,a--):(i=s,s=s.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=s}o.nextZ=null,n*=2}while(t>1)}(r)}(e,i,r,o);let a=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(o?Da(e,i,r,o):Oa(e))t.push(l.i,e.i,c.i),el(e),e=c.next,a=c.next;else if((e=c)===a){s?1===s?La(e=Fa(za(e),t),t,n,i,r,o,2):2===s&&Na(e,t,n,i,r,o):La(za(e),t,n,i,r,o,1);break}}}function Oa(e){const t=e.prev,n=e,i=e.next;if(Ha(t,n,i)>=0)return!1;const r=t.x,o=n.x,s=i.x,a=t.y,l=n.y,c=i.y,u=r<o?r<s?r:s:o<s?o:s,h=a<l?a<c?a:c:l<c?l:c,d=r>o?r>s?r:s:o>s?o:s,p=a>l?a>c?a:c:l>c?l:c;let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&Ga(r,a,o,l,s,c,f.x,f.y)&&Ha(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Da(e,t,n,i){const r=e.prev,o=e,s=e.next;if(Ha(r,o,s)>=0)return!1;const a=r.x,l=o.x,c=s.x,u=r.y,h=o.y,d=s.y,p=a<l?a<c?a:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=a>l?a>c?a:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,y=Ua(p,f,t,n,i),_=Ua(m,g,t,n,i);let v=e.prevZ,b=e.nextZ;for(;v&&v.z>=y&&b&&b.z<=_;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==r&&v!==s&&Ga(a,u,l,h,c,d,v.x,v.y)&&Ha(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==s&&Ga(a,u,l,h,c,d,b.x,b.y)&&Ha(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;v&&v.z>=y;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==r&&v!==s&&Ga(a,u,l,h,c,d,v.x,v.y)&&Ha(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;b&&b.z<=_;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==s&&Ga(a,u,l,h,c,d,b.x,b.y)&&Ha(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Fa(e,t){let n=e;do{const i=n.prev,r=n.next.next;!Wa(i,r)&&Ka(i,n,n.next,r)&&$a(i,r)&&$a(r,i)&&(t.push(i.i,n.i,r.i),el(n),el(n.next),n=e=r),n=n.next}while(n!==e);return za(n)}function Na(e,t,n,i,r,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Za(s,e)){let a=Ja(s,e);return s=za(s,s.next),a=za(a,a.next),La(s,t,n,i,r,o,0),void La(a,t,n,i,r,o,0)}e=e.next}s=s.next}while(s!==e)}function Ba(e,t){return e.x-t.x}function ja(e,t){const n=function(e,t){let n=t;const i=e.x,r=e.y;let o,s=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>s&&(s=e,o=n.x<n.next.x?n:n.next,e===i))return o}n=n.next}while(n!==t);if(!o)return null;const a=o,l=o.x,c=o.y;let u=1/0;n=o;do{if(i>=n.x&&n.x>=l&&i!==n.x&&Ga(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)){const t=Math.abs(r-n.y)/(i-n.x);$a(n,e)&&(t<u||t===u&&(n.x>o.x||n.x===o.x&&Va(o,n)))&&(o=n,u=t)}n=n.next}while(n!==a);return o}(e,t);if(!n)return t;const i=Ja(n,e);return za(i,i.next),za(n,n.next)}function Va(e,t){return Ha(e.prev,e,t.prev)<0&&Ha(t.next,e,e.next)<0}function Ua(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function qa(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ga(e,t,n,i,r,o,s,a){return(r-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function Za(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ka(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&($a(e,t)&&$a(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Ha(e.prev,e,t.prev)||Ha(e,t.prev,t))||Wa(e,t)&&Ha(e.prev,e,e.next)>0&&Ha(t.prev,t,t.next)>0)}function Ha(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Wa(e,t){return e.x===t.x&&e.y===t.y}function Ka(e,t,n,i){const r=Ya(Ha(e,t,n)),o=Ya(Ha(e,t,i)),s=Ya(Ha(n,i,e)),a=Ya(Ha(n,i,t));return r!==o&&s!==a||!(0!==r||!Xa(e,n,t))||!(0!==o||!Xa(e,i,t))||!(0!==s||!Xa(n,e,i))||!(0!==a||!Xa(n,t,i))}function Xa(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ya(e){return e>0?1:e<0?-1:0}function $a(e,t){return Ha(e.prev,e,e.next)<0?Ha(e,t,e.next)>=0&&Ha(e,e.prev,t)>=0:Ha(e,t,e.prev)<0||Ha(e,e.next,t)<0}function Ja(e,t){const n=tl(e.i,e.x,e.y),i=tl(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Qa(e,t,n,i){const r=tl(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function el(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function tl(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function nl(e,t,n){const i=n.patternDependencies;let r=!1;for(const o of t){const t=o.paint.get("".concat(e,"-pattern"));t.isConstant()||(r=!0);const n=t.constantOr(null);n&&(r=!0,i[n.to]=!0,i[n.from]=!0)}return r}function il(e,t,n,i,r){const o=r.patternDependencies;for(const s of t){const t=s.paint.get("".concat(e,"-pattern")).value;if("constant"!==t.kind){let e=t.evaluate({zoom:i-1},n,{},r.availableImages),a=t.evaluate({zoom:i},n,{},r.availableImages),l=t.evaluate({zoom:i+1},n,{},r.availableImages);e=e&&e.name?e.name:e,a=a&&a.name?a.name:a,l=l&&l.name?l.name:l,o[e]=!0,o[a]=!0,o[l]=!0,n.patterns[s.id]={min:e,mid:a,max:l}}}return n}class rl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ko,this.indexArray=new rs,this.indexArray2=new os,this.programConfigurations=new Ls(e.layers,e.zoom),this.segments=new ls,this.segments2=new ls,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.hasPattern=nl("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),r=!i.isConstant(),o=[];for(const{feature:s,id:a,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Vs(s,e);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),u,n))continue;const h=r?i.evaluate(u,{},n,t.availableImages):void 0,d={id:a,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:js(s),patterns:{},sortKey:h};o.push(d)}r&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const s of o){const{geometry:i,index:r,sourceLayerIndex:o}=s;if(this.hasPattern){const e=il("fill",this.layers,s,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(s,i,r,n,{});t.featureIndex.insert(e[r].feature,i,r,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ma),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,i,r){for(const o of vn(t,500)){let e=0;for(const a of o)e+=a.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=t.vertexLength,i=[],r=[];for(const a of o){if(0===a.length)continue;a!==o[0]&&r.push(i.length/2);const e=this.segments2.prepareSegment(a.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(a[0].x,a[0].y),this.indexArray2.emplaceBack(t+a.length-1,t),i.push(a[0].x),i.push(a[0].y);for(let n=1;n<a.length;n++)this.layoutVertexArray.emplaceBack(a[n].x,a[n].y),this.indexArray2.emplaceBack(t+n-1,t+n),i.push(a[n].x),i.push(a[n].y);e.vertexLength+=a.length,e.primitiveLength+=a.length}const s=Aa(i,r);for(let o=0;o<s.length;o+=3)this.indexArray.emplaceBack(n+s[o],n+s[o+1],n+s[o+2]);t.vertexLength+=e,t.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}}let ol,sl;xr("FillBucket",rl,{omit:["layers","patternFeatures"]});var al={get paint(){return sl=sl||new no({"fill-antialias":new $r(H.paint_fill["fill-antialias"]),"fill-opacity":new Jr(H.paint_fill["fill-opacity"]),"fill-color":new Jr(H.paint_fill["fill-color"]),"fill-outline-color":new Jr(H.paint_fill["fill-outline-color"]),"fill-translate":new $r(H.paint_fill["fill-translate"]),"fill-translate-anchor":new $r(H.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qr(H.paint_fill["fill-pattern"])})},get layout(){return ol=ol||new no({"fill-sort-key":new Jr(H.layout_fill["fill-sort-key"])})}};class ll extends ro{constructor(e){super(e,al)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new rl(e)}queryRadius(){return na(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,i,r,o,s){return Hs(ia(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,s),i)}isTileClipped(){return!0}}const cl=lo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ul=lo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hl}=cl;var dl={},pl=i,fl=ml;function ml(e,t,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=r,e.readFields(gl,this,t)}function gl(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var i=t._keys[e.readVarint()],r=t._values[e.readVarint()];t.properties[i]=r}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function yl(e){for(var t,n,i=0,r=0,o=e.length,s=o-1;r<o;s=r++)i+=((n=e[s]).x-(t=e[r]).x)*(t.y+n.y);return i}ml.types=["Unknown","Point","LineString","Polygon"],ml.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,r=0,o=0,s=0,a=[];e.pos<n;){if(r<=0){var l=e.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)o+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&a.push(t),t=[]),t.push(new pl(o,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&a.push(t),a},ml.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,i=0,r=0,o=0,s=1/0,a=-1/0,l=1/0,c=-1/0;e.pos<t;){if(i<=0){var u=e.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)(r+=e.readSVarint())<s&&(s=r),r>a&&(a=r),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[s,l,a,c]},ml.prototype.toGeoJSON=function(e,t,n){var i,r,o=this.extent*Math.pow(2,n),s=this.extent*e,a=this.extent*t,l=this.loadGeometry(),c=ml.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+s)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+a)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];u(l=h);break;case 2:for(i=0;i<l.length;i++)u(l[i]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,i,r=[],o=0;o<t;o++){var s=yl(e[o]);0!==s&&(void 0===i&&(i=s<0),i===s<0?(n&&r.push(n),n=[e[o]]):n.push(e[o]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)u(l[i][r])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var _l=fl,vl=bl;function bl(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(xl,this,t),this.length=this._features.length}function xl(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(n))}bl.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new _l(this._pbf,t,this.extent,this._keys,this._values)};var wl=vl;function Sl(e,t,n){if(3===e){var i=new wl(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}dl.VectorTile=function(e,t){this.layers=e.readFields(Sl,{},t)},dl.VectorTileFeature=fl,dl.VectorTileLayer=vl;const kl=dl.VectorTileFeature.types,Cl=Math.pow(2,13);function El(e,t,n,i,r,o,s,a){e.emplaceBack(t,n,2*Math.floor(i*Cl)+s,r*Cl*2,o*Cl*2,Math.round(a))}class Tl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Xo,this.centroidVertexArray=new Ho,this.indexArray=new rs,this.programConfigurations=new Ls(e.layers,e.zoom),this.segments=new ls,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.features=[],this.hasPattern=nl("fill-extrusion",this.layers,t);for(const{feature:i,id:r,index:o,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,a=Vs(i,e);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),a,n))continue;const l={id:r,sourceLayerIndex:s,index:o,geometry:e?a.geometry:js(i),properties:i.properties,type:i.type,patterns:{}};this.hasPattern?this.features.push(il("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,n,{}),t.featureIndex.insert(i,l.geometry,o,s,this.index,!0)}}addFeatures(e,t,n){for(const i of this.features){const{geometry:e}=i;this.addFeature(i,e,i.index,t,n)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hl),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,ul.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,n,i,r){for(const o of vn(t,500)){const t={x:0,y:0,vertexCount:0};let n=0;for(const e of o)n+=e.length;let i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const e of o){if(0===e.length)continue;if(Il(e))continue;let n=0;for(let r=0;r<e.length;r++){const o=e[r];if(r>=1){const s=e[r-1];if(!Pl(o,s)){i.vertexLength+4>ls.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=o.sub(s)._perp()._unit(),r=s.dist(o);n+r>32768&&(n=0),El(this.layoutVertexArray,o.x,o.y,e.x,e.y,0,0,n),El(this.layoutVertexArray,o.x,o.y,e.x,e.y,0,1,n),t.x+=2*o.x,t.y+=2*o.y,t.vertexCount+=2,n+=r,El(this.layoutVertexArray,s.x,s.y,e.x,e.y,0,0,n),El(this.layoutVertexArray,s.x,s.y,e.x,e.y,0,1,n),t.x+=2*s.x,t.y+=2*s.y,t.vertexCount+=2;const a=i.vertexLength;this.indexArray.emplaceBack(a,a+2,a+1),this.indexArray.emplaceBack(a+1,a+2,a+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+n>ls.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(n,this.layoutVertexArray,this.indexArray)),"Polygon"!==kl[e.type])continue;const r=[],s=[],a=i.vertexLength;for(const e of o)if(0!==e.length){e!==o[0]&&s.push(r.length/2);for(let n=0;n<e.length;n++){const i=e[n];El(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),t.x+=i.x,t.y+=i.y,t.vertexCount+=1,r.push(i.x),r.push(i.y)}}const l=Aa(r,s);for(let e=0;e<l.length;e+=3)this.indexArray.emplaceBack(a+l[e],a+l[e+2],a+l[e+1]);i.primitiveLength+=l.length/3,i.vertexLength+=n;for(let e=0;e<t.vertexCount;e++){const e=Math.floor(t.x/t.vertexCount),n=Math.floor(t.y/t.vertexCount);this.centroidVertexArray.emplaceBack(e,n)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}}function Pl(e,t){return e.x===t.x&&(e.x<0||e.x>Fs)||e.y===t.y&&(e.y<0||e.y>Fs)}function Il(e){return e.every((e=>e.x<0))||e.every((e=>e.x>Fs))||e.every((e=>e.y<0))||e.every((e=>e.y>Fs))}let Ml;xr("FillExtrusionBucket",Tl,{omit:["layers","features"]});var Al={get paint(){return Ml=Ml||new no({"fill-extrusion-opacity":new $r(H["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jr(H["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $r(H["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $r(H["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qr(H["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Jr(H["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jr(H["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $r(H["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Rl extends ro{constructor(e){super(e,Al)}createBucket(e){return new Tl(e)}queryRadius(){return na(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,n,i,r,s,a,l){const c=ia(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,a),u=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),d=function(e,t,n,i){const r=[];for(const s of e){const e=[s.x,s.y,0,1];pa(e,e,t),r.push(new o(e[0]/e[3],e[1]/e[3]))}return r}(c,l),p=function(e,t,n,i){const r=[],s=[],a=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,h=i[8]*n,d=i[9]*n,p=i[10]*n,f=i[11]*n;for(const m of e){const e=[],t=[];for(const n of m){const r=n.x,s=n.y,m=i[0]*r+i[4]*s+i[12],g=i[1]*r+i[5]*s+i[13],y=i[2]*r+i[6]*s+i[14],_=i[3]*r+i[7]*s+i[15],v=y+c,b=_+u,x=m+h,w=g+d,S=y+p,k=_+f,C=new o((m+a)/b,(g+l)/b);C.z=v/b,e.push(C);const E=new o(x/k,w/k);E.z=S/k,t.push(E)}r.push(e),s.push(t)}return[r,s]}(i,h,u,l);return function(e,t,n){let i=1/0;Hs(n,t)&&(i=Ll(n,t[0]));for(let r=0;r<t.length;r++){const o=t[r],s=e[r];for(let e=0;e<o.length-1;e++){const t=o[e],r=[t,o[e+1],s[e+1],s[e],t];Gs(n,r)&&(i=Math.min(i,Ll(n,r)))}}return i!==1/0&&i}(p[0],p[1],d)}}function zl(e,t){return e.x*t.x+e.y*t.y}function Ll(e,t){if(1===e.length){let n=0;const i=t[n++];let r;for(;!r||i.equals(r);)if(r=t[n++],!r)return 1/0;for(;n<t.length;n++){const o=t[n],s=e[0],a=r.sub(i),l=o.sub(i),c=s.sub(i),u=zl(a,a),h=zl(a,l),d=zl(l,l),p=zl(c,a),f=zl(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,_=i.z*(1-g-y)+r.z*g+o.z*y;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}const Ol=lo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Dl}=Ol,Fl=lo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Nl}=Fl,Bl=dl.VectorTileFeature.types,jl=Math.cos(Math.PI/180*37.5),Vl=Math.pow(2,14)/.5;class Ul{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Yo,this.layoutVertexArray2=new $o,this.indexArray=new rs,this.programConfigurations=new Ls(e.layers,e.zoom),this.segments=new ls,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.hasPattern=nl("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),r=!i.isConstant(),o=[];for(const{feature:s,id:a,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Vs(s,e);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),t,n))continue;const u=r?i.evaluate(t,{},n):void 0,h={id:a,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:e?t.geometry:js(s),patterns:{},sortKey:u};o.push(h)}r&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const s of o){const{geometry:i,index:r,sourceLayerIndex:o}=s;if(this.hasPattern){const e=il("line",this.layers,s,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(s,i,r,n,{});t.featureIndex.insert(e[r].feature,i,r,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Nl)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Dl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,i,r){const o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),a=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const u of t)this.addLine(u,e,s,a,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}addLine(e,t,n,i,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const s="Polygon"===Bl[t.type];let a=e.length;for(;a>=2&&e[a-1].equals(e[a-2]);)a--;let l=0;for(;l<a-1&&e[l].equals(e[l+1]);)l++;if(a<(s?3:2))return;"bevel"===n&&(r=1.05);const c=this.overscaling<=16?15*Fs/(512*this.overscaling):0,u=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,s&&(h=e[a-2],m=e[l].sub(h)._unit()._perp());for(let g=l;g<a;g++){if(p=g===a-1?s?e[l+1]:void 0:e[g+1],p&&e[g].equals(p))continue;m&&(f=m),h&&(d=h),h=e[g],m=p?p.sub(h)._unit()._perp():f,f=f||m;let t=f.add(m);0===t.x&&0===t.y||t._unit();const y=f.x*m.x+f.y*m.y,_=t.x*m.x+t.y*m.y,v=0!==_?1/_:1/0,b=2*Math.sqrt(2-2*_),x=_<jl&&d&&p,w=f.x*m.y-f.y*m.x>0;if(x&&g>l){const e=h.dist(d);if(e>2*c){const t=h.sub(h.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,f,0,0,u),d=t}}const S=d&&p;let k=S?n:s?"butt":i;if(S&&"round"===k&&(v<o?k="miter":v<=2&&(k="fakeround")),"miter"===k&&v>r&&(k="bevel"),"bevel"===k&&(v>2&&(k="flipbevel"),v<r&&(k="miter")),d&&this.updateDistance(d,h),"miter"===k)t._mult(v),this.addCurrentVertex(h,t,0,0,u);else if("flipbevel"===k){if(v>100)t=m.mult(-1);else{const e=v*f.add(m).mag()/f.sub(m).mag();t._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(h,t,0,0,u),this.addCurrentVertex(h,t.mult(-1),0,0,u)}else if("bevel"===k||"fakeround"===k){const e=-Math.sqrt(v*v-1),t=w?e:0,n=w?0:e;if(d&&this.addCurrentVertex(h,f,t,n,u),"fakeround"===k){const e=Math.round(180*b/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const i=m.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,i.x,i.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-t,-n,u)}else if("butt"===k)this.addCurrentVertex(h,t,0,0,u);else if("square"===k){const e=d?1:-1;this.addCurrentVertex(h,t,e,e,u)}else"round"===k&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&g<a-1){const e=h.dist(p);if(e>2*c){const t=h.add(p.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=t.y*i-t.x,a=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,r),this.addHalfVertex(e,s,a,o,!0,-i,r),this.distance>Vl/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,n,i,r,o))}addHalfVertex(e,t,n,i,r,o,s){let{x:a,y:l}=e;const c=.5*(this.lineClips?this.scaledDistance*(Vl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(i?1:0),(l<<1)+(r?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),s.primitiveLength++),r?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}let ql,Gl;xr("LineBucket",Ul,{omit:["layers","patternFeatures"]});var Zl={get paint(){return Gl=Gl||new no({"line-opacity":new Jr(H.paint_line["line-opacity"]),"line-color":new Jr(H.paint_line["line-color"]),"line-translate":new $r(H.paint_line["line-translate"]),"line-translate-anchor":new $r(H.paint_line["line-translate-anchor"]),"line-width":new Jr(H.paint_line["line-width"]),"line-gap-width":new Jr(H.paint_line["line-gap-width"]),"line-offset":new Jr(H.paint_line["line-offset"]),"line-blur":new Jr(H.paint_line["line-blur"]),"line-dasharray":new eo(H.paint_line["line-dasharray"]),"line-pattern":new Qr(H.paint_line["line-pattern"]),"line-gradient":new to(H.paint_line["line-gradient"])})},get layout(){return ql=ql||new no({"line-cap":new $r(H.layout_line["line-cap"]),"line-join":new Jr(H.layout_line["line-join"]),"line-miter-limit":new $r(H.layout_line["line-miter-limit"]),"line-round-limit":new $r(H.layout_line["line-round-limit"]),"line-sort-key":new Jr(H.layout_line["line-sort-key"])})}};class Hl extends Jr{possiblyEvaluate(e,t){return t=new Ur(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,i){return t=y({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,i)}}let Wl;class Kl extends ro{constructor(e){super(e,Zl),this.gradientVersion=0,Wl||(Wl=new Hl(Zl.paint.properties["line-width"].specification),Wl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this.gradientExpression();this.stepInterpolant=!!function(e){return void 0!==e._styleExpression}(e)&&e._styleExpression.expression instanceof St,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Wl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Ul(e)}queryRadius(e){const t=e,n=Xl(ta("line-width",this,t),ta("line-gap-width",this,t)),i=ta("line-offset",this,t);return n/2+Math.abs(i)+na(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,i,r,s,a){const l=ia(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,a),c=a/2*Xl(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(i=function(e,t){const n=[];for(let i=0;i<e.length;i++){const r=e[i],s=[];for(let e=0;e<r.length;e++){const n=r[e-1],i=r[e],a=r[e+1],l=0===e?new o(0,0):i.sub(n)._unit()._perp(),c=e===r.length-1?new o(0,0):a.sub(i)._unit()._perp(),u=l._add(c)._unit(),h=u.x*c.x+u.y*c.y;0!==h&&u._mult(1/h),s.push(u._mult(t)._add(i))}n.push(s)}return n}(i,u*a)),function(e,t,n){for(let i=0;i<t.length;i++){const r=t[i];if(e.length>=3)for(let t=0;t<r.length;t++)if(Qs(e,r[t]))return!0;if(Ws(e,r,n))return!0}return!1}(l,i,c)}isTileClipped(){return!0}}function Xl(e,t){return t>0?t+2*e:e}const Yl=lo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$l=lo([{name:"a_projected_pos",components:3,type:"Float32"}],4);lo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Jl=lo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);lo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ql=lo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ec=lo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function tc(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const i=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),Vr.applyArabicShaping&&(e=Vr.applyArabicShaping(e)),e}(e.text,t,n)})),e}lo([{name:"triangle",components:3,type:"Uint16"}]),lo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),lo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),lo([{type:"Float32",name:"offsetX"}]),lo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),lo([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const nc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var ic=24,rc=ac,oc=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},sc=function(e,t,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*l-1)*Math.pow(2,r),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+p]=255&s,p+=f,s/=256,c-=8);e[n+p-f]|=128*m};function ac(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}ac.Varint=0,ac.Fixed64=1,ac.Bytes=2,ac.Fixed32=5;var lc=4294967296,cc=1/lc,uc="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function hc(e){return e.type===ac.Bytes?e.readVarint()+e.pos:e.pos+1}function dc(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function pc(e,t,n){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=e;r--)n.buf[r+i]=n.buf[r]}function fc(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function mc(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function gc(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function yc(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function _c(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function vc(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function bc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function xc(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function wc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Sc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function kc(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Cc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}ac.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,e(r,t,this),this.pos===o&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Sc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Cc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Sc(this.buf,this.pos)+Sc(this.buf,this.pos+4)*lc;return this.pos+=8,e},readSFixed64:function(){var e=Sc(this.buf,this.pos)+Cc(this.buf,this.pos+4)*lc;return this.pos+=8,e},readFloat:function(){var e=oc(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=oc(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,i=this.buf;return t=127&(n=i[this.pos++]),n<128?t:(t|=(127&(n=i[this.pos++]))<<7,n<128?t:(t|=(127&(n=i[this.pos++]))<<14,n<128?t:(t|=(127&(n=i[this.pos++]))<<21,n<128?t:function(e,t,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return dc(e,i,t);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return dc(e,i,t);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return dc(e,i,t);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return dc(e,i,t);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return dc(e,i,t);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return dc(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&uc?function(e,t,n){return uc.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var i="",r=t;r<n;){var o,s,a,l=e[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[r+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(s=e[r+2],128==(192&(o=e[r+1]))&&128==(192&s)&&((c=(15&l)<<12|(63&o)<<6|63&s)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(s=e[r+2],a=e[r+3],128==(192&(o=e[r+1]))&&128==(192&s)&&128==(192&a)&&((c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),r+=u}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==ac.Bytes)return e.push(this.readVarint(t));var n=hc(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==ac.Bytes)return e.push(this.readSVarint());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==ac.Bytes)return e.push(this.readBoolean());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==ac.Bytes)return e.push(this.readFloat());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==ac.Bytes)return e.push(this.readDouble());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==ac.Bytes)return e.push(this.readFixed32());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==ac.Bytes)return e.push(this.readSFixed32());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==ac.Bytes)return e.push(this.readFixed64());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==ac.Bytes)return e.push(this.readSFixed64());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===ac.Varint)for(;this.buf[this.pos++]>127;);else if(t===ac.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ac.Fixed32)this.pos+=4;else{if(t!==ac.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),kc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),kc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),kc(this.buf,-1&e,this.pos),kc(this.buf,Math.floor(e*cc),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),kc(this.buf,-1&e,this.pos),kc(this.buf,Math.floor(e*cc),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var i,r,o=0;o<t.length;o++){if((i=t.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):r=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(e[n++]=239,e[n++]=191,e[n++]=189,r=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&pc(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),sc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),sc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var i=this.pos-n;i>=128&&pc(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,n){this.writeTag(e,ac.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,fc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,mc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,_c,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,gc,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,yc,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,vc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,bc,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,xc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,wc,t)},writeBytesField:function(e,t){this.writeTag(e,ac.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,ac.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,ac.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,ac.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,ac.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,ac.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,ac.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,ac.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,ac.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,ac.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Ec=n(rc);const Tc=3;function Pc(e,t,n){1===e&&n.readMessage(Ic,t)}function Ic(e,t,n){if(3===e){const{id:e,bitmap:i,width:r,height:o,left:s,top:a,advance:l}=n.readMessage(Mc,{});t.push({id:e,bitmap:new wa({width:r+2*Tc,height:o+2*Tc},i),metrics:{width:r,height:o,left:s,top:a,advance:l}})}}function Mc(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}const Ac=Tc;function Rc(e){let t=0,n=0;for(const s of e)t+=s.w*s.h,n=Math.max(n,s.w);e.sort(((e,t)=>t.h-e.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let r=0,o=0;for(const s of e)for(let e=i.length-1;e>=0;e--){const t=i[e];if(!(s.w>t.w||s.h>t.h)){if(s.x=t.x,s.y=t.y,o=Math.max(o,s.y+s.h),r=Math.max(r,s.x+s.w),s.w===t.w&&s.h===t.h){const t=i.pop();e<i.length&&(i[e]=t)}else s.h===t.h?(t.x+=s.w,t.w-=s.w):s.w===t.w?(t.y+=s.h,t.h-=s.h):(i.push({x:t.x+s.w,y:t.y,w:t.w-s.w,h:s.h}),t.y+=s.h,t.h-=s.h);break}}return{w:r,h:o,fill:t/(r*o)||0}}const zc=1;class Lc{constructor(e,t){let{pixelRatio:n,version:i,stretchX:r,stretchY:o,content:s,textFitWidth:a,textFitHeight:l}=t;this.paddedRect=e,this.pixelRatio=n,this.stretchX=r,this.stretchY=o,this.content=s,this.version=i,this.textFitWidth=a,this.textFitHeight=l}get tl(){return[this.paddedRect.x+zc,this.paddedRect.y+zc]}get br(){return[this.paddedRect.x+this.paddedRect.w-zc,this.paddedRect.y+this.paddedRect.h-zc]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*zc)/this.pixelRatio,(this.paddedRect.h-2*zc)/this.pixelRatio]}}class Oc{constructor(e,t){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(e,n,r),this.addImages(t,i,r);const{w:o,h:s}=Rc(r),a=new Sa({width:o||1,height:s||1});for(const l in e){const t=e[l],i=n[l].paddedRect;Sa.copy(t.data,a,{x:0,y:0},{x:i.x+zc,y:i.y+zc},t.data)}for(const l in t){const e=t[l],n=i[l].paddedRect,r=n.x+zc,o=n.y+zc,s=e.data.width,c=e.data.height;Sa.copy(e.data,a,{x:0,y:0},{x:r,y:o},e.data),Sa.copy(e.data,a,{x:0,y:c-1},{x:r,y:o-1},{width:s,height:1}),Sa.copy(e.data,a,{x:0,y:0},{x:r,y:o+c},{width:s,height:1}),Sa.copy(e.data,a,{x:s-1,y:0},{x:r-1,y:o},{width:1,height:c}),Sa.copy(e.data,a,{x:0,y:0},{x:r+s,y:o},{width:1,height:c})}this.image=a,this.iconPositions=n,this.patternPositions=i}addImages(e,t,n){for(const i in e){const r=e[i],o={x:0,y:0,w:r.data.width+2*zc,h:r.data.height+2*zc};n.push(o),t[i]=new Lc(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[i,r]=e.tl;n.update(t.data,void 0,{x:i,y:r})}}var Dc;xr("ImagePosition",Lc),xr("ImageAtlas",Oc),e.ah=void 0,(Dc=e.ah||(e.ah={}))[Dc.none=0]="none",Dc[Dc.horizontal=1]="horizontal",Dc[Dc.vertical=2]="vertical",Dc[Dc.horizontalOnly=3]="horizontalOnly";const Fc=-17;class Nc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new Nc;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new Nc;return t.imageName=e,t}}class Bc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Bc;for(let i=0;i<e.sections.length;i++){const r=e.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n+1)||null,r=e.charCodeAt(n-1)||null;t+=i&&Dr(i)&&!nc[e[n+1]]||r&&Dr(r)&&!nc[e[n-1]]||!nc[e[n]]?e[n]:nc[e[n]]}return t}(this.text)}trim(){let e=0;for(let n=0;n<this.text.length&&Vc[this.text.charCodeAt(n)];n++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Vc[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Bc;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Nc.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let i=0;i<e.text.length;++i)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void S("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Nc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function jc(t,n,i,r,o,s,a,l,c,u,h,d,p,f,m){const g=Bc.fromFeature(t,o);let y;d===e.ah.vertical&&g.verticalizePunctuation();const{processBidirectionalText:_,processStyledBidirectionalText:v}=Vr;if(_&&1===g.sections.length){y=[];const e=_(g.toString(),Xc(g,u,s,n,r,f));for(const t of e){const e=new Bc;e.text=t,e.sections=g.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);y.push(e)}}else if(v){y=[];const e=v(g.text,g.sectionIndex,Xc(g,u,s,n,r,f));for(const t of e){const e=new Bc;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,y.push(e)}}else y=function(e,t){const n=[],i=e.text;let r=0;for(const o of t)n.push(e.substring(r,o)),r=o;return r<i.length&&n.push(e.substring(r,i.length)),n}(g,Xc(g,u,s,n,r,f));const b=[],x={positionedLines:b,text:g.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(t,n,i,r,o,s,a,l,c,u,h,d){let p=0,f=Fc,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let _=0;for(const S of o){S.trim();const o=S.getMaxScale(),a=(o-1)*ic,l={positionedGlyphs:[],lineOffset:0};t.positionedLines[_]=l;const b=l.positionedGlyphs;let x=0;if(!S.length()){f+=s,++_;continue}for(let s=0;s<S.length();s++){const l=S.getSection(s),m=S.getSectionIndex(s),g=S.getCharCode(s);let y=0,_=null,w=null,k=null,C=ic;const E=!(c===e.ah.horizontal||!h&&!Or(g)||h&&(Vc[g]||(v=g,/\p{sc=Arab}/u.test(String.fromCodePoint(v)))));if(l.imageName){const e=r[l.imageName];if(!e)continue;k=l.imageName,t.iconsInText=t.iconsInText||!0,w=e.paddedRect;const n=e.displaySize;l.scale=l.scale*ic/d,_={width:n[0],height:n[1],left:zc,top:-Ac,advance:E?n[1]:n[0]},y=a+(ic-n[1]*l.scale),C=_.advance;const i=E?n[0]*l.scale-ic*o:n[1]*l.scale-ic*o;i>0&&i>x&&(x=i)}else{const e=i[l.fontStack],t=e&&e[g];if(t&&t.rect)w=t.rect,_=t.metrics;else{const e=n[l.fontStack],t=e&&e[g];if(!t)continue;_=t.metrics}y=(o-l.scale)*ic}E?(t.verticalizable=!0,b.push({glyph:g,imageName:k,x:p,y:f+y,vertical:E,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:_,rect:w}),p+=C*l.scale+u):(b.push({glyph:g,imageName:k,x:p,y:f+y,vertical:E,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:_,rect:w}),p+=_.advance*l.scale+u)}0!==b.length&&(m=Math.max(p-u,m),$c(b,0,b.length-1,y,x)),p=0;const w=s*o+x;l.lineOffset=Math.max(x,a),f+=w,g=Math.max(w,g),++_}var v;const b=f-Fc,{horizontalAlign:x,verticalAlign:w}=Yc(a);(function(e,t,n,i,r,o,s,a,l){const c=(t-n)*r;let u=0;u=o!==s?-a*i-Fc:(-i*l+.5)*s;for(const h of e)for(const e of h.positionedGlyphs)e.x+=c,e.y+=u})(t.positionedLines,y,x,w,m,g,s,b,o.length),t.top+=-w*b,t.bottom=t.top+b,t.left+=-x*m,t.right=t.left+m}(x,n,i,r,y,a,l,c,d,u,p,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&x}const Vc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Uc={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},qc={40:!0};function Gc(e,t,n,i,r,o){if(t.imageName){const e=i[t.imageName];return e?e.displaySize[0]*t.scale*ic/o+r:0}{const i=n[t.fontStack],o=i&&i[e];return o?o.metrics.advance*t.scale+r:0}}function Zc(e,t,n,i){const r=Math.pow(e-t,2);return i?e<t?r/2:2*r:r+Math.abs(n)*n}function Hc(e,t,n){let i=0;return 10===e&&(i-=1e4),n&&(i+=150),40!==e&&65288!==e||(i+=50),41!==t&&65289!==t||(i+=50),i}function Wc(e,t,n,i,r,o){let s=null,a=Zc(t,n,r,o);for(const l of i){const e=Zc(t-l.x,n,r,o)+l.badness;e<=a&&(s=l,a=e)}return{index:e,x:t,priorBreak:s,badness:a}}function Kc(e){return e?Kc(e.priorBreak).concat(e.index):[]}function Xc(e,t,n,i,r,o){if(!e)return[];const s=[],a=function(e,t,n,i,r,o){let s=0;for(let a=0;a<e.length();a++){const n=e.getSection(a);s+=Gc(e.getCharCode(a),n,i,r,t,o)}return s/Math.max(1,Math.ceil(s/n))}(e,t,n,i,r,o),l=e.text.indexOf("\u200b")>=0;let c=0;for(let h=0;h<e.length();h++){const n=e.getSection(h),d=e.getCharCode(h);if(Vc[d]||(c+=Gc(d,n,i,r,t,o)),h<e.length()-1){const t=!((u=d)<11904)&&(!!Pr["CJK Compatibility Forms"](u)||!!Pr["CJK Compatibility"](u)||!!Pr["CJK Strokes"](u)||!!Pr["CJK Symbols and Punctuation"](u)||!!Pr["Enclosed CJK Letters and Months"](u)||!!Pr["Halfwidth and Fullwidth Forms"](u)||!!Pr["Ideographic Description Characters"](u)||!!Pr["Vertical Forms"](u)||Lr.test(String.fromCodePoint(u)));(Uc[d]||t||n.imageName||h!==e.length()-2&&qc[e.getCharCode(h+1)])&&s.push(Wc(h+1,c,a,s,Hc(d,e.getCharCode(h+1),t&&l),!1))}}var u;return Kc(Wc(e.length(),c,a,s,0,!0))}function Yc(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function $c(e,t,n,i,r){if(!i&&!r)return;const o=e[n],s=(e[n].x+o.metrics.advance*o.scale)*i;for(let a=t;a<=n;a++)e[a].x-=s,e[a].y+=r}function Jc(e,t,n){const{horizontalAlign:i,verticalAlign:r}=Yc(n),o=t[0]-e.displaySize[0]*i,s=t[1]-e.displaySize[1]*r;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Qc(e){var t,n;let i=e.left,r=e.top,o=e.right-i,s=e.bottom-r;const a=null!==(t=e.image.textFitWidth)&&void 0!==t?t:"stretchOrShrink",l=null!==(n=e.image.textFitHeight)&&void 0!==n?n:"stretchOrShrink",c=(e.image.content[2]-e.image.content[0])/(e.image.content[3]-e.image.content[1]);if("proportional"===l){if("stretchOnly"===a&&o/s<c||"proportional"===a){const e=Math.ceil(s*c);i*=e/o,o=e}}else if("proportional"===a&&"stretchOnly"===l&&0!==c&&o/s>c){const e=Math.ceil(o/c);r*=e/s,s=e}return{x1:i,y1:r,x2:i+o,y2:r+s}}function eu(e,t,n,i,r,o){const s=e.image;let a;if(s.content){const e=s.content,t=s.pixelRatio||1;a=[e[0]/t,e[1]/t,s.displaySize[0]-e[2]/t,s.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,p;"width"===n||"both"===n?(p=r[0]+l-i[3],h=r[0]+c+i[1]):(p=r[0]+(l+c-s.displaySize[0])/2,h=p+s.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=r[1]+f-i[0],d=r[1]+m+i[2]):(u=r[1]+(f+m-s.displaySize[1])/2,d=u+s.displaySize[1]),{image:s,top:u,right:h,bottom:d,left:p,collisionPadding:a}}const tu=255,nu=128,iu=tu*nu;function ru(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Ur(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:i}=n;let r=0;for(;r<t.length&&t[r]<=e;)r++;r=Math.max(0,r-1);let o=r;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const s=t[r],a=t[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:a,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:a,minSize:n.evaluate(new Ur(s)),maxSize:n.evaluate(new Ur(a)),interpolationType:i}}}function ou(e,t,n){let i="never";const r=e.get(t);return r?i=r:e.get(n)&&(i="always"),i}const su=dl.VectorTileFeature.types,au=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lu(e,t,n,i,r,o,s,a,l,c,u,h,d){const p=a?Math.min(iu,Math.round(a[0])):0,f=a?Math.min(iu,Math.round(a[1])):0;e.emplaceBack(t,n,Math.round(32*i),Math.round(32*r),o,s,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function cu(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function uu(e){for(const t of e.sections)if(jr(t.text))return!0;return!1}class hu{constructor(e){this.layoutVertexArray=new Qo,this.indexArray=new rs,this.programConfigurations=e,this.segments=new ls,this.dynamicLayoutVertexArray=new es,this.opacityVertexArray=new ts,this.hasVisibleVertices=!1,this.placedSymbolArray=new Fo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,$l.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,au,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}xr("SymbolBuffers",hu);class du{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new ls,this.collisionVertexArray=new is}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Jl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}xr("CollisionBuffers",du);class pu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ca([]),this.placementViewportMatrix=ca([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ru(this.zoom,n["text-size"]),this.iconSizeData=ru(this.zoom,n["icon-size"]);const i=this.layers[0].layout,r=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap="never"!==ou(i,"text-overlap","text-allow-overlap")||"never"!==ou(i,"icon-overlap","icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!r.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((t=>e.ah[t]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=t.sourceID}createArrays(){this.text=new hu(new Ls(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new hu(new Ls(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new jo,this.lineVertexArray=new Vo,this.symbolInstances=new Bo,this.textAnchorOffsets=new qo}calculateGlyphDependencies(e,t,n,i,r){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(n||i)&&r){const n=nc[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(t,n,i){const r=this.layers[0],o=r.layout,s=o.get("text-font"),a=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==a.value.kind||a.value.value instanceof Ye&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=n.iconDependencies,p=n.glyphDependencies,f=n.availableImages,m=new Ur(this.zoom);for(const{feature:g,id:y,index:_,sourceLayerIndex:v}of t){const t=r._featureFilter.needGeometry,n=Vs(g,t);if(!r._featureFilter.filter(m,n,i))continue;let a,l;if(t||(n.geometry=js(g)),c){const e=r.getValueAndResolveTokens("text-field",n,i,f),t=Ye.factory(e),o=this.hasRTLText=this.hasRTLText||uu(t);(!o||"unavailable"===Vr.getRTLTextPluginStatus()||o&&Vr.isParsed())&&(a=tc(t,r,n))}if(u){const e=r.getValueAndResolveTokens("icon-image",n,i,f);l=e instanceof et?e:et.fromString(e)}if(!a&&!l)continue;const b=this.sortFeaturesByKey?h.evaluate(n,{},i):void 0;if(this.features.push({id:y,text:a,icon:l,index:_,sourceLayerIndex:v,geometry:n.geometry,properties:g.properties,type:su[g.type],sortKey:b}),l&&(d[l.name]=!0),a){const t=s.evaluate(n,{},i).join(","),r="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.ah.vertical)>=0;for(const e of a.sections)if(e.image)d[e.image.name]=!0;else{const n=Ir(a.toString()),i=e.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(e.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},i=[];let r=0;function o(t){i.push(e[t]),r++}function s(e,t,r){const o=n[e];return delete n[e],n[t]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function a(e,n,r){const o=t[n];return delete t[n],t[e]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function l(e,t,n){const i=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(i.x,":").concat(i.y)}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in t&&n[p]!==t[f]){const e=a(p,f,h),r=s(p,f,i[e].geometry);delete t[p],delete n[f],n[l(d,i[r].geometry,!0)]=r,i[e].geometry=null}else p in n?s(p,f,h):f in t?a(p,f,h):(o(c),t[p]=r-1,n[f]=r-1)}return i.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment){let n=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]);const r={};for(let o=e.segment+1;o<t.length;o++)r[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:n},o<t.length-1&&(n+=t[o+1].dist(t[o]));for(let o=e.segment||0;o>=0;o--)r[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:i},o>0&&(i+=t[o-1].dist(t[o]));for(let e=0;e<t.length;e++){const t=r[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,n,i,r,o,s,a,l,c,u,h,d){const p=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*n.length,f,p,this.canOverlap?s.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,_=this.allowVerticalPlacement&&a===e.ah.vertical?Math.PI/2:0,v=s.text&&s.text.sections;for(let e=0;e<n.length;e++){const{tl:r,tr:o,bl:a,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:b,glyphOffset:x,isSDF:w,sectionIndex:S}=n[e],k=m.vertexLength,C=x[1];lu(f,l.x,l.y,r.x,C+r.y,u.x,u.y,i,w,h.x,h.y,y,b),lu(f,l.x,l.y,o.x,C+o.y,u.x+u.w,u.y,i,w,g.x,h.y,y,b),lu(f,l.x,l.y,a.x,C+a.y,u.x,u.y+u.h,i,w,h.x,g.y,y,b),lu(f,l.x,l.y,c.x,C+c.y,u.x+u.w,u.y+u.h,i,w,g.x,g.y,y,b),cu(t.dynamicLayoutVertexArray,l,_),p.emplaceBack(k,k+1,k+2),p.emplaceBack(k+1,k+2,k+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),e!==n.length-1&&S===n[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,s,s.index,{},d,v&&v[S])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],a,0,!1,0,h)}_addCollisionDebugVertex(e,t,n,i,r,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,i,r,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,n,i,r,s,a){const l=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),c=l.vertexLength,u=r.layoutVertexArray,h=r.collisionVertexArray,d=a.anchorX,p=a.anchorY;this._addCollisionDebugVertex(u,h,s,d,p,new o(e,t)),this._addCollisionDebugVertex(u,h,s,d,p,new o(n,t)),this._addCollisionDebugVertex(u,h,s,d,p,new o(n,i)),this._addCollisionDebugVertex(u,h,s,d,p,new o(e,i)),l.vertexLength+=4;const f=r.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4}addDebugCollisionBoxes(e,t,n,i){for(let r=e;r<t;r++){const e=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,i?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new du(ns,Ql.members,os),this.iconCollisionBox=new du(ns,Ql.members,os);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,n,i,r,o,s,a,l){const c={};for(let u=t;u<n;u++){const t=e.get(u);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let u=i;u<r;u++){const t=e.get(u);c.verticalTextBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalTextFeatureIndex=t.featureIndex;break}for(let u=o;u<s;u++){const t=e.get(u);c.iconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.iconFeatureIndex=t.featureIndex;break}for(let u=a;u<l;u++){const t=e.get(u);c.verticalIconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalIconFeatureIndex=t.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),i=n.vertexStartIndex+4*n.numGlyphs;for(let r=n.vertexStartIndex;r<i;r+=4)e.indexArray.emplaceBack(r,r+1,r+2),e.indexArray.emplaceBack(r+1,r+2,r+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),i=[],r=[],o=[];for(let s=0;s<this.symbolInstances.length;++s){o.push(s);const e=this.symbolInstances.get(s);i.push(0|Math.round(t*e.anchorX+n*e.anchorY)),r.push(e.featureIndex)}return o.sort(((e,t)=>i[e]-i[t]||r[t]-r[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let fu,mu;xr("SymbolBucket",pu,{omit:["layers","collisionBoxArray","features","compareText"]}),pu.MAX_GLYPHS=65535,pu.addDynamicAttributes=cu;var gu={get paint(){return mu=mu||new no({"icon-opacity":new Jr(H.paint_symbol["icon-opacity"]),"icon-color":new Jr(H.paint_symbol["icon-color"]),"icon-halo-color":new Jr(H.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jr(H.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jr(H.paint_symbol["icon-halo-blur"]),"icon-translate":new $r(H.paint_symbol["icon-translate"]),"icon-translate-anchor":new $r(H.paint_symbol["icon-translate-anchor"]),"text-opacity":new Jr(H.paint_symbol["text-opacity"]),"text-color":new Jr(H.paint_symbol["text-color"],{runtimeType:de,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Jr(H.paint_symbol["text-halo-color"]),"text-halo-width":new Jr(H.paint_symbol["text-halo-width"]),"text-halo-blur":new Jr(H.paint_symbol["text-halo-blur"]),"text-translate":new $r(H.paint_symbol["text-translate"]),"text-translate-anchor":new $r(H.paint_symbol["text-translate-anchor"])})},get layout(){return fu=fu||new no({"symbol-placement":new $r(H.layout_symbol["symbol-placement"]),"symbol-spacing":new $r(H.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $r(H.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jr(H.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $r(H.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $r(H.layout_symbol["icon-allow-overlap"]),"icon-overlap":new $r(H.layout_symbol["icon-overlap"]),"icon-ignore-placement":new $r(H.layout_symbol["icon-ignore-placement"]),"icon-optional":new $r(H.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $r(H.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jr(H.layout_symbol["icon-size"]),"icon-text-fit":new $r(H.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $r(H.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jr(H.layout_symbol["icon-image"]),"icon-rotate":new Jr(H.layout_symbol["icon-rotate"]),"icon-padding":new Jr(H.layout_symbol["icon-padding"]),"icon-keep-upright":new $r(H.layout_symbol["icon-keep-upright"]),"icon-offset":new Jr(H.layout_symbol["icon-offset"]),"icon-anchor":new Jr(H.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $r(H.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $r(H.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $r(H.layout_symbol["text-rotation-alignment"]),"text-field":new Jr(H.layout_symbol["text-field"]),"text-font":new Jr(H.layout_symbol["text-font"]),"text-size":new Jr(H.layout_symbol["text-size"]),"text-max-width":new Jr(H.layout_symbol["text-max-width"]),"text-line-height":new $r(H.layout_symbol["text-line-height"]),"text-letter-spacing":new Jr(H.layout_symbol["text-letter-spacing"]),"text-justify":new Jr(H.layout_symbol["text-justify"]),"text-radial-offset":new Jr(H.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $r(H.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Jr(H.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Jr(H.layout_symbol["text-anchor"]),"text-max-angle":new $r(H.layout_symbol["text-max-angle"]),"text-writing-mode":new $r(H.layout_symbol["text-writing-mode"]),"text-rotate":new Jr(H.layout_symbol["text-rotate"]),"text-padding":new $r(H.layout_symbol["text-padding"]),"text-keep-upright":new $r(H.layout_symbol["text-keep-upright"]),"text-transform":new Jr(H.layout_symbol["text-transform"]),"text-offset":new Jr(H.layout_symbol["text-offset"]),"text-allow-overlap":new $r(H.layout_symbol["text-allow-overlap"]),"text-overlap":new $r(H.layout_symbol["text-overlap"]),"text-ignore-placement":new $r(H.layout_symbol["text-ignore-placement"]),"text-optional":new $r(H.layout_symbol["text-optional"])})}};class yu{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:le,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xr("FormatSectionOverride",yu,{omit:["defaultValue"]});class _u extends ro{constructor(e){super(e,gu)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const n of e)t.indexOf(n)<0&&t.push(n);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,i){const r=this.layout.get(e).evaluate(t,{},n,i),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||vi(o.value)||!r?r:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>e&&n in e?String(e[n]):""))}(t.properties,r)}createBucket(e){return new pu(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of gu.paint.overridableProperties){if(!_u.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new yu(t),i=new _i(n,t.property.specification);let r=null;r="constant"===t.value.kind||"source"===t.value.kind?new xi("source",i):new wi("composite",i,t.value.zoomStops),this.paint._values[e]=new Xr(t.property,r,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&_u.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),i=gu.paint.properties[t];let r=!1;const o=e=>{for(const t of e)if(i.overrides&&i.overrides.hasOverride(t))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof Ye)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{r||(t instanceof ot&&it(t.value)===ge?o(t.value.sections):t instanceof Zt?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return r}}let vu;var bu={get paint(){return vu=vu||new no({"background-color":new $r(H.paint_background["background-color"]),"background-pattern":new eo(H.paint_background["background-pattern"]),"background-opacity":new $r(H.paint_background["background-opacity"])})}};class xu extends ro{constructor(e){super(e,bu)}}let wu;var Su={get paint(){return wu=wu||new no({"raster-opacity":new $r(H.paint_raster["raster-opacity"]),"raster-hue-rotate":new $r(H.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $r(H.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $r(H.paint_raster["raster-brightness-max"]),"raster-saturation":new $r(H.paint_raster["raster-saturation"]),"raster-contrast":new $r(H.paint_raster["raster-contrast"]),"raster-resampling":new $r(H.paint_raster["raster-resampling"]),"raster-fade-duration":new $r(H.paint_raster["raster-fade-duration"])})}};class ku extends ro{constructor(e){super(e,Su)}}class Cu extends ro{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Eu{constructor(e){this._methodToThrottle=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Tu=6371008.8;class Pu{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(t,")"));if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pu(g(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(e){const t=Math.PI/180,n=this.lat*t,i=e.lat*t,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return Tu*Math.acos(Math.min(r,1))}static convert(e){if(e instanceof Pu)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Pu(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Pu(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Iu=2*Math.PI*Tu;function Mu(e){return Iu*Math.cos(e*Math.PI/180)}function Au(e){return(180+e)/360}function Ru(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function zu(e,t){return e/Mu(t)}function Lu(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class Ou{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Pu.convert(e);return new Ou(Au(n.lng),Ru(n.lat),zu(t,n.lat))}toLngLat(){return new Pu(360*this.x-180,Lu(this.y))}toAltitude(){return this.z*Mu(Lu(this.y))}meterInMercatorCoordinateUnits(){return 1/Iu*(e=Lu(this.y),1/Math.cos(e*Math.PI/180));var e}}function Du(e,t,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}class Fu{constructor(e,t,n){if(!function(e,t,n){return!(e<0||e>25||n<0||n>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))}(e,t,n))throw new Error("x=".concat(t,", y=").concat(n,", z=").concat(e," outside of bounds. 0<=x<").concat(Math.pow(2,e),", 0<=y<").concat(Math.pow(2,e)," 0<=z<=25 "));this.z=e,this.x=t,this.y=n,this.key=ju(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,n){const i=(o=this.y,s=this.z,a=Du(256*(r=this.x),256*(o=Math.pow(2,s)-o-1),s),l=Du(256*(r+1),256*(o+1),s),a[0]+","+a[1]+","+l[0]+","+l[1]);var r,o,s,a,l;const c=function(e,t,n){let i,r="";for(let o=e;o>0;o--)i=1<<o-1,r+=(t&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,i)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new o((e.x*t-this.x)*Fs,(e.y*t-this.y)*Fs)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class Nu{constructor(e,t){this.wrap=e,this.canonical=t,this.key=ju(e,t.z,t.z,t.x,t.y)}}class Bu{constructor(e,t,n,i,r){if(e<n)throw new Error("overscaledZ should be >= z; overscaledZ = ".concat(e,"; z = ").concat(n));this.overscaledZ=e,this.wrap=t,this.canonical=new Fu(n,+i,+r),this.key=ju(t,e,n,i,r)}clone(){return new Bu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(e,"; overscaledZ = ").concat(this.overscaledZ));const t=this.canonical.z-e;return e>this.canonical.z?new Bu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(e,"; overscaledZ = ").concat(this.overscaledZ));const n=this.canonical.z-e;return e>this.canonical.z?ju(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):ju(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Bu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Bu(t,this.wrap,t,n,i),new Bu(t,this.wrap,t,n+1,i),new Bu(t,this.wrap,t,n,i+1),new Bu(t,this.wrap,t,n+1,i+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Bu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Bu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Nu(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}getTilePoint(e){return this.canonical.getTilePoint(new Ou(e.x-this.wrap,e.y))}}function ju(e,t,n,i,r){(e*=2)<0&&(e=-1*e-1);const o=1<<n;return(o*o*e+o*r+i).toString(36)+n.toString(36)+t.toString(36)}xr("CanonicalTileID",Fu),xr("OverscaledTileID",Bu,{omit:["posMatrix"]});class Vu{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&!["mapbox","terrarium","custom"].includes(n))return void S('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".'));this.stride=t.height;const a=this.dim=t.height-2;switch(this.data=new Uint32Array(t.data.buffer),n){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=i,this.greenFactor=r,this.blueFactor=o,this.baseShift=s;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let l=0;l<a;l++)this.data[this._idx(-1,l)]=this.data[this._idx(0,l)],this.data[this._idx(a,l)]=this.data[this._idx(a-1,l)],this.data[this._idx(l,-1)]=this.data[this._idx(l,0)],this.data[this._idx(l,a)]=this.data[this._idx(l,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let l=0;l<a;l++)for(let e=0;e<a;e++){const t=this.get(l,e);t>this.max&&(this.max=t),t<this.min&&(this.min=t)}}get(e,t){const n=new Uint8Array(this.data.buffer),i=4*this._idx(e,t);return this.unpack(n[i],n[i+1],n[i+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}unpack(e,t,n){return e*this.redFactor+t*this.greenFactor+n*this.blueFactor-this.baseShift}getPixels(){return new Sa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let i=t*this.dim,r=t*this.dim+this.dim,o=n*this.dim,s=n*this.dim+this.dim;switch(t){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=s-1;break;case 1:s=o+1}const a=-t*this.dim,l=-n*this.dim;for(let c=o;c<s;c++)for(let t=i;t<r;t++)this.data[this._idx(t,c)]=e.data[this._idx(t+a,c+l)]}}xr("DEMData",Vu);class Uu{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error("Out of bounds. Index requested n=".concat(e," can't be >= this._numberToString.length ").concat(this._numberToString.length));return this._numberToString[e]}}class qu{constructor(e,t,n,i,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=i,this.properties=e.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class Gu{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new vr(Fs,16,0),this.grid3D=new vr(Fs,16,0),this.featureIndexArray=new Zo,this.promoteId=t}insert(e,t,n,i,r,o){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);const a=o?this.grid3D:this.grid;for(let l=0;l<t.length;l++){const e=t[l],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const i=e[t];n[0]=Math.min(n[0],i.x),n[1]=Math.min(n[1],i.y),n[2]=Math.max(n[2],i.x),n[3]=Math.max(n[3],i.y)}n[0]<Fs&&n[1]<Fs&&n[2]>=0&&n[3]>=0&&a.insert(s,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new dl.VectorTile(new Ec(this.rawTileData)).layers,this.sourceLayerCoder=new Uu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,n,i){this.loadVTLayers();const r=e.params||{},s=Fs/e.tileSize/e.scale,a=Pi(r.filter),l=e.queryGeometry,c=e.queryPadding*s,u=Hu(l),h=this.grid.query(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c),d=Hu(e.cameraQueryGeometry),p=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,((t,n,i,r)=>function(e,t,n,i,r){for(const o of e)if(t<=o.x&&n<=o.y&&i>=o.x&&r>=o.y)return!0;const s=[new o(t,n),new o(t,r),new o(i,r),new o(i,n)];if(e.length>2)for(const o of s)if(Qs(e,o))return!0;for(let o=0;o<e.length-1;o++)if(ea(e[o],e[o+1],s))return!0;return!1}(e.cameraQueryGeometry,t-c,n-c,i+c,r+c)));for(const o of p)h.push(o);h.sort(Wu);const f={};let m;for(let o=0;o<h.length;o++){const c=h[o];if(c===m)continue;m=c;const u=this.featureIndexArray.get(c);let d=null;this.loadMatchingFeature(f,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,a,r.layers,r.availableImages,t,n,i,((t,n,i)=>(d||(d=js(t)),n.queryIntersectsFeature(l,t,i,d,this.z,e.transform,s,e.pixelPosMatrix))))}return f}loadMatchingFeature(e,t,n,i,r,o,s,a,l,c,u){const h=this.bucketLayerIDs[t];if(o&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(o,h))return;const d=this.sourceLayerCoder.decode(n),p=this.vtLayers[d].feature(i);if(r.needGeometry){const e=Vs(p,!0);if(!r.filter(new Ur(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new Ur(this.tileID.overscaledZ),p))return;const f=this.getId(p,d);for(let m=0;m<h.length;m++){const t=h[m];if(o&&o.indexOf(t)<0)continue;const n=a[t];if(!n)continue;let r={};f&&c&&(r=c.getState(n.sourceLayer||"_geojsonTileLayer",f));const d=y({},l[t]);d.paint=Zu(d.paint,n.paint,p,r,s),d.layout=Zu(d.layout,n.layout,p,r,s);const g=!u||u(p,n,r);if(!g)continue;const _=new qu(p,this.z,this.x,this.y,f);_.layer=d;let v=e[t];void 0===v&&(v=e[t]=[]),v.push({featureIndex:i,feature:_,intersectionZ:g})}}lookupSymbolFeatures(e,t,n,i,r,o,s,a){const l={};this.loadVTLayers();const c=Pi(r);for(const u of e)this.loadMatchingFeature(l,n,i,u,c,o,s,a,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;return this.promoteId&&(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof n&&(n=Number(n))),n}}function Zu(e,t,n,i,r){return v(e,((e,o)=>{const s=t instanceof Yr?t.get(o):null;return s&&s.evaluate?s.evaluate(n,i,r):s}))}function Hu(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return{minX:t,minY:n,maxX:i,maxY:r}}function Wu(e,t){return t-e}function Ku(e,t,n,i,r){const s=[];for(let a=0;a<e.length;a++){const l=e[a];let c;for(let e=0;e<l.length-1;e++){let a=l[e],u=l[e+1];a.x<t&&u.x<t||(a.x<t?a=new o(t,a.y+(t-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x<t&&(u=new o(t,a.y+(t-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y<n&&u.y<n||(a.y<n?a=new o(a.x+(n-a.y)/(u.y-a.y)*(u.x-a.x),n)._round():u.y<n&&(u=new o(a.x+(n-a.y)/(u.y-a.y)*(u.x-a.x),n)._round()),a.x>=i&&u.x>=i||(a.x>=i?a=new o(i,a.y+(i-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x>=i&&(u=new o(i,a.y+(i-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y>=r&&u.y>=r||(a.y>=r?a=new o(a.x+(r-a.y)/(u.y-a.y)*(u.x-a.x),r)._round():u.y>=r&&(u=new o(a.x+(r-a.y)/(u.y-a.y)*(u.x-a.x),r)._round()),c&&a.equals(c[c.length-1])||(c=[a],s.push(c)),c.push(u)))))}}return s}xr("FeatureIndex",Gu,{omit:["rawTileData","sourceLayerCoder"]});class Xu extends o{constructor(e,t,n,i){super(e,t),this.angle=n,void 0!==i&&(this.segment=i)}clone(){return new Xu(this.x,this.y,this.angle,this.segment)}}function Yu(e,t,n,i,r){if(void 0===t.segment||0===n)return!0;let o=t,s=t.segment+1,a=0;for(;a>-n/2;){if(s--,s<0)return!1;a-=e[s].dist(o),o=e[s]}a+=e[s].dist(e[s+1]),s++;const l=[];let c=0;for(;a<n/2;){const t=e[s],n=e[s+1];if(!n)return!1;let o=e[s-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:o}),c+=o;a-l[0].distance>i;)c-=l.shift().angleDelta;if(c>r)return!1;s++,a+=t.dist(n)}return!0}function $u(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Ju(e,t,n){return e?.6*t*n:0}function Qu(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function eh(e,t,n,i,r,o){const s=Ju(n,r,o),a=Qu(n,i)*o;let l=0;const c=$u(e)/2;for(let u=0;u<e.length-1;u++){const n=e[u],i=e[u+1],r=n.dist(i);if(l+r>c){const o=(c-l)/r,h=Mt.number(n.x,i.x,o),d=Mt.number(n.y,i.y,o),p=new Xu(h,d,i.angleTo(n),u);return p._round(),!s||Yu(e,p,a,s,t)?p:void 0}l+=r}}function th(e,t,n,i,r,o,s,a,l){const c=Ju(i,o,s),u=Qu(i,r),h=u*s,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),nh(e,d?t/2*a%t:(u/2+2*o)*s*a%t,t,c,n,h,d,!1,l)}function nh(e,t,n,i,r,o,s,a,l){const c=o/2,u=$u(e);let h=0,d=t-n,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],s=e[f+1],a=t.dist(s),m=s.angleTo(t);for(;d+n<h+a;){d+=n;const g=(d-h)/a,y=Mt.number(t.x,s.x,g),_=Mt.number(t.y,s.y,g);if(y>=0&&y<l&&_>=0&&_<l&&d-c>=0&&d+c<=u){const t=new Xu(y,_,m,f);t._round(),i&&!Yu(e,t,o,i,r)||p.push(t)}}h+=a}return a||p.length||s||(p=nh(e,h/2,n,i,r,o,s,!0,l)),p}xr("Anchor",Xu);const ih=zc;function rh(e,t,n,i){const r=[],s=e.image,a=s.pixelRatio,l=s.paddedRect.w-2*ih,c=s.paddedRect.h-2*ih;let u={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};const h=s.stretchX||[[0,l]],d=s.stretchY||[[0,c]],p=(e,t)=>e+t[1]-t[0],f=h.reduce(p,0),m=d.reduce(p,0),g=l-f,y=c-m;let _=0,v=f,b=0,x=m,w=0,S=g,k=0,C=y;if(s.content&&i){const t=s.content,n=t[2]-t[0],i=t[3]-t[1];(s.textFitWidth||s.textFitHeight)&&(u=Qc(e)),_=oh(h,0,t[0]),b=oh(d,0,t[1]),v=oh(h,t[0],t[2]),x=oh(d,t[1],t[3]),w=t[0]-_,k=t[1]-b,S=n-v,C=i-x}const E=u.x1,T=u.y1,P=u.x2-E,I=u.y2-T,M=(e,i,r,l)=>{const c=ah(e.stretch-_,v,P,E),u=lh(e.fixed-w,S,e.stretch,f),h=ah(i.stretch-b,x,I,T),d=lh(i.fixed-k,C,i.stretch,m),p=ah(r.stretch-_,v,P,E),g=lh(r.fixed-w,S,r.stretch,f),y=ah(l.stretch-b,x,I,T),M=lh(l.fixed-k,C,l.stretch,m),A=new o(c,h),R=new o(p,h),z=new o(p,y),L=new o(c,y),O=new o(u/a,d/a),D=new o(g/a,M/a),F=t*Math.PI/180;if(F){const e=Math.sin(F),t=Math.cos(F),n=[t,-e,e,t];A._matMult(n),R._matMult(n),L._matMult(n),z._matMult(n)}const N=e.stretch+e.fixed,B=i.stretch+i.fixed;return{tl:A,tr:R,bl:L,br:z,tex:{x:s.paddedRect.x+ih+N,y:s.paddedRect.y+ih+B,w:r.stretch+r.fixed-N,h:l.stretch+l.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:O,pixelOffsetBR:D,minFontScaleX:S/a/P,minFontScaleY:C/a/I,isSDF:n}};if(i&&(s.stretchX||s.stretchY)){const e=sh(h,g,f),t=sh(d,y,m);for(let n=0;n<e.length-1;n++){const i=e[n],o=e[n+1];for(let e=0;e<t.length-1;e++)r.push(M(i,t[e],o,t[e+1]))}}else r.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return r}function oh(e,t,n){let i=0;for(const r of e)i+=Math.max(t,Math.min(n,r[1]))-Math.max(t,Math.min(n,r[0]));return i}function sh(e,t,n){const i=[{fixed:-ih,stretch:0}];for(const[r,o]of e){const e=i[i.length-1];i.push({fixed:r-e.stretch,stretch:e.stretch}),i.push({fixed:r-e.stretch,stretch:e.stretch+(o-r)})}return i.push({fixed:t+ih,stretch:n}),i}function ah(e,t,n,i){return e/t*n+i}function lh(e,t,n,i){return e-t*n/i}class ch{constructor(e,t,n,i,r,s,a,l,c,u){var h;if(this.boxStartIndex=e.length,c){let e=s.top,t=s.bottom;const n=s.collisionPadding;n&&(e-=n[1],t+=n[3]);let i=t-e;i>0&&(i=Math.max(10,i),this.circleDiameter=i)}else{const c=(null===(h=s.image)||void 0===h?void 0:h.content)&&(s.image.textFitWidth||s.image.textFitHeight)?Qc(s):{x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};c.y1=c.y1*a-l[0],c.y2=c.y2*a+l[2],c.x1=c.x1*a-l[3],c.x2=c.x2*a+l[1];const d=s.collisionPadding;if(d&&(c.x1-=d[0]*a,c.y1-=d[1]*a,c.x2+=d[2]*a,c.y2+=d[3]*a),u){const e=new o(c.x1,c.y1),t=new o(c.x2,c.y1),n=new o(c.x1,c.y2),i=new o(c.x2,c.y2),r=u*Math.PI/180;e._rotate(r),t._rotate(r),n._rotate(r),i._rotate(r),c.x1=Math.min(e.x,t.x,n.x,i.x),c.x2=Math.max(e.x,t.x,n.x,i.x),c.y1=Math.min(e.y,t.y,n.y,i.y),c.y2=Math.max(e.y,t.y,n.y,i.y)}e.emplaceBack(t.x,t.y,c.x1,c.y1,c.x2,c.y2,n,i,r)}this.boxEndIndex=e.length}}class uh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1);const o=i+1;if(o<this.length&&n(t[o],t[i])<0&&(i=o),n(t[i],r)>=0)break;t[e]=t[i],e=i}t[e]=r}}function hh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1/0,r=1/0,s=-1/0,a=-1/0;const l=e[0];for(let o=0;o<l.length;o++){const e=l[o];(!o||e.x<i)&&(i=e.x),(!o||e.y<r)&&(r=e.y),(!o||e.x>s)&&(s=e.x),(!o||e.y>a)&&(a=e.y)}const c=Math.min(s-i,a-r);let u=c/2;const h=new uh([],dh);if(0===c)return new o(i,r);for(let o=i;o<s;o+=c)for(let t=r;t<a;t+=c)h.push(new ph(o+u,t+u,u,e));let d=function(e){let t=0,n=0,i=0;const r=e[0];for(let o=0,s=r.length,a=s-1;o<s;a=o++){const e=r[o],s=r[a],l=e.x*s.y-s.x*e.y;n+=(e.x+s.x)*l,i+=(e.y+s.y)*l,t+=3*l}return new ph(n/t,i/t,0,e)}(e),p=h.length;for(;h.length;){const i=h.pop();(i.d>d.d||!d.d)&&(d=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-d.d<=t||(u=i.h/2,h.push(new ph(i.p.x-u,i.p.y-u,u,e)),h.push(new ph(i.p.x+u,i.p.y-u,u,e)),h.push(new ph(i.p.x-u,i.p.y+u,u,e)),h.push(new ph(i.p.x+u,i.p.y+u,u,e)),p+=4)}return n&&(console.log("num probes: ".concat(p)),console.log("best distance: ".concat(d.d))),d.p}function dh(e,t){return t.max-e.max}function ph(e,t,n,i){this.p=new o(e,t),this.h=n,this.d=function(e,t){let n=!1,i=1/0;for(let r=0;r<t.length;r++){const o=t[r];for(let t=0,r=o.length,s=r-1;t<r;s=t++){const r=o[t],a=o[s];r.y>e.y!=a.y>e.y&&e.x<(a.x-r.x)*(e.y-r.y)/(a.y-r.y)+r.x&&(n=!n),i=Math.min(i,$s(e,r,a))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}var fh;e.aq=void 0,(fh=e.aq||(e.aq={}))[fh.center=1]="center",fh[fh.left=2]="left",fh[fh.right=3]="right",fh[fh.top=4]="top",fh[fh.bottom=5]="bottom",fh[fh["top-left"]=6]="top-left",fh[fh["top-right"]=7]="top-right",fh[fh["bottom-left"]=8]="bottom-left",fh[fh["bottom-right"]=9]="bottom-right";const mh=7,gh=Number.POSITIVE_INFINITY;function yh(e,t){return t[1]!==gh?function(e,t,n){let i=0,r=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":r=n-mh;break;case"bottom-right":case"bottom-left":case"bottom":r=-n+mh}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}return[i,r]}(e,t[0],t[1]):function(e,t){let n=0,i=0;t<0&&(t=0);const r=t/Math.SQRT2;switch(e){case"top-right":case"top-left":i=r-mh;break;case"bottom-right":case"bottom-left":i=-r+mh;break;case"bottom":i=-t+mh;break;case"top":i=t-mh}switch(e){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=t;break;case"right":n=-t}return[n,i]}(e,t[0])}function _h(e,t,n){var i;const r=e.layout,o=null===(i=r.get("text-variable-anchor-offset"))||void 0===i?void 0:i.evaluate(t,{},n);if(o){const e=o.values,t=[];for(let n=0;n<e.length;n+=2){const i=t[n]=e[n],r=e[n+1].map((e=>e*ic));i.startsWith("top")?r[1]-=mh:i.startsWith("bottom")&&(r[1]+=mh),t[n+1]=r}return new Qe(t)}const s=r.get("text-variable-anchor");if(s){let i;i=void 0!==e._unevaluatedLayout.getValue("text-radial-offset")?[r.get("text-radial-offset").evaluate(t,{},n)*ic,gh]:r.get("text-offset").evaluate(t,{},n).map((e=>e*ic));const o=[];for(const e of s)o.push(e,yh(e,i));return new Qe(o)}return null}function vh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function bh(t,n,i,r,o,s,a,l,c,u,h){let d=s.textMaxSize.evaluate(n,{});void 0===d&&(d=a);const p=t.layers[0].layout,f=p.get("icon-offset").evaluate(n,{},h),m=wh(i.horizontal),g=a/24,y=t.tilePixelRatio*g,_=t.tilePixelRatio*d/24,v=t.tilePixelRatio*l,b=t.tilePixelRatio*p.get("symbol-spacing"),x=p.get("text-padding")*t.tilePixelRatio,w=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=e.get("icon-padding").evaluate(t,{},n),o=r&&r.values;return[o[0]*i,o[1]*i,o[2]*i,o[3]*i]}(p,n,h,t.tilePixelRatio),k=p.get("text-max-angle")/180*Math.PI,C="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),E="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),T=p.get("symbol-placement"),P=b/2,I=p.get("icon-text-fit");let M;r&&"none"!==I&&(t.allowVerticalPlacement&&i.vertical&&(M=eu(r,i.vertical,I,p.get("icon-text-fit-padding"),f,g)),m&&(r=eu(r,m,I,p.get("icon-text-fit-padding"),f,g)));const A=(l,d)=>{d.x<0||d.x>=Fs||d.y<0||d.y>=Fs||function(t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v,b,x,w,k,C,E){const T=t.addToLineVertexArray(n,i);let P,I,M,A,R=0,z=0,L=0,O=0,D=-1,F=-1;const N={};let B=ys("");if(t.allowVerticalPlacement&&r.vertical){const e=l.layout.get("text-rotate").evaluate(x,{},C)+90;M=new ch(c,n,u,h,d,r.vertical,p,f,m,e),a&&(A=new ch(c,n,u,h,d,a,y,_,m,e))}if(o){const i=l.layout.get("icon-rotate").evaluate(x,{}),r="none"!==l.layout.get("icon-text-fit"),s=rh(o,i,k,r),p=a?rh(a,i,k,r):void 0;I=new ch(c,n,u,h,d,o,y,_,!1,i),R=4*s.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[nu*l.layout.get("icon-size").evaluate(x,{})],m[0]>iu&&S("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(tu,'. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[nu*w.compositeIconSizes[0].evaluate(x,{},C),nu*w.compositeIconSizes[1].evaluate(x,{},C)],(m[0]>iu||m[1]>iu)&&S("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(tu,'. Reduce your "icon-size".'))),t.addSymbols(t.icon,s,m,b,v,x,e.ah.none,n,T.lineStartIndex,T.lineLength,-1,C),D=t.icon.placedSymbolArray.length-1,p&&(z=4*p.length,t.addSymbols(t.icon,p,m,b,v,x,e.ah.vertical,n,T.lineStartIndex,T.lineLength,-1,C),F=t.icon.placedSymbolArray.length-1)}const j=Object.keys(r.horizontal);for(const S of j){const i=r.horizontal[S];if(!P){B=ys(i.text);const e=l.layout.get("text-rotate").evaluate(x,{},C);P=new ch(c,n,u,h,d,i,p,f,m,e)}const o=1===i.positionedLines.length;if(L+=xh(t,n,i,s,l,m,x,g,T,r.vertical?e.ah.horizontal:e.ah.horizontalOnly,o?j:[S],N,D,w,C),o)break}r.vertical&&(O+=xh(t,n,r.vertical,s,l,m,x,g,T,e.ah.vertical,["vertical"],N,F,w,C));const V=P?P.boxStartIndex:t.collisionBoxArray.length,U=P?P.boxEndIndex:t.collisionBoxArray.length,q=M?M.boxStartIndex:t.collisionBoxArray.length,G=M?M.boxEndIndex:t.collisionBoxArray.length,Z=I?I.boxStartIndex:t.collisionBoxArray.length,H=I?I.boxEndIndex:t.collisionBoxArray.length,W=A?A.boxStartIndex:t.collisionBoxArray.length,K=A?A.boxEndIndex:t.collisionBoxArray.length;let X=-1;const Y=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;X=Y(P,X),X=Y(M,X),X=Y(I,X),X=Y(A,X);const $=X>-1?1:0;$&&(X*=E/ic),t.glyphOffsetArray.length>=pu.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,x.sortKey);const J=_h(l,x,C),[Q,ee]=function(t,n){const i=t.length,r=null==n?void 0:n.values;if((null==r?void 0:r.length)>0)for(let o=0;o<r.length;o+=2){const n=r[o+1];t.emplaceBack(e.aq[r[o]],n[0],n[1])}return[i,t.length]}(t.textAnchorOffsets,J);t.symbolInstances.emplaceBack(n.x,n.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical||-1,D,F,B,V,U,q,G,Z,H,W,K,u,L,O,R,z,$,0,p,X,Q,ee)}(t,d,l,i,r,o,M,t.layers[0],t.collisionBoxArray,n.index,n.sourceLayerIndex,t.index,y,[x,x,x,x],C,c,v,w,E,f,n,s,u,h,a)};if("line"===T)for(const e of Ku(n.geometry,0,0,Fs,Fs)){const n=th(e,b,k,i.vertical||m,r,24,_,t.overscaling,Fs);for(const i of n)m&&Sh(t,m.text,P,i)||A(e,i)}else if("line-center"===T){for(const e of n.geometry)if(e.length>1){const t=eh(e,k,i.vertical||m,r,24,_);t&&A(e,t)}}else if("Polygon"===n.type)for(const e of vn(n.geometry,0)){const t=hh(e,16);A(e[0],new Xu(t.x,t.y,0))}else if("LineString"===n.type)for(const e of n.geometry)A(e,new Xu(e[0].x,e[0].y,0));else if("Point"===n.type)for(const e of n.geometry)for(const t of e)A([t],new Xu(t.x,t.y,0))}function xh(e,t,n,i,r,s,a,l,c,u,h,d,p,f,m){const g=function(e,t,n,i,r,s,a,l){const c=i.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,u=[];for(const h of t.positionedLines)for(const e of h.positionedGlyphs){if(!e.rect)continue;const i=e.rect||{};let s=Ac+1,d=!0,p=1,f=0;const m=(r||l)&&e.vertical,g=e.metrics.advance*e.scale/2;if(l&&t.verticalizable&&(f=h.lineOffset/2-(e.imageName?-(ic-e.metrics.width*e.scale)/2:(e.scale-1)*ic)),e.imageName){const t=a[e.imageName];d=t.sdf,p=t.pixelRatio,s=zc/p}const y=r?[e.x+g,e.y]:[0,0];let _=r?[0,0]:[e.x+g+n[0],e.y+n[1]-f],v=[0,0];m&&(v=_,_=[0,0]);const b=e.metrics.isDoubleResolution?2:1,x=(e.metrics.left-s)*e.scale-g+_[0],w=(-e.metrics.top-s)*e.scale+_[1],S=x+i.w/b*e.scale/p,k=w+i.h/b*e.scale/p,C=new o(x,w),E=new o(S,w),T=new o(x,k),P=new o(S,k);if(m){const t=new o(-g,g-Fc),n=-Math.PI/2,i=ic/2-g,r=new o(5-Fc-i,-(e.imageName?i:0)),s=new o(...v);C._rotateAround(n,t)._add(r)._add(s),E._rotateAround(n,t)._add(r)._add(s),T._rotateAround(n,t)._add(r)._add(s),P._rotateAround(n,t)._add(r)._add(s)}if(c){const e=Math.sin(c),t=Math.cos(c),n=[t,-e,e,t];C._matMult(n),E._matMult(n),T._matMult(n),P._matMult(n)}const I=new o(0,0),M=new o(0,0);u.push({tl:C,tr:E,bl:T,br:P,tex:i,writingMode:t.writingMode,glyphOffset:y,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:I,pixelOffsetBR:M,minFontScaleX:0,minFontScaleY:0})}return u}(0,n,l,r,s,a,i,e.allowVerticalPlacement),y=e.textSizeData;let _=null;"source"===y.kind?(_=[nu*r.layout.get("text-size").evaluate(a,{})],_[0]>iu&&S("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(tu,'. Reduce your "text-size".'))):"composite"===y.kind&&(_=[nu*f.compositeTextSizes[0].evaluate(a,{},m),nu*f.compositeTextSizes[1].evaluate(a,{},m)],(_[0]>iu||_[1]>iu)&&S("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(tu,'. Reduce your "text-size".'))),e.addSymbols(e.text,g,_,l,s,a,u,t,c.lineStartIndex,c.lineLength,p,m);for(const o of h)d[o]=e.text.placedSymbolArray.length-1;return 4*g.length}function wh(e){for(const t in e)return e[t];return null}function Sh(e,t,n,i){const r=e.compareText;if(t in r){const e=r[t];for(let t=e.length-1;t>=0;t--)if(i.dist(e[t])<n)return!0}else r[t]=[];return r[t].push(i),!1}const kh=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ch{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error("Got v".concat(i," data when expected v1."));const r=kh[15&n];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[s]=new Uint32Array(e,4,1);return new Ch(s,o,r,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const r=kh.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(r<0)throw new Error("Unexpected typed array class: ".concat(n,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Eh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:s}=this,a=[0,r.length-1,0],l=[];for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=s){for(let s=h;s<=u;s++){const a=o[2*s],c=o[2*s+1];a>=e&&a<=n&&c>=t&&c<=i&&l.push(r[s])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=e&&p<=n&&f>=t&&f<=i&&l.push(r[d]),(0===c?e<=p:t<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?n>=p:i>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:o}=this,s=[0,i.length-1,0],a=[],l=n*n;for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)Mh(r[2*n],r[2*n+1],e,t)<=l&&a.push(i[n]);continue}const d=h+u>>1,p=r[2*d],f=r[2*d+1];Mh(p,f,e,t)<=l&&a.push(i[d]),(0===c?e-n<=p:t-n<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?e+n>=p:t+n>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return a}}function Eh(e,t,n,i,r,o){if(r-i<=n)return;const s=i+r>>1;Th(e,t,s,i,r,o),Eh(e,t,n,i,s-1,1-o),Eh(e,t,n,s+1,r,1-o)}function Th(e,t,n,i,r,o){for(;r>i;){if(r-i>600){const s=r-i+1,a=n-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(a-s/2<0?-1:1);Th(e,t,n,Math.max(i,Math.floor(n-a*c/s+u)),Math.min(r,Math.floor(n+(s-a)*c/s+u)),o)}const s=t[2*n+o];let a=i,l=r;for(Ph(e,t,i,n),t[2*r+o]>s&&Ph(e,t,i,r);a<l;){for(Ph(e,t,a,l),a++,l--;t[2*a+o]<s;)a++;for(;t[2*l+o]>s;)l--}t[2*i+o]===s?Ph(e,t,i,l):(l++,Ph(e,t,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function Ph(e,t,n,i){Ih(e,n,i),Ih(t,2*n,2*i),Ih(t,2*n+1,2*i+1)}function Ih(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Mh(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}var Ah;e.bf=void 0,(Ah=e.bf||(e.bf={})).create="create",Ah.load="load",Ah.fullLoad="fullLoad";let Rh=null,zh=[];const Lh=1e3/60,Oh="loadTime",Dh="fullLoadTime",Fh={mark(e){performance.mark(e)},frame(e){const t=e;null!=Rh&&zh.push(t-Rh),Rh=t},clearMetrics(){Rh=null,zh=[],performance.clearMeasures(Oh),performance.clearMeasures(Dh);for(const t in e.bf)performance.clearMarks(e.bf[t])},getPerformanceMetrics(){performance.measure(Oh,e.bf.create,e.bf.load),performance.measure(Dh,e.bf.create,e.bf.fullLoad);const t=performance.getEntriesByName(Oh)[0].duration,n=performance.getEntriesByName(Dh)[0].duration,i=zh.length,r=1/(zh.reduce(((e,t)=>e+t),0)/i/1e3),o=zh.filter((e=>e>Lh)).reduce(((e,t)=>e+(t-Lh)/Lh),0);return{loadTime:t,fullLoadTime:n,fps:r,percentDroppedFrames:o/(i+o)*100,totalFrames:i}}};e.$=class extends po{},e.A=la,e.B=mr,e.C=function(e){if(null==E){const t=e.navigator?e.navigator.userAgent:null;E=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return E},e.D=$r,e.E=Z,e.F=class{constructor(e,t){this.target=e,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Eu((()=>this.process())),this.subscription=function(e,t,n,i){return e.addEventListener(t,n,!1),{unsubscribe:()=>{e.removeEventListener(t,n,!1)}}}(this.target,"message",(e=>this.receive(e))),this.globalScope=C(self)?e:window}registerMessageHandler(e,t){this.messageHandlers[e]=t}sendAsync(e,t){return new Promise(((n,i)=>{const r=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[r]={resolve:n,reject:i},t&&t.signal.addEventListener("abort",(()=>{delete this.resolveRejects[r];const t={id:r,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(t)}),{once:!0});const o=[],s=Object.assign(Object.assign({},e),{id:r,sourceMapId:this.mapId,origin:location.origin,data:Cr(e.data,o)});this.target.postMessage(s,{transfer:o})}))}receive(e){const t=e.data,n=t.id;if(!("file://"!==t.origin&&"file://"!==location.origin&&"resource://android"!==t.origin&&"resource://android"!==location.origin&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if("<cancel>"===t.type){delete this.tasks[n];const e=this.abortControllers[n];return delete this.abortControllers[n],void(e&&e.abort())}if(C(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(0===this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,n){return t(this,void 0,void 0,(function*(){if("<response>"===n.type){const t=this.resolveRejects[e];if(delete this.resolveRejects[e],!t)return;return void(n.error?t.reject(Er(n.error)):t.resolve(Er(n.data)))}if(!this.messageHandlers[n.type])return void this.completeTask(e,new Error("Could not find a registered handler for ".concat(n.type,", map ID: ").concat(this.mapId,", available handlers: ").concat(Object.keys(this.messageHandlers).join(", "))));const t=Er(n.data),i=new AbortController;this.abortControllers[e]=i;try{const r=yield this.messageHandlers[n.type](n.sourceMapId,t,i);this.completeTask(e,null,r)}catch(t){this.completeTask(e,t)}}))}completeTask(e,t,n){const i=[];delete this.abortControllers[e];const r={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Cr(t):null,data:Cr(n,i)};this.target.postMessage(r,{transfer:i})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},e.G=D,e.H=function(){var e=new la(16);return la!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.I=Lc,e.J=function(e,t,n){var i,r,o,s,a,l,c,u,h,d,p,f,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=i=t[0],e[1]=r,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=i*m+a*g+h*y+t[12],e[13]=r*m+l*g+d*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=s*m+u*g+f*y+t[15]),e},e.K=function(e,t,n){var i=n[0],r=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.L=ua,e.M=function(e,t){const n={};for(let i=0;i<t.length;i++){const r=t[i];r in e&&(n[r]=e[r])}return n},e.N=Pu,e.O=Au,e.P=o,e.Q=Ru,e.R=Sa,e.S=Bu,e.T=Zr,e.U=h,e.V=d,e.W=I,e.X=Fs,e.Y=lo,e.Z=Ou,e._=t,e.a=L,e.a$=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.a0=ls,e.a1=Fu,e.a2=re,e.a3=e=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((n=>{t.onloadstart=()=>{n(t)};for(const i of e){const e=window.document.createElement("source");j(i)||(t.crossOrigin="Anonymous"),e.src=i,t.appendChild(e)}}))},e.a4=function(){return _++},e.a5=Oo,e.a6=pu,e.a7=Pi,e.a8=Vs,e.a9=qu,e.aA=function(e){if("custom"===e.type)return new Cu(e);switch(e.type){case"background":return new xu(e);case"circle":return new fa(e);case"fill":return new ll(e);case"fill-extrusion":return new Rl(e);case"heatmap":return new Ca(e);case"hillshade":return new Pa(e);case"line":return new Kl(e);case"raster":return new ku(e);case"symbol":return new _u(e)}},e.aB=x,e.aC=function(e,t){if(!e)return[{command:"setStyle",args:[t]}];let n=[];try{if(!X(e.version,t.version))return[{command:"setStyle",args:[t]}];X(e.center,t.center)||n.push({command:"setCenter",args:[t.center]}),X(e.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),X(e.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),X(e.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),X(e.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),X(e.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),X(e.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),X(e.light,t.light)||n.push({command:"setLight",args:[t.light]}),X(e.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),X(e.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),X(e.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});const i={},r=[];!function(e,t,n,i){let r;for(r in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(t,r)||J(r,n,i));for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?X(e[r],t[r])||("geojson"===e[r].type&&"geojson"===t[r].type&&ee(e,t,r)?Y(n,{command:"setGeoJSONSourceData",args:[r,t[r].data]}):Q(r,t,n,i)):$(r,t,n))}(e.sources,t.sources,r,i);const o=[];e.layers&&e.layers.forEach((e=>{"source"in e&&i[e.source]?n.push({command:"removeLayer",args:[e.id]}):o.push(e)})),n=n.concat(r),function(e,t,n){t=t||[];const i=(e=e||[]).map(ne),r=t.map(ne),o=e.reduce(ie,{}),s=t.reduce(ie,{}),a=i.slice(),l=Object.create(null);let c,u,h,d,p;for(let f=0,m=0;f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(s,c)?m++:(Y(n,{command:"removeLayer",args:[c]}),a.splice(a.indexOf(c,m),1));for(let f=0,m=0;f<r.length;f++)c=r[r.length-1-f],a[a.length-1-f]!==c&&(Object.prototype.hasOwnProperty.call(o,c)?(Y(n,{command:"removeLayer",args:[c]}),a.splice(a.lastIndexOf(c,a.length-m),1)):m++,d=a[a.length-f],Y(n,{command:"addLayer",args:[s[c],d]}),a.splice(a.length-f,0,c),l[c]=!0);for(let f=0;f<r.length;f++)if(c=r[f],u=o[c],h=s[c],!l[c]&&!X(u,h))if(X(u.source,h.source)&&X(u["source-layer"],h["source-layer"])&&X(u.type,h.type)){for(p in te(u.layout,h.layout,n,c,null,"setLayoutProperty"),te(u.paint,h.paint,n,c,null,"setPaintProperty"),X(u.filter,h.filter)||Y(n,{command:"setFilter",args:[c,h.filter]}),X(u.minzoom,h.minzoom)&&X(u.maxzoom,h.maxzoom)||Y(n,{command:"setLayerZoomRange",args:[c,h.minzoom,h.maxzoom]}),u)Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?te(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):X(u[p],h[p])||Y(n,{command:"setLayerProperty",args:[c,p,h[p]]}));for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&!Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?te(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):X(u[p],h[p])||Y(n,{command:"setLayerProperty",args:[c,p,h[p]]}))}else Y(n,{command:"removeLayer",args:[c]}),d=a[a.lastIndexOf(c)+1],Y(n,{command:"addLayer",args:[h,d]})}(o,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:"setStyle",args:[t]}]}return n},e.aD=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.aE=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(!e(t[i],n[i]))return!1;return!0}return t===n},e.aF=v,e.aG=b,e.aH=class extends ws{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.aI=Ss,e.aJ=class extends ws{constructor(e,t){super(e,t),this.current=Es}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.aK=ks,e.aL=Cs,e.aM=We,e.aN=class extends ws{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.aO=class extends ws{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.aP=function(e,t,n,i,r,o,s){var a=1/(t-n),l=1/(i-r),c=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(r+i)*l,e[14]=(s+o)*c,e[15]=1,e},e.aQ=da,e.aR=class extends So{},e.aS=ec,e.aT=class extends Co{},e.aU=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.aV=ka,e.aW=Ho,e.aX=rs,e.aY=class extends Ro{},e.aZ=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e.a_=function(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],y=e[15],_=t[0],v=t[1],b=t[2],x=t[3],w=t[4],S=t[5],k=t[6],C=t[7],E=t[8],T=t[9],P=t[10],I=t[11],M=t[12],A=t[13],R=t[14],z=t[15];return Math.abs(n-_)<=aa*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-v)<=aa*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-b)<=aa*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-x)<=aa*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-w)<=aa*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(a-S)<=aa*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(l-k)<=aa*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(c-C)<=aa*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(u-E)<=aa*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(h-T)<=aa*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-P)<=aa*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-I)<=aa*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(f-M)<=aa*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(m-A)<=aa*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-R)<=aa*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-z)<=aa*Math.max(1,Math.abs(y),Math.abs(z))},e.aa=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,i,r)=>{const o=i||r;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t},e.ab=function(e,t){const n=[];for(const i in e)i in t||n.push(i);return n},e.ac=m,e.ad=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+c*i,e[1]=s*r+u*i,e[2]=a*r+h*i,e[3]=l*r+d*i,e[4]=c*r-o*i,e[5]=u*r-s*i,e[6]=h*r-a*i,e[7]=d*r-l*i,e},e.ae=function(e){var t=new la(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.af=pa,e.ag=function(e,t){let n=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){const{interpolationType:r,minZoom:o,maxZoom:s}=e,a=r?m(At.interpolationFactor(r,t,o,s),0,1):0;"camera"===e.kind?i=Mt.number(e.minSize,e.maxSize,a):n=a}return{uSizeT:n,uSize:i}},e.ai=function(e,t,n){let{uSize:i,uSizeT:r}=t,{lowerSize:o,upperSize:s}=n;return"source"===e.kind?o/nu:"composite"===e.kind?Mt.number(o/nu,s/nu,r):i},e.aj=cu,e.ak=function(e,t,n,i){const r=t.y-e.y,s=t.x-e.x,a=i.y-n.y,l=i.x-n.x,c=a*s-l*r;if(0===c)return null;const u=(l*(e.y-n.y)-a*(e.x-n.x))/c;return new o(e.x+u*s,e.y+u*r)},e.al=Ku,e.am=Gs,e.an=ca,e.ao=function(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return[t,n,i,r]},e.ap=ic,e.ar=ou,e.as=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],_=n*a-i*s,v=n*l-r*s,b=n*c-o*s,x=i*l-r*a,w=i*c-o*a,S=r*c-o*l,k=u*m-h*f,C=u*g-d*f,E=u*y-p*f,T=h*g-d*m,P=h*y-p*m,I=d*y-p*g,M=_*I-v*P+b*T+x*E-w*C+S*k;return M?(e[0]=(a*I-l*P+c*T)*(M=1/M),e[1]=(r*P-i*I-o*T)*M,e[2]=(m*S-g*w+y*x)*M,e[3]=(d*w-h*S-p*x)*M,e[4]=(l*E-s*I-c*C)*M,e[5]=(n*I-r*E+o*C)*M,e[6]=(g*b-f*S-y*v)*M,e[7]=(u*S-d*b+p*v)*M,e[8]=(s*P-a*E+c*k)*M,e[9]=(i*E-n*P-o*k)*M,e[10]=(f*w-m*b+y*_)*M,e[11]=(h*b-u*w-p*_)*M,e[12]=(a*C-s*T-l*k)*M,e[13]=(n*T-i*C+r*k)*M,e[14]=(m*v-f*x-g*_)*M,e[15]=(u*x-h*v+d*_)*M,e):null},e.at=vh,e.au=Yc,e.av=Ch,e.aw=function(){const e={},t=H.$version;for(const n in H.$root){const i=H.$root[n];if(i.required){let r=null;r="version"===n?t:"array"===i.type?[]:{},null!=r&&(e[n]=r)}}return e},e.ax=Tr,e.ay=N,e.az=function(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=K(e[n],t[e[n].ref]));return e},e.b=T,e.b0=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},e.b1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.b2=g,e.b3=Nu,e.b4=zu,e.b5=function(e,t,n,i,r){var o,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+i)*(o=1/(i-r)),e[14]=2*r*i*o):(e[10]=-1,e[14]=-2*i),e},e.b6=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+c*i,e[5]=s*r+u*i,e[6]=a*r+h*i,e[7]=l*r+d*i,e[8]=c*r-o*i,e[9]=u*r-s*i,e[10]=h*r-a*i,e[11]=d*r-l*i,e},e.b7=p,e.b8=f,e.b9=function(e){return e*Math.PI/180},e.bA=function(e){return e.message===R},e.bB=bi,e.bC=Vr,e.ba=function(e,t){const{x:n,y:i}=Ou.fromLngLat(t);return!(e<0||e>25||i<0||i>=1||n<0||n>=1)},e.bb=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.bc=class extends ho{},e.bd=Tu,e.be=Fh,e.bg=F,e.bh=function(e,t){L.REGISTERED_PROTOCOLS[e]=t},e.bi=function(e){delete L.REGISTERED_PROTOCOLS[e]},e.bj=function(e,t){const n={};for(let r=0;r<e.length;r++){const i=t&&t[e[r].id]||Fi(e[r]);t&&(t[e[r].id]=i);let o=n[i];o||(o=n[i]=[]),o.push(e[r])}const i=[];for(const r in n)i.push(n[r]);return i},e.bk=xr,e.bl=Uu,e.bm=Gu,e.bn=Oc,e.bo=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=Fs/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const n=t.bucket.layers[0],i=n.layout,r=n._unevaluatedLayout._values,o={layoutIconSize:r["icon-size"].possiblyEvaluate(new Ur(t.bucket.zoom+1),t.canonical),layoutTextSize:r["text-size"].possiblyEvaluate(new Ur(t.bucket.zoom+1),t.canonical),textMaxSize:r["text-size"].possiblyEvaluate(new Ur(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.textSizeData;o.compositeTextSizes=[r["text-size"].possiblyEvaluate(new Ur(e),t.canonical),r["text-size"].possiblyEvaluate(new Ur(n),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.iconSizeData;o.compositeIconSizes=[r["icon-size"].possiblyEvaluate(new Ur(e),t.canonical),r["icon-size"].possiblyEvaluate(new Ur(n),t.canonical)]}const s=i.get("text-line-height")*ic,a="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),l=i.get("text-keep-upright"),c=i.get("text-size");for(const u of t.bucket.features){const r=i.get("text-font").evaluate(u,{},t.canonical).join(","),h=c.evaluate(u,{},t.canonical),d=o.layoutTextSize.evaluate(u,{},t.canonical),p=o.layoutIconSize.evaluate(u,{},t.canonical),f={horizontal:{},vertical:void 0},m=u.text;let g,y=[0,0];if(m){const o=m.toString(),c=i.get("text-letter-spacing").evaluate(u,{},t.canonical)*ic,p=Mr(o)?c:0,g=i.get("text-anchor").evaluate(u,{},t.canonical),_=_h(n,u,t.canonical);if(!_){const e=i.get("text-radial-offset").evaluate(u,{},t.canonical);y=e?yh(g,[e*ic,gh]):i.get("text-offset").evaluate(u,{},t.canonical).map((e=>e*ic))}let v=a?"center":i.get("text-justify").evaluate(u,{},t.canonical);const b="point"===i.get("symbol-placement")?i.get("text-max-width").evaluate(u,{},t.canonical)*ic:1/0,x=()=>{t.bucket.allowVerticalPlacement&&Ir(o)&&(f.vertical=jc(m,t.glyphMap,t.glyphPositions,t.imagePositions,r,b,s,g,"left",p,y,e.ah.vertical,!0,d,h))};if(!a&&_){const n=new Set;if("auto"===v)for(let e=0;e<_.values.length;e+=2)n.add(vh(_.values[e]));else n.add(v);let i=!1;for(const o of n)if(!f.horizontal[o])if(i)f.horizontal[o]=f.horizontal[0];else{const n=jc(m,t.glyphMap,t.glyphPositions,t.imagePositions,r,b,s,"center",o,p,y,e.ah.horizontal,!1,d,h);n&&(f.horizontal[o]=n,i=1===n.positionedLines.length)}x()}else{"auto"===v&&(v=vh(g));const n=jc(m,t.glyphMap,t.glyphPositions,t.imagePositions,r,b,s,g,v,p,y,e.ah.horizontal,!1,d,h);n&&(f.horizontal[v]=n),x(),Ir(o)&&a&&l&&(f.vertical=jc(m,t.glyphMap,t.glyphPositions,t.imagePositions,r,b,s,g,v,p,y,e.ah.vertical,!1,d,h))}}let _=!1;if(u.icon&&u.icon.name){const e=t.imageMap[u.icon.name];e&&(g=Jc(t.imagePositions[u.icon.name],i.get("icon-offset").evaluate(u,{},t.canonical),i.get("icon-anchor").evaluate(u,{},t.canonical)),_=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=_:t.bucket.sdfIcons!==_&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==i.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const v=wh(f.horizontal)||f.vertical;t.bucket.iconsInText=!!v&&v.iconsInText,(v||g)&&bh(t.bucket,u,f,g,t.imageMap,o,d,p,y,_,t.canonical)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.bp=Ul,e.bq=rl,e.br=Tl,e.bs=dl,e.bt=Ec,e.bu=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.bv=function(e,n,i,r,o){return t(this,void 0,void 0,(function*(){if(d())try{return yield I(e,n,i,r,o)}catch(e){}return function(e,t,n,i,r){const o=e.width,s=e.height;M&&A||(M=new OffscreenCanvas(o,s),A=M.getContext("2d",{willReadFrequently:!0})),M.width=o,M.height=s,A.drawImage(e,0,0,o,s);const a=A.getImageData(t,n,i,r);return A.clearRect(0,0,o,s),a.data}(e,n,i,r,o)}))},e.bw=Vu,e.bx=n,e.by=i,e.bz=rc,e.c=z,e.d=e=>t(void 0,void 0,void 0,(function*(){if(0===e.byteLength)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(e){throw new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}})),e.e=y,e.f=e=>new Promise(((t,n)=>{const i=new Image;i.onload=()=>{t(i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame((()=>{i.src=P}))},i.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?URL.createObjectURL(r):P})),e.g=O,e.h=(e,t)=>B(y(e,{type:"json"}),t),e.i=C,e.j=G,e.k=q,e.l=(e,t)=>B(y(e,{type:"arrayBuffer"}),t),e.m=B,e.n=function(e){return new Ec(e).readFields(Pc,[])},e.o=wa,e.p=Rc,e.q=no,e.r=fr,e.s=j,e.t=_r,e.u=pr,e.v=H,e.w=S,e.x=function(e){let[t,n,i]=e;return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(i),y:t*Math.sin(n)*Math.sin(i),z:t*Math.cos(i)}},e.y=Mt,e.z=Ur})),n("worker",["./shared"],(function(e){class t{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,n){for(const r of t){this._layerConfigs[r.id]=r;const t=this._layers[r.id]=e.aA(r);t._featureFilter=e.a7(t.filter),this.keyCache[r.id]&&delete this.keyCache[r.id]}for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=e.bj(Object.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const o=n.sourceLayer||"_geojsonTileLayer";let s=r[o];s||(s=r[o]=[]),s.push(t)}}}class n{constructor(t){const n={},i=[];for(const e in t){const r=t[e],o=n[e]={};for(const e in r){const t=r[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const n={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};i.push(n),o[e]={rect:n,metrics:t.metrics}}}const{w:r,h:o}=e.p(i),s=new e.o({width:r||1,height:o||1});for(const a in t){const i=t[a];for(const t in i){const r=i[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const o=n[a][t].rect;e.o.copy(r.bitmap,s,{x:0,y:0},{x:o.x+1,y:o.y+1},r.bitmap)}}this.image=s,this.positions=n}}e.bk("GlyphAtlas",n);class i{constructor(t){this.tileID=new e.S(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[]}parse(t,i,o,s){return e._(this,void 0,void 0,(function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.a5;const a=new e.bl(Object.keys(t.layers).sort()),l=new e.bm(this.tileID,this.promoteId);l.bucketLayerIDs=[];const c={},u={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:o},h=i.familiesBySource[this.source];for(const n in h){const i=t.layers[n];if(!i)continue;1===i.version&&e.w('Vector tile source "'.concat(this.source,'" layer "').concat(n,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const s=a.encode(n),d=[];for(let e=0;e<i.length;e++){const t=i.feature(e),r=l.getId(t,n);d.push({feature:t,id:r,index:e,sourceLayerIndex:s})}for(const t of h[n]){const n=t[0];n.source!==this.source&&e.w("layer.source = ".concat(n.source," does not equal this.source = ").concat(this.source)),n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(r(t,this.zoom,o),(c[n.id]=n.createBucket({index:l.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:s,sourceID:this.source})).populate(d,u,this.tileID.canonical),l.bucketLayerIDs.push(t.map((e=>e.id))))}}const d=e.aF(u.glyphDependencies,(e=>Object.keys(e).map(Number)));this.inFlightDependencies.forEach((e=>null==e?void 0:e.abort())),this.inFlightDependencies=[];let p=Promise.resolve({});if(Object.keys(d).length){const e=new AbortController;this.inFlightDependencies.push(e),p=s.sendAsync({type:"GG",data:{stacks:d,source:this.source,tileID:this.tileID,type:"glyphs"}},e)}const f=Object.keys(u.iconDependencies);let m=Promise.resolve({});if(f.length){const e=new AbortController;this.inFlightDependencies.push(e),m=s.sendAsync({type:"GI",data:{icons:f,source:this.source,tileID:this.tileID,type:"icons"}},e)}const g=Object.keys(u.patternDependencies);let y=Promise.resolve({});if(g.length){const e=new AbortController;this.inFlightDependencies.push(e),y=s.sendAsync({type:"GI",data:{icons:g,source:this.source,tileID:this.tileID,type:"patterns"}},e)}const[_,v,b]=yield Promise.all([p,m,y]),x=new n(_),w=new e.bn(v,b);for(const t in c){const n=c[t];n instanceof e.a6?(r(n.layers,this.zoom,o),e.bo({bucket:n,glyphMap:_,glyphPositions:x.positions,imageMap:v,imagePositions:w.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):n.hasPattern&&(n instanceof e.bp||n instanceof e.bq||n instanceof e.br)&&(r(n.layers,this.zoom,o),n.addFeatures(u,this.tileID.canonical,w.patternPositions))}return this.status="done",{buckets:Object.values(c).filter((e=>!e.isEmpty())),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:x.image,imageAtlas:w,glyphMap:this.returnDependencies?_:null,iconMap:this.returnDependencies?v:null,glyphPositions:this.returnDependencies?x.positions:null}}))}}function r(t,n,i){const r=new e.z(n);for(const e of t)e.recalculate(r,i)}class o{constructor(e,t,n){this.actor=e,this.layerIndex=t,this.availableImages=n,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(t,n){return e._(this,void 0,void 0,(function*(){const i=yield e.l(t.request,n);try{return{vectorTile:new e.bs.VectorTile(new e.bt(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires}}catch(e){const r=new Uint8Array(i.data);let o="Unable to parse the tile at ".concat(t.request.url,", ");throw o+=31===r[0]&&139===r[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":"got error: ".concat(e.message),new Error(o)}}))}loadTile(t){return e._(this,void 0,void 0,(function*(){const n=t.uid,r=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.bu(t.request),o=new i(t);this.loading[n]=o;const s=new AbortController;o.abort=s;try{const i=yield this.loadVectorTile(t,s);if(delete this.loading[n],!i)return null;const a=i.rawData,l={};i.expires&&(l.expires=i.expires),i.cacheControl&&(l.cacheControl=i.cacheControl);const c={};if(r){const e=r.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}o.vectorTile=i.vectorTile;const u=o.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[n]=o,this.fetching[n]={rawTileData:a,cacheControl:l,resourceTiming:c};try{const t=yield u;return e.e({rawTileData:a.slice(0)},t,l,c)}finally{delete this.fetching[n]}}catch(e){throw delete this.loading[n],o.status="done",this.loaded[n]=o,e}}))}reloadTile(t){return e._(this,void 0,void 0,(function*(){const n=t.uid;if(!this.loaded||!this.loaded[n])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const i=this.loaded[n];if(i.showCollisionBoxes=t.showCollisionBoxes,"parsing"===i.status){const t=yield i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor);let r;if(this.fetching[n]){const{rawTileData:i,cacheControl:o,resourceTiming:s}=this.fetching[n];delete this.fetching[n],r=e.e({rawTileData:i.slice(0)},t,o,s)}else r=t;return r}if("done"===i.status&&i.vectorTile)return i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(t){return e._(this,void 0,void 0,(function*(){const e=this.loading,n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort.abort(),delete e[n])}))}removeTile(t){return e._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid]}))}}class s{constructor(){this.loaded={}}loadTile(t){return e._(this,void 0,void 0,(function*(){const{uid:n,encoding:i,rawImageData:r,redFactor:o,greenFactor:s,blueFactor:a,baseShift:l}=t,c=r.width+2,u=r.height+2,h=e.b(r)?new e.R({width:c,height:u},yield e.bv(r,-1,-1,c,u)):r,d=new e.bw(n,h,i,o,s,a,l);return this.loaded=this.loaded||{},this.loaded[n]=d,d}))}removeTile(e){const t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]}}function a(e,t){if(0!==e.length){l(e[0],t);for(var n=1;n<e.length;n++)l(e[n],!t)}}function l(e,t){for(var n=0,i=0,r=0,o=e.length,s=o-1;r<o;s=r++){var a=(e[r][0]-e[s][0])*(e[s][1]+e[r][1]),l=n+a;i+=Math.abs(n)>=Math.abs(a)?n-l+a:a-l+n,n=l}n+i>=0!=!!t&&e.reverse()}var c=e.bx((function e(t,n){var i,r=t&&t.type;if("FeatureCollection"===r)for(i=0;i<t.features.length;i++)e(t.features[i],n);else if("GeometryCollection"===r)for(i=0;i<t.geometries.length;i++)e(t.geometries[i],n);else if("Feature"===r)e(t.geometry,n);else if("Polygon"===r)a(t.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<t.coordinates.length;i++)a(t.coordinates[i],n);return t}));const u=e.bs.VectorTileFeature.prototype.toGeoJSON;var h={exports:{}},d=e.by,p=e.bs.VectorTileFeature,f=m;function m(e,t){this.options=t||{},this.features=e,this.length=e.length}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}m.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],i=[],r=0;r<n.length;r++)i.push(new d(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<e.length;o++)for(var s=e[o],a=0;a<s.length;a++){var l=s[a];t=Math.min(t,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[t,i,n,r]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var y=e.bz,_=f;function v(e){var t=new y;return function(e,t){for(var n in e.layers)t.writeMessage(3,b,e.layers[n])}(e,t),t.finish()}function b(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)i.feature=e.feature(n),t.writeMessage(2,x,i);var r=i.keys;for(n=0;n<r.length;n++)t.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)t.writeMessage(4,E,o[n])}function x(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,w,e),t.writeVarintField(3,n.type),t.writeMessage(4,C,n)}function w(e,t){var n=e.feature,i=e.keys,r=e.values,o=e.keycache,s=e.valuecache;for(var a in n.properties){var l=n.properties[a],c=o[a];if(null!==l){void 0===c&&(i.push(a),o[a]=c=i.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=s[h];void 0===d&&(r.push(l),s[h]=d=r.length-1),t.writeVarint(d)}}}function S(e,t){return(t<<3)+(7&e)}function k(e){return e<<1^e>>31}function C(e,t){for(var n=e.loadGeometry(),i=e.type,r=0,o=0,s=n.length,a=0;a<s;a++){var l=n[a],c=1;1===i&&(c=l.length),t.writeVarint(S(1,c));for(var u=3===i?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==i&&t.writeVarint(S(2,u-1));var d=l[h].x-r,p=l[h].y-o;t.writeVarint(k(d)),t.writeVarint(k(p)),r+=d,o+=p}3===i&&t.writeVarint(S(7,1))}}function E(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}h.exports=v,h.exports.fromVectorTileJs=v,h.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var i in e)n[i]=new _(e[i].features,t),n[i].name=i,n[i].version=t.version,n[i].extent=t.extent;return v({layers:n})},h.exports.GeoJSONWrapper=_;var T=e.bx(h.exports);const P={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},I=Math.fround||(M=new Float32Array(1),e=>(M[0]=+e,M[0]));var M;const A=3,R=5,z=6;class L{constructor(e){this.options=Object.assign(Object.create(P),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:i}=this.options;t&&console.time("total time");const r="prepare ".concat(e.length," points");t&&console.time(r),this.points=e;const o=[];for(let a=0;a<e.length;a++){const t=e[a];if(!t.geometry)continue;const[n,i]=t.geometry.coordinates,r=I(F(n)),s=I(N(i));o.push(r,s,1/0,a,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[i+1]=this._createTree(o);t&&console.timeEnd(r);for(let a=i;a>=n;a--){const e=+Date.now();s=this.trees[a]=this._createTree(this._cluster(s,a)),t&&console.log("z%d: %d clusters in %dms",a,s.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let r=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,r=180;else if(n>r){const e=this.getClusters([n,i,180,o],t),s=this.getClusters([-180,i,r,o],t);return e.concat(s)}const s=this.trees[this._limitZoom(t)],a=s.range(F(n),N(o),F(r),N(i)),l=s.data,c=[];for(const u of a){const e=this.stride*u;c.push(l[e+R]>1?O(l,e,this.clusterProps):this.points[l[e+A]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.data;if(t*this.stride>=o.length)throw new Error(i);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=r.within(o[t*this.stride],o[t*this.stride+1],s),l=[];for(const c of a){const t=c*this.stride;o[t+4]===e&&l.push(o[t+R]>1?O(o,t,this.clusterProps):this.points[o[t+A]])}if(0===l.length)throw new Error(i);return l}getLeaves(e,t,n){const i=[];return this._appendLeaves(i,e,t=t||10,n=n||0,0),i}getTile(e,t,n){const i=this.trees[this._limitZoom(e)],r=Math.pow(2,e),{extent:o,radius:s}=this.options,a=s/o,l=(n-a)/r,c=(n+1+a)/r,u={features:[]};return this._addTileFeatures(i.range((t-a)/r,l,(t+1+a)/r,c),i.data,t,n,r,u),0===t&&this._addTileFeatures(i.range(1-a/r,l,1,c),i.data,r,n,r,u),t===r-1&&this._addTileFeatures(i.range(0,l,a/r,c),i.data,-1,n,r,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,i,r){const o=this.getChildren(t);for(const s of o){const t=s.properties;if(t&&t.cluster?r+t.point_count<=i?r+=t.point_count:r=this._appendLeaves(e,t.cluster_id,n,i,r):r<i?r++:e.push(s),e.length===n)break}return r}_createTree(t){const n=new e.av(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,i,r,o){for(const s of e){const e=s*this.stride,a=t[e+R]>1;let l,c,u;if(a)l=D(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+A]];l=n.properties;const[i,r]=n.geometry.coordinates;c=F(i),u=N(r)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*r-n)),Math.round(this.options.extent*(u*r-i))]],tags:l};let d;d=a||this.options.generateId?t[e+A]:this.points[t[e+A]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:i,reduce:r,minPoints:o}=this.options,s=n/(i*Math.pow(2,t)),a=e.data,l=[],c=this.stride;for(let u=0;u<a.length;u+=c){if(a[u+2]<=t)continue;a[u+2]=t;const n=a[u],i=a[u+1],h=e.within(a[u],a[u+1],s),d=a[u+R];let p=d;for(const e of h){const n=e*c;a[n+2]>t&&(p+=a[n+R])}if(p>d&&p>=o){let e,o=n*d,s=i*d,f=-1;const m=((u/c|0)<<5)+(t+1)+this.points.length;for(const n of h){const i=n*c;if(a[i+2]<=t)continue;a[i+2]=t;const l=a[i+R];o+=a[i]*l,s+=a[i+1]*l,a[i+4]=m,r&&(e||(e=this._map(a,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),r(e,this._map(a,i)))}a[u+4]=m,l.push(o/p,s/p,1/0,m,-1,p),r&&l.push(f)}else{for(let e=0;e<c;e++)l.push(a[u+e]);if(p>1)for(const e of h){const n=e*c;if(!(a[n+2]<=t)){a[n+2]=t;for(let e=0;e<c;e++)l.push(a[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+R]>1){const i=this.clusterProps[e[t+z]];return n?Object.assign({},i):i}const i=this.points[e[t+A]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function O(e,t,n){return{type:"Feature",id:e[t+A],properties:D(e,t,n),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),B(e[t+1])]}};var i}function D(e,t,n){const i=e[t+R],r=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?Math.round(i/100)/10+"k":i,o=e[t+z],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:e[t+A],point_count:i,point_count_abbreviated:r})}function F(e){return e/360+.5}function N(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function B(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function j(e,t,n,i){let r=i;const o=t+(n-t>>1);let s,a=n-t;const l=e[t],c=e[t+1],u=e[n],h=e[n+1];for(let d=t+3;d<n;d+=3){const t=V(e[d],e[d+1],l,c,u,h);if(t>r)s=d,r=t;else if(t===r){const e=Math.abs(d-o);e<a&&(s=d,a=e)}}r>i&&(s-t>3&&j(e,t,s,i),e[s+2]=r,n-s>3&&j(e,s,n,i))}function V(e,t,n,i,r,o){let s=r-n,a=o-i;if(0!==s||0!==a){const l=((e-n)*s+(t-i)*a)/(s*s+a*a);l>1?(n=r,i=o):l>0&&(n+=s*l,i+=a*l)}return s=e-n,a=t-i,s*s+a*a}function U(e,t,n,i){const r={id:null==e?null:e,type:t,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===t||"MultiPoint"===t||"LineString"===t)q(r,n);else if("Polygon"===t)q(r,n[0]);else if("MultiLineString"===t)for(const o of n)q(r,o);else if("MultiPolygon"===t)for(const o of n)q(r,o[0]);return r}function q(e,t){for(let n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function G(e,t,n,i){if(!t.geometry)return;const r=t.geometry.coordinates;if(r&&0===r.length)return;const o=t.geometry.type,s=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2);let a=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)Z(r,a);else if("MultiPoint"===o)for(const c of r)Z(c,a);else if("LineString"===o)H(r,a,s,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(const n of r)a=[],H(n,a,s,!1),e.push(U(l,"LineString",a,t.properties));return}W(r,a,s,!1)}else if("Polygon"===o)W(r,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(const r of t.geometry.geometries)G(e,{id:l,geometry:r,properties:t.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const e of r){const t=[];W(e,t,s,!0),a.push(t)}}e.push(U(l,o,a,t.properties))}function Z(e,t){t.push(K(e[0]),X(e[1]),0)}function H(e,t,n,i){let r,o,s=0;for(let l=0;l<e.length;l++){const n=K(e[l][0]),a=X(e[l][1]);t.push(n,a,0),l>0&&(s+=i?(r*a-n*o)/2:Math.sqrt(Math.pow(n-r,2)+Math.pow(a-o,2))),r=n,o=a}const a=t.length-3;t[2]=1,j(t,0,a,n),t[a+2]=1,t.size=Math.abs(s),t.start=0,t.end=t.size}function W(e,t,n,i){for(let r=0;r<e.length;r++){const o=[];H(e[r],o,n,i),t.push(o)}}function K(e){return e/360+.5}function X(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Y(e,t,n,i,r,o,s,a){if(i/=t,o>=(n/=t)&&s<i)return e;if(s<n||o>=i)return null;const l=[];for(const c of e){const e=c.geometry;let t=c.type;const o=0===r?c.minX:c.minY,s=0===r?c.maxX:c.maxY;if(o>=n&&s<i){l.push(c);continue}if(s<n||o>=i)continue;let u=[];if("Point"===t||"MultiPoint"===t)$(e,u,n,i,r);else if("LineString"===t)J(e,u,n,i,r,!1,a.lineMetrics);else if("MultiLineString"===t)ee(e,u,n,i,r,!1);else if("Polygon"===t)ee(e,u,n,i,r,!0);else if("MultiPolygon"===t)for(const a of e){const e=[];ee(a,e,n,i,r,!0),e.length&&u.push(e)}if(u.length){if(a.lineMetrics&&"LineString"===t){for(const e of u)l.push(U(c.id,t,e,c.tags));continue}"LineString"!==t&&"MultiLineString"!==t||(1===u.length?(t="LineString",u=u[0]):t="MultiLineString"),"Point"!==t&&"MultiPoint"!==t||(t=3===u.length?"Point":"MultiPoint"),l.push(U(c.id,t,u,c.tags))}}return l.length?l:null}function $(e,t,n,i,r){for(let o=0;o<e.length;o+=3){const s=e[o+r];s>=n&&s<=i&&te(t,e[o],e[o+1],e[o+2])}}function J(e,t,n,i,r,o,s){let a=Q(e);const l=0===r?ne:ie;let c,u,h=e.start;for(let g=0;g<e.length-3;g+=3){const d=e[g],p=e[g+1],f=e[g+2],m=e[g+3],y=e[g+4],_=0===r?d:p,v=0===r?m:y;let b=!1;s&&(c=Math.sqrt(Math.pow(d-m,2)+Math.pow(p-y,2))),_<n?v>n&&(u=l(a,d,p,m,y,n),s&&(a.start=h+c*u)):_>i?v<i&&(u=l(a,d,p,m,y,i),s&&(a.start=h+c*u)):te(a,d,p,f),v<n&&_>=n&&(u=l(a,d,p,m,y,n),b=!0),v>i&&_<=i&&(u=l(a,d,p,m,y,i),b=!0),!o&&b&&(s&&(a.end=h+c*u),t.push(a),a=Q(e)),s&&(h+=c)}let d=e.length-3;const p=e[d],f=e[d+1],m=0===r?p:f;m>=n&&m<=i&&te(a,p,f,e[d+2]),d=a.length-3,o&&d>=3&&(a[d]!==a[0]||a[d+1]!==a[1])&&te(a,a[0],a[1],a[2]),a.length&&t.push(a)}function Q(e){const t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ee(e,t,n,i,r,o){for(const s of e)J(s,t,n,i,r,o,!1)}function te(e,t,n,i){e.push(t,n,i)}function ne(e,t,n,i,r,o){const s=(o-t)/(i-t);return te(e,o,n+(r-n)*s,1),s}function ie(e,t,n,i,r,o){const s=(o-n)/(r-n);return te(e,t+(i-t)*s,o,1),s}function re(e,t){const n=[];for(let i=0;i<e.length;i++){const r=e[i],o=r.type;let s;if("Point"===o||"MultiPoint"===o||"LineString"===o)s=oe(r.geometry,t);else if("MultiLineString"===o||"Polygon"===o){s=[];for(const e of r.geometry)s.push(oe(e,t))}else if("MultiPolygon"===o){s=[];for(const e of r.geometry){const n=[];for(const i of e)n.push(oe(i,t));s.push(n)}}n.push(U(r.id,o,s,r.tags))}return n}function oe(e,t){const n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(let i=0;i<e.length;i+=3)n.push(e[i]+t,e[i+1],e[i+2]);return n}function se(e,t){if(e.transformed)return e;const n=1<<e.z,i=e.x,r=e.y;for(const o of e.features){const e=o.geometry,s=o.type;if(o.geometry=[],1===s)for(let a=0;a<e.length;a+=2)o.geometry.push(ae(e[a],e[a+1],t,n,i,r));else for(let a=0;a<e.length;a++){const s=[];for(let o=0;o<e[a].length;o+=2)s.push(ae(e[a][o],e[a][o+1],t,n,i,r));o.geometry.push(s)}}return e.transformed=!0,e}function ae(e,t,n,i,r,o){return[Math.round(n*(e*i-r)),Math.round(n*(t*i-o))]}function le(e,t,n,i,r){const o=t===r.maxZoom?0:r.tolerance/((1<<t)*r.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:e.length,source:null,x:n,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const a of e)ce(s,a,o,r);return s}function ce(e,t,n,i){const r=t.geometry,o=t.type,s=[];if(e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),"Point"===o||"MultiPoint"===o)for(let a=0;a<r.length;a+=3)s.push(r[a],r[a+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)ue(s,r,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(let a=0;a<r.length;a++)ue(s,r[a],e,n,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(let a=0;a<r.length;a++){const t=r[a];for(let i=0;i<t.length;i++)ue(s,t[i],e,n,!0,0===i)}if(s.length){let n=t.tags||null;if("LineString"===o&&i.lineMetrics){n={};for(const e in t.tags)n[e]=t.tags[e];n.mapbox_clip_start=r.start/r.size,n.mapbox_clip_end=r.end/r.size}const a={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:n};null!==t.id&&(a.id=t.id),e.features.push(a)}}function ue(e,t,n,i,r,o){const s=i*i;if(i>0&&t.size<(r?s:i))return void(n.numPoints+=t.length/3);const a=[];for(let l=0;l<t.length;l+=3)(0===i||t[l+2]>s)&&(n.numSimplified++,a.push(t[l],t[l+1])),n.numPoints++;r&&function(e,t){let n=0;for(let i=0,r=e.length,o=r-2;i<r;o=i,i+=2)n+=(e[i]-e[o])*(e[i+1]+e[o+1]);if(n>0===t)for(let i=0,r=e.length;i<r/2;i+=2){const t=e[i],n=e[i+1];e[i]=e[r-2-i],e[i+1]=e[r-1-i],e[r-2-i]=t,e[r-1-i]=n}}(a,o),e.push(a)}const he={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class de{constructor(e,t){const n=(t=this.options=function(e,t){for(const n in t)e[n]=t[n];return e}(Object.create(he),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");let i=function(e,t){const n=[];if("FeatureCollection"===e.type)for(let i=0;i<e.features.length;i++)G(n,e.features[i],t,i);else G(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=function(e,t){const n=t.buffer/t.extent;let i=e;const r=Y(e,1,-1-n,n,0,-1,2,t),o=Y(e,1,1-n,2+n,0,-1,2,t);return(r||o)&&(i=Y(e,1,-n,1+n,0,-1,2,t)||[],r&&(i=re(r,1).concat(i)),o&&(i=i.concat(re(o,-1)))),i}(i,t),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(e,t,n,i,r,o,s){const a=[e,t,n,i],l=this.options,c=l.debug;for(;a.length;){i=a.pop(),n=a.pop(),t=a.pop(),e=a.pop();const u=1<<t,h=pe(t,n,i);let d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=le(e,t,n,i,l),this.tileCoords.push({z:t,x:n,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));const e="z".concat(t);this.stats[e]=(this.stats[e]||0)+1,this.total++}if(d.source=e,null==r){if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue}else{if(t===l.maxZoom||t===r)continue;if(null!=r){const e=r-t;if(n!==o>>e||i!==s>>e)continue}}if(d.source=null,0===e.length)continue;c>1&&console.time("clipping");const p=.5*l.buffer/l.extent,f=.5-p,m=.5+p,g=1+p;let y=null,_=null,v=null,b=null,x=Y(e,u,n-p,n+m,0,d.minX,d.maxX,l),w=Y(e,u,n+f,n+g,0,d.minX,d.maxX,l);e=null,x&&(y=Y(x,u,i-p,i+m,1,d.minY,d.maxY,l),_=Y(x,u,i+f,i+g,1,d.minY,d.maxY,l),x=null),w&&(v=Y(w,u,i-p,i+m,1,d.minY,d.maxY,l),b=Y(w,u,i+f,i+g,1,d.minY,d.maxY,l),w=null),c>1&&console.timeEnd("clipping"),a.push(y||[],t+1,2*n,2*i),a.push(_||[],t+1,2*n,2*i+1),a.push(v||[],t+1,2*n+1,2*i),a.push(b||[],t+1,2*n+1,2*i+1)}}getTile(e,t,n){e=+e,t=+t,n=+n;const i=this.options,{extent:r,debug:o}=i;if(e<0||e>24)return null;const s=1<<e,a=pe(e,t=t+s&s-1,n);if(this.tiles[a])return se(this.tiles[a],r);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);let l,c=e,u=t,h=n;for(;!l&&c>0;)c--,u>>=1,h>>=1,l=this.tiles[pe(c,u,h)];return l&&l.source?(o>1&&(console.log("found parent tile z%d-%d-%d",c,u,h),console.time("drilling down")),this.splitTile(l.source,c,u,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[a]?se(this.tiles[a],r):null):null}}function pe(e,t,n){return 32*((1<<e)*n+t)+e}function fe(e,t){return t?e.properties[t]:e.id}function me(e,t){if(null==e)return!0;if("Feature"===e.type)return null!=fe(e,t);if("FeatureCollection"===e.type){const n=new Set;for(const i of e.features){const e=fe(i,t);if(null==e)return!1;if(n.has(e))return!1;n.add(e)}return!0}return!1}function ge(e,t){const n=new Map;if(null==e);else if("Feature"===e.type)n.set(fe(e,t),e);else for(const i of e.features)n.set(fe(i,t),i);return n}class ye extends o{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(t,n){return e._(this,void 0,void 0,(function*(){const n=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return null;const r=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.X,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.X,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.P(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const i=[];for(const t of n)i.push(new e.P(t[0],t[1]));t.push(i)}return t}}toGeoJSON(e,t,n){return u.call(this,e,t,n)}}(this._features[t])}}(i.features);let o=T(r);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:r,rawData:o.buffer}}))}loadData(t){return e._(this,void 0,void 0,(function*(){var n;null===(n=this._pendingRequest)||void 0===n||n.abort();const i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.bu(t.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(t,this._pendingRequest),this._geoJSONIndex=t.cluster?new L(function(t){let{superclusterOptions:n,clusterProperties:i}=t;if(!i||!n)return n;const r={},o={},s={accumulated:null,zoom:0},a={properties:null},l=Object.keys(i);for(const c of l){const[t,n]=i[c],s=e.bB(n),a=e.bB("string"==typeof t?[t,["accumulated"],["get",c]]:t);r[c]=s.value,o[c]=a.value}return n.map=e=>{a.properties=e;const t={};for(const n of l)t[n]=r[n].evaluate(s,a);return t},n.reduce=(e,t)=>{a.properties=t;for(const n of l)s.accumulated=e[n],e[n]=o[n].evaluate(s,a)},n}(t)).load((yield this._pendingData).features):(r=yield this._pendingData,new de(r,t.geojsonVtOptions)),this.loaded={};const n={};if(i){const e=i.finish();e&&(n.resourceTiming={},n.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}return n}catch(t){if(delete this._pendingRequest,e.bA(t))return{abandoned:!0};throw t}var r}))}getData(){return e._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadAndProcessGeoJSON(t,n){return e._(this,void 0,void 0,(function*(){let i=yield this.loadGeoJSON(t,n);if(delete this._pendingRequest,"object"!=typeof i)throw new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object."));if(c(i,!0),t.filter){const n=e.bB(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));const r=i.features.filter((e=>n.value.evaluate({zoom:0},e)));i={type:"FeatureCollection",features:r}}return i}))}loadGeoJSON(t,n){return e._(this,void 0,void 0,(function*(){const{promoteId:i}=t;if(t.request){const r=yield e.h(t.request,n);return this._dataUpdateable=me(r.data,i)?ge(r.data,i):void 0,r.data}if("string"==typeof t.data)try{const e=JSON.parse(t.data);return this._dataUpdateable=me(e,i)?ge(e,i):void 0,e}catch(e){throw new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object."))}if(!t.dataDiff)throw new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object."));if(!this._dataUpdateable)throw new Error("Cannot update existing geojson data in ".concat(t.source));return function(e,t,n){var i,r,o,s;if(t.removeAll&&e.clear(),t.remove)for(const a of t.remove)e.delete(a);if(t.add)for(const a of t.add){const t=fe(a,n);null!=t&&e.set(t,a)}if(t.update)for(const a of t.update){let t=e.get(a.id);if(null==t)continue;const n=!a.removeAllProperties&&((null===(i=a.removeProperties)||void 0===i?void 0:i.length)>0||(null===(r=a.addOrUpdateProperties)||void 0===r?void 0:r.length)>0);if((a.newGeometry||a.removeAllProperties||n)&&(t=Object.assign({},t),e.set(a.id,t),n&&(t.properties=Object.assign({},t.properties))),a.newGeometry&&(t.geometry=a.newGeometry),a.removeAllProperties)t.properties={};else if((null===(o=a.removeProperties)||void 0===o?void 0:o.length)>0)for(const e of a.removeProperties)Object.prototype.hasOwnProperty.call(t.properties,e)&&delete t.properties[e];if((null===(s=a.addOrUpdateProperties)||void 0===s?void 0:s.length)>0)for(const{key:e,value:i}of a.addOrUpdateProperties)t.properties[e]=i}}(this._dataUpdateable,t.dataDiff,i),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(t){return e._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}class _e{constructor(t){this.self=t,this.actor=new e.F(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));this.externalWorkerSourceTypes[e]=t},this.self.addProtocol=e.bh,this.self.removeProtocol=e.bi,this.self.registerRTLTextPlugin=t=>{if(e.bC.isParsed())throw new Error("RTL text plugin already registered.");e.bC.setMethods(t)},this.actor.registerMessageHandler("LDT",((e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t))),this.actor.registerMessageHandler("RDT",((t,n)=>e._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(t,n.source).removeTile(n)})))),this.actor.registerMessageHandler("GCEZ",((t,n)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,n.type,n.source).getClusterExpansionZoom(n)})))),this.actor.registerMessageHandler("GCC",((t,n)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,n.type,n.source).getClusterChildren(n)})))),this.actor.registerMessageHandler("GCL",((t,n)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,n.type,n.source).getClusterLeaves(n)})))),this.actor.registerMessageHandler("LD",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t))),this.actor.registerMessageHandler("GD",((e,t)=>this._getWorkerSource(e,t.type,t.source).getData())),this.actor.registerMessageHandler("LT",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t))),this.actor.registerMessageHandler("RT",((e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t))),this.actor.registerMessageHandler("AT",((e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t))),this.actor.registerMessageHandler("RMT",((e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t))),this.actor.registerMessageHandler("RS",((t,n)=>e._(this,void 0,void 0,(function*(){if(!this.workerSources[t]||!this.workerSources[t][n.type]||!this.workerSources[t][n.type][n.source])return;const e=this.workerSources[t][n.type][n.source];delete this.workerSources[t][n.type][n.source],void 0!==e.removeSource&&e.removeSource(n)})))),this.actor.registerMessageHandler("RM",(t=>e._(this,void 0,void 0,(function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t]})))),this.actor.registerMessageHandler("SR",((t,n)=>e._(this,void 0,void 0,(function*(){this.referrer=n})))),this.actor.registerMessageHandler("SRPS",((e,t)=>this._syncRTLPluginState(e,t))),this.actor.registerMessageHandler("IS",((t,n)=>e._(this,void 0,void 0,(function*(){this.self.importScripts(n)})))),this.actor.registerMessageHandler("SI",((e,t)=>this._setImages(e,t))),this.actor.registerMessageHandler("UL",((t,n)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).update(n.layers,n.removedIds)})))),this.actor.registerMessageHandler("SL",((t,n)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).replace(n)}))))}_setImages(t,n){return e._(this,void 0,void 0,(function*(){this.availableImages[t]=n;for(const e in this.workerSources[t]){const i=this.workerSources[t][e];for(const e in i)i[e].availableImages=n}}))}_syncRTLPluginState(t,n){return e._(this,void 0,void 0,(function*(){if(e.bC.isParsed())return e.bC.getState();if("loading"!==n.pluginStatus)return e.bC.setState(n),n;const t=n.pluginURL;if(this.self.importScripts(t),e.bC.isParsed()){const n={pluginStatus:"loaded",pluginURL:t};return e.bC.setState(n),n}throw e.bC.setState({pluginStatus:"error",pluginURL:""}),new Error("RTL Text Plugin failed to import scripts from ".concat(t))}))}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let n=this.layerIndexes[e];return n||(n=this.layerIndexes[e]=new t),n}_getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const i={sendAsync:(t,n)=>(t.targetMapId=e,this.actor.sendAsync(t,n))};switch(t){case"vector":this.workerSources[e][t][n]=new o(i,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][t][n]=new ye(i,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][n]=new this.externalWorkerSourceTypes[t](i,this._getLayerIndex(e),this._getAvailableImages(e))}}return this.workerSources[e][t][n]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new s),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new _e(self)),_e})),n("index",["exports","./shared"],(function(e,t){var n="4.6.0";let i,r;const o={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:e=>new Promise(((n,i)=>{const r=requestAnimationFrame(n);e.signal.addEventListener("abort",(()=>{cancelAnimationFrame(r),i(t.c())}))})),getImageData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),n=t.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n},resolveURL:e=>(i||(i=document.createElement("a")),i.href=e,i.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==r&&(r=matchMedia("(prefers-reduced-motion: reduce)")),r.matches)}};class s{static testProp(e){if(!s.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in s.docStyle)return e[t];return e[0]}static create(e,t,n){const i=window.document.createElement(e);return void 0!==t&&(i.className=t),n&&n.appendChild(i),i}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){s.docStyle&&s.selectProp&&(s.userSelect=s.docStyle[s.selectProp],s.docStyle[s.selectProp]="none")}static enableDrag(){s.docStyle&&s.selectProp&&(s.docStyle[s.selectProp]=s.userSelect)}static setTransform(e,t){e.style[s.transformProp]=t}static addEventListener(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,n,"passive"in i?i:i.capture)}static removeEventListener(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,n,"passive"in i?i:i.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",s.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",s.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",s.suppressClickInternal,!0)}),0)}static getScale(e){const t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,n,i){const r=n.boundingClientRect;return new t.P((i.clientX-r.left)/n.x-e.clientLeft,(i.clientY-r.top)/n.y-e.clientTop)}static mousePos(e,t){const n=s.getScale(e);return s.getPoint(e,n,t)}static touchPos(e,t){const n=[],i=s.getScale(e);for(let r=0;r<t.length;r++)n.push(s.getPoint(e,i,t[r]));return n}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}s.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,s.selectProp=s.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s.transformProp=s.testProp(["transform","WebkitTransform"]);const a={supported:!1,testSupport:function(e){!u&&c&&(h?d(e):l=e)}};let l,c,u=!1,h=!1;function d(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c),e.isContextLost())return;a.supported=!0}catch(e){}e.deleteTexture(t),u=!0}var p;"undefined"!=typeof document&&(c=document.createElement("img"),c.onload=()=>{l&&d(l),l=null,h=!0},c.onerror=()=>{u=!0,l=null},c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let n,i,r,o;e.resetRequestQueue=()=>{n=[],i=0,r=0,o={}},e.addThrottleControl=e=>{const t=r++;return o[t]=e,t},e.removeThrottleControl=e=>{delete o[e],l()},e.getImage=function(e,i){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(((o,s)=>{a.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),n.push({abortController:i,requestParameters:e,supportImageRefresh:r,state:"queued",onError:e=>{s(e)},onSuccess:e=>{o(e)}}),l()}))};const s=e=>t._(this,void 0,void 0,(function*(){e.state="running";const{requestParameters:n,supportImageRefresh:r,onError:o,onSuccess:s,abortController:a}=e,u=!1===r&&!t.i(self)&&!t.g(n.url)&&(!n.headers||Object.keys(n.headers).reduce(((e,t)=>e&&"accept"===t),!0));i++;const h=u?c(n,a):t.m(n,a);try{const n=yield h;delete e.abortController,e.state="completed",n.data instanceof HTMLImageElement||t.b(n.data)?s(n):n.data&&s({data:yield(d=n.data,"function"==typeof createImageBitmap?t.d(d):t.f(d)),cacheControl:n.cacheControl,expires:n.expires})}catch(t){delete e.abortController,o(t)}finally{i--,l()}var d})),l=()=>{const e=(()=>{for(const e of Object.keys(o))if(o[e]())return!0;return!1})()?t.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=i;t<e&&n.length>0;t++){const e=n.shift();e.abortController.signal.aborted?t--:s(e)}},c=(e,n)=>new Promise(((i,r)=>{const o=new Image,s=e.url,a=e.credentials;a&&"include"===a?o.crossOrigin="use-credentials":(a&&"same-origin"===a||!t.s(s))&&(o.crossOrigin="anonymous"),n.signal.addEventListener("abort",(()=>{o.src="",r(t.c())})),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,i({data:o})},o.onerror=()=>{o.onerror=o.onload=null,n.signal.aborted||r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=s}))}(p||(p={})),p.resetRequestQueue();class f{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function m(e){var n=new t.A(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}var g,y=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};g=new t.A(3),t.A!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0);var _=function(e){var t=e[0],n=e[1];return t*t+n*n};function v(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const n=[];for(const{id:i,url:r}of e){const e="".concat(i).concat(r);-1===n.indexOf(e)&&(n.push(e),t.push({id:i,url:r}))}}return t}function b(e,t,n){const i=e.split("?");return i[0]+="".concat(t).concat(n),i.join("?")}!function(){var e=new t.A(2);t.A!=Float32Array&&(e[0]=0,e[1]=0)}();class x{constructor(e,t,n,i){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,i)}update(e,n,i){const{width:r,height:o}=e,s=!(this.size&&this.size[0]===r&&this.size[1]===o||i),{context:a}=this,{gl:l}=a;if(this.useMipmap=Boolean(n&&n.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),s)this.size=[r,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,r,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:n,y:s}=i||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texSubImage2D(l.TEXTURE_2D,0,n,s,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,n,s,r,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(e,t,n){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function w(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class S extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[]}}getImage(e){const n=this.images[e];if(n&&!n.data&&n.spriteData){const e=n.spriteData;n.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),n.spriteData=null}return n}addImage(e,t){if(this.images[e])throw new Error("Image id ".concat(e," already exist, use updateImage instead"));this._validate(e,t)&&(this.images[e]=t)}_validate(e,n){let i=!0;const r=n.data||n.spriteData;return this._validateStretch(n.stretchX,r&&r.width)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),i=!1),this._validateStretch(n.stretchY,r&&r.height)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "content" value')))),i=!1),i}_validateStretch(e,t){if(!e)return!0;let n=0;for(const i of e){if(i[0]<n||i[1]<i[0]||t<i[1])return!1;n=i[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const n=t.spriteData,i=n&&n.width||t.data.width,r=n&&n.height||t.data.height;return!(e[0]<0||i<e[0]||e[1]<0||r<e[1]||e[2]<0||i<e[2]||e[3]<0||r<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.getImage(e);if(n&&(i.data.width!==t.data.width||i.data.height!==t.data.height))throw new Error("size mismatch between old image (".concat(i.data.width,"x").concat(i.data.height,") and new image (").concat(t.data.width,"x").concat(t.data.height,")."));t.version=i.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((t,n)=>{let i=!0;if(!this.isLoaded())for(const r of e)this.images[r]||(i=!1);this.isLoaded()||i?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t})}))}_getImagesForIds(e){const n={};for(const i of e){let e=this.getImage(i);e||(this.fire(new t.k("styleimagemissing",{id:i})),e=this.getImage(i)),e?n[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,textFitWidth:e.textFitWidth,textFitHeight:e.textFitHeight,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w('Image "'.concat(i,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}return n}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.I(n,i);this.patterns[e]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new x(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:i}=t.p(e),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],n=e.x+1,i=e.y+1,s=this.getImage(o).data,a=s.width,l=s.height;t.R.copy(s,r,{x:0,y:0},{x:n,y:i},{width:a,height:l}),t.R.copy(s,r,{x:0,y:l-1},{x:n,y:i-1},{width:a,height:1}),t.R.copy(s,r,{x:0,y:0},{x:n,y:i+l},{width:a,height:1}),t.R.copy(s,r,{x:a-1,y:0},{x:n-1,y:i},{width:1,height:l}),t.R.copy(s,r,{x:0,y:0},{x:n+a,y:i},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.getImage(n);e||t.w('Image with ID: "'.concat(n,'" was not found')),w(e)&&this.updateImage(n,e)}}}const k=1e20;function C(e,t,n,i,r,o,s,a,l){for(let c=t;c<t+i;c++)E(e,n*o+c,o,r,s,a,l);for(let c=n;c<n+r;c++)E(e,c*o+t,1,i,s,a,l)}function E(e,t,n,i,r,o,s){o[0]=0,s[0]=-k,s[1]=k,r[0]=e[t];for(let a=1,l=0,c=0;a<i;a++){r[a]=e[t+a*n];const i=a*a;do{const e=o[l];c=(r[a]-r[e]+i-e*e)/(a-e)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=k}for(let a=0,l=0;a<i;a++){for(;s[l+1]<a;)l++;const i=o[l],c=a-i;e[t+a*n]=r[i]+c*c}}class T{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return t._(this,void 0,void 0,(function*(){const t=[];for(const r in e)for(const n of e[r])t.push(this._getAndCacheGlyphsPromise(r,n));const n=yield Promise.all(t),i={};for(const{stack:e,id:r,glyph:o}of n)i[e]||(i[e]={}),i[e][r]=o&&{id:o.id,bitmap:o.bitmap.clone(),metrics:o.metrics};return i}))}_getAndCacheGlyphsPromise(e,n){return t._(this,void 0,void 0,(function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let i=t.glyphs[n];if(void 0!==i)return{stack:e,id:n,glyph:i};if(i=this._tinySDF(t,e,n),i)return t.glyphs[n]=i,{stack:e,id:n,glyph:i};const r=Math.floor(n/256);if(256*r>65535)throw new Error("glyphs > 65535 not supported");if(t.ranges[r])return{stack:e,id:n,glyph:i};if(!this.url)throw new Error("glyphsUrl is not set");if(!t.requests[r]){const n=T.loadGlyphRange(e,r,this.url,this.requestManager);t.requests[r]=n}const o=yield t.requests[r];for(const e in o)this._doesCharSupportLocalGlyph(+e)||(t.glyphs[+e]=o[+e]);return t.ranges[r]=!0,{stack:e,id:n,glyph:o[n]||null}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(e))}_tinySDF(e,n,i){const r=this.localIdeographFontFamily;if(!r)return;if(!this._doesCharSupportLocalGlyph(i))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(n)?t="900":/medium/i.test(n)?t="500":/light/i.test(n)&&(t="200"),o=e.tinySDF=new T.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:r,fontWeight:t})}const s=o.draw(String.fromCharCode(i));return{id:i,bitmap:new t.o({width:s.width||60,height:s.height||60},s.data),metrics:{width:s.glyphWidth/2||24,height:s.glyphHeight/2||24,left:s.glyphLeft/2+.5||0,top:s.glyphTop/2-27.5||-8,advance:s.glyphAdvance/2||24,isDoubleResolution:!0}}}}T.loadGlyphRange=function(e,n,i,r){return t._(this,void 0,void 0,(function*(){const o=256*n,s=o+255,a=r.transformRequest(i.replace("{fontstack}",e).replace("{range}","".concat(o,"-").concat(s)),"Glyphs"),l=yield t.l(a,new AbortController);if(!l||!l.data)throw new Error("Could not load glyph range. range: ".concat(n,", ").concat(o,"-").concat(s));const c={};for(const e of t.n(l.data))c[e.id]=e;return c}))},T.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=i,this.radius=n;const a=this.size=e+4*t,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(s," ").concat(o," ").concat(e,"px ").concat(r),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(e),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),l=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=a+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:t};if(0===a||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,a,l),f.fillText(e,m,m+s);const _=f.getImageData(m,m,a,l);y.fill(k,0,h),g.fill(0,0,h);for(let v=0;v<l;v++)for(let e=0;e<a;e++){const t=_.data[4*(v*a+e)+3]/255;if(0===t)continue;const n=(v+m)*c+e+m;if(1===t)y[n]=0,g[n]=k;else{const e=.5-t;y[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}C(y,0,0,c,u,c,this.f,this.v,this.z),C(g,m,m,a,l,c,this.f,this.v,this.z);for(let v=0;v<h;v++){const e=Math.sqrt(y[v])-Math.sqrt(g[v]);d[v]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class P{constructor(){this.specification=t.v.light.position}possiblyEvaluate(e,n){return t.x(e.expression.evaluate(n))}interpolate(e,n,i){return{x:t.y.number(e.x,n.x,i),y:t.y.number(e.y,n.y,i),z:t.y.number(e.z,n.z,i)}}}let I;class M extends t.E{constructor(e){super(),I=I||new t.q({anchor:new t.D(t.v.light.anchor),position:new P,color:new t.D(t.v.light.color),intensity:new t.D(t.v.light.intensity)}),this._transitionable=new t.T(I),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.r,e,n))for(const t in e){const n=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),n):this._transitionable.setValue(t,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.t(this,e.call(t.u,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.v}))}}const A=new t.q({"sky-color":new t.D(t.v.sky["sky-color"]),"horizon-color":new t.D(t.v.sky["horizon-color"]),"fog-color":new t.D(t.v.sky["fog-color"]),"fog-ground-blend":new t.D(t.v.sky["fog-ground-blend"]),"horizon-fog-blend":new t.D(t.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new t.D(t.v.sky["sky-horizon-blend"]),"atmosphere-blend":new t.D(t.v.sky["atmosphere-blend"])});class R extends t.E{constructor(e){super(),this._transitionable=new t.T(A),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.z(0))}setSky(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.B,e,n)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent"});for(const t in e){const n=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),n):this._transitionable.setValue(t,n)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!1!==(null==i?void 0:i.validate)&&t.t(this,e.call(t.u,t.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class z{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}getDashRanges(e,t,n){const i=[];let r=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,s=!0;i.push({left:r,right:o,isDash:s,zeroLength:0===e[0]});let a=e[0];for(let l=1;l<e.length;l++){s=!s;const t=e[l];r=a*n,a+=t,o=a*n,i.push({left:r,right:o,isDash:s,zeroLength:0===t})}return i}addRoundDash(e,t,n){const i=t/2;for(let r=-n;r<=n;r++){const t=this.width*(this.nextRow+n+r);let o=0,s=e[o];for(let a=0;a<this.width;a++){a/s.right>1&&(s=e[++o]);const l=Math.abs(a-s.left),c=Math.abs(a-s.right),u=Math.min(l,c);let h;const d=r/n*(i+1);if(s.isDash){const e=i-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=i-Math.sqrt(u*u+d*d);this.data[t+a]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let s=e.length-1;s>=0;--s){const t=e[s],n=e[s+1];t.zeroLength?e.splice(s,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(s,1))}const t=e[0],n=e[e.length-1];t.isDash===n.isDash&&(t.left=n.left-this.width,n.right=t.right+this.width);const i=this.width*this.nextRow;let r=0,o=e[r];for(let s=0;s<this.width;s++){s/o.right>1&&(o=e[++r]);const t=Math.abs(s-o.left),n=Math.abs(s-o.right),a=Math.min(t,n);this.data[i+s]=Math.max(0,Math.min(255,(o.isDash?a:-a)+128))}}addDash(e,n){const i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return t.w("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,r=this.getDashRanges(e,this.width,t);n?this.addRoundDash(r,t,i):this.addRegularDash(r)}const s={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=r,this.dirty=!0,s}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}const L="maplibre_preloaded_worker_pool";class O{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<O.workerCount;)this.workers.push(new Worker(t.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[L]}numActive(){return Object.keys(this.active).length}}const D=Math.floor(o.hardwareConcurrency/2);let F,N;function B(){return F||(F=new O),F}O.workerCount=t.C(globalThis)?Math.max(Math.min(D,3),1):1;class j{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n;const i=this.workerPool.acquire(n);for(let r=0;r<i.length;r++){const e=new t.F(i[r],n);e.name="Worker ".concat(r),this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const n=[];for(const i of this.actors)n.push(i.sendAsync({type:e,data:t}));return Promise.all(n)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.actors.forEach((e=>{e.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,t){for(const n of this.actors)n.registerMessageHandler(e,t)}}function V(){return N||(N=new j(B(),t.G),N.registerMessageHandler("GR",((e,n,i)=>t.m(n,i)))),N}function U(e,n){const i=t.H();return t.J(i,i,[1,1,0]),t.K(i,i,[.5*e.width,.5*e.height,1]),t.L(i,i,e.calculatePosMatrix(n.toUnwrapped()))}function q(e,t,n,i,r,o){const s=function(e,t,n){if(e)for(const i of e){const e=t[i];if(e&&e.source===n&&"fill-extrusion"===e.type)return!0}else for(const i in t){const e=t[i];if(e.source===n&&"fill-extrusion"===e.type)return!0}return!1}(r&&r.layers,t,e.id),a=o.maxPitchScaleFactor(),l=e.tilesIn(i,a,s);l.sort(G);const c=[];for(const h of l)c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,n,e._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,r,o,a,U(e.transform,h.tileID))});const u=function(e){const t={},n={};for(const i of e){const e=i.queryResults,r=i.wrappedTileID,o=n[r]=n[r]||{};for(const n in e){const i=e[n],r=o[n]=o[n]||{},s=t[n]=t[n]||[];for(const e of i)r[e.featureIndex]||(r[e.featureIndex]=!0,s.push(e))}}return t}(c);for(const h in u)u[h].forEach((t=>{const n=t.feature,i=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return u}function G(e,t){const n=e.tileID,i=t.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function Z(e,n,i){return t._(this,void 0,void 0,(function*(){let r=e;if(e.url?r=(yield t.h(n.transformRequest(e.url,"Source"),i)).data:yield o.frameAsync(i),!r)return null;const s=t.M(t.e(r,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in r&&r.vector_layers&&(s.vectorLayerIds=r.vector_layers.map((e=>e.id))),s}))}class H{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof t.N?new t.N(e.lng,e.lat):t.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.N?new t.N(e.lng,e.lat):t.N.convert(e),this}extend(e){const n=this._sw,i=this._ne;let r,o;if(e instanceof t.N)r=e,o=e;else{if(!(e instanceof H))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(H.convert(e)):this.extend(t.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.N.convert(e)):this;if(r=e._sw,o=e._ne,!r||!o)return this}return n||i?(n.lng=Math.min(r.lng,n.lng),n.lat=Math.min(r.lat,n.lat),i.lng=Math.max(o.lng,i.lng),i.lat=Math.max(o.lat,i.lat)):(this._sw=new t.N(r.lng,r.lat),this._ne=new t.N(o.lng,o.lat)),this}getCenter(){return new t.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.N(this.getWest(),this.getNorth())}getSouthEast(){return new t.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:i}=t.N.convert(e);let r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}static convert(e){return e instanceof H?e:e?new H(e):e}static fromLngLat(e){const n=360*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/40075017,i=n/Math.cos(Math.PI/180*e.lat);return new H(new t.N(e.lng-i,e.lat-n),new t.N(e.lng+i,e.lat+n))}}class W{constructor(e,t,n){this.bounds=H.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),i=Math.floor(t.O(this.bounds.getWest())*n),r=Math.floor(t.Q(this.bounds.getNorth())*n),o=Math.ceil(t.O(this.bounds.getEast())*n),s=Math.ceil(t.Q(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<s}}class K extends t.E{constructor(e,n,i,r){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.M(n,["url","scheme","tileSize","promoteId"])),this._options=t.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Z(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new W(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(t,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request.collectResourceTiming=this._collectResourceTiming;let i="RT";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise(((t,n)=>{e.reloadPromise={resolve:t,reject:n}}))}else e.actor=this.dispatcher.getActor(),i="LT";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:i,data:n},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t)}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null)}}))}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject)}}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class X extends t.E{constructor(e,n,i,r){super(),this.id=e,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},n),t.e(this,t.M(n,["url","scheme","tileSize"]))}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Z(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(t.e(this,e),e.bounds&&(this.tileBounds=new W(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return t.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const n=yield p.getImage(this.map._requestManager.transformRequest(t,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){this.map._refreshExpiredTiles&&n.cacheControl&&n.expires&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const t=this.map.painter.context,i=t.gl,r=n.data;e.texture=this.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new x(t,r,i.RGBA,{useMipmap:!0}),e.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class Y extends X{constructor(e,n,i,r){super(e,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(e){return t._(this,void 0,void 0,(function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i=this.map._requestManager.transformRequest(n,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const n=yield p.getImage(i,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){const i=n.data;this.map._refreshExpiredTiles&&n.cacheControl&&n.expires&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const r=t.b(i)&&t.U()?i:yield this.readImageNow(i),o={type:this.type,uid:e.uid,source:this.id,rawImageData:r,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"LDT",data:o});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}readImageNow(e){return t._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&t.V()){const n=e.width+2,i=e.height+2;try{return new t.R({width:n,height:i},yield t.W(e,-1,-1,n,i))}catch(e){}}return o.getImageData(e,1)}))}_getNeighboringTiles(e){const n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,s=(n.x+1+i)%i,a=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.S(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},l[new t.S(e.overscaledZ,a,n.z,s,n.y).key]={backfilled:!1},n.y>0&&(l[new t.S(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},l[new t.S(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.S(e.overscaledZ,a,n.z,s,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.S(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},l[new t.S(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.S(e.overscaledZ,a,n.z,s,n.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}class $ extends t.E{constructor(e,n,i,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=t.e({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.X/this.tileSize;this.workerOptions=t.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.X,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.X,radius:(n.clusterRadius||50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return t._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return t._(this,void 0,void 0,(function*(){const e=t.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,n){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:n}})}_updateWorkerData(e){return t._(this,void 0,void 0,(function*(){const n=t.e({type:this.type},this.workerOptions);e?n.dataDiff=e:"string"==typeof this._data?(n.request=this.map._requestManager.transformRequest(o.resolveURL(this._data),"Source"),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new t.k("dataloading",{dataType:"source"}));try{const e=yield this.actor.sendAsync({type:"LD",data:n});if(this._pendingLoads--,this._removed||e.abandoned)return void this.fire(new t.k("dataabort",{dataType:"source"}));let i=null;e.resourceTiming&&e.resourceTiming[this.id]&&(i=e.resourceTiming[this.id].slice(0));const r={dataType:"source"};this._collectResourceTiming&&i&&i.length>0&&t.e(r,{resourceTiming:i}),this.fire(new t.k("data",Object.assign(Object.assign({},r),{sourceDataType:"metadata"}))),this.fire(new t.k("data",Object.assign(Object.assign({},r),{sourceDataType:"content"})))}catch(e){if(this._pendingLoads--,this._removed)return void this.fire(new t.k("dataabort",{dataType:"source"}));this.fire(new t.j(e))}}))}loaded(){return 0===this._pendingLoads}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.actor?"RT":"LT";e.actor=this.actor;const n={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const i=yield this.actor.sendAsync({type:t,data:n},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(i,this.map.painter,"RT"===t)}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return t.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var J=t.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Q extends t.E{constructor(e,t,n,i){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=t}load(e){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield p.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading())}catch(e){this._request=null,this._loaded=!0,this.fire(new t.j(e))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const n=e.map(t.Z.fromLngLat);this.tileID=function(e){let n=1/0,i=1/0,r=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y);const s=Math.max(r-n,o-i),a=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),l=Math.pow(2,a);return new t.a1(a,Math.floor((n+r)/2*l),Math.floor((i+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const i=n.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new t.$,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.X,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.X),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.X,t.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new x(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return t._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ee extends Q{constructor(e,t,n,i){super(e,t,n,i),this.roundZoom=!0,this.type="video",this.options=t}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,"Source").url);try{const e=yield t.a3(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(e){this.fire(new t.j(e))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.j(new t.a2("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new x(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class te extends Q{constructor(e,n,i,r){super(e,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new t.j(new t.a2("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.j(new t.a2("sources.".concat(e),null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.j(new t.a2("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new t.j(new t.a2("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.j(new t.a2("sources.".concat(e),null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,i=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new x(n,this.canvas,i.RGBA,{premultiply:!0});let r=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const ne={},ie=e=>{switch(e){case"geojson":return $;case"image":return Q;case"raster":return X;case"raster-dem":return Y;case"vector":return K;case"video":return ee;case"canvas":return te}return ne[e]},re="RTLPluginLoaded";class oe extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=V()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((e=>{throw this.status="error",e}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return t._(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){if(t.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(t.url=o.resolveURL(e),!t.url)throw new Error("requested url ".concat(e," is invalid"));if("unavailable"===t.status){if(!n)return t._requestImport();t.status="deferred",t._syncState(t.status)}else if("requested"===t.status)return t._requestImport()}()}))}_requestImport(){return t._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.k(re))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let se=null;function ae(){return se||(se=new oe),se}class le{constructor(e,n){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=t.a4(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,n,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const i of e){const e=i.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){i.layers=e,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=i}}return n}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.a6){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.a6&&n.hasRTLText){this.hasRTLText=!0,ae().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(e).queryRadius(t))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const n in this.buckets){const t=this.buckets[n];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new x(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new x(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,i,r,o,s,a,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:a,params:s,queryPadding:this.queryPadding*l},e,t,n):{}}querySourceFeatures(e,n){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const r=i.loadVTLayers(),o=n&&n.sourceLayer?n.sourceLayer:"",s=r._geojsonTileLayer||r[o];if(!s)return;const a=t.a7(n&&n.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let d=0;d<s.length;d++){const n=s.feature(d);if(a.needGeometry){const e=t.a8(n,!0);if(!a.filter(new t.z(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new t.z(this.tileID.overscaledZ),n))continue;const r=i.getId(n,o),p=new t.a9(n,l,c,u,r);p.tile=h,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const n=t.aa(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(n)if(this.expirationTime<n)t=!0;else{const i=this.expirationTime-n;i?this.expirationTime=e+Math.max(i,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],a=e[o];if(!s||!a||0===Object.keys(a).length)continue;r.update(a,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=o.now()+e}setDependencies(e,t){const n={};for(const i of t)n[i]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}}class ce{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:t,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout((()=>{this.remove(e,r)}),n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,i=void 0===t?0:this.data[n].indexOf(t),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const i of this.data[n])e(i.value)||t.push(i);for(const n of t)this.remove(n.value.tileID,n)}}class ue{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,i){const r=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},t.e(this.stateChanges[e][r],i),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])i[t]||(this.deletedStates[e][r][t]=null)}else for(const t in i)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][t]&&delete this.deletedStates[e][r][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(n in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][n]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}getState(e,n){const i=String(n),r=t.e({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][n];if(null===t)return{};for(const e in t)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,n){const i={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const e={};for(const n in this.stateChanges[r])this.state[r][n]||(this.state[r][n]={}),t.e(this.state[r][n],this.stateChanges[r][n]),e[n]=this.state[r][n];i[r]=e}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const e={};if(null===this.deletedStates[r])for(const t in this.state[r])e[t]={},this.state[r][t]={};else for(const t in this.deletedStates[r]){if(null===this.deletedStates[r][t])this.state[r][t]={};else for(const e of Object.keys(this.deletedStates[r][t]))delete this.state[r][t][e];e[t]=this.state[r][t]}i[r]=i[r]||{},t.e(i[r],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const t in e)e[t].setFeatureState(i,n)}}class he extends t.E{constructor(e,t,n){super(),this.id=e,this.dispatcher=n,this.on("data",(e=>this._dataHandler(e))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((e,t,n,i)=>{const r=new(ie(t.type))(e,t,n,i);if(r.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(r.id));return r})(e,t,n,this),this._tiles={},this._cache=new ce(0,(e=>this._unloadTile(e))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ue,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,n,i){return t._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,n,i)}catch(n){e.state="errored",404!==n.status?this._source.fire(new t.j(n,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(de).map((e=>e.key))}getRenderableIds(e){const n=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&n.push(this._tiles[t]);return e?n.sort(((e,n)=>{const i=e.tileID,r=n.tileID,o=new t.P(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),s=new t.P(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-r.overscaledZ||s.y-o.y||s.x-o.x})).map((e=>e.tileID.key)):n.map((e=>e.tileID)).sort(de).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}}_reloadTile(e,n){return t._(this,void 0,void 0,(function*(){const t=this._tiles[e];t&&("loading"!==t.state&&(t.state=n),yield this._loadTile(t,e,n))}))}_tileLoaded(e,n,i){e.timeAdded=o.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let i=0;i<t.length;i++){const r=t[i];if(e.neighboringTiles&&e.neighboringTiles[r]){const t=this.getTileByID(r);n(e,t),n(t,e)}}function n(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const i=t.tileID.canonical.y-e.tileID.canonical.y,r=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,i),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,i){for(const r in this._tiles){let o=this._tiles[r];if(i[r]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let s=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(s=e)}let a=s;for(;a.overscaledZ>t;)if(a=a.scaledTo(a.overscaledZ-1),e[a.key]){i[s.key]=s;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),i=this._getLoadedTile(t);if(i)return i}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const n=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(n*i*(null===this._maxTileCacheZoomLevels?t.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),e[i.tileID.key]=i}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}_updateCoveredAndRetainedTiles(e,t,n,i,r,s){const a={},l={},c=Object.keys(e),u=o.now();for(const o of c){const n=e[o],i=this._tiles[o];if(!i||0!==i.fadeEndTime&&i.fadeEndTime<=u)continue;const r=this.findLoadedParent(n,t),s=this.findLoadedSibling(n),c=r||s||null;c&&(this._addTile(c.tileID),a[c.tileID.key]=c.tileID),l[o]=n}this._retainLoadedChildren(l,i,n,e);for(const o in a)e[o]||(this._coveredTiles[o]=!0,e[o]=a[o]);if(s){const t={},n={};for(const e of r)this._tiles[e.key].hasData()?t[e.key]=e:n[e.key]=e;for(const i in n){const r=n[i].children(this._source.maxzoom);this._tiles[r[0].key]&&this._tiles[r[1].key]&&this._tiles[r[2].key]&&this._tiles[r[3].key]&&(t[r[0].key]=e[r[0].key]=r[0],t[r[1].key]=e[r[1].key]=r[1],t[r[2].key]=e[r[2].key]=r[2],t[r[3].key]=e[r[3].key]=r[3],delete n[i])}for(const i in n){const r=n[i],o=this.findLoadedParent(r,this._source.minzoom),s=this.findLoadedSibling(r),a=o||s||null;if(a){t[a.tileID.key]=e[a.tileID.key]=a.tileID;for(const e in t)t[e].isChildOf(a.tileID)&&delete t[e]}}for(const e in this._tiles)t[e]||(this._coveredTiles[e]=!0)}}update(e,n){if(!this._sourceLoaded||this._paused)return;let i;this.transform=e,this.terrain=n,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.S(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(i=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n}),this._source.hasTile&&(i=i.filter((e=>this._source.hasTile(e))))):i=[];const r=e.coveringZoomLevel(this._source),o=Math.max(r-he.maxOverzooming,this._source.minzoom),s=Math.max(r+he.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of i)if(t.canonical.z>this._source.minzoom){const n=t.scaledTo(t.canonical.z-1);e[n.key]=n;const i=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[i.key]=i}i=i.concat(Object.values(e))}const a=0===i.length&&!this._updated&&this._didEmitContent;this._updated=!0,a&&this.fire(new t.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(i,r);pe(this._source.type)&&this._updateCoveredAndRetainedTiles(l,o,s,r,i,n);for(const t in l)this._tiles[t].clearFadeHold();const c=t.ab(this._tiles,l);for(const t of c){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){var n;const i={},r={},o=Math.max(t-he.maxOverzooming,this._source.minzoom),s=Math.max(t+he.maxUnderzooming,this._source.minzoom),a={};for(const l of e){const e=this._addTile(l);i[l.key]=l,e.hasData()||t<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,t,s,i);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){i[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(i[e[0].key]&&i[e[1].key]&&i[e[2].key]&&i[e[3].key])continue}let s=e.wasRequested();for(let t=l.overscaledZ-1;t>=o;--t){const o=l.scaledTo(t);if(r[o.key])break;if(r[o.key]=!0,e=this.getTile(o),!e&&s&&(e=this._addTile(o)),e){const t=e.hasData();if((t||!(null===(n=this.map)||void 0===n?void 0:n.cancelPendingTileRequestsWhileZooming)||s)&&(i[o.key]=o),s=e.wasRequested(),t)break}}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,i=this._tiles[e].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}t.push(i.key);const e=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;i=e}for(const e of t)this._loadedParentTiles[e]=n}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const t=this._tiles[e].tileID,n=this._getLoadedTile(t);this._loadedSiblingTiles[t.key]=n}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const i=n;return n||(n=new le(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,e.key,n.state)),n.uses++,this._tiles[e.key]=n,i||this._source.fire(new t.k("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}_dataHandler(e){const t=e.sourceDataType;"source"===e.dataType&&"metadata"===t&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===t&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,n,i){const r=[],o=this.transform;if(!o)return r;const s=i?o.getCameraQueryGeometry(e):e,a=e.map((e=>o.pointCoordinate(e,this.terrain))),l=s.map((e=>o.pointCoordinate(e,this.terrain))),c=this.getIds();let u=1/0,h=1/0,d=-1/0,p=-1/0;for(const t of l)u=Math.min(u,t.x),h=Math.min(h,t.y),d=Math.max(d,t.x),p=Math.max(p,t.y);for(let f=0;f<c.length;f++){const e=this._tiles[c[f]];if(e.holdingForFade())continue;const i=e.tileID,s=Math.pow(2,o.zoom-e.tileID.overscaledZ),m=n*e.queryPadding*t.X/e.tileSize/s,g=[i.getTilePoint(new t.Z(u,h)),i.getTilePoint(new t.Z(d,p))];if(g[0].x-m<t.X&&g[0].y-m<t.X&&g[1].x+m>=0&&g[1].y+m>=0){const t=a.map((e=>i.getTilePoint(e))),n=l.map((e=>i.getTilePoint(e)));r.push({tile:e,tileID:i,queryGeometry:t,cameraQueryGeometry:n,scale:s})}}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const n of t)n.posMatrix=this.transform.calculatePosMatrix(n.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(pe(this._source.type)){const e=o.now();for(const t in this._tiles)if(this._tiles[t].fadeEndTime>=e)return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const i=this._tiles[e];i&&i.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}}function de(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function pe(e){return"raster"===e||"image"===e||"video"===e}he.maxOverzooming=10,he.maxUnderzooming=3;class fe{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.ac(e,0,1);let n=1,i=this._distances[n];const r=e*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const o=n-1,s=this._distances[o],a=i-s,l=a>0?(r-s)/a:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}function me(e,t){let n=!0;return"always"===e||"never"!==e&&"never"!==t||(n=!1),n}class ge{constructor(e,t,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(e,t,n,i){this._forEachCell(t-i,n-i,t+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(i)}_insertBoxCell(e,t,n,i,r,o){this.boxCells[r].push(o)}_insertCircleCell(e,t,n,i,r,o){this.circleCells[r].push(o)}_query(e,t,n,i,r,o,s){if(n<0||e>this.width||i<0||t>this.height)return[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=i){if(r)return[{key:null,x1:e,y1:t,x2:n,y2:i}];for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],i=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-i,y1:n-i,x2:t+i,y2:n+i})}}else this._forEachCell(e,t,n,i,this._queryCell,a,{hitTest:r,overlapMode:o,seenUids:{box:{},circle:{}}},s);return a}query(e,t,n,i){return this._query(e,t,n,i,!1,null)}hitTest(e,t,n,i,r,o){return this._query(e,t,n,i,!0,r,o).length>0}hitTestCircle(e,t,n,i,r){const o=e-n,s=e+n,a=t-n,l=t+n;if(s<0||o>this.width||l<0||a>this.height)return!1;const c=[];return this._forEachCell(o,a,s,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:i,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},r),c.length>0}_queryCell(e,t,n,i,r,o,s,a){const{seenUids:l,hitTest:c,overlapMode:u}=s,h=this.boxCells[r];if(null!==h){const r=this.bboxes;for(const s of h)if(!l.box[s]){l.box[s]=!0;const h=4*s,d=this.boxKeys[s];if(e<=r[h+2]&&t<=r[h+3]&&n>=r[h+0]&&i>=r[h+1]&&(!a||a(d))&&(!c||!me(u,d.overlapMode))&&(o.push({key:d,x1:r[h],y1:r[h+1],x2:r[h+2],y2:r[h+3]}),c))return!0}}const d=this.circleCells[r];if(null!==d){const r=this.circles;for(const s of d)if(!l.circle[s]){l.circle[s]=!0;const h=3*s,d=this.circleKeys[s];if(this._circleAndRectCollide(r[h],r[h+1],r[h+2],e,t,n,i)&&(!a||a(d))&&(!c||!me(u,d.overlapMode))){const e=r[h],t=r[h+1],n=r[h+2];if(o.push({key:d,x1:e-n,y1:t-n,x2:e+n,y2:t+n}),c)return!0}}}return!1}_queryCellCircle(e,t,n,i,r,o,s,a){const{circle:l,seenUids:c,overlapMode:u}=s,h=this.boxCells[r];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const n=4*t,i=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!a||a(i))&&!me(u,i.overlapMode))return o.push(!0),!0}}const d=this.circleCells[r];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const n=3*t,i=this.circleKeys[t];if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!a||a(i))&&!me(u,i.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,n,i,r,o,s,a){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(r.call(this,e,t,n,i,this.xCellCount*l+d,o,s,a))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,i,r,o){const s=i-e,a=r-t,l=n+o;return l*l>s*s+a*a}_circleAndRectCollide(e,t,n,i,r,o,s){const a=(o-i)/2,l=Math.abs(e-(i+a));if(l>a+n)return!1;const c=(s-r)/2,u=Math.abs(t-(r+c));if(u>c+n)return!1;if(l<=a||u<=c)return!0;const h=l-a,d=u-c;return h*h+d*d<=n*n}}function ye(e,n,i,r,o){const s=t.H();return n?(t.K(s,s,[1/o,1/o,1]),i||t.ad(s,s,r.angle)):t.L(s,r.labelPlaneMatrix,e),s}function _e(e,n,i,r,o){if(n){const n=t.ae(e);return t.K(n,n,[o,o,1]),i||t.ad(n,n,-r.angle),n}return r.glCoordMatrix}function ve(e,n,i){let r;i?(r=[e.x,e.y,i(e.x,e.y),1],t.af(r,r,n)):(r=[e.x,e.y,0,1],function(e,t,n){const i=t[0],r=t[1];e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e[3]=n[3]*i+n[7]*r+n[15]}(r,r,n));const o=r[3];return{point:new t.P(r[0]/o,r[1]/o),signedDistanceFromCamera:o,isOccluded:!1}}function be(e,t){return.5+e/t*.5}function xe(e,t){return e.x>=-t[0]&&e.x<=t[0]&&e.y>=-t[1]&&e.y<=t[1]}function we(e,n,i,r,o,s,a,l,c,u,h,d,p,f,m){const g=r?e.textSizeData:e.iconSizeData,y=t.ag(g,i.transform.zoom),_=[256/i.width*2+1,256/i.height*2+1],v=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;v.clear();const b=e.lineVertexArray,x=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,w=i.transform.width/i.transform.height;let S=!1;for(let k=0;k<x.length;k++){const r=x.get(k);if(r.hidden||r.writingMode===t.ah.vertical&&!S){ze(r.numGlyphs,v);continue}S=!1;const C=ve(new t.P(r.anchorX,r.anchorY),n,m);if(!xe(C.point,_)){ze(r.numGlyphs,v);continue}const E=be(i.transform.cameraToCenterDistance,C.signedDistanceFromCamera),T=t.ai(g,y,r),P=a?T/E:T*E,I={getElevation:m,labelPlaneMatrix:o,lineVertexArray:b,pitchWithMap:a,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:u,tileAnchorPoint:new t.P(r.anchorX,r.anchorY),unwrappedTileID:h,width:d,height:p,translation:f},M=Ce(I,r,P,!1,l,n,s,e.glyphOffsetArray,v,w,c);S=M.useVertical,(M.notEnoughRoom||S||M.needsFlipping&&Ce(I,r,P,!0,l,n,s,e.glyphOffsetArray,v,w,c).notEnoughRoom)&&ze(r.numGlyphs,v)}r?e.text.dynamicLayoutVertexBuffer.updateData(v):e.icon.dynamicLayoutVertexBuffer.updateData(v)}function Se(e,t,n,i,r,o,s,a){const l=o.glyphStartIndex+o.numGlyphs,c=o.lineStartIndex,u=o.lineStartIndex+o.lineLength,h=t.getoffsetX(o.glyphStartIndex),d=t.getoffsetX(l-1),p=Ae(e*h,n,i,r,o.segment,c,u,a,s);if(!p)return null;const f=Ae(e*d,n,i,r,o.segment,c,u,a,s);return f?a.projectionCache.anyProjectionOccluded?null:{first:p,last:f}:null}function ke(e,n,i,r){return e===t.ah.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.ah.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function Ce(e,n,i,r,o,s,a,l,c,u,h){const d=i/24,p=n.lineOffsetX*d,f=n.lineOffsetY*d;let m;if(n.numGlyphs>1){const t=n.glyphStartIndex+n.numGlyphs,i=n.lineStartIndex,s=n.lineStartIndex+n.lineLength,c=Se(d,l,p,f,r,n,h,e);if(!c)return{notEnoughRoom:!0};const g=ve(c.first.point,a,e.getElevation).point,y=ve(c.last.point,a,e.getElevation).point;if(o&&!r){const e=ke(n.writingMode,g,y,u);if(e)return e}m=[c.first];for(let o=n.glyphStartIndex+1;o<t-1;o++)m.push(Ae(d*l.getoffsetX(o),p,f,r,n.segment,i,s,e,h));m.push(c.last)}else{if(o&&!r){const i=ve(e.tileAnchorPoint,s,e.getElevation).point,r=n.lineStartIndex+n.segment+1,o=new t.P(e.lineVertexArray.getx(r),e.lineVertexArray.gety(r)),a=ve(o,s,e.getElevation),l=a.signedDistanceFromCamera>0?a.point:function(e,t,n,i,r,o){return Ee(e,t,n,1,r,o)}(e.tileAnchorPoint,o,i,0,s,e),c=ke(n.writingMode,i,l,u);if(c)return c}const i=Ae(d*l.getoffsetX(n.glyphStartIndex),p,f,r,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,e,h);if(!i||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};m=[i]}for(const g of m)t.aj(c,g.point,g.angle);return{}}function Ee(e,t,n,i,r,o){const s=e.add(e.sub(t)._unit()),a=void 0!==r?ve(s,r,o.getElevation).point:Pe(s.x,s.y,o).point,l=n.sub(a);return n.add(l._mult(i/l.mag()))}function Te(e,n,i){const r=n.projectionCache;if(r.projections[e])return r.projections[e];const o=new t.P(n.lineVertexArray.getx(e),n.lineVertexArray.gety(e)),s=Pe(o.x,o.y,n);if(s.signedDistanceFromCamera>0)return r.projections[e]=s.point,r.anyProjectionOccluded=r.anyProjectionOccluded||s.isOccluded,s.point;const a=e-i.direction;return function(e,t,n,i,r){return Ee(e,t,n,i,void 0,r)}(0===i.distanceFromAnchor?n.tileAnchorPoint:new t.P(n.lineVertexArray.getx(a),n.lineVertexArray.gety(a)),o,i.previousVertex,i.absOffsetX-i.distanceFromAnchor+1,n)}function Pe(e,n,i){const r=e+i.translation[0],o=n+i.translation[1];let s;return!i.pitchWithMap&&i.projection.useSpecialProjectionForSymbols?(s=i.projection.projectTileCoordinates(r,o,i.unwrappedTileID,i.getElevation),s.point.x=(.5*s.point.x+.5)*i.width,s.point.y=(.5*-s.point.y+.5)*i.height):(s=ve(new t.P(r,o),i.labelPlaneMatrix,i.getElevation),s.isOccluded=!1),s}function Ie(e,t,n){return e._unit()._perp()._mult(t*n)}function Me(e,n,i,r,o,s,a,l,c){if(l.projectionCache.offsets[e])return l.projectionCache.offsets[e];const u=i.add(n);if(e+c.direction<r||e+c.direction>=o)return l.projectionCache.offsets[e]=u,u;const h=Te(e+c.direction,l,c),d=Ie(h.sub(i),a,c.direction),p=i.add(d),f=h.add(d);return l.projectionCache.offsets[e]=t.ak(s,u,p,f)||u,l.projectionCache.offsets[e]}function Ae(e,t,n,i,r,o,s,a,l){const c=i?e-t:e+t;let u=c>0?1:-1,h=0;i&&(u*=-1,h=Math.PI),u<0&&(h+=Math.PI);let d,p=u>0?o+r:o+r+1;a.projectionCache.cachedAnchorPoint?d=a.projectionCache.cachedAnchorPoint:(d=Pe(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,a.projectionCache.cachedAnchorPoint=d);let f,m,g=d,y=d,_=0,v=0;const b=Math.abs(c),x=[];let w;for(;_+v<=b;){if(p+=u,p<o||p>=s)return null;_+=v,y=g,m=f;const e={absOffsetX:b,direction:u,distanceFromAnchor:_,previousVertex:y};if(g=Te(p,a,e),0===n)x.push(y),w=g.sub(y);else{let t;const i=g.sub(y);t=0===i.mag()?Ie(Te(p+u,a,e).sub(g),n,u):Ie(i,n,u),m||(m=y.add(t)),f=Me(p,t,g,o,s,m,n,a,e),x.push(m),w=f.sub(m)}v=w.mag()}const S=w._mult((b-_)/v)._add(m||y),k=h+Math.atan2(g.y-y.y,g.x-y.x);return x.push(S),{point:S,angle:l?k:0,path:x}}const Re=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ze(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set(Re,3*e)}}const Le=100;class Oe{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ge(e.width+200,e.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ge(e.width+200,e.height+200,25);this.transform=e,this.mapProjection=t,this.grid=n,this.ignoredGrid=i,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Le,this.screenBottomBoundary=e.height+Le,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,n,i,r,o,s,a,l,c,u){const h=e.anchorPointX+a[0],d=e.anchorPointY+a[1],p=this.projectAndGetPerspectiveRatio(i,h,d,r,c),f=this._projectCollisionBox(e,n,i,r,o,s,a,p,c,u),[m,g,y,_]=f.box;return this.mapProjection.useSpecialProjectionForSymbols&&(o?f.allPointsOccluded:this.mapProjection.isOccluded(h,d,r))||p.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(m,g,y,_)||"always"!==t&&this.grid.hitTest(m,g,y,_,t,l)?{box:[m,g,y,_],placeable:!1,offscreen:!1}:{box:[m,g,y,_],placeable:!0,offscreen:this.isOffscreen(m,g,y,_)}}placeCollisionCircles(e,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g){const y=[],_=new t.P(n.anchorX,n.anchorY),v=this.getPerspectiveRatio(s,_.x,_.y,a,g),b=(h?o/v:o*v)/t.ap,x={getElevation:g,labelPlaneMatrix:l,lineVertexArray:i,pitchWithMap:h,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:_,unwrappedTileID:a,width:this.transform.width,height:this.transform.height,translation:m},w=Se(b,r,n.lineOffsetX*b,n.lineOffsetY*b,!1,n,!1,x);let S=!1,k=!1,C=!0;if(w){const n=.5*p*v+f,i=new t.P(-100,-100),r=new t.P(this.screenRightBoundary,this.screenBottomBoundary),o=new fe,s=w.first,a=w.last;let l=[];for(let e=s.path.length-1;e>=1;e--)l.push(s.path[e]);for(let e=1;e<a.path.length;e++)l.push(a.path[e]);const h=2.5*n;if(c){const e=this.projectPathToScreenSpace(l,x,c);l=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let m=[];if(l.length>0){const e=l[0].clone(),n=l[0].clone();for(let t=1;t<l.length;t++)e.x=Math.min(e.x,l[t].x),e.y=Math.min(e.y,l[t].y),n.x=Math.max(n.x,l[t].x),n.y=Math.max(n.y,l[t].y);m=e.x>=i.x&&n.x<=r.x&&e.y>=i.y&&n.y<=r.y?[l]:n.x<i.x||e.x>r.x||n.y<i.y||e.y>r.y?[]:t.al([l],i.x,i.y,r.x,r.y)}for(const t of m){o.reset(t,.25*n);let i=0;i=o.length<=.5*n?1:Math.ceil(o.paddedLength/h)+1;for(let t=0;t<i;t++){const r=t/Math.max(i-1,1),s=o.lerp(r),a=s.x+Le,l=s.y+Le;y.push(a,l,n,0);const c=a-n,h=l-n,p=a+n,f=l+n;if(C=C&&this.isOffscreen(c,h,p,f),k=k||this.isInsideGrid(c,h,p,f),"always"!==e&&this.grid.hitTestCircle(a,l,n,e,d)&&(S=!0,!u))return{circles:[],offscreen:!1,collisionDetected:S}}}}return{circles:!u&&S||!k||v<this.perspectiveRatioCutoff?[]:y,offscreen:C,collisionDetected:S}}projectPathToScreenSpace(e,t,n){return e.map((e=>ve(e,n,t.getElevation)))}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,o=-1/0,s=-1/0;for(const u of e){const e=new t.P(u.x+Le,u.y+Le);i=Math.min(i,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x),s=Math.max(s,e.y),n.push(e)}const a=this.grid.query(i,r,o,s).concat(this.ignoredGrid.query(i,r,o,s)),l={},c={};for(const u of a){const e=u.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const i=[new t.P(u.x1,u.y1),new t.P(u.x2,u.y1),new t.P(u.x2,u.y2),new t.P(u.x1,u.y2)];t.am(n,i)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(e,t,n,i,r,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,i,r,o){const s=n?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:r,collisionGroupID:o,overlapMode:t};for(let l=0;l<e.length;l+=4)s.insertCircle(a,e[l],e[l+1],e[l+2])}projectAndGetPerspectiveRatio(e,n,i,r,o){const s=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(n,i,r,o):ve(new t.P(n,i),e,o);return{point:new t.P((s.point.x+1)/2*this.transform.width+Le,(1-s.point.y)/2*this.transform.height+Le),perspectiveRatio:.5+this.transform.cameraToCenterDistance/s.signedDistanceFromCamera*.5,isOccluded:s.isOccluded,signedDistanceFromCamera:s.signedDistanceFromCamera}}getPerspectiveRatio(e,n,i,r,o){const s=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(n,i,r,o):ve(new t.P(n,i),e,o);return.5+this.transform.cameraToCenterDistance/s.signedDistanceFromCamera*.5}isOffscreen(e,t,n,i){return n<Le||e>=this.screenRightBoundary||i<Le||t>this.screenBottomBoundary}isInsideGrid(e,t,n,i){return n>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.an([]);return t.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,n,i,r,o,s,a,l,c,u){const h=n*l.perspectiveRatio;let d=new t.P(1,0),p=new t.P(0,1);const f=new t.P(e.anchorPointX+a[0],e.anchorPointY+a[1]);if(s&&!o){const e=this.projectAndGetPerspectiveRatio(i,f.x+1,f.y,r,c).point.sub(l.point).unit(),n=Math.atan(e.y/e.x)+(e.x<0?Math.PI:0),o=Math.sin(n),s=Math.cos(n);d=new t.P(s,o),p=new t.P(-o,s)}else if(!s&&o){const e=-this.transform.angle,n=Math.sin(e),i=Math.cos(e);d=new t.P(i,n),p=new t.P(-n,i)}let m=l.point,g=h;if(o){m=f;const e=this.transform.zoom-Math.floor(this.transform.zoom);g=Math.pow(2,-e),g*=this.mapProjection.getPitchedTextCorrection(this.transform,f,r),u||(g*=t.ac(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}u&&(m=m.add(d.mult(u.x*g)).add(p.mult(u.y*g)));const y=e.x1*g,_=e.x2*g,v=(y+_)/2,b=e.y1*g,x=e.y2*g,w=(b+x)/2,S=[{offsetX:y,offsetY:b},{offsetX:v,offsetY:b},{offsetX:_,offsetY:b},{offsetX:_,offsetY:w},{offsetX:_,offsetY:x},{offsetX:v,offsetY:x},{offsetX:y,offsetY:x},{offsetX:y,offsetY:w}];let k=[];for(const{offsetX:E,offsetY:T}of S)k.push(new t.P(m.x+d.x*E+p.x*T,m.y+d.y*E+p.y*T));let C=!1;if(o){const e=k.map((e=>this.projectAndGetPerspectiveRatio(i,e.x,e.y,r,c)));C=e.some((e=>!e.isOccluded)),k=e.map((e=>e.point))}else C=!0;return{box:t.ao(k),allPointsOccluded:!C}}}function De(e,n,i){return n*(t.X/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}class Fe{constructor(e,t,n,i){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class Ne{constructor(e,t,n,i,r){this.text=new Fe(e?e.text:null,t,n,r),this.icon=new Fe(e?e.icon:null,t,i,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Be{constructor(e,t,n){this.text=e,this.icon=t,this.skipFade=n}}class je{constructor(){this.invProjMatrix=t.H(),this.viewportMatrix=t.H(),this.circles=[]}}class Ve{constructor(e,t,n,i,r){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class Ue{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function qe(e,n,i,r,o){const{horizontalAlign:s,verticalAlign:a}=t.au(e);return new t.P(-(s-.5)*n+r[0]*o,-(a-.5)*i+r[1]*o)}class Ge{constructor(e,t,n,i,r,o){this.transform=e.clone(),this.terrain=n,this.collisionIndex=new Oe(this.transform,t),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new Ue(r),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const t=this.terrain;return t?(n,i)=>t.getElevation(e,n,i):null}getBucketParts(e,n,i,r){const o=i.getBucket(n),s=i.latestFeatureIndex;if(!o||!s||n.id!==o.layerIds[0])return;const a=i.collisionBoxArray,l=o.layers[0].layout,c=o.layers[0].paint,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),h=i.tileSize/t.X,d=i.tileID.toUnwrapped(),p=this.transform.calculatePosMatrix(d),f="map"===l.get("text-pitch-alignment"),m="map"===l.get("text-rotation-alignment"),g=De(i,1,this.transform.zoom),y=this.collisionIndex.mapProjection.translatePosition(this.transform,i,c.get("text-translate"),c.get("text-translate-anchor")),_=this.collisionIndex.mapProjection.translatePosition(this.transform,i,c.get("icon-translate"),c.get("icon-translate-anchor")),v=ye(p,f,m,this.transform,g);let b=null;if(f){const e=_e(p,f,m,this.transform,g);b=t.L([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Ve(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,i.tileID);const x={bucket:o,layout:l,translationText:y,translationIcon:_,posMatrix:p,unwrappedTileID:d,textLabelPlaneMatrix:v,labelToScreenMatrix:b,scale:u,textPixelRatio:h,holdingForFade:i.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:t.ag(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=t;e.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:x})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:x})}attemptAnchorPlacement(e,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v){const b=t.aq[e.textAnchor],x=[e.textOffset0,e.textOffset1],w=qe(b,i,r,x,o),S=this.collisionIndex.placeCollisionBox(n,d,l,c,u,a,s,g,h.predicate,v,w);if((!_||this.collisionIndex.placeCollisionBox(_,d,l,c,u,a,s,y,h.predicate,v,w).placeable)&&S.placeable){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(e=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:x,width:i,height:r,anchor:b,textBoxScale:o,prevAnchor:e},this.markUsedJustification(f,b,p,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,p),this.placedOrientations[p.crossTileID]=m),{shift:w,placedGlyphBoxes:S}}}placeLayerBucketPart(e,n,i){const{bucket:r,layout:o,translationText:s,translationIcon:a,posMatrix:l,unwrappedTileID:c,textLabelPlaneMatrix:u,labelToScreenMatrix:h,textPixelRatio:d,holdingForFade:p,collisionBoxArray:f,partiallyEvaluatedTextSize:m,collisionGroup:g}=e.parameters,y=o.get("text-optional"),_=o.get("icon-optional"),v=t.ar(o,"text-overlap","text-allow-overlap"),b="always"===v,x=t.ar(o,"icon-overlap","icon-allow-overlap"),w="always"===x,S="map"===o.get("text-rotation-alignment"),k="map"===o.get("text-pitch-alignment"),C="none"!==o.get("icon-text-fit"),E="viewport-y"===o.get("symbol-z-order"),T=b&&(w||!r.hasIconData()||_),P=w&&(b||!r.hasTextData()||y);!r.collisionArrays&&f&&r.deserializeCollisionBoxes(f);const I=this._getTerrainElevationFunc(this.retainedQueryData[r.bucketInstanceId].tileID),M=(e,f,w)=>{var E,M;if(n[e.crossTileID])return;if(p)return void(this.placements[e.crossTileID]=new Be(!1,!1,!1));let A=!1,R=!1,z=!0,L=null,O={box:null,placeable:!1,offscreen:null},D={box:null,placeable:!1,offscreen:null},F=null,N=null,B=null,j=0,V=0,U=0;f.textFeatureIndex?j=f.textFeatureIndex:e.useRuntimeCollisionCircles&&(j=e.featureIndex),f.verticalTextFeatureIndex&&(V=f.verticalTextFeatureIndex);const q=f.textBox;if(q){const n=n=>{let i=t.ah.horizontal;if(r.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,i=t,this.markUsedOrientation(r,i,e))}return i},o=(n,i)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&f.verticalTextBox){for(const e of r.writingModes)if(e===t.ah.vertical?(O=i(),D=O):O=n(),O&&O.placeable)break}else O=n()},u=e.textAnchorOffsetStartIndex,h=e.textAnchorOffsetEndIndex;if(h===u){const i=(t,n)=>{const i=this.collisionIndex.placeCollisionBox(t,v,d,l,c,k,S,s,g.predicate,I);return i&&i.placeable&&(this.markUsedOrientation(r,n,e),this.placedOrientations[e.crossTileID]=n),i};o((()=>i(q,t.ah.horizontal)),(()=>{const n=f.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?i(n,t.ah.vertical):{box:null,offscreen:null}})),n(O&&O.placeable)}else{let p=t.aq[null===(M=null===(E=this.prevPlacement)||void 0===E?void 0:E.variableOffsets[e.crossTileID])||void 0===M?void 0:M.anchor];const m=(n,o,f)=>{const m=n.x2-n.x1,y=n.y2-n.y1,_=e.textBoxScale,b=C&&"never"===x?o:null;let w=null,E="never"===v?1:2,T="never";p&&E++;for(let t=0;t<E;t++){for(let t=u;t<h;t++){const i=r.textAnchorOffsets.get(t);if(p&&i.textAnchor!==p)continue;const o=this.attemptAnchorPlacement(i,n,m,y,_,S,k,d,l,c,g,T,e,r,f,s,a,b,I);if(o&&(w=o.placedGlyphBoxes,w&&w.placeable))return A=!0,L=o.shift,w}p?p=null:T=v}return i&&!w&&(w={box:this.collisionIndex.placeCollisionBox(q,"always",d,l,c,k,S,s,g.predicate,I,new t.P(0,0)).box,offscreen:!1,placeable:!1}),w};o((()=>m(q,f.iconBox,t.ah.horizontal)),(()=>{const n=f.verticalTextBox;return r.allowVerticalPlacement&&(!O||!O.placeable)&&e.numVerticalGlyphVertices>0&&n?m(n,f.verticalIconBox,t.ah.vertical):{box:null,occluded:!0,offscreen:null}})),O&&(A=O.placeable,z=O.offscreen);const y=n(O&&O.placeable);if(!A&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,y))}}}if(F=O,A=F&&F.placeable,z=F&&F.offscreen,e.useRuntimeCollisionCircles){const n=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),a=t.ai(r.textSizeData,m,n),d=o.get("text-padding");N=this.collisionIndex.placeCollisionCircles(v,n,r.lineVertexArray,r.glyphOffsetArray,a,l,c,u,h,i,k,g.predicate,e.collisionCircleDiameter,d,s,I),N.circles.length&&N.collisionDetected&&!i&&t.w("Collisions detected, but collision boxes are not shown"),A=b||N.circles.length>0&&!N.collisionDetected,z=z&&N.offscreen}if(f.iconFeatureIndex&&(U=f.iconFeatureIndex),f.iconBox){const e=e=>this.collisionIndex.placeCollisionBox(e,x,d,l,c,k,S,a,g.predicate,I,C&&L?L:void 0);D&&D.placeable&&f.verticalIconBox?(B=e(f.verticalIconBox),R=B.placeable):(B=e(f.iconBox),R=B.placeable),z=z&&B.offscreen}const G=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Z=_||0===e.numIconVertices;G||Z?Z?G||(R=R&&A):A=R&&A:R=A=R&&A;const H=R&&B.placeable;if(A&&F.placeable&&this.collisionIndex.insertCollisionBox(F.box,v,o.get("text-ignore-placement"),r.bucketInstanceId,D&&D.placeable&&V?V:j,g.ID),H&&this.collisionIndex.insertCollisionBox(B.box,x,o.get("icon-ignore-placement"),r.bucketInstanceId,U,g.ID),N&&A&&this.collisionIndex.insertCollisionCircles(N.circles,v,o.get("text-ignore-placement"),r.bucketInstanceId,j,g.ID),i&&this.storeCollisionData(r.bucketInstanceId,w,f,F,B,N),0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===r.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new Be(A||T,R||P,z||r.justReloaded),n[e.crossTileID]=!0};if(E){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=r.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];M(r.symbolInstances.get(n),r.collisionArrays[n],n)}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)M(r.symbolInstances.get(t),r.collisionArrays[t],t);if(i&&r.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[r.bucketInstanceId];t.as(e.invProjMatrix,l),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1}storeCollisionData(e,t,n,i,r,o){if(n.textBox||n.iconBox){let o,s;this.collisionBoxArrays.has(e)?o=this.collisionBoxArrays.get(e):(o=new Map,this.collisionBoxArrays.set(e,o)),o.has(t)?s=o.get(t):(s={text:null,icon:null},o.set(t,s)),n.textBox&&(s.text=i.box),n.iconBox&&(s.icon=r.box)}if(o){let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new je);for(let e=0;e<o.circles.length;e+=4)t.circles.push(o.circles[e+0]),t.circles.push(o.circles[e+1]),t.circles.push(o.circles[e+2]),t.circles.push(o.collisionDetected?1:0)}}markUsedJustification(e,n,i,r){let o;o=r===t.ah.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.at(n)];const s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:i.crossTileID)}markUsedOrientation(e,n,i){const r=n===t.ah.horizontal||n===t.ah.horizontalOnly?n:0,o=n===t.ah.vertical?n:0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];for(const t of s)e.text.placedSymbolArray.get(t).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const i=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},o=t?t.variableOffsets:{},s=t?t.placedOrientations:{};for(const a in this.placements){const e=this.placements[a],t=r[a];t?(this.opacities[a]=new Ne(t,i,e.text,e.icon),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[a]=new Ne(null,i,e.text,e.icon,e.skipFade),n=n||e.text||e.icon)}for(const a in r){const e=r[a];if(!this.opacities[a]){const t=new Ne(e,i,!1,!1);t.isHidden()||(this.opacities[a]=t,n=n||e.text.placed||e.icon.placed)}}for(const a in o)this.variableOffsets[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.variableOffsets[a]=o[a]);for(const a in s)this.placedOrientations[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.placedOrientations[a]=s[a]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const i of t){const t=i.getBucket(e);t&&i.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i.tileID,n,i.collisionBoxArray)}}updateBucketOpacities(e,n,i,r){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const o=e.layers[0],s=o.layout,a=new Ne(null,0,!1,!1,!0),l=s.get("text-allow-overlap"),c=s.get("icon-allow-overlap"),u=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),h="map"===s.get("text-rotation-alignment"),d="map"===s.get("text-pitch-alignment"),p="none"!==s.get("icon-text-fit"),f=new Ne(null,0,l&&(c||!e.hasIconData()||s.get("icon-optional")),c&&(l||!e.hasTextData()||s.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const m=(e,t,n)=>{for(let i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(n);e.hasVisibleVertices=e.hasVisibleVertices||n!==et},g=this.collisionBoxArrays.get(e.bucketInstanceId);for(let y=0;y<e.symbolInstances.length;y++){const n=e.symbolInstances.get(y),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:o,crossTileID:s}=n;let l=this.opacities[s];i[s]?l=a:l||(l=f,this.opacities[s]=l),i[s]=!0;const c=n.numIconVertices>0,_=this.placedOrientations[n.crossTileID],v=_===t.ah.vertical,b=_===t.ah.horizontal||_===t.ah.horizontalOnly;if(r>0||o>0){const t=Qe(l.text);m(e.text,r,v?et:t),m(e.text,o,b?et:t);const i=l.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||v?1:0)})),n.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=i||b?1:0);const s=this.variableOffsets[n.crossTileID];s&&this.markUsedJustification(e,s.anchor,n,_);const a=this.placedOrientations[n.crossTileID];a&&(this.markUsedJustification(e,"left",n,a),this.markUsedOrientation(e,a,n))}if(c){const t=Qe(l.icon),i=!(p&&n.verticalPlacedIconSymbolIndex&&v);n.placedIconSymbolIndex>=0&&(m(e.icon,n.numIconVertices,i?t:et),e.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=l.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,n.numVerticalIconVertices,i?et:t),e.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}const x=g&&g.has(y)?g.get(y):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[y];if(n){let i=new t.P(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(u){const e=this.variableOffsets[s];e?(i=qe(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),h&&i._rotate(d?this.transform.angle:-this.transform.angle)):t=!1}if(n.textBox||n.verticalTextBox){let r;n.textBox&&(r=v),n.verticalTextBox&&(r=b),Ze(e.textCollisionBox.collisionVertexArray,l.text.placed,!t||r,x.text,i.x,i.y)}}if(n.iconBox||n.verticalIconBox){const t=Boolean(!b&&n.verticalIconBox);let r;n.iconBox&&(r=t),n.verticalIconBox&&(r=!t),Ze(e.iconCollisionBox.collisionVertexArray,l.icon.placed,r,x.icon,p?i.x:0,p?i.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error("bucket.text.opacityVertexArray.length (= ".concat(e.text.opacityVertexArray.length,") !== bucket.text.layoutVertexArray.length (= ").concat(e.text.layoutVertexArray.length,") / 4"));if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error("bucket.icon.opacityVertexArray.length (= ".concat(e.icon.opacityVertexArray.length,") !== bucket.icon.layoutVertexArray.length (= ").concat(e.icon.layoutVertexArray.length,") / 4"));if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function Ze(e,t,n,i,r,o){i&&0!==i.length||(i=[0,0,0,0]);const s=i[0]-Le,a=i[1]-Le,l=i[2]-Le,c=i[3]-Le;e.emplaceBack(t?1:0,n?1:0,r||0,o||0,s,a),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,l,a),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,l,c),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,s,c)}const He=Math.pow(2,25),We=Math.pow(2,24),Ke=Math.pow(2,17),Xe=Math.pow(2,16),Ye=Math.pow(2,9),$e=Math.pow(2,8),Je=Math.pow(2,1);function Qe(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*He+t*We+n*Ke+t*Xe+n*Ye+t*$e+n*Je+t}const et=0;function tt(){return{isOccluded:(e,t,n)=>!1,getPitchedTextCorrection:(e,t,n)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(e,t,n,i){throw new Error("Not implemented.")},translatePosition:(e,t,n,i)=>function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!n[0]&&!n[1])return[0,0];const o=r?"map"===i?e.angle:0:"viewport"===i?-e.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}return[r?n[0]:De(t,n[0],e.zoom),r?n[1]:De(t,n[1],e.zoom)]}(e,t,n,i),getCircleRadiusCorrection:e=>1}}class nt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,i,r){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1}}class it{constructor(e,t,n,i,r,o,s,a){this.placement=new Ge(e,tt(),t,o,s,a),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,t,n){const i=o.now(),r=()=>!this._forceFullPlacement&&o.now()-i>2;for(;this._currentPlacementIndex>=0;){const i=t[e[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===i.type&&(!i.minzoom||i.minzoom<=o)&&(!i.maxzoom||i.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new nt(i)),this._inProgressLayer.continuePlacement(n[i.source],this.placement,this._showCollisionBoxes,i,r))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const rt=512/t.X/2;class ot{constructor(e,n,i){this.tileID=e,this.bucketInstanceId=i,this._symbolsByKey={};const r=new Map;for(let t=0;t<n.length;t++){const e=n.get(t),i=e.key,o=r.get(i);o?o.push(e):r.set(i,[e])}for(const[o,s]of r){const e={positions:s.map((e=>({x:Math.floor(e.anchorX*rt),y:Math.floor(e.anchorY*rt)}))),crossTileIDs:s.map((e=>e.crossTileID))};if(e.positions.length>128){const n=new t.av(e.positions.length,16,Uint16Array);for(const{x:t,y:i}of e.positions)n.add(t,i);n.finish(),delete e.positions,e.index=n}this._symbolsByKey[o]=e}}getScaledCoordinates(e,n){const{x:i,y:r,z:o}=this.tileID.canonical,{x:s,y:a,z:l}=n.canonical,c=rt/Math.pow(2,l-o),u=(a*t.X+e.anchorY)*c,h=r*t.X*rt;return{x:Math.floor((s*t.X+e.anchorX)*c-i*t.X*rt),y:Math.floor(u-h)}}findMatches(e,t,n){const i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let r=0;r<e.length;r++){const o=e.get(r);if(o.crossTileID)continue;const s=this._symbolsByKey[o.key];if(!s)continue;const a=this.getScaledCoordinates(o,t);if(s.index){const e=s.index.range(a.x-i,a.y-i,a.x+i,a.y+i).sort();for(const t of e){const e=s.crossTileIDs[t];if(!n[e]){n[e]=!0,o.crossTileID=e;break}}}else if(s.positions)for(let e=0;e<s.positions.length;e++){const t=s.positions[e],r=s.crossTileIDs[e];if(Math.abs(t.x-a.x)<=i&&Math.abs(t.y-a.y)<=i&&!n[r]){n[r]=!0,o.crossTileID=r;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((e=>{let{crossTileIDs:t}=e;return t}))}}class st{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class at{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],i={};for(const n in e){const r=e[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),i[r.tileID.key]=r}this.indexes[n]=i}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const i=this.usedCrossTileIDs[e.overscaledZ];for(const r in this.indexes){const n=this.indexes[r];if(Number(r)>e.overscaledZ)for(const r in n){const o=n[r];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,i)}else{const o=n[e.scaledTo(Number(r)).key];o&&o.findMatches(t.symbolInstances,e,i)}}for(let r=0;r<t.symbolInstances.length;r++){const e=t.symbolInstances.get(r);e.crossTileID||(e.crossTileID=n.generate(),i[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new ot(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.getCrossTileIDsLists())for(const t of n)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)e[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],t=!0)}return t}}class lt{constructor(){this.layerIndexes={},this.crossTileIDs=new st,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new at);let r=!1;const o={};i.handleWrapJump(n);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,t,this.crossTileIDs)&&(r=!0),o[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}const ct=(e,n)=>t.t(e,n&&n.filter((e=>"source.canvas"!==e.identifier))),ut=t.aw();class ht extends t.E{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._rtlPluginLoaded=()=>{for(const e in this.sourceCaches){const t=this.sourceCaches[e].getSource().type;"vector"!==t&&"geojson"!==t||this.sourceCaches[e].reload()}},this.map=e,this.dispatcher=new j(B(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((e,t)=>this.getGlyphs(e,t))),this.dispatcher.registerMessageHandler("GI",((e,t)=>this.getImages(e,t))),this.imageManager=new S,this.imageManager.setEventedParent(this),this.glyphManager=new T(e._requestManager,n.localIdeographFontFamily),this.lineAtlas=new z(256,512),this.crossTileSymbolIndex=new lt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",t.ay()),ae().on(re,this._rtlPluginLoaded),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const n=t.getSource();if(n&&n.vectorLayerIds)for(const i in this._layers){const e=this._layers[i];e.source===n.id&&this._validateLayer(e)}}))}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),n.validate="boolean"!=typeof n.validate||n.validate;const r=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const o=this._loadStyleRequest;t.h(r,this._loadStyleRequest).then((e=>{this._loadStyleRequest=null,this._load(e.data,n,i)})).catch((e=>{this._loadStyleRequest=null,e&&!o.signal.aborted&&this.fire(new t.j(e))}))}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,n.validate=!1!==n.validate,this._load(e,n,i)})).catch((()=>{}))}loadEmpty(){this.fire(new t.k("dataloading",{dataType:"style"})),this._load(ut,{validate:!1})}_load(e,n,i){var r;const o=n.transformStyle?n.transformStyle(i,e):e;if(!n.validate||!ct(this,t.u(o))){this._loaded=!0,this.stylesheet=o;for(const e in o.sources)this.addSource(e,o.sources[e],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs),this._createLayers(),this.light=new M(this.stylesheet.light),this.sky=new R(this.stylesheet.sky),this.map.setTerrain(null!==(r=this.stylesheet.terrain)&&void 0!==r?r:null),this.fire(new t.k("data",{dataType:"style"})),this.fire(new t.k("style.load"))}}_createLayers(){const e=t.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map((e=>e.id)),this._layers={},this._serializedLayers=null;for(const n of e){const e=t.aA(n);e.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=e}}_loadSprite(e){let n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(e,n,i,r){return t._(this,void 0,void 0,(function*(){const s=v(e),a=i>1?"@2x":"",l={},c={};for(const{id:e,url:i}of s){const o=n.transformRequest(b(i,a,".json"),"SpriteJSON");l[e]=t.h(o,r);const s=n.transformRequest(b(i,a,".png"),"SpriteImage");c[e]=p.getImage(s,r)}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(e,n){return t._(this,void 0,void 0,(function*(){const t={};for(const i in e){t[i]={};const r=o.getImageCanvasContext((yield n[i]).data),s=(yield e[i]).data;for(const e in s){const{width:n,height:o,x:a,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m}=s[e];t[i][e]={data:null,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m,spriteData:{width:n,height:o,x:a,y:l,context:r}}}}return t}))}(l,c)}))}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const n=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter((t=>!(t in e))):[];for(const e of n)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const r in e[t]){const n="default"===t?r:"".concat(t,":").concat(r);this._spritesImagesIds[t].push(n),n in this.imageManager.images?this.imageManager.updateImage(n,e[t][r],!1):this.imageManager.addImage(n,e[t][r]),i&&(this._changedImages[n]=!0)}}})).catch((e=>{this._spriteRequest=null,n=e,this.fire(new t.j(n))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),i&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"})),r&&r(n)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const i=e.sourceLayer;if(!i)return;const r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new t.j(new Error('Source layer "'.concat(i,'" does not exist on source "').concat(r.id,'" as specified by style layer "').concat(e.id,'".'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._serializedAllLayers();if(!e||0===e.length)return Object.values(n?t.aB(i):i);const r=[];for(const o of e)if(i[o]){const e=n?t.aB(i[o]):i[o];r.push(e)}return r}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const n of t){const t=this._layers[n];"custom"!==t.type&&(e[n]=t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(n){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error("Invalid action ".concat(t));this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const i in this._updatedPaintProps)this._layers[i].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];i[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const r in i){const e=this.sourceCaches[r];!!i[r]!=!!e.used&&e.fire(new t.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:r}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,n&&this.fire(new t.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;this._checkLoaded();const r=this.serialize();if(e=n.transformStyle?n.transformStyle(r,e):e,(null===(i=n.validate)||void 0===i||i)&&ct(this,t.u(e)))return!1;(e=t.aB(e)).layers=t.az(e.layers);const o=t.aC(r,e),s=this._getOperationsToPerform(o);if(s.unimplemented.length>0)throw new Error("Unimplemented: ".concat(s.unimplemented.join(", "),"."));if(0===s.operations.length)return!1;for(const t of s.operations)t();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const t=[],n=[];for(const i of e)switch(i.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":t.push((()=>this.addLayer.apply(this,i.args)));break;case"removeLayer":t.push((()=>this.removeLayer.apply(this,i.args)));break;case"setPaintProperty":t.push((()=>this.setPaintProperty.apply(this,i.args)));break;case"setLayoutProperty":t.push((()=>this.setLayoutProperty.apply(this,i.args)));break;case"setFilter":t.push((()=>this.setFilter.apply(this,i.args)));break;case"addSource":t.push((()=>this.addSource.apply(this,i.args)));break;case"removeSource":t.push((()=>this.removeSource.apply(this,i.args)));break;case"setLayerZoomRange":t.push((()=>this.setLayerZoomRange.apply(this,i.args)));break;case"setLight":t.push((()=>this.setLight.apply(this,i.args)));break;case"setGeoJSONSourceData":t.push((()=>this.setGeoJSONSourceData.apply(this,i.args)));break;case"setGlyphs":t.push((()=>this.setGlyphs.apply(this,i.args)));break;case"setSprite":t.push((()=>this.setSprite.apply(this,i.args)));break;case"setSky":t.push((()=>this.setSky.apply(this,i.args)));break;case"setTerrain":t.push((()=>this.map.setTerrain.apply(this,i.args)));break;case"setTransition":t.push((()=>{}));break;default:n.push(i.command)}return{operations:t,unimplemented:n}}addImage(e,n){if(this.getImage(e))return this.fire(new t.j(new Error('An image named "'.concat(e,'" already exists.'))));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.j(new Error('An image named "'.concat(e,'" does not exist.'))));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error('Source "'.concat(e,'" already exists.'));if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.u.source,"sources.".concat(e),n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=this.sourceCaches[e]=new he(e,n,this.dispatcher);r.style=this,r.setEventedParent(this,(()=>({isSourceLoaded:r.loaded(),source:r.serialize(),sourceId:e}))),r.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.j(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(i,'" is using it.'))));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID=".concat(e));const n=this.sourceCaches[e].getSource();if("geojson"!==n.type)throw new Error("geojsonSource.type is ".concat(n.type,", which is !== 'geojson"));n.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.j(new Error('Layer "'.concat(r,'" already exists on this map.'))));let o;if("custom"===e.type){if(ct(this,t.aD(e)))return;o=t.aA(e)}else{if("source"in e&&"object"==typeof e.source&&(this.addSource(r,e.source),e=t.aB(e),e=t.e(e,{source:r})),this._validate(t.u.layer,"layers.".concat(r),e,{arrayIndex:-1},i))return;o=t.aA(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}})}const s=n?this._order.indexOf(n):this._order.length;if(n&&-1===s)this.fire(new t.j(new Error('Cannot add layer "'.concat(r,'" before non-existing layer "').concat(n,'".'))));else{if(this._order.splice(s,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){const e=this._removedLayers[r];delete this._removedLayers[r],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.j(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))));if(e===n)return;const i=this._order.indexOf(e);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.j(new Error('Cannot move layer "'.concat(e,'" before non-existing layer "').concat(n,'".')))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.j(new Error('Cannot remove non-existing layer "'.concat(e,'".'))));n.setEventedParent(null);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,n,i){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.j(new Error('Cannot set the zoom range of non-existing layer "'.concat(e,'".'))))}setFilter(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const r=this.getLayer(e);if(r){if(!t.aE(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.u.filter,"layers.".concat(r.id,".filter"),n,null,i)||(r.filter=t.aB(n),this._updateLayer(r)))}else this.fire(new t.j(new Error('Cannot filter non-existing layer "'.concat(e,'".'))))}getFilter(e){return t.aB(this.getLayer(e).filter)}setLayoutProperty(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(e);o?t.aE(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new t.j(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}getLayoutProperty(e,n){const i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.j(new Error('Cannot get style of non-existing layer "'.concat(e,'".'))))}setPaintProperty(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(e);o?t.aE(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new t.j(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,n){this._checkLoaded();const i=e.source,r=e.sourceLayer,o=this.sourceCaches[i];if(void 0===o)return void this.fire(new t.j(new Error("The source '".concat(i,"' does not exist in the map's style."))));const s=o.getSource().type;"geojson"===s&&r?this.fire(new t.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||r?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,e.id,n)):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const i=e.source,r=this.sourceCaches[i];if(void 0===r)return void this.fire(new t.j(new Error("The source '".concat(i,"' does not exist in the map's style."))));const o=r.getSource().type,s="vector"===o?e.sourceLayer:void 0;"vector"!==o||s?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.j(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(s,e.id,n):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,i=e.sourceLayer,r=this.sourceCaches[n];if(void 0!==r)return"vector"!==r.getSource().type||i?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,e.id)):void this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.j(new Error("The source '".concat(n,"' does not exist in the map's style."))))}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.aF(this.sourceCaches,(e=>e.serialize())),n=this._serializeByIds(this._order,!0),i=this.map.getTerrain()||void 0,r=this.stylesheet;return t.aG({version:r.version,name:r.name,metadata:r.metadata,light:r.light,sky:r.sky,center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,sprite:r.sprite,glyphs:r.glyphs,transition:r.transition,sources:e,layers:n,terrain:i},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},i=[];for(let o=this._order.length-1;o>=0;o--){const r=this._order[o];if(t(r)){n[r]=o;for(const t of e){const e=t[r];if(e)for(const t of e)i.push(t)}}}i.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const r=[];for(let o=this._order.length-1;o>=0;o--){const s=this._order[o];if(t(s))for(let e=i.length-1;e>=0;e--){const t=i[e].feature;if(n[t.layer.id]<o)break;r.push(t),i.pop()}else for(const t of e){const e=t[s];if(e)for(const t of e)r.push(t.feature)}}return r}queryRenderedFeatures(e,n,i){n&&n.filter&&this._validate(t.u.filter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.j(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.j(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be queried for features.")))),[];r[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const s=this._serializedAllLayers();for(const t in this.sourceCaches)n.layers&&!r[t]||o.push(q(this.sourceCaches[t],this._layers,s,e,n,i));return this.placement&&o.push(function(e,t,n,i,r,o,s){const a={},l=o.queryRenderedSymbols(i),c=[];for(const u of Object.keys(l).map(Number))c.push(s[u]);c.sort(G);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,r.filter,r.layers,r.availableImages,e);for(const e in n){const t=a[e]=a[e]||[],i=n[e];i.sort(((e,t)=>{const n=u.featureSortOrder;if(n){const i=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const u in a)a[u].forEach((t=>{const i=t.feature,r=n[e[u].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return a}(this._layers,s,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.u.filter,"querySourceFeatures.filter",n.filter,null,n);const i=this.sourceCaches[e];return i?function(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),i=[],r={};for(let o=0;o<n.length;o++){const e=n[o],s=e.tileID.canonical.key;r[s]||(r[s]=!0,e.querySourceFeatures(i,t))}return i}(i,n):[]}getLight(){return this.light.getLight()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const i=this.light.getLight();let r=!1;for(const o in e)if(!t.aE(e[o],i[o])){r=!0;break}if(!r)return;const s={now:o.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(s)}getSky(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.sky}setSky(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getSky();let r=!1;if(!e&&!i)return;if(e&&!i)r=!0;else if(!e&&i)r=!0;else for(const o in e)if(!t.aE(e[o],i[o])){r=!0;break}if(!r)return;const s={now:o.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,n),this.sky.updateTransitions(s)}_validate(e,n,i,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&ct(this,e.call(t.u,t.e({key:n,style:this.serialize(),value:i,styleSpec:t.v},r)))}_remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ae().off(re,this._rtlPluginLoaded);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=!1,a=!1;const l={};for(const o of this._order){const t=this._layers[o];if("symbol"!==t.type)continue;if(!l[t.source]){const e=this.sourceCaches[t.source];l[t.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(t,l[t.source],e.center.lng);s=s||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.now(),e.zoom))&&(this.pauseablePlacement=new it(e,this.map.terrain,this._order,r,t,n,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.now()),a=!0),s&&this.pauseablePlacement.placement.setStale()),a||s)for(const o of this._order){const e=this._layers[o];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,n){return t._(this,void 0,void 0,(function*(){const e=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();const t=this.sourceCaches[n.source];return t&&t.setDependencies(n.tileID.key,n.type,n.icons),e}))}getGlyphs(e,n){return t._(this,void 0,void 0,(function*(){const e=yield this.glyphManager.getGlyphs(n.stacks),t=this.sourceCaches[n.source];return t&&t.setDependencies(n.tileID.key,n.type,[""]),e}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded(),e&&this._validate(t.u.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const o=[{id:e,url:n}],s=[...v(this.stylesheet.sprite),...o];this._validate(t.u.sprite,"sprite",s,null,i)||(this.stylesheet.sprite=s,this._loadSprite(o,!0,r))}removeSprite(e){this._checkLoaded();const n=v(this.stylesheet.sprite);if(n.find((t=>t.id===e))){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;n.splice(n.findIndex((t=>t.id===e)),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}else this.fire(new t.j(new Error('Sprite "'.concat(e,"\" doesn't exists on this map."))))}getSprite(){return v(this.stylesheet.sprite)}setSprite(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),e&&this._validate(t.u.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,i):(this._unloadSprite(),i&&i(null)))}}var dt=t.Y([{name:"a_pos",type:"Int16",components:2}]);const pt={prelude:ft("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:ft("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ft("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ft("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:ft("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ft("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:ft("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ft("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ft("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ft("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ft("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:ft("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:ft("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:ft("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:ft("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:ft("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:ft("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ft("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ft("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:ft("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:ft("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:ft("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:ft("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ft("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:ft("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:ft("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:ft("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ft("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ft("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:ft("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ft(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute ([\w]+) ([\w]+)/g),r=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=o?o.concat(r):r,a={};return{fragmentSource:e=e.replace(n,((e,t,n,i,r)=>(a[r]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nvarying ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n")))),vertexSource:t=t.replace(n,((e,t,n,i,r)=>{const o="float"===i?"vec2":"vec4",s=r.match(/color/)?"color":o;return a[r]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(r,";\nvarying ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = unpack_mix_").concat(s,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = unpack_mix_").concat(s,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n")})),staticAttributes:i,staticUniforms:s}}class mt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,i,r,o,s,a,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==i.length;for(let u=0;!c&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(c=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||c||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==s||this.boundDynamicVertexBuffer2!==a||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,n,i,r,o,s,a,l):(e.bindVertexArray.set(this.vao),s&&s.bind(),r&&r.dynamicDraw&&r.bind(),a&&a.bind(),l&&l.bind())}freshBind(e,t,n,i,r,o,s,a){const l=e.numAttributes,c=this.context,u=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=s,this.boundDynamicVertexBuffer3=a,t.enableAttributes(u,e);for(const h of n)h.enableAttributes(u,e);o&&o.enableAttributes(u,e),s&&s.enableAttributes(u,e),a&&a.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,r);for(const h of n)h.bind(),h.setVertexAttribPointers(u,e,r);o&&(o.bind(),o.setVertexAttribPointers(u,e,r)),i&&i.bind(),s&&(s.bind(),s.setVertexAttribPointers(u,e,r)),a&&(a.bind(),a.setVertexAttribPointers(u,e,r)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const gt=(e,n,i,r,o)=>({u_matrix:e,u_texture:0,u_ele_delta:n,u_fog_matrix:i,u_fog_color:r?r.properties.get("fog-color"):t.aM.white,u_fog_ground_blend:r?r.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:r?r.calculateFogBlendOpacity(o):0,u_horizon_color:r?r.properties.get("horizon-color"):t.aM.white,u_horizon_fog_blend:r?r.properties.get("horizon-fog-blend"):1});function yt(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const i=e[n].split(" ");t.push(i.pop())}return t}class _t{constructor(e,n,i,r,o,s){const a=e.gl;this.program=a.createProgram();const l=yt(n.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c),h=pt.prelude.staticUniforms?yt(pt.prelude.staticUniforms):[],d=n.staticUniforms?yt(n.staticUniforms):[],p=i?i.getBinderUniforms():[],f=h.concat(d).concat(p),m=[];for(const t of f)m.indexOf(t)<0&&m.push(t);const g=i?i.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;"),s&&g.push("#define TERRAIN3D;");const y=g.concat(pt.prelude.fragmentSource,n.fragmentSource).join("\n"),_=g.concat(pt.prelude.vertexSource,n.vertexSource).join("\n"),v=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);if(a.shaderSource(v,y),a.compileShader(v),!a.getShaderParameter(v,a.COMPILE_STATUS))throw new Error("Could not compile fragment shader: ".concat(a.getShaderInfoLog(v)));a.attachShader(this.program,v);const b=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);if(a.shaderSource(b,_),a.compileShader(b),!a.getShaderParameter(b,a.COMPILE_STATUS))throw new Error("Could not compile vertex shader: ".concat(a.getShaderInfoLog(b)));a.attachShader(this.program,b),this.attributes={};const x={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(a.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);if(a.linkProgram(this.program),!a.getProgramParameter(this.program,a.LINK_STATUS))throw new Error("Program failed to link: ".concat(a.getProgramInfoLog(this.program)));a.deleteShader(b),a.deleteShader(v);for(let t=0;t<m.length;t++){const e=m[t];if(e&&!x[e]){const t=a.getUniformLocation(this.program,e);t&&(x[e]=t)}}this.fixedUniforms=r(e,x),this.terrainUniforms=((e,n)=>({u_depth:new t.aH(e,n.u_depth),u_terrain:new t.aH(e,n.u_terrain),u_terrain_dim:new t.aI(e,n.u_terrain_dim),u_terrain_matrix:new t.aJ(e,n.u_terrain_matrix),u_terrain_unpack:new t.aK(e,n.u_terrain_unpack),u_terrain_exaggeration:new t.aI(e,n.u_terrain_exaggeration)}))(e,x),this.binderUniforms=i?i.getUniforms(e,x):[]}draw(e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,y){const _=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(r),e.setCullFace(o),a){e.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,a.depthTexture),e.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,a.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(a[e])}for(const b in this.fixedUniforms)this.fixedUniforms[b].set(s[b]);f&&f.setUniforms(e,this.binderUniforms,d,{zoom:p});let v=0;switch(t){case _.LINES:v=2;break;case _.TRIANGLES:v=3;break;case _.LINE_STRIP:v=1}for(const b of h.get()){const n=b.vaos||(b.vaos={});(n[l]||(n[l]=new mt)).bind(e,this,c,f?f.getPaintVertexBuffers():[],u,b.vertexOffset,m,g,y),_.drawElements(t,b.primitiveLength*v,_.UNSIGNED_SHORT,b.primitiveOffset*v*2)}}}function vt(e,t,n){const i=1/De(n,1,t.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/r,s=o*(n.tileID.canonical.x+n.tileID.wrap*r),a=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,a>>16],u_pixel_coord_lower:[65535&s,65535&a]}}const bt=(e,n,i,r)=>{const o=n.style.light,s=o.properties.get("position"),a=[s.x,s.y,s.z],l=function(){var e=new t.A(9);return t.A!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===o.properties.get("anchor")&&function(e,t){var n=Math.sin(t),i=Math.cos(t);e[0]=i,e[1]=n,e[2]=0,e[3]=-n,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(l,-n.transform.angle),function(e,t,n){var i=t[0],r=t[1],o=t[2];e[0]=i*n[0]+r*n[3]+o*n[6],e[1]=i*n[1]+r*n[4]+o*n[7],e[2]=i*n[2]+r*n[5]+o*n[8]}(a,a,l);const c=o.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+i,u_opacity:r}},xt=(e,n,i,r,o,s,a)=>t.e(bt(e,n,i,r),vt(s,n,a),{u_height_factor:-Math.pow(2,o.overscaledZ)/a.tileSize/8}),wt=e=>({u_matrix:e}),St=(e,n,i,r)=>t.e(wt(e),vt(i,n,r)),kt=(e,t)=>({u_matrix:e,u_world:t}),Ct=(e,n,i,r,o)=>t.e(St(e,n,i,r),{u_world:o}),Et=(e,t,n,i)=>{const r=e.transform;let o,s;if("map"===i.paint.get("circle-pitch-alignment")){const e=De(n,1,r.zoom);o=!0,s=[e,e]}else o=!1,s=r.pixelsToGLUnits;return{u_camera_to_center_distance:r.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,n,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:s}},Tt=(e,t,n)=>({u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}),Pt=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},It=e=>({u_matrix:e}),Mt=(e,t,n,i)=>({u_matrix:e,u_extrude_scale:De(t,1,n),u_intensity:i});function At(e,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.Z(0,r/i).toLngLat().lat,new t.Z(0,(r+1)/i).toLngLat().lat]}const Rt=(e,t,n,i)=>{const r=e.transform;return{u_matrix:Ft(e,t,n,i),u_ratio:1/De(t,1,r.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},zt=(e,n,i,r,o)=>t.e(Rt(e,n,i,o),{u_image:0,u_image_height:r}),Lt=(e,t,n,i,r)=>{const o=e.transform,s=Dt(t,o);return{u_matrix:Ft(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_ratio:1/De(t,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[s,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Ot=(e,n,i,r,o,s)=>{const a=e.lineAtlas,l=Dt(n,e.transform),c="round"===i.layout.get("line-cap"),u=a.getDash(r.from,c),h=a.getDash(r.to,c),d=u.width*o.fromScale,p=h.width*o.toScale;return t.e(Rt(e,n,i,s),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/p,-h.height/2],u_sdfgamma:a.width/(256*Math.min(d,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:o.t})};function Dt(e,t){return 1/De(e,1,t.tileZoom)}function Ft(e,t,n,i){return e.translatePosMatrix(i?i.posMatrix:t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Nt=(e,t,n,i,r)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(s=r.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Bt(r.paint.get("raster-hue-rotate"))};var o,s};function Bt(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const jt=(e,t,n,i,r,o,s,a,l,c,u,h,d,p)=>{const f=s.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:f.width/f.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:l,u_coord_matrix:c,u_is_text:+h,u_pitch_with_map:+i,u_is_along_line:r,u_is_variable_anchor:o,u_texsize:d,u_texture:0,u_translation:u,u_pitched_scale:p}},Vt=(e,n,i,r,o,s,a,l,c,u,h,d,p,f,m)=>{const g=a.transform;return t.e(jt(e,n,i,r,o,s,a,l,c,u,h,d,p,m),{u_gamma_scale:r?Math.cos(g._pitch)*g.cameraToCenterDistance:1,u_device_pixel_ratio:a.pixelRatio,u_is_halo:+f})},Ut=(e,n,i,r,o,s,a,l,c,u,h,d,p,f)=>t.e(Vt(e,n,i,r,o,s,a,l,c,u,h,!0,d,!0,f),{u_texsize_icon:p,u_texture_icon:1}),qt=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),Gt=(e,n,i,r,o,s)=>t.e(function(e,t,n,i){const r=n.imageManager.getPattern(e.from.toString()),o=n.imageManager.getPattern(e.to.toString()),{width:s,height:a}=n.imageManager.getPixelSize(),l=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(i.tileID.canonical.x+i.tileID.wrap*l),h=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,a],u_mix:t.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/De(i,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(r,s,i,o),{u_matrix:e,u_opacity:n}),Zt={fillExtrusion:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_lightpos:new t.aN(e,n.u_lightpos),u_lightintensity:new t.aI(e,n.u_lightintensity),u_lightcolor:new t.aN(e,n.u_lightcolor),u_vertical_gradient:new t.aI(e,n.u_vertical_gradient),u_opacity:new t.aI(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_lightpos:new t.aN(e,n.u_lightpos),u_lightintensity:new t.aI(e,n.u_lightintensity),u_lightcolor:new t.aN(e,n.u_lightcolor),u_vertical_gradient:new t.aI(e,n.u_vertical_gradient),u_height_factor:new t.aI(e,n.u_height_factor),u_image:new t.aH(e,n.u_image),u_texsize:new t.aO(e,n.u_texsize),u_pixel_coord_upper:new t.aO(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,n.u_pixel_coord_lower),u_scale:new t.aN(e,n.u_scale),u_fade:new t.aI(e,n.u_fade),u_opacity:new t.aI(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_image:new t.aH(e,n.u_image),u_texsize:new t.aO(e,n.u_texsize),u_pixel_coord_upper:new t.aO(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,n.u_pixel_coord_lower),u_scale:new t.aN(e,n.u_scale),u_fade:new t.aI(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_world:new t.aO(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_world:new t.aO(e,n.u_world),u_image:new t.aH(e,n.u_image),u_texsize:new t.aO(e,n.u_texsize),u_pixel_coord_upper:new t.aO(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,n.u_pixel_coord_lower),u_scale:new t.aN(e,n.u_scale),u_fade:new t.aI(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_scale_with_map:new t.aH(e,n.u_scale_with_map),u_pitch_with_map:new t.aH(e,n.u_pitch_with_map),u_extrude_scale:new t.aO(e,n.u_extrude_scale),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_matrix:new t.aJ(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_pixel_extrude_scale:new t.aO(e,n.u_pixel_extrude_scale)}),collisionCircle:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_inv_matrix:new t.aJ(e,n.u_inv_matrix),u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_viewport_size:new t.aO(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.aL(e,n.u_color),u_matrix:new t.aJ(e,n.u_matrix),u_overlay:new t.aH(e,n.u_overlay),u_overlay_scale:new t.aI(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.aI(e,n.u_extrude_scale),u_intensity:new t.aI(e,n.u_intensity),u_matrix:new t.aJ(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_world:new t.aO(e,n.u_world),u_image:new t.aH(e,n.u_image),u_color_ramp:new t.aH(e,n.u_color_ramp),u_opacity:new t.aI(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_image:new t.aH(e,n.u_image),u_latrange:new t.aO(e,n.u_latrange),u_light:new t.aO(e,n.u_light),u_shadow:new t.aL(e,n.u_shadow),u_highlight:new t.aL(e,n.u_highlight),u_accent:new t.aL(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_image:new t.aH(e,n.u_image),u_dimension:new t.aO(e,n.u_dimension),u_zoom:new t.aI(e,n.u_zoom),u_unpack:new t.aK(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_ratio:new t.aI(e,n.u_ratio),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_ratio:new t.aI(e,n.u_ratio),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,n.u_units_to_pixels),u_image:new t.aH(e,n.u_image),u_image_height:new t.aI(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_texsize:new t.aO(e,n.u_texsize),u_ratio:new t.aI(e,n.u_ratio),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_image:new t.aH(e,n.u_image),u_units_to_pixels:new t.aO(e,n.u_units_to_pixels),u_scale:new t.aN(e,n.u_scale),u_fade:new t.aI(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_ratio:new t.aI(e,n.u_ratio),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,n.u_units_to_pixels),u_patternscale_a:new t.aO(e,n.u_patternscale_a),u_patternscale_b:new t.aO(e,n.u_patternscale_b),u_sdfgamma:new t.aI(e,n.u_sdfgamma),u_image:new t.aH(e,n.u_image),u_tex_y_a:new t.aI(e,n.u_tex_y_a),u_tex_y_b:new t.aI(e,n.u_tex_y_b),u_mix:new t.aI(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_tl_parent:new t.aO(e,n.u_tl_parent),u_scale_parent:new t.aI(e,n.u_scale_parent),u_buffer_scale:new t.aI(e,n.u_buffer_scale),u_fade_t:new t.aI(e,n.u_fade_t),u_opacity:new t.aI(e,n.u_opacity),u_image0:new t.aH(e,n.u_image0),u_image1:new t.aH(e,n.u_image1),u_brightness_low:new t.aI(e,n.u_brightness_low),u_brightness_high:new t.aI(e,n.u_brightness_high),u_saturation_factor:new t.aI(e,n.u_saturation_factor),u_contrast_factor:new t.aI(e,n.u_contrast_factor),u_spin_weights:new t.aN(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.aH(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,n.u_is_size_feature_constant),u_size_t:new t.aI(e,n.u_size_t),u_size:new t.aI(e,n.u_size),u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_pitch:new t.aI(e,n.u_pitch),u_rotate_symbol:new t.aH(e,n.u_rotate_symbol),u_aspect_ratio:new t.aI(e,n.u_aspect_ratio),u_fade_change:new t.aI(e,n.u_fade_change),u_matrix:new t.aJ(e,n.u_matrix),u_label_plane_matrix:new t.aJ(e,n.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,n.u_coord_matrix),u_is_text:new t.aH(e,n.u_is_text),u_pitch_with_map:new t.aH(e,n.u_pitch_with_map),u_is_along_line:new t.aH(e,n.u_is_along_line),u_is_variable_anchor:new t.aH(e,n.u_is_variable_anchor),u_texsize:new t.aO(e,n.u_texsize),u_texture:new t.aH(e,n.u_texture),u_translation:new t.aO(e,n.u_translation),u_pitched_scale:new t.aI(e,n.u_pitched_scale)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.aH(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,n.u_is_size_feature_constant),u_size_t:new t.aI(e,n.u_size_t),u_size:new t.aI(e,n.u_size),u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_pitch:new t.aI(e,n.u_pitch),u_rotate_symbol:new t.aH(e,n.u_rotate_symbol),u_aspect_ratio:new t.aI(e,n.u_aspect_ratio),u_fade_change:new t.aI(e,n.u_fade_change),u_matrix:new t.aJ(e,n.u_matrix),u_label_plane_matrix:new t.aJ(e,n.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,n.u_coord_matrix),u_is_text:new t.aH(e,n.u_is_text),u_pitch_with_map:new t.aH(e,n.u_pitch_with_map),u_is_along_line:new t.aH(e,n.u_is_along_line),u_is_variable_anchor:new t.aH(e,n.u_is_variable_anchor),u_texsize:new t.aO(e,n.u_texsize),u_texture:new t.aH(e,n.u_texture),u_gamma_scale:new t.aI(e,n.u_gamma_scale),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_is_halo:new t.aH(e,n.u_is_halo),u_translation:new t.aO(e,n.u_translation),u_pitched_scale:new t.aI(e,n.u_pitched_scale)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.aH(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,n.u_is_size_feature_constant),u_size_t:new t.aI(e,n.u_size_t),u_size:new t.aI(e,n.u_size),u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_pitch:new t.aI(e,n.u_pitch),u_rotate_symbol:new t.aH(e,n.u_rotate_symbol),u_aspect_ratio:new t.aI(e,n.u_aspect_ratio),u_fade_change:new t.aI(e,n.u_fade_change),u_matrix:new t.aJ(e,n.u_matrix),u_label_plane_matrix:new t.aJ(e,n.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,n.u_coord_matrix),u_is_text:new t.aH(e,n.u_is_text),u_pitch_with_map:new t.aH(e,n.u_pitch_with_map),u_is_along_line:new t.aH(e,n.u_is_along_line),u_is_variable_anchor:new t.aH(e,n.u_is_variable_anchor),u_texsize:new t.aO(e,n.u_texsize),u_texsize_icon:new t.aO(e,n.u_texsize_icon),u_texture:new t.aH(e,n.u_texture),u_texture_icon:new t.aH(e,n.u_texture_icon),u_gamma_scale:new t.aI(e,n.u_gamma_scale),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_is_halo:new t.aH(e,n.u_is_halo),u_translation:new t.aO(e,n.u_translation),u_pitched_scale:new t.aI(e,n.u_pitched_scale)}),background:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_opacity:new t.aI(e,n.u_opacity),u_color:new t.aL(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_opacity:new t.aI(e,n.u_opacity),u_image:new t.aH(e,n.u_image),u_pattern_tl_a:new t.aO(e,n.u_pattern_tl_a),u_pattern_br_a:new t.aO(e,n.u_pattern_br_a),u_pattern_tl_b:new t.aO(e,n.u_pattern_tl_b),u_pattern_br_b:new t.aO(e,n.u_pattern_br_b),u_texsize:new t.aO(e,n.u_texsize),u_mix:new t.aI(e,n.u_mix),u_pattern_size_a:new t.aO(e,n.u_pattern_size_a),u_pattern_size_b:new t.aO(e,n.u_pattern_size_b),u_scale_a:new t.aI(e,n.u_scale_a),u_scale_b:new t.aI(e,n.u_scale_b),u_pixel_coord_upper:new t.aO(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.aI(e,n.u_tile_units_to_pixels)}),terrain:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_texture:new t.aH(e,n.u_texture),u_ele_delta:new t.aI(e,n.u_ele_delta),u_fog_matrix:new t.aJ(e,n.u_fog_matrix),u_fog_color:new t.aL(e,n.u_fog_color),u_fog_ground_blend:new t.aI(e,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new t.aI(e,n.u_fog_ground_blend_opacity),u_horizon_color:new t.aL(e,n.u_horizon_color),u_horizon_fog_blend:new t.aI(e,n.u_horizon_fog_blend)}),terrainDepth:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_ele_delta:new t.aI(e,n.u_ele_delta)}),terrainCoords:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_texture:new t.aH(e,n.u_texture),u_terrain_coords_id:new t.aI(e,n.u_terrain_coords_id),u_ele_delta:new t.aI(e,n.u_ele_delta)}),sky:(e,n)=>({u_sky_color:new t.aL(e,n.u_sky_color),u_horizon_color:new t.aL(e,n.u_horizon_color),u_horizon:new t.aI(e,n.u_horizon),u_sky_horizon_blend:new t.aI(e,n.u_sky_horizon_blend)})};class Ht{constructor(e,t,n){this.context=e;const i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Kt{constructor(e,t,n,i){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=i,this.context=e;const r=e.gl;this.buffer=r.createBuffer(),e.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error("Length of new data is ".concat(e.length,", which doesn't match current length of ").concat(this.length));const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const i=t.attributes[this.attributes[n].name];void 0!==i&&e.enableVertexAttribArray(i)}}setVertexAttribPointers(e,t,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],o=t.attributes[r.name];void 0!==o&&e.vertexAttribPointer(o,r.components,e[Wt[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xt=new WeakMap;function Yt(e){var t;if(Xt.has(e))return Xt.get(e);{const n=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return Xt.set(e,n),n}}class $t{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jt extends $t{getDefault(){return t.aM.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Qt extends $t{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class en extends $t{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class tn extends $t{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class nn extends $t{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class rn extends $t{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class on extends $t{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class sn extends $t{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class an extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class ln extends $t{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class cn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class un extends $t{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class hn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class dn extends $t{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class pn extends $t{getDefault(){return t.aM.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class fn extends $t{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class mn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class gn extends $t{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class yn extends $t{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class _n extends $t{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class vn extends $t{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class bn extends $t{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class xn extends $t{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class wn extends $t{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Sn extends $t{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class kn extends $t{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Cn extends $t{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class En extends $t{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const n=this.gl;Yt(n)?n.bindVertexArray(e):null===(t=n.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Tn extends $t{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Pn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class In extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Mn extends $t{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class An extends Mn{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Rn extends Mn{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class zn extends Mn{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ln{constructor(e,t,n,i,r){this.context=e,this.width=t,this.height=n;const o=e.gl,s=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new An(e,s),i)this.depthAttachment=r?new zn(e,s):new Rn(e,s);else if(r)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class On{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}On.Replace=[1,0],On.disabled=new On(On.Replace,t.aM.transparent,[!1,!1,!1,!1]),On.unblended=new On(On.Replace,t.aM.transparent,[!0,!0,!0,!0]),On.alphaBlended=new On([1,771],t.aM.transparent,[!0,!0,!0,!0]);class Dn{constructor(e){var t,n;if(this.gl=e,this.clearColor=new Jt(this),this.clearDepth=new Qt(this),this.clearStencil=new en(this),this.colorMask=new tn(this),this.depthMask=new nn(this),this.stencilMask=new rn(this),this.stencilFunc=new on(this),this.stencilOp=new sn(this),this.stencilTest=new an(this),this.depthRange=new ln(this),this.depthTest=new cn(this),this.depthFunc=new un(this),this.blend=new hn(this),this.blendFunc=new dn(this),this.blendColor=new pn(this),this.blendEquation=new fn(this),this.cullFace=new mn(this),this.cullFaceSide=new gn(this),this.frontFace=new yn(this),this.program=new _n(this),this.activeTexture=new vn(this),this.viewport=new bn(this),this.bindFramebuffer=new xn(this),this.bindRenderbuffer=new wn(this),this.bindTexture=new Sn(this),this.bindVertexBuffer=new kn(this),this.bindElementBuffer=new Cn(this),this.bindVertexArray=new En(this),this.pixelStoreUnpack=new Tn(this),this.pixelStoreUnpackPremultiplyAlpha=new Pn(this),this.pixelStoreUnpackFlipY=new In(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Yt(e)){this.HALF_FLOAT=e.HALF_FLOAT;const i=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==i?void 0:i.RGBA16F_EXT,this.RGB16F=null!==(n=e.RGB16F)&&void 0!==n?n:null==i?void 0:i.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Ht(this,e,t)}createVertexBuffer(e,t,n){return new Kt(this,e,t,n)}createRenderbuffer(e,t,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),r}createFramebuffer(e,t,n,i){return new Ln(this,e,t,n,i)}clear(e){let{color:t,depth:n,stencil:i}=e;const r=this.gl;let o=0;t&&(o|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==i&&(o|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(o)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){t.aE(e.blendFunction,On.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Yt(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return Yt(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Fn{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}Fn.ReadOnly=!1,Fn.ReadWrite=!0,Fn.disabled=new Fn(519,Fn.ReadOnly,[0,1]);const Nn=7680;class Bn{constructor(e,t,n,i,r,o){this.test=e,this.ref=t,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o}}Bn.disabled=new Bn({func:519,mask:0},0,0,Nn,Nn,Nn);class jn{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}let Vn;function Un(e,n,i,r,o){const s=e.context,a=s.gl,l=e.useProgram("collisionBox"),c=[];let u=0,h=0;for(let _=0;_<r.length;_++){const p=r[_],f=n.getTile(p).getBucket(i);if(!f)continue;const m=o?f.textCollisionBox:f.iconCollisionBox,g=f.collisionCircleArray;if(g.length>0){const n=t.H();t.aQ(n,f.placementInvProjMatrix,e.transform.glCoordMatrix),t.aQ(n,n,f.placementViewportMatrix),c.push({circleArray:g,circleOffset:h,transform:p.posMatrix,invTransform:n,coord:p}),u+=g.length/4,h=u}m&&l.draw(s,a.LINES,Fn.disabled,Bn.disabled,e.colorModeForRenderPass(),jn.disabled,{u_matrix:p.posMatrix,u_pixel_extrude_scale:[1/(d=e.transform).width,1/d.height]},e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,e.transform.zoom,null,null,m.collisionVertexBuffer)}var d;if(!o||!c.length)return;const p=e.useProgram("collisionCircle"),f=new t.aR;f.resize(4*u),f._trim();let m=0;for(const t of c)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],o=t.circleArray[n+2],s=t.circleArray[n+3];f.emplace(m++,i,r,o,s,0),f.emplace(m++,i,r,o,s,1),f.emplace(m++,i,r,o,s,2),f.emplace(m++,i,r,o,s,3)}(!Vn||Vn.length<2*u)&&(Vn=function(e){const n=2*e,i=new t.aT;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(u));const g=s.createIndexBuffer(Vn,!0),y=s.createVertexBuffer(f,t.aS.members,!0);for(const _ of c){const n=Tt(_.transform,_.invTransform,e.transform);p.draw(s,a.TRIANGLES,Fn.disabled,Bn.disabled,e.colorModeForRenderPass(),jn.disabled,n,e.style.map.terrain&&e.style.map.terrain.getTerrainData(_.coord),i.id,y,g,t.a0.simpleSegment(0,2*_.circleOffset,_.circleArray.length,_.circleArray.length/2),null,e.transform.zoom,null,null,null)}y.destroy(),g.destroy()}jn.disabled=new jn(!1,1029,2305),jn.backCCW=new jn(!0,1029,2305);const qn=t.an(new Float32Array(16));function Gn(e,n,i,r,o,s){const{horizontalAlign:a,verticalAlign:l}=t.au(e);return new t.P((-(a-.5)*n/o+r[0])*s,(-(l-.5)*i/o+r[1])*s)}function Zn(e,n,i,r,o,s){const a=n.tileAnchorPoint.add(new t.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let e=r.mult(s);return i||(e=e.rotate(-o)),ve(a.add(e),n.labelPlaneMatrix,n.getElevation).point}if(i){const t=Pe(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(e),i=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0);return e.add(r.rotate(i))}return e.add(r)}function Hn(e,n,i,r,o,s,a,l,c,u,h,d,p,f){const m=e.text.placedSymbolArray,g=e.text.dynamicLayoutVertexArray,y=e.icon.dynamicLayoutVertexArray,_={};g.clear();for(let v=0;v<m.length;v++){const y=m.get(v),b=y.hidden||!y.crossTileID||e.allowVerticalPlacement&&!y.placedOrientation?null:r[y.crossTileID];if(b){const r=new t.P(y.anchorX,y.anchorY),m={getElevation:f,width:o.width,height:o.height,labelPlaneMatrix:s,lineVertexArray:null,pitchWithMap:i,projection:h,projectionCache:null,tileAnchorPoint:r,translation:d,unwrappedTileID:p},v=i?ve(r,a,f):Pe(r.x,r.y,m),x=be(o.cameraToCenterDistance,v.signedDistanceFromCamera);let w=t.ai(e.textSizeData,c,y)*x/t.ap;i&&(w*=e.tilePixelRatio/l);const{width:S,height:k,anchor:C,textOffset:E,textBoxScale:T}=b,P=Gn(C,S,k,E,T,w),I=h.getPitchedTextCorrection(o,r.add(new t.P(d[0],d[1])),p),M=Zn(v.point,m,n,P,o.angle,I),A=e.allowVerticalPlacement&&y.placedOrientation===t.ah.vertical?Math.PI/2:0;for(let e=0;e<y.numGlyphs;e++)t.aj(g,M,A);u&&y.associatedIconIndex>=0&&(_[y.associatedIconIndex]={shiftedAnchor:M,angle:A})}else ze(y.numGlyphs,g)}if(u){y.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const i=n.get(e);if(i.hidden)ze(i.numGlyphs,y);else{const n=_[e];if(n)for(let e=0;e<i.numGlyphs;e++)t.aj(y,n.shiftedAnchor,n.angle);else ze(i.numGlyphs,y)}}e.icon.dynamicLayoutVertexBuffer.updateData(y)}e.text.dynamicLayoutVertexBuffer.updateData(g)}function Wn(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Kn(e,n,i,r,o,s,a,l,c,u,h,d){const p=e.context,f=p.gl,m=e.transform,g=tt(),y="map"===l,_="map"===c,v="viewport"!==l&&"point"!==i.layout.get("symbol-placement"),b=y&&!_&&!v,x=!_&&v,w=!i.layout.get("symbol-sort-key").isConstant();let S=!1;const k=e.depthModeForSublayer(0,Fn.ReadOnly),C=i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"),E=[],T=g.getCircleRadiusCorrection(m);for(const P of r){const r=n.getTile(P),l=r.getBucket(i);if(!l)continue;const c=o?l.text:l.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;const h=c.programConfigurations.get(i.id),d=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,k=_||0!==m.pitch,I=e.useProgram(Wn(d,o,l),h),M=t.ag(p,m.zoom),A=e.style.map.terrain&&e.style.map.terrain.getTerrainData(P);let R,z,L,O,D=[0,0],F=null;if(o)z=r.glyphAtlasTexture,L=f.LINEAR,R=r.glyphAtlasTexture.size,l.iconsInText&&(D=r.imageAtlasTexture.size,F=r.imageAtlasTexture,O=k||e.options.rotating||e.options.zooming||"composite"===p.kind||"camera"===p.kind?f.LINEAR:f.NEAREST);else{const t=1!==i.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;z=r.imageAtlasTexture,L=d||e.options.rotating||e.options.zooming||t||k?f.LINEAR:f.NEAREST,R=r.imageAtlasTexture.size}const N=De(r,1,e.transform.zoom),B=x?P.posMatrix:qn,j=ye(B,_,y,e.transform,N),V=_e(B,_,y,e.transform,N),U=_e(P.posMatrix,_,y,e.transform,N),q=g.translatePosition(e.transform,r,s,a),G=C&&l.hasTextData(),Z="none"!==i.layout.get("icon-text-fit")&&G&&l.hasIconData();if(v){const t=e.style.map.terrain?(t,n)=>e.style.map.terrain.getElevation(P,t,n):null,n="map"===i.layout.get("text-rotation-alignment");we(l,P.posMatrix,e,o,j,U,_,u,n,g,P.toUnwrapped(),m.width,m.height,q,t)}const H=P.posMatrix,W=o&&C||Z,K=v||W?qn:j,X=V,Y=d&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let $;$=d?l.iconsInText?Ut(p.kind,M,b,_,v,W,e,H,K,X,q,R,D,T):Vt(p.kind,M,b,_,v,W,e,H,K,X,q,o,R,!0,T):jt(p.kind,M,b,_,v,W,e,H,K,X,q,o,R,T);const J={program:I,buffers:c,uniformValues:$,atlasTexture:z,atlasTextureIcon:F,atlasInterpolation:L,atlasInterpolationIcon:O,isSDF:d,hasHalo:Y};if(w&&l.canOverlap){S=!0;const e=c.segments.get();for(const n of e)E.push({segments:new t.a0([n]),sortKey:n.sortKey,state:J,terrainData:A})}else E.push({segments:c.segments,sortKey:0,state:J,terrainData:A})}S&&E.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of E){const n=t.state;if(p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,Xn(n.buffers,t.segments,i,e,n.program,k,h,d,r,t.terrainData)),r.u_is_halo=0}Xn(n.buffers,t.segments,i,e,n.program,k,h,d,n.uniformValues,t.terrainData)}}function Xn(e,t,n,i,r,o,s,a,l,c){const u=i.context;r.draw(u,u.gl.TRIANGLES,o,s,a,jn.disabled,l,c,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,i.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Yn(e,t,n,i,r){if(!n||!i||!i.imageAtlas)return;const o=i.imageAtlas.patternPositions;let s=o[n.to.toString()],a=o[n.from.toString()];if(!s&&a&&(s=a),!a&&s&&(a=s),!s||!a){const e=r.getPaintProperty(t);s=o[e],a=o[e]}s&&a&&e.setConstantPatternPositions(s,a)}function $n(e,t,n,i,r,o,s){const a=e.context.gl,l="fill-pattern",c=n.paint.get(l),u=c&&c.constantOr(1),h=n.getCrossfadeParameters();let d,p,f,m,g;s?(p=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=a.LINES):(p=u?"fillPattern":"fill",d=a.TRIANGLES);const y=c.constantOr(null);for(const _ of i){const i=t.getTile(_);if(u&&!i.patternsLoaded())continue;const c=i.getBucket(n);if(!c)continue;const v=c.programConfigurations.get(n.id),b=e.useProgram(p,v),x=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_);u&&(e.context.activeTexture.set(a.TEXTURE0),i.imageAtlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),v.updatePaintBuffers(h)),Yn(v,l,y,i,n);const w=x?_:null,S=e.translatePosMatrix(w?w.posMatrix:_.posMatrix,i,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){m=c.indexBuffer2,g=c.segments2;const t=[a.drawingBufferWidth,a.drawingBufferHeight];f="fillOutlinePattern"===p&&u?Ct(S,e,h,i,t):kt(S,t)}else m=c.indexBuffer,g=c.segments,f=u?St(S,e,h,i):wt(S);b.draw(e.context,d,r,e.stencilModeForClipping(_),o,jn.disabled,f,x,n.id,c.layoutVertexBuffer,m,g,n.paint,e.transform.zoom,v)}}function Jn(e,t,n,i,r,o,s){const a=e.context,l=a.gl,c="fill-extrusion-pattern",u=n.paint.get(c),h=u.constantOr(1),d=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),f=u.constantOr(null);for(const m of i){const i=t.getTile(m),u=i.getBucket(n);if(!u)continue;const g=e.style.map.terrain&&e.style.map.terrain.getTerrainData(m),y=u.programConfigurations.get(n.id),_=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",y);h&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(d)),Yn(y,c,f,i,n);const v=e.translatePosMatrix(m.posMatrix,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),b=n.paint.get("fill-extrusion-vertical-gradient"),x=h?xt(v,e,b,p,m,d,i):bt(v,e,b,p);_.draw(a,a.gl.TRIANGLES,r,o,s,jn.backCCW,x,g,n.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,n.paint,e.transform.zoom,y,e.style.map.terrain&&u.centroidVertexBuffer)}}function Qn(e,t,n,i,r,o,s){const a=e.context,l=a.gl,c=n.fbo;if(!c)return;const u=e.useProgram("hillshade"),h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t);a.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(a,l.TRIANGLES,r,o,s,jn.disabled,((e,t,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),s=n.paint.get("hillshade-accent-color");let a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=e.transform.angle);const l=!e.options.moving;return{u_matrix:i?i.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:At(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:o,u_accent:s}})(e,n,i,h?t:null),h,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function ei(e,n,i,r,o,s){const a=e.context,l=a.gl,c=n.dem;if(c&&c.data){const u=c.dim,h=c.stride,d=c.getPixels();if(a.activeTexture.set(l.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){const e=n.demTexture;e.update(d,{premultiply:!1}),e.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new x(a,d,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);a.activeTexture.set(l.TEXTURE0);let p=n.fbo;if(!p){const e=new x(a,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),p=n.fbo=a.createFramebuffer(u,u,!0,!1),p.colorAttachment.set(e.texture)}a.bindFramebuffer.set(p.framebuffer),a.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,r,o,s,jn.disabled,((e,n)=>{const i=n.stride,r=t.H();return t.aP(r,0,t.X,-t.X,0,0,1),t.J(r,r,[0,-t.X,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}})(n.tileID,c),null,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ti(e,n,i,r,s,a){const l=r.paint.get("raster-fade-duration");if(!a&&l>0){const r=o.now(),a=(r-e.timeAdded)/l,c=n?(r-n.timeAdded)/l:-1,u=i.getSource(),h=s.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),p=d&&e.refreshedUponExpiration?1:t.ac(d?a:1-c,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const ni=new t.aM(1,0,0,1),ii=new t.aM(0,1,0,1),ri=new t.aM(0,0,1,1),oi=new t.aM(1,0,1,1),si=new t.aM(0,1,1,1);function ai(e,t,n,i){ci(e,0,t+n/2,e.transform.width,n,i)}function li(e,t,n,i){ci(e,t-n/2,0,n,e.transform.height,i)}function ci(e,t,n,i,r,o){const s=e.context,a=s.gl;a.enable(a.SCISSOR_TEST),a.scissor(t*e.pixelRatio,n*e.pixelRatio,i*e.pixelRatio,r*e.pixelRatio),s.clear({color:o}),a.disable(a.SCISSOR_TEST)}function ui(e,n,i){const r=e.context,o=r.gl,s=i.posMatrix,a=e.useProgram("debug"),l=Fn.disabled,c=Bn.disabled,u=e.colorModeForRenderPass(),h="$debug",d=e.style.map.terrain&&e.style.map.terrain.getTerrainData(i);r.activeTexture.set(o.TEXTURE0);const p=n.getTileByID(i.key).latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=n.getTile(i).tileSize,g=512/Math.min(m,512)*(i.overscaledZ/e.transform.zoom)*.5;let y=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(y+=" => ".concat(i.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,i=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,"".concat(y," ").concat(f,"kB")),a.draw(r,o.TRIANGLES,l,c,On.alphaBlended,jn.disabled,Pt(s,t.aM.transparent,g),null,h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),a.draw(r,o.LINE_STRIP,l,c,u,jn.disabled,Pt(s,t.aM.red),d,h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function hi(e,t,n){const i=e.context,r=i.gl,o=e.colorModeForRenderPass(),s=new Fn(r.LEQUAL,Fn.ReadWrite,e.depthRangeFor3D),a=e.useProgram("terrain"),l=t.getTerrainMesh();i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height]);for(const c of n){const n=e.renderToTexture.getTexture(c),u=t.getTerrainData(c.tileID);i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.texture);const h=e.transform.calculatePosMatrix(c.tileID.toUnwrapped()),d=t.getMeshFrameDelta(e.transform.zoom),p=e.transform.calculateFogMatrix(c.tileID.toUnwrapped()),f=gt(h,d,p,e.style.sky,e.transform.pitch);a.draw(i,r.TRIANGLES,s,Bn.disabled,o,jn.backCCW,f,u,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}}class di{constructor(e,t,n){this.vertexBuffer=e,this.indexBuffer=t,this.segments=n}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class pi{constructor(e,n){this.context=new Dn(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=he.maxUnderzooming+he.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new lt}resize(e,t,n){if(this.width=Math.floor(e*n),this.height=Math.floor(t*n),this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const i of this.style._order)this.style._layers[i].resize()}setup(){const e=this.context,n=new t.aW;n.emplaceBack(0,0),n.emplaceBack(t.X,0),n.emplaceBack(0,t.X),n.emplaceBack(t.X,t.X),this.tileExtentBuffer=e.createVertexBuffer(n,dt.members),this.tileExtentSegments=t.a0.simpleSegment(0,0,4,2);const i=new t.aW;i.emplaceBack(0,0),i.emplaceBack(t.X,0),i.emplaceBack(0,t.X),i.emplaceBack(t.X,t.X),this.debugBuffer=e.createVertexBuffer(i,dt.members),this.debugSegments=t.a0.simpleSegment(0,0,4,5);const r=new t.$;r.emplaceBack(0,0,0,0),r.emplaceBack(t.X,0,t.X,0),r.emplaceBack(0,t.X,0,t.X),r.emplaceBack(t.X,t.X,t.X,t.X),this.rasterBoundsBuffer=e.createVertexBuffer(r,J.members),this.rasterBoundsSegments=t.a0.simpleSegment(0,0,4,2);const o=new t.aW;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,dt.members),this.viewportSegments=t.a0.simpleSegment(0,0,4,2);const s=new t.aY;s.emplaceBack(0),s.emplaceBack(1),s.emplaceBack(3),s.emplaceBack(2),s.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(s);const a=new t.aX;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a);const l=this.context.gl;this.stencilClearMode=new Bn({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const i=t.H();t.aP(i,0,this.width,this.height,0,0,1),t.K(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Fn.disabled,this.stencilClearMode,On.disabled,jn.disabled,It(i),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source;const n=this.context,i=n.gl;this.nextStencilID+t.length>256&&this.clearStencil(),n.setColorMode(On.disabled),n.setDepthMode(Fn.disabled);const r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const o of t){const e=this._tileClippingMaskIDs[o.key]=this.nextStencilID++,t=this.style.map.terrain&&this.style.map.terrain.getTerrainData(o);r.draw(n,i.TRIANGLES,Fn.disabled,new Bn({func:i.ALWAYS,mask:0},e,255,i.KEEP,i.KEEP,i.REPLACE),On.disabled,jn.disabled,It(o.posMatrix),t,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new Bn({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new Bn({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,n=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=n[n.length-1].overscaledZ,r=n[0].overscaledZ-i+1;if(r>1){this.currentStencilSource=void 0,this.nextStencilID+r>256&&this.clearStencil();const e={};for(let n=0;n<r;n++)e[n+i]=new Bn({func:t.GEQUAL,mask:255},n+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=r,[e,n]}return[{[i]:Bn.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new On([e.CONSTANT_COLOR,e.ONE],new t.aM(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?On.unblended:On.alphaBlended}depthModeForSublayer(e,t,n){if(!this.opaquePassEnabledForLayer())return Fn.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Fn(n||this.context.gl.LEQUAL,t,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(o.now()),this.imageManager.beginFrame();const i=this.style._order,r=this.style.sourceCaches,s={},a={},l={};for(const t in r){const e=r[t];e.used&&e.prepare(this.context),s[t]=e.getVisibleCoordinates(),a[t]=s[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++)if(this.style._layers[i[t]].is3D()){this.opaquePassCutoff=t;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of i){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=a[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,r[e.source],e,n)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.aM.black:t.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(e,n){const i=e.context,r=i.gl,o=((e,t,n)=>({u_sky_color:e.properties.get("sky-color"),u_horizon_color:e.properties.get("horizon-color"),u_horizon:(t.height/2+t.getHorizon())*n,u_sky_horizon_blend:e.properties.get("sky-horizon-blend")*t.height/2*n}))(n,e.style.map.transform,e.pixelRatio),s=new Fn(r.LEQUAL,Fn.ReadWrite,[0,1]),a=Bn.disabled,l=e.colorModeForRenderPass(),c=e.useProgram("sky");if(!n.mesh){const e=new t.aW;e.emplaceBack(-1,-1),e.emplaceBack(1,-1),e.emplaceBack(1,1),e.emplaceBack(-1,1);const r=new t.aX;r.emplaceBack(0,1,2),r.emplaceBack(0,2,3),n.mesh=new di(i.createVertexBuffer(e,dt.members),i.createIndexBuffer(r),t.a0.simpleSegment(0,0,e.length,r.length))}c.draw(i,r.TRIANGLES,s,a,l,jn.disabled,o,void 0,"sky",n.mesh.vertexBuffer,n.mesh.indexBuffer,n.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[i[this.currentLayer]],t=r[e.source],n=s[e.source];this._renderTileClippingMasks(e,n),this.renderLayer(this,t,e,n)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const e=this.style._layers[i[this.currentLayer]],t=r[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e))continue;const n=("symbol"===e.type?l:a)[e.source];this._renderTileClippingMasks(e,s[e.source]),this.renderLayer(this,t,e,n)}if(this.options.showTileBoundaries){const e=function(e,t){let n=null;const i=Object.values(e._layers).flatMap((n=>n.source&&!n.isHidden(t)?[e.sourceCaches[n.source]]:[])),r=i.filter((e=>"vector"===e.getSource().type)),o=i.filter((e=>"vector"!==e.getSource().type)),s=e=>{(!n||n.getSource().maxzoom<e.getSource().maxzoom)&&(n=e)};return r.forEach((e=>s(e))),n||o.forEach((e=>s(e))),n}(this.style,this.transform.zoom);e&&function(e,t,n){for(let i=0;i<n.length;i++)ui(e,t,n[i])}(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;ai(e,e.transform.height-(t.top||0),3,ni),ai(e,t.bottom||0,3,ii),li(e,t.left||0,3,ri),li(e,e.transform.width-(t.right||0),3,oi);const n=e.transform.centerPoint;!function(e,t,n,i){ci(e,t-1,n-10,2,20,i),ci(e,t-10,n-1,20,2,i)}(e,n.x,e.transform.height-n.y,si)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const n=this.terrainFacilitator.matrix,i=this.transform.modelViewProjectionMatrix;let r=this.terrainFacilitator.dirty;r||(r=e?!t.aZ(n,i):!t.a_(n,i)),r||(r=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),r&&(t.a$(n,i),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,n){const i=e.context,r=i.gl,o=On.unblended,s=new Fn(r.LEQUAL,Fn.ReadWrite,[0,1]),a=n.getTerrainMesh(),l=n.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");i.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),i.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),i.clear({color:t.aM.transparent,depth:1});for(const t of l){const l=n.getTerrainData(t.tileID),u={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_ele_delta:n.getMeshFrameDelta(e.transform.zoom)};c.draw(i,r.TRIANGLES,s,Bn.disabled,o,jn.backCCW,u,l,"terrain",a.vertexBuffer,a.indexBuffer,a.segments)}i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,n){const i=e.context,r=i.gl,o=On.unblended,s=new Fn(r.LEQUAL,Fn.ReadWrite,[0,1]),a=n.getTerrainMesh(),l=n.getCoordsTexture(),c=n.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");i.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),i.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),i.clear({color:t.aM.transparent,depth:1}),n.coordsIndex=[];for(const t of c){const c=n.getTerrainData(t.tileID);i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l.texture);const h={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0,u_ele_delta:n.getMeshFrameDelta(e.transform.zoom)};u.draw(i,r.TRIANGLES,s,Bn.disabled,o,jn.backCCW,h,c,"terrain",a.vertexBuffer,a.indexBuffer,a.segments),n.coordsIndex.push(t.tileID.key)}i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}renderLayer(e,n,i,r){if(!i.isHidden(this.transform.zoom)&&("background"===i.type||"custom"===i.type||(r||[]).length))switch(this.id=i.id,i.type){case"symbol":!function(e,n,i,r,o){if("translucent"!==e.renderPass)return;const s=Bn.disabled,a=e.colorModeForRenderPass();(i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,n,i,r,o,s,a,l,c){const u=n.transform,h=tt(),d="map"===o,p="map"===s;for(const f of e){const e=r.getTile(f),o=e.getBucket(i);if(!o||!o.text||!o.text.segments.get().length)continue;const s=t.ag(o.textSizeData,u.zoom),m=De(e,1,n.transform.zoom),g=ye(f.posMatrix,p,d,n.transform,m),y="none"!==i.layout.get("icon-text-fit")&&o.hasIconData();if(s){const t=Math.pow(2,u.zoom-e.tileID.overscaledZ),i=n.style.map.terrain?(e,t)=>n.style.map.terrain.getElevation(f,e,t):null,r=h.translatePosition(u,e,a,l);Hn(o,d,p,c,u,g,f.posMatrix,t,s,y,h,r,f.toUnwrapped(),i)}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&Kn(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),s,a),0!==i.paint.get("text-opacity").constantOr(1)&&Kn(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),s,a),n.map.showCollisionBoxes&&(Un(e,n,i,r,!0),Un(e,n,i,r,!1))}(e,n,i,r,this.style.placement.variableOffsets);break;case"circle":!function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("circle-opacity"),s=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity"),l=!i.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===s.constantOr(1)||0===a.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,Fn.ReadOnly),d=Bn.disabled,p=e.colorModeForRenderPass(),f=[];for(let m=0;m<r.length;m++){const o=r[m],s=n.getTile(o),a=s.getBucket(i);if(!a)continue;const c=a.programConfigurations.get(i.id),u=e.useProgram("circle",c),h=a.layoutVertexBuffer,d=a.indexBuffer,p=e.style.map.terrain&&e.style.map.terrain.getTerrainData(o),g={programConfiguration:c,program:u,layoutVertexBuffer:h,indexBuffer:d,uniformValues:Et(e,o,s,i),terrainData:p};if(l){const e=a.segments.get();for(const n of e)f.push({segments:new t.a0([n]),sortKey:n.sortKey,state:g})}else f.push({segments:a.segments,sortKey:0,state:g})}l&&f.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of f){const{programConfiguration:n,program:r,layoutVertexBuffer:o,indexBuffer:s,uniformValues:a,terrainData:l}=t.state;r.draw(c,u.TRIANGLES,h,d,p,jn.disabled,a,l,i.id,o,s,t.segments,i.paint,e.transform.zoom,n)}}(e,n,i,r);break;case"heatmap":!function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,s=o.gl,a=Bn.disabled,l=new On([s.ONE,s.ONE],t.aM.transparent,[!0,!0,!0,!0]);!function(e,t,n){const i=e.gl;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),e.bindFramebuffer.set(r.framebuffer);else{const o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1,!1),function(e,t,n,i){var r,o;const s=e.gl,a=null!==(r=e.HALF_FLOAT)&&void 0!==r?r:s.UNSIGNED_BYTE,l=null!==(o=e.RGBA16F)&&void 0!==o?o:s.RGBA;s.texImage2D(s.TEXTURE_2D,0,l,t.width/4,t.height/4,0,s.RGBA,a,null),i.colorAttachment.set(n)}(e,t,o,r)}}(o,e,i),o.clear({color:t.aM.transparent});for(let t=0;t<r.length;t++){const c=r[t];if(n.hasRenderableParent(c))continue;const u=n.getTile(c),h=u.getBucket(i);if(!h)continue;const d=h.programConfigurations.get(i.id),p=e.useProgram("heatmap",d),{zoom:f}=e.transform;p.draw(o,s.TRIANGLES,Fn.disabled,a,l,jn.disabled,Mt(c.posMatrix,u,f,i.paint.get("heatmap-intensity")),null,i.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,i.paint,e.transform.zoom,d)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const i=e.context,r=i.gl,o=n.heatmapFbo;if(!o)return;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);let s=n.colorRampTexture;s||(s=n.colorRampTexture=new x(i,n.colorRamp,r.RGBA)),s.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,Fn.disabled,Bn.disabled,e.colorModeForRenderPass(),jn.disabled,((e,n,i,r)=>{const o=t.H();t.aP(o,0,e.width,e.height,0,0,1);const s=e.context.gl;return{u_matrix:o,u_world:[s.drawingBufferWidth,s.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}})(e,n),null,n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,i))}(e,n,i,r);break;case"line":!function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("line-opacity"),s=i.paint.get("line-width");if(0===o.constantOr(1)||0===s.constantOr(1))return;const a=e.depthModeForSublayer(0,Fn.ReadOnly),l=e.colorModeForRenderPass(),c=i.paint.get("line-dasharray"),u=i.paint.get("line-pattern"),h=u.constantOr(1),d=i.paint.get("line-gradient"),p=i.getCrossfadeParameters(),f=h?"linePattern":c?"lineSDF":d?"lineGradient":"line",m=e.context,g=m.gl;let y=!0;for(const _ of r){const r=n.getTile(_);if(h&&!r.patternsLoaded())continue;const o=r.getBucket(i);if(!o)continue;const s=o.programConfigurations.get(i.id),v=e.context.program.get(),b=e.useProgram(f,s),w=y||b.program!==v,S=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_),k=u.constantOr(null);if(k&&r.imageAtlas){const e=r.imageAtlas,t=e.patternPositions[k.to.toString()],n=e.patternPositions[k.from.toString()];t&&n&&s.setConstantPatternPositions(t,n)}const C=S?_:null,E=h?Lt(e,r,i,p,C):c?Ot(e,r,i,c,p,C):d?zt(e,r,i,o.lineClipsArray.length,C):Rt(e,r,i,C);if(h)m.activeTexture.set(g.TEXTURE0),r.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),s.updatePaintBuffers(p);else if(c&&(w||e.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m);else if(d){const r=o.gradients[i.id];let s=r.texture;if(i.gradientVersion!==r.version){let a=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=_.canonical.z===i?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;a=t.ac(t.aU(o.maxLineLength/t.X*1024*r),256,m.maxTextureSize)}r.gradient=t.aV({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:a,image:r.gradient||void 0,clips:o.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new x(m,r.gradient,g.RGBA),r.version=i.gradientVersion,s=r.texture}m.activeTexture.set(g.TEXTURE0),s.bind(i.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}b.draw(m,g.TRIANGLES,a,e.stencilModeForClipping(_),l,jn.disabled,E,S,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,i.paint,e.transform.zoom,s,o.layoutVertexBuffer2),y=!1}}(e,n,i,r);break;case"fill":!function(e,n,i,r){const o=i.paint.get("fill-color"),s=i.paint.get("fill-opacity");if(0===s.constantOr(1))return;const a=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.aM.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?Fn.ReadWrite:Fn.ReadOnly);$n(e,n,i,r,t,a,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const t=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Fn.ReadOnly);$n(e,n,i,r,t,a,!0)}}(e,n,i,r);break;case"fill-extrusion":!function(e,t,n,i){const r=n.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===e.renderPass){const o=new Fn(e.context.gl.LEQUAL,Fn.ReadWrite,e.depthRangeFor3D);if(1!==r||n.paint.get("fill-extrusion-pattern").constantOr(1))Jn(e,t,n,i,o,Bn.disabled,On.disabled),Jn(e,t,n,i,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const r=e.colorModeForRenderPass();Jn(e,t,n,i,o,Bn.disabled,r)}}}(e,n,i,r);break;case"hillshade":!function(e,t,n,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const r=e.context,o=e.depthModeForSublayer(0,Fn.ReadOnly),s=e.colorModeForRenderPass(),[a,l]="translucent"===e.renderPass?e.stencilConfigForOverlap(i):[{},i];for(const c of l){const i=t.getTile(c);void 0!==i.needsHillshadePrepare&&i.needsHillshadePrepare&&"offscreen"===e.renderPass?ei(e,i,n,o,Bn.disabled,s):"translucent"===e.renderPass&&Qn(e,c,i,n,o,a[c.overscaledZ],s)}r.viewport.set([0,0,e.width,e.height])}(e,n,i,r);break;case"raster":!function(e,t,n,i){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!i.length)return;const r=e.context,o=r.gl,s=t.getSource(),a=e.useProgram("raster"),l=e.colorModeForRenderPass(),[c,u]=s instanceof Q?[{},i]:e.stencilConfigForOverlap(i),h=u[u.length-1].overscaledZ,d=!e.options.moving;for(const p of u){const i=e.depthModeForSublayer(p.overscaledZ-h,1===n.paint.get("raster-opacity")?Fn.ReadWrite:Fn.ReadOnly,o.LESS),u=t.getTile(p);u.registerFadeDuration(n.paint.get("raster-fade-duration"));const f=t.findLoadedParent(p,0),m=t.findLoadedSibling(p),g=ti(u,f||m||null,t,n,e.transform,e.style.map.terrain);let y,_;const v="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),u.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),f?(f.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,f.tileID.overscaledZ-u.tileID.overscaledZ),_=[u.tileID.canonical.x*y%1,u.tileID.canonical.y*y%1]):u.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),u.texture.useMipmap&&r.extTextureFilterAnisotropic&&e.transform.pitch>20&&o.texParameterf(o.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax);const b=e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),x=b?p:null,w=x?x.posMatrix:e.transform.calculatePosMatrix(p.toUnwrapped(),d),S=Nt(w,_||[0,0],y||1,g,n);s instanceof Q?a.draw(r,o.TRIANGLES,i,Bn.disabled,l,jn.disabled,S,b,n.id,s.boundsBuffer,e.quadTriangleIndexBuffer,s.boundsSegments):a.draw(r,o.TRIANGLES,i,c[p.overscaledZ],l,jn.disabled,S,b,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}(e,n,i,r);break;case"background":!function(e,t,n,i){const r=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0===o)return;const s=e.context,a=s.gl,l=e.transform,c=l.tileSize,u=n.paint.get("background-pattern");if(e.isPatternMissing(u))return;const h=!u&&1===r.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==h)return;const d=Bn.disabled,p=e.depthModeForSublayer(0,"opaque"===h?Fn.ReadWrite:Fn.ReadOnly),f=e.colorModeForRenderPass(),m=e.useProgram(u?"backgroundPattern":"background"),g=i||l.coveringTiles({tileSize:c,terrain:e.style.map.terrain});u&&(s.activeTexture.set(a.TEXTURE0),e.imageManager.bind(e.context));const y=n.getCrossfadeParameters();for(const _ of g){const t=i?_.posMatrix:e.transform.calculatePosMatrix(_.toUnwrapped()),l=u?Gt(t,o,e,u,{tileID:_,tileSize:c},y):qt(t,o,r),h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_);m.draw(s,a.TRIANGLES,p,d,f,jn.disabled,l,h,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}(e,0,i,r);break;case"custom":!function(e,t,n){const i=e.context,r=n.implementation;if("offscreen"===e.renderPass){const t=r.prerender;t&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),t.call(r,i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),i.setStencilMode(Bn.disabled);const t="3d"===r.renderingMode?new Fn(e.context.gl.LEQUAL,Fn.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Fn.ReadOnly);i.setDepthMode(t),r.render(i.gl,e.transform.customLayerMatrix(),{farZ:e.transform.farZ,nearZ:e.transform.nearZ,fov:e.transform._fov,modelViewProjectionMatrix:e.transform.modelViewProjectionMatrix,projectionMatrix:e.transform.projectionMatrix}),i.setDirty(),e.setBaseState(),i.bindFramebuffer.set(null)}}(e,0,i)}}translatePosMatrix(e,n,i,r,o){if(!i[0]&&!i[1])return e;const s=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(s){const e=Math.sin(s),t=Math.cos(s);i=[i[0]*t-i[1]*e,i[0]*e+i[1]*t]}const a=[o?i[0]:De(n,i[0],this.transform.zoom),o?i[1]:De(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.J(l,e,a),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}useProgram(e,t){this.cache=this.cache||{};const n=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[n]||(this.cache[n]=new _t(this.context,pt[e],t,Zt[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new x(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}class fi{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,n,i){const r=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((i=>{const o=1/(i=t.af([],i,e))[3]/n*r;return t.b0(i,i,[o,o,1/i[3],o])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=function(e,t){var n=t[0],i=t[1],r=t[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}([],function(e,t,n){var i=t[0],r=t[1],o=t[2],s=n[0],a=n[1],l=n[2];return e[0]=r*l-o*a,e[1]=o*s-i*l,e[2]=i*a-r*s,e}([],y([],o[e[0]],o[e[1]]),y([],o[e[2]],o[e[1]]))),n=-((i=t)[0]*(r=o[e[1]])[0]+i[1]*r[1]+i[2]*r[2]);var i,r;return t.concat(n)}));return new fi(o,s)}}class mi{constructor(e,t){this.min=e,this.max=t,this.center=function(e,t,n){return e[0]=.5*t[0],e[1]=.5*t[1],e[2]=.5*t[2],e}([],function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}([],this.min,this.max))}quadrant(e){const t=[e%2==0,e<2],n=m(this.min),i=m(this.max);for(let r=0;r<t.length;r++)n[r]=t[r]?this.min[r]:this.center[r],i[r]=t[r]?this.center[r]:this.max[r];return i[2]=this.max[2],new mi(n,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let r=0;r<e.planes.length;r++){const o=e.planes[r];let s=0;for(let e=0;e<n.length;e++)t.b1(o,n[e])>=0&&s++;if(0===s)return 0;s!==n.length&&(i=!1)}if(i)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let r=0;r<e.points.length;r++){const o=e.points[r][t]-this.min[t];n=Math.min(n,o),i=Math.max(i,o)}if(i<0||n>this.max[t]-this.min[t])return 0}return 1}}class gi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=i}interpolate(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.y.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.y.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.y.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.y.number(e.right,n.right,i)),this}getCenter(e,n){const i=t.ac((this.left+e-this.right)/2,0,e),r=t.ac((this.top+n-this.bottom)/2,0,n);return new t.P(i,r)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new gi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const yi=85.051129;class _i{constructor(e,n,i,r,o){this.tileSize=512,this._renderWorldCopies=void 0===o||!!o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new gi,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new _i(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.b2(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(e,t,n){var i=t[0],r=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=i*l+o*a,e[1]=r*l+s*a,e[2]=i*-a+o*l,e[3]=r*-a+s*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.tileZoom=Math.max(0,Math.floor(t)),this.scale=this.zoomScale(t),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(e){const n=[new t.b3(0,e)];if(this._renderWorldCopies){const i=this.pointCoordinate(new t.P(0,0)),r=this.pointCoordinate(new t.P(this.width,0)),o=this.pointCoordinate(new t.P(this.width,this.height)),s=this.pointCoordinate(new t.P(0,this.height)),a=Math.floor(Math.min(i.x,r.x,o.x,s.x)),l=Math.floor(Math.max(i.x,r.x,o.x,s.x)),c=1;for(let u=a-c;u<=l+c;u++)0!==u&&n.push(new t.b3(u,e))}return n}coveringTiles(e){var n,i;let r=this.coveringZoomLevel(e);const o=r;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);const s=this.pointCoordinate(this.getCameraPoint()),a=t.Z.fromLngLat(this.center),l=Math.pow(2,r),c=[l*s.x,l*s.y,0],u=[l*a.x,l*a.y,0],h=fi.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,r);let d=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(d=r);const p=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,f=e=>({aabb:new mi([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),m=[],g=[],y=r,v=e.reparseOverscaled?o:r;if(this._renderWorldCopies)for(let t=1;t<=3;t++)m.push(f(-t)),m.push(f(t));for(m.push(f(0));m.length>0;){const r=m.pop(),o=r.x,s=r.y;let a=r.fullyVisible;if(!a){const e=r.aabb.intersects(h);if(0===e)continue;a=2===e}const l=e.terrain?c:u,f=r.aabb.distanceX(l),b=r.aabb.distanceY(l),x=Math.max(Math.abs(f),Math.abs(b));if(r.zoom===y||x>p+(1<<y-r.zoom)-2&&r.zoom>=d){const e=y-r.zoom,n=c[0]-.5-(o<<e),i=c[1]-.5-(s<<e);g.push({tileID:new t.S(r.zoom===y?v:r.zoom,r.wrap,r.zoom,o,s),distanceSq:_([u[0]-.5-o,u[1]-.5-s]),tileDistanceToCamera:Math.sqrt(n*n+i*i)})}else for(let c=0;c<4;c++){const l=(o<<1)+c%2,u=(s<<1)+(c>>1),h=r.zoom+1;let d=r.aabb.quadrant(c);if(e.terrain){const o=new t.S(h,r.wrap,h,l,u),s=e.terrain.getMinMaxElevation(o),a=null!==(n=s.minElevation)&&void 0!==n?n:this.elevation,c=null!==(i=s.maxElevation)&&void 0!==i?i:this.elevation;d=new mi([d.min[0],d.min[1],a],[d.max[0],d.max[1],c])}m.push({aabb:d,zoom:h,x:l,y:u,wrap:r.wrap,fullyVisible:a})}}return g.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const n=t.ac(e.lat,-85.051129,yi);return new t.P(t.O(e.lng)*this.worldSize,t.Q(n)*this.worldSize)}unproject(e){return new t.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const n=this.elevation,i=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,r=this.pointLocation(this.centerPoint,e),o=e.getElevationForLngLatZoom(r,this.tileZoom);if(!(this.elevation-o))return;const s=i+n-o,a=Math.cos(this._pitch)*this.cameraToCenterDistance/s/t.b4(1,r.lat),l=this.scaleZoom(a/this.tileSize);this._elevation=o,this._center=r,this.zoom=l}setLocationAtPoint(e,n){const i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),s=new t.Z(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(s),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),t.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(e){return t.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,n){if(n){const t=n.pointCoordinate(e);if(null!=t)return t}const i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.af(i,i,this.pixelMatrixInverse),t.af(r,r,this.pixelMatrixInverse);const o=i[3],s=r[3],a=i[1]/o,l=r[1]/s,c=i[2]/o,u=r[2]/s,h=c===u?0:(0-c)/(u-c);return new t.Z(t.y.number(i[0]/o,r[0]/s,h)/this.worldSize,t.y.number(a,l,h)/this.worldSize)}coordinatePoint(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelMatrix;const r=[e.x*this.worldSize,e.y*this.worldSize,n,1];return t.af(r,r,i),new t.P(r[0]/r[3],r[1]/r[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new H).extend(this.pointLocation(new t.P(0,e))).extend(this.pointLocation(new t.P(this.width,e))).extend(this.pointLocation(new t.P(this.width,this.height))).extend(this.pointLocation(new t.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new H([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,yi])}calculateTileMatrix(e){const n=e.canonical,i=this.worldSize/this.zoomScale(n.z),r=n.x+Math.pow(2,n.z)*e.wrap,o=t.an(new Float64Array(16));return t.J(o,o,[r*i,n.y*i,0]),t.K(o,o,[i/t.X,i/t.X,1]),o}calculatePosMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,r=n?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];const o=this.calculateTileMatrix(e);return t.L(o,n?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,o),r[i]=new Float32Array(o),r[i]}calculateFogMatrix(e){const n=e.key,i=this._fogMatrixCache;if(i[n])return i[n];const r=this.calculateTileMatrix(e);return t.L(r,this.fogMatrix,r),i[n]=new Float32Array(r),i[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,n){n=t.ac(+n,this.minZoom,this.maxZoom);const i={center:new t.N(e.lng,e.lat),zoom:n};let r=this.lngRange;if(!this._renderWorldCopies&&null===r){const e=180-1e-10;r=[-e,e]}const o=this.tileSize*this.zoomScale(i.zoom);let s=0,a=o,l=0,c=o,u=0,h=0;const{x:d,y:p}=this.size;if(this.latRange){const e=this.latRange;s=t.Q(e[1])*o,a=t.Q(e[0])*o,a-s<p&&(u=p/(a-s))}r&&(l=t.b2(t.O(r[0])*o,0,o),c=t.b2(t.O(r[1])*o,0,o),c<l&&(c+=o),c-l<d&&(h=d/(c-l)));const{x:f,y:m}=this.project.call({worldSize:o},e);let g,y;const _=Math.max(h||0,u||0);if(_){const e=new t.P(h?(c+l)/2:f,u?(a+s)/2:m);return i.center=this.unproject.call({worldSize:o},e).wrap(),i.zoom+=this.scaleZoom(_),i}if(this.latRange){const e=p/2;m-e<s&&(y=s+e),m+e>a&&(y=a-e)}if(r){const e=(l+c)/2;let n=f;this._renderWorldCopies&&(n=t.b2(f,e-o/2,e+o/2));const i=d/2;n-i<l&&(g=l+i),n+i>c&&(g=c-i)}if(void 0!==g||void 0!==y){const e=new t.P(null!=g?g:f,null!=y?y:m);i.center=this.unproject.call({worldSize:o},e).wrap()}return i}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:n}=this.getConstrained(this.center,this.zoom);this.center=t,this.zoom=n,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.point.x,i=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.b4(1,this.center.lat)*this.worldSize;let r=t.an(new Float64Array(16));t.K(r,r,[this.width/2,-this.height/2,1]),t.J(r,r,[1,-1,0]),this.labelPlaneMatrix=r,r=t.an(new Float64Array(16)),t.K(r,r,[1,-1,1]),t.J(r,r,[-1,-1,0]),t.K(r,r,[2/this.width,2/this.height,1]),this.glCoordMatrix=r;const o=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),s=Math.min(this.elevation,this.minElevationForCurrentTile),a=o-s*this._pixelPerMeter/Math.cos(this._pitch),l=s<0?a:o,c=Math.PI/2+this._pitch,u=this._fov*(.5+e.y/this.height),h=Math.sin(u)*l/Math.sin(t.ac(Math.PI-c-u,.01,Math.PI-.01)),d=this.getHorizon(),p=2*Math.atan(d/this.cameraToCenterDistance)*(.5+e.y/(2*d)),f=Math.sin(p)*l/Math.sin(t.ac(Math.PI-c-p,.01,Math.PI-.01)),m=Math.min(h,f);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*m+l),this.nearZ=this.height/50,r=new Float64Array(16),t.b5(r,this._fov,this.width/this.height,this.nearZ,this.farZ),r[8]=2*-e.x/this.width,r[9]=2*e.y/this.height,this.projectionMatrix=t.ae(r),t.K(r,r,[1,-1,1]),t.J(r,r,[0,0,-this.cameraToCenterDistance]),t.b6(r,r,this._pitch),t.ad(r,r,this.angle),t.J(r,r,[-n,-i,0]),this.mercatorMatrix=t.K([],r,[this.worldSize,this.worldSize,this.worldSize]),t.K(r,r,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.L(new Float64Array(16),this.labelPlaneMatrix,r),t.J(r,r,[0,0,-this.elevation]),this.modelViewProjectionMatrix=r,this.invModelViewProjectionMatrix=t.as([],r),this.fogMatrix=new Float64Array(16),t.b5(this.fogMatrix,this._fov,this.width/this.height,o,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,t.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),t.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),t.b6(this.fogMatrix,this.fogMatrix,this._pitch),t.ad(this.fogMatrix,this.fogMatrix,this.angle),t.J(this.fogMatrix,this.fogMatrix,[-n,-i,0]),t.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),t.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=t.L(new Float64Array(16),this.labelPlaneMatrix,r);const g=this.width%2/2,y=this.height%2/2,_=Math.cos(this.angle),v=Math.sin(this.angle),b=n-Math.round(n)+_*g+v*y,x=i-Math.round(i)+_*y+v*g,w=new Float64Array(r);if(t.J(w,w,[b>.5?b-1:b,x>.5?x-1:x,0]),this.alignedModelViewProjectionMatrix=w,r=t.as(new Float64Array(16),this.pixelMatrix),!r)throw new Error("failed to invert matrix");this.pixelMatrixInverse=r,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.af(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(0,e))}getCameraQueryGeometry(e){const n=this.getCameraPoint();if(1===e.length)return[e[0],n];{let i=n.x,r=n.y,o=n.x,s=n.y;for(const t of e)i=Math.min(i,t.x),r=Math.min(r,t.y),o=Math.max(o,t.x),s=Math.max(s,t.y);return[new t.P(i,r),new t.P(o,r),new t.P(o,s),new t.P(i,s),new t.P(i,r)]}}lngLatToCameraDepth(e,n){const i=this.locationCoordinate(e),r=[i.x*this.worldSize,i.y*this.worldSize,n,1];return t.af(r,r,this.modelViewProjectionMatrix),r[2]/r[3]}}function vi(e,t){var n=this;let i,r=!1,o=null,s=null;const a=()=>{o=null,r&&(e.apply(s,i),o=setTimeout(a,t),r=!1)};return function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];return r=!0,s=n,i=t,o||a(),o}}class bi{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,e)},this._removeHash=()=>{const e=this._getCurrentHash();if(0===e.length)return;const t=e.join("/");let n=t;n.split("&").length>0&&(n=n.split("&")[0]),this._hashName&&(n="".concat(this._hashName,"=").concat(t));let i=window.location.hash.replace(n,"");i.startsWith("#&")?i=i.slice(0,1)+i.slice(2):"#"===i&&(i="");let r=window.location.href.replace(/(#.+)?$/,i);r=r.replace("&&","&"),window.history.replaceState(window.history.state,null,r)},this._updateHash=vi(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),o=Math.round(t.lng*r)/r,s=Math.round(t.lat*r)/r,a=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?"/".concat(o,"/").concat(s,"/").concat(n):"".concat(n,"/").concat(s,"/").concat(o),(a||l)&&(c+="/"+Math.round(10*a)/10),l&&(c+="/".concat(Math.round(l))),this._hashName){const e=this._hashName;let t=!1;const n=window.location.hash.slice(1).split("&").map((n=>{const i=n.split("=")[0];return i===e?(t=!0,"".concat(i,"=").concat(c)):n})).filter((e=>e));return t||n.push("".concat(e,"=").concat(c)),"#".concat(n.join("&"))}return"#".concat(c)}}const xi={linearity:.3,easing:t.b7(0,0,.3,1)},wi=t.e({deceleration:2500,maxSpeed:1400},xi),Si=t.e({deceleration:20,maxSpeed:1400},xi),ki=t.e({deceleration:1e3,maxSpeed:360},xi),Ci=t.e({deceleration:1e3,maxSpeed:90},xi);class Ei{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=o.now();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const o=Pi(n.pan.mag(),i,t.e({},wi,e||{}));r.offset=n.pan.mult(o.amount/n.pan.mag()),r.center=this._map.transform.center,Ti(r,o)}if(n.zoom){const e=Pi(n.zoom,i,Si);r.zoom=this._map.transform.zoom+e.amount,Ti(r,e)}if(n.bearing){const e=Pi(n.bearing,i,ki);r.bearing=this._map.transform.bearing+t.ac(e.amount,-179,179),Ti(r,e)}if(n.pitch){const e=Pi(n.pitch,i,Ci);r.pitch=this._map.transform.pitch+e.amount,Ti(r,e)}if(r.zoom||r.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;r.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),t.e(r,{noMoveStart:!0})}}function Ti(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Pi(e,n,i){const{maxSpeed:r,linearity:o,deceleration:s}=i,a=t.ac(e*o/(n/1e3),-r,r),l=Math.abs(a)/(s*o);return{easing:i.easing,duration:1e3*l,amount:a*(l/2)}}class Ii extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=s.mousePos(n.getCanvas(),i),a=n.unproject(o);super(e,t.e({point:o,lngLat:a,originalEvent:i},r)),this._defaultPrevented=!1,this.target=n}}class Mi extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){const r="touchend"===e?i.changedTouches:i.touches,o=s.touchPos(n.getCanvasContainer(),r),a=o.map((e=>n.unproject(e))),l=o.reduce(((e,t,n,i)=>e.add(t.div(i.length))),new t.P(0,0));super(e,{points:o,point:l,lngLats:a,lngLat:n.unproject(l),originalEvent:i}),this._defaultPrevented=!1}}class Ai extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class Ri{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Ai(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Ii(e.type,this._map,e))}mouseup(e){this._map.fire(new Ii(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Ii(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Ii(e.type,this._map,e))}mouseover(e){this._map.fire(new Ii(e.type,this._map,e))}mouseout(e){this._map.fire(new Ii(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Mi(e.type,this._map,e))}touchmove(e){this._map.fire(new Mi(e.type,this._map,e))}touchend(e){this._map.fire(new Mi(e.type,this._map,e))}touchcancel(e){this._map.fire(new Mi(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Ii(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ii("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Ii(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Li{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(t.P.convert(e),this._map.terrain)}}class Oi{constructor(e,t){this._map=e,this._tr=new Li(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(s.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=n,this._box||(this._box=s.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const r=Math.min(i.x,n.x),o=Math.max(i.x,n.x),a=Math.min(i.y,n.y),l=Math.max(i.y,n.y);s.setTransform(this._box,"translate(".concat(r,"px,").concat(a,"px)")),this._box.style.width=o-r+"px",this._box.style.height=l-a+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const i=this._startPos,r=n;if(this.reset(),s.suppressClick(),i.x!==r.x||i.y!==r.y)return this._map.fire(new t.k("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(i,r,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.k(e,{originalEvent:n}))}}function Di(e,t){if(e.length!==t.length)throw new Error("The number of touches and points are not equal - touches ".concat(e.length,", points ").concat(t.length));const n={};for(let i=0;i<e.length;i++)n[e[i].identifier]=t[i];return n}class Fi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const n=new t.P(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=Di(i,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const i=Di(n,t);for(const r in this.touches){const e=i[r];(!e||e.dist(this.touches[r])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Ni{constructor(e){this.singleTap=new Fi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const i=this.singleTap.touchend(e,t,n);if(i){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class Bi{constructor(e){this._tr=new Li(e),this._zoomIn=new Ni({numTouches:1,numTaps:2}),this._zoomOut=new Ni({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const i=this._zoomIn.touchend(e,t,n),r=this._zoomOut.touchend(e,t,n),o=this._tr;return i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(i)},{originalEvent:e})}):r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(r)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ji{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(){const e=this._moveFunction(...arguments);if(e.bearingDelta||e.pitchDelta||e.around||e.panDelta)return this._active=!0,e}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=t.length?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const n=this._lastPoint;if(!n)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const i=t.length?t[0]:t;return!this._moved&&i.dist(n)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=i,this._move(n,i))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&s.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vi={0:1,2:2};class Ui{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=s.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const n=Vi[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton)}isValidEndEvent(e){return s.mouseButton(e)===this._eventButton}}class qi{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Gi=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=e=>{e.preventDefault()}},Zi=e=>{let{enable:t,clickTolerance:n,bearingDegreesPerPixelMoved:i=.8}=e;const r=new Ui({checkCorrectEvent:e=>0===s.mouseButton(e)&&e.ctrlKey||2===s.mouseButton(e)});return new ji({clickTolerance:n,move:(e,t)=>({bearingDelta:(t.x-e.x)*i}),moveStateManager:r,enable:t,assignEvents:Gi})},Hi=e=>{let{enable:t,clickTolerance:n,pitchDegreesPerPixelMoved:i=-.5}=e;const r=new Ui({checkCorrectEvent:e=>0===s.mouseButton(e)&&e.ctrlKey||2===s.mouseButton(e)});return new ji({clickTolerance:n,move:(e,t)=>({pitchDelta:(t.y-e.y)*i}),moveStateManager:r,enable:t,assignEvents:Gi})};class Wi{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._active){if(!this._shouldBePrevented(n.length))return e.preventDefault(),this._calculateTransform(e,t,n);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&this._shouldBePrevented(n.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,i){i.length>0&&(this._active=!0);const r=Di(i,n),o=new t.P(0,0),s=new t.P(0,0);let a=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(o._add(e),s._add(e.sub(n)),a++,r[t]=e)}if(this._touches=r,this._shouldBePrevented(a)||!s.mag())return;const l=s.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(a),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ki{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){if(!this._firstTwoTouches)return;e.preventDefault();const[i,r]=this._firstTwoTouches,o=Xi(n,t,i),s=Xi(n,t,r);if(!o||!s)return;const a=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],a,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[i,r]=this._firstTwoTouches,o=Xi(n,t,i),a=Xi(n,t,r);o&&a||(this._active&&s.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Xi(e,t,n){for(let i=0;i<e.length;i++)if(e[i].identifier===n)return t[i]}function Yi(e,t){return Math.log(e/t)/Math.LN2}class $i extends Ki{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Yi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Yi(this._distance,n),pinchAround:t}}}function Ji(e,t){return 180*e.angleWith(t)/Math.PI}class Qi extends Ki{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t,n){const i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ji(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=Ji(e,this._startVector);return Math.abs(n)<t}}function er(e){return Math.abs(e.y)>Math.abs(e.x)}class tr extends Ki{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,n){super.touchstart(e,t,n),this._currentTouchCount=n.length}_start(e){this._lastPoints=e,er(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const i=e[0].sub(this._lastPoints[0]),r=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const i=e.mag()>=2,r=t.mag()>=2;if(!i&&!r)return;if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return er(e)&&er(t)&&o}}const nr={panStep:100,bearingStep:15,pitchStep:10};class ir{constructor(e){this._tr=new Li(e);const t=nr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,i=0,r=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),r=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),r=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:s=>{const a=this._tr;s.easeTo({duration:300,easeId:"keyboardHandler",easing:rr,zoom:t?Math.round(a.zoom)+t*(e.shiftKey?2:1):a.zoom,bearing:a.bearing+n*this._bearingStep,pitch:a.pitch+i*this._pitchStep,offset:[-r*this._panStep,-o*this._panStep],center:a.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rr(e){return e*(2-e)}const or=4.000244140625;class sr{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},this._map=e,this._tr=new Li(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=o.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%or==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=s.mousePos(this._map.getCanvas(),e),i=this._tr;this._around=n.y>i.transform.height/2-i.transform.getHorizon()?t.N.convert(this._aroundCenter?i.center:i.unproject(n)):t.N.convert(i.center),this._aroundPoint=i.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>or?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const i="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(i*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:e.zoom,i=this._startZoom,r=this._easing;let s,a=!1;const l=o.now()-this._lastWheelEventTime;if("wheel"===this._type&&i&&r&&l){const e=Math.min(l/200,1),o=r(e);s=t.y.number(i,n,o),e<1?this._frameId||(this._frameId=!0):a=!0}else s=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:s-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.b8;if(this._prevEase){const e=this._prevEase,i=(o.now()-e.start)/e.duration,r=e.easing(i+.01)-e.easing(i),s=.27/Math.sqrt(r*r+1e-4)*.01,a=Math.sqrt(.0729-s*s);n=t.b7(s,a,.25,1)}return this._prevEase={start:o.now(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ar{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class lr{constructor(e){this._tr=new Li(e),this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cr{constructor(){this._tap=new Ni({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,t,n){if(!this._swipePoint)if(this._tapTime){const i=t[0],r=e.timeStamp-this._tapTime<500,o=this._tapPoint.dist(i)<30;r&&o?n.length>0&&(this._swipePoint=i,this._swipeTouch=n[0].identifier):this.reset()}else this._tap.touchstart(e,t,n)}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=t[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){if(this._tapTime)this._swipePoint&&0===n.length&&this.reset();else{const i=this._tap.touchend(e,t,n);i&&(this._tapTime=e.timeStamp,this._tapPoint=i)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ur{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class hr{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class dr{constructor(e,t,n,i){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class pr{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=s.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const n=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),i=document.createElement("div");i.className="maplibregl-desktop-message",i.textContent=t,this._container.appendChild(i);const r=document.createElement("div");r.className="maplibregl-mobile-message",r.textContent=n,this._container.appendChild(r),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(s.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,n){this._enabled&&(this._map.fire(new t.k("cooperativegestureprevented",{gestureType:e,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const fr=e=>e.zoom||e.drag||e.pitch||e.rotate;class mr extends t.k{}function gr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class yr{constructor(e,t){this.handleWindowEvent=e=>{this.handleEvent(e,"".concat(e.type,"Window"))},this.handleEvent=(e,t)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===e.type?void 0:e,i={needsRenderFrame:!1},r={},o={},a=e.touches,l=a?this._getMapTouches(a):void 0,c=l?s.touchPos(this._map.getCanvas(),l):s.mousePos(this._map.getCanvas(),e);for(const{handlerName:s,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let a;this._blockedByActive(o,p,s)?d.reset():d[t||e.type]&&(a=d[t||e.type](e,c,l),this.mergeHandlerResult(i,r,a,s,n),a&&a.needsRenderFrame&&this._triggerRenderFrame()),(a||d.isActive())&&(o[s]=d)}const u={};for(const s in this._previousActiveHandlers)o[s]||(u[s]=n);this._previousActiveHandlers=o,(Object.keys(u).length||gr(i))&&(this._changes.push([i,r,u]),this._triggerRenderFrame()),(Object.keys(o).length||gr(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=i;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ei(e),this._bearingSnap=t.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(t);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]];for(const[i,r,o]of this._listeners)s.addEventListener(i,r,i===document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[e,t,n]of this._listeners)s.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Ri(t,e));const i=t.boxZoom=new Oi(t,e);this._add("boxZoom",i),e.interactive&&e.boxZoom&&i.enable();const r=t.cooperativeGestures=new pr(t,e.cooperativeGestures);this._add("cooperativeGestures",r),e.cooperativeGestures&&r.enable();const o=new Bi(t),a=new lr(t);t.doubleClickZoom=new ar(a,o),this._add("tapZoom",o),this._add("clickZoom",a),e.interactive&&e.doubleClickZoom&&t.doubleClickZoom.enable();const l=new cr;this._add("tapDragZoom",l);const c=t.touchPitch=new tr(t);this._add("touchPitch",c),e.interactive&&e.touchPitch&&t.touchPitch.enable(e.touchPitch);const u=Zi(e),h=Hi(e);t.dragRotate=new hr(e,u,h),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]),e.interactive&&e.dragRotate&&t.dragRotate.enable();const d=(e=>{let{enable:t,clickTolerance:n}=e;const i=new Ui({checkCorrectEvent:e=>0===s.mouseButton(e)&&!e.ctrlKey});return new ji({clickTolerance:n,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:i,enable:t,assignEvents:Gi})})(e),p=new Wi(e,t);t.dragPan=new ur(n,d,p),this._add("mousePan",d),this._add("touchPan",p,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&t.dragPan.enable(e.dragPan);const f=new Qi,m=new $i;t.touchZoomRotate=new dr(n,m,f,l),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&t.touchZoomRotate.enable(e.touchZoomRotate);const g=t.scrollZoom=new sr(t,(()=>this._triggerRenderFrame()));this._add("scrollZoom",g,["mousePan"]),e.interactive&&e.scrollZoom&&t.scrollZoom.enable(e.scrollZoom);const y=t.keyboard=new ir(t);this._add("keyboard",y),e.interactive&&e.keyboard&&t.keyboard.enable(),this._add("blockableMapEvent",new zi(t))}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(fr(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,n){for(const i in e)if(i!==n&&(!t||t.indexOf(i)<0))return!0;return!1}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}mergeHandlerResult(e,n,i,r,o){if(!i)return;t.e(e,i);const s={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=s),void 0!==i.panDelta&&(n.drag=s),void 0!==i.pitchDelta&&(n.pitch=s),void 0!==i.bearingDelta&&(n.rotate=s)}_applyChanges(){const e={},n={},i={};for(const[r,o,s]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.e(n,o),t.e(i,s);this._updateMapTransform(e,n,i),this._changes=[]}_updateMapTransform(e,t,n){const i=this._map,r=i._getTransformForUpdate(),o=i.terrain;if(!(gr(e)||o&&this._terrainMovement))return this._fireEvents(t,n,!0);let{panDelta:s,zoomDelta:a,bearingDelta:l,pitchDelta:c,around:u,pinchAround:h}=e;void 0!==h&&(u=h),i._stop(!0),u=u||i.transform.centerPoint;const d=r.pointLocation(s?u.sub(s):u);l&&(r.bearing+=l),c&&(r.pitch+=c),a&&(r.zoom+=a),o?this._terrainMovement||!t.drag&&!t.zoom?t.drag&&this._terrainMovement?r.center=r.pointLocation(r.centerPoint.sub(s)):r.setLocationAtPoint(d,u):(this._terrainMovement=!0,this._map._elevationFreeze=!0,r.setLocationAtPoint(d,u)):r.setLocationAtPoint(d,u),i._applyUpdatedTransform(r),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)}_fireEvents(e,n,i){const r=fr(this._eventsInProgress),s=fr(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a["".concat(t,"start")]=n),this._eventsInProgress[t]=e[t]}!r&&s&&this._fireEvent("movestart",s.originalEvent);for(const t in a)this._fireEvent(t,a[t]);s&&this._fireEvent("move",s.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const l={};let c;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],c=n[e]||i,l["".concat(t,"end")]=c)}for(const t in l)this._fireEvent(t,l[t]);const u=fr(this._eventsInProgress),h=(r||s)&&!u;if(h&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const e=this._map._getTransformForUpdate();e.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(e)}if(i&&h){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&o.prefersReducedMotion?(this._map.fire(new t.k("moveend",{originalEvent:c})),n(this._map.getBearing())&&this._map.resetNorth()):(n(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:c})),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.k(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new mr("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class _r extends t.E{constructor(e,t){super(),this._renderFrameCallback=()=>{const e=Math.min((o.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new t.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(e,n,i){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},n),i)}panTo(e,n,i){return this.easeTo(t.e({center:e},n),i)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,n,i){return this.easeTo(t.e({zoom:e},n),i)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,n,i){return this.easeTo(t.e({bearing:e},n),i)}resetNorth(e,n){return this.rotateTo(0,t.e({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.e({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(e,t){e=H.convert(e);const n=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,t)}_cameraForBoxAndBearing(e,n,i,r){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){const e=r.padding;r.padding={top:e,bottom:e,right:e,left:e}}r.padding=t.e(o,r.padding);const s=this.transform,a=s.padding,l=new H(e,n),c=s.project(l.getNorthWest()),u=s.project(l.getNorthEast()),h=s.project(l.getSouthEast()),d=s.project(l.getSouthWest()),p=t.b9(-i),f=c.rotate(p),m=u.rotate(p),g=h.rotate(p),y=d.rotate(p),_=new t.P(Math.max(f.x,m.x,y.x,g.x),Math.max(f.y,m.y,y.y,g.y)),v=new t.P(Math.min(f.x,m.x,y.x,g.x),Math.min(f.y,m.y,y.y,g.y)),b=_.sub(v),x=(s.width-(a.left+a.right+r.padding.left+r.padding.right))/b.x,w=(s.height-(a.top+a.bottom+r.padding.top+r.padding.bottom))/b.y;if(w<0||x<0)return void t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const S=Math.min(s.scaleZoom(s.scale*Math.min(x,w)),r.maxZoom),k=t.P.convert(r.offset),C=new t.P((r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2).rotate(t.b9(i)),E=k.add(C).mult(s.scale/s.zoomScale(S));return{center:s.unproject(c.add(h).div(2).sub(E)),zoom:S,bearing:i}}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}fitScreenCoordinates(e,n,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.P.convert(e)),this.transform.pointLocation(t.P.convert(n)),i,r),r,o)}_fitInternal(e,n,i){return e?(delete(n=t.e(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(e,n){this.stop();const i=this._getTransformForUpdate();let r=!1,o=!1,s=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.N.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(s=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this._applyUpdatedTransform(i),this.fire(new t.k("movestart",n)).fire(new t.k("move",n)),r&&this.fire(new t.k("zoomstart",n)).fire(new t.k("zoom",n)).fire(new t.k("zoomend",n)),o&&this.fire(new t.k("rotatestart",n)).fire(new t.k("rotate",n)).fire(new t.k("rotateend",n)),s&&this.fire(new t.k("pitchstart",n)).fire(new t.k("pitch",n)).fire(new t.k("pitchend",n)),this.fire(new t.k("moveend",n))}calculateCameraOptionsFromTo(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=t.Z.fromLngLat(e,n),s=t.Z.fromLngLat(i,r),a=s.x-o.x,l=s.y-o.y,c=s.z-o.z,u=Math.hypot(a,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(a,l),d=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(a,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:s.toLngLat(),zoom:d,pitch:f,bearing:p}}easeTo(e,n){var i;this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.b8},e)).animate||!e.essential&&o.prefersReducedMotion)&&(e.duration=0);const r=this._getTransformForUpdate(),s=r.zoom,a=r.bearing,l=r.pitch,c=r.padding,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,h="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:r.padding,p=t.P.convert(e.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),{center:g,zoom:y}=r.getConstrained(t.N.convert(e.center||m),null!==(i=e.zoom)&&void 0!==i?i:s);this._normalizeCenter(g,r);const _=r.project(m),v=r.project(g).sub(_),b=r.zoomScale(y-s);let x,w;e.around&&(x=t.N.convert(e.around),w=r.locationPoint(x));const S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||y!==s,this._rotating=this._rotating||a!==u,this._pitching=this._pitching||h!==l,this._padding=!r.isPaddingEqual(d),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,S),this.terrain&&this._prepareElevation(g),this._ease((i=>{if(this._zooming&&(r.zoom=t.y.number(s,y,i)),this._rotating&&(r.bearing=t.y.number(a,u,i)),this._pitching&&(r.pitch=t.y.number(l,h,i)),this._padding&&(r.interpolatePadding(c,d,i),f=r.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(i),x)r.setLocationAtPoint(x,w);else{const e=r.zoomScale(r.zoom-s),t=y>s?Math.min(2,b):Math.max(.5,b),n=Math.pow(t,1-i),o=r.unproject(_.add(v.mult(i*n)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,f)}this._applyUpdatedTransform(r),this._fireMoveEvents(n)}),(t=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n,t)}),e),this}_prepareEase(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,n||i.moving||this.fire(new t.k("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.k("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.k("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(n-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.elevation=t.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const t=e.getCameraPosition(),n=this.terrain.getElevationForLngLatZoom(t.lngLat,e.zoom);if(t.altitude<n){const i=this.calculateCameraOptionsFromTo(t.lngLat,n,e.center,e.elevation);return{pitch:i.pitch,zoom:i.zoom}}return{}}_applyUpdatedTransform(e){const t=[];if(this.terrain&&t.push((e=>this._elevateCameraIfInsideTerrain(e))),this.transformCameraUpdate&&t.push((e=>this.transformCameraUpdate(e))),!t.length)return;const n=e.clone();for(const i of t){const e=n.clone(),{center:t,zoom:r,pitch:o,bearing:s,elevation:a}=i(e);t&&(e.center=t),void 0!==r&&(e.zoom=r),void 0!==o&&(e.pitch=o),void 0!==s&&(e.bearing=s),void 0!==a&&(e.elevation=a),n.apply(e)}this.transform.apply(n)}_fireMoveEvents(e){this.fire(new t.k("move",e)),this._zooming&&this.fire(new t.k("zoom",e)),this._rotating&&this.fire(new t.k("rotate",e)),this._pitching&&this.fire(new t.k("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const i=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.k("zoomend",e)),r&&this.fire(new t.k("rotateend",e)),o&&this.fire(new t.k("pitchend",e)),this.fire(new t.k("moveend",e))}flyTo(e,n){var i;if(!e.essential&&o.prefersReducedMotion){const i=t.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.b8},e);const r=this._getTransformForUpdate(),s=r.zoom,a=r.bearing,l=r.pitch,c=r.padding,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,h="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:r.padding,p=t.P.convert(e.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),{center:g,zoom:y}=r.getConstrained(t.N.convert(e.center||m),null!==(i=e.zoom)&&void 0!==i?i:s);this._normalizeCenter(g,r);const _=r.zoomScale(y-s),v=r.project(m),b=r.project(g).sub(v);let x=e.curve;const w=Math.max(r.width,r.height),S=w/_,k=b.mag();if("minZoom"in e){const n=t.ac(Math.min(e.minZoom,s,y),r.minZoom,r.maxZoom),i=w/r.zoomScale(n-s);x=Math.sqrt(i/k*2)}const C=x*x;function E(e){const t=(S*S-w*w+(e?-1:1)*C*C*k*k)/(2*(e?S:w)*C*k);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function P(e){return(Math.exp(e)+Math.exp(-e))/2}const I=E(!1);let M=function(e){return P(I)/P(I+x*e)},A=function(e){return w*((P(I)*(T(t=I+x*e)/P(t))-T(I))/C)/k;var t},R=(E(!0)-I)/x;if(Math.abs(k)<1e-6||!isFinite(R)){if(Math.abs(w-S)<1e-6)return this.easeTo(e,n);const t=S<w?-1:1;R=Math.abs(Math.log(S/w))/x,A=()=>0,M=e=>Math.exp(t*x*e)}return e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==u,this._pitching=h!==l,this._padding=!r.isPaddingEqual(d),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(g),this._ease((i=>{const o=i*R,m=1/M(o);r.zoom=1===i?y:s+r.scaleZoom(m),this._rotating&&(r.bearing=t.y.number(a,u,i)),this._pitching&&(r.pitch=t.y.number(l,h,i)),this._padding&&(r.interpolatePadding(c,d,i),f=r.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(i);const _=1===i?g:r.unproject(v.add(b.mult(A(o))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,f),this._applyUpdatedTransform(r),this._fireMoveEvents(n)}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){var n;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}return e||null===(n=this.handlers)||void 0===n||n.stop(!1),this}_ease(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=o.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=t.b2(e,-180,180);const i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e}_normalizeCenter(e,t){if(!t.renderWorldCopies||t.lngRange)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(t.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const vr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class br{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr;this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=s.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=s.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){s.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString("AttributionControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const i in t){const n=t[i];if(n.used||n.usedForTerrain){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let i=n+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0}));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=s.create("div","maplibregl-ctrl");const t=s.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){s.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class wr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const i of n)if(i.id===e)return void(i.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Sr=t.Y([{name:"a_pos3d",type:"Int16",components:3}]);class kr extends t.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];const i={};for(const r of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n}))i[r.key]=!0,this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.posMatrix=new Float64Array(16),t.aP(r.posMatrix,0,t.X,0,t.X,0,1),this._tiles[r.key]=new le(r,this.tileSize));for(const t in this._tiles)i[t]||delete this._tiles[t]}freeRtt(e){for(const t in this._tiles){const n=this._tiles[t];(!e||n.tileID.equals(e)||n.tileID.isChildOf(e)||e.isChildOf(n.tileID))&&(n.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const n={};for(const i of this._renderableTilesKeys){const r=this._tiles[i].tileID;if(r.canonical.equals(e.canonical)){const r=e.clone();r.posMatrix=new Float64Array(16),t.aP(r.posMatrix,0,t.X,0,t.X,0,1),n[i]=r}else if(r.canonical.isChildOf(e.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const s=r.canonical.z-e.canonical.z,a=r.canonical.x-(r.canonical.x>>s<<s),l=r.canonical.y-(r.canonical.y>>s<<s),c=t.X>>s;t.aP(o.posMatrix,0,c,0,c,0,1),t.J(o.posMatrix,o.posMatrix,[-a*c,-l*c,0]),n[i]=o}else if(e.canonical.isChildOf(r.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const s=e.canonical.z-r.canonical.z,a=e.canonical.x-(e.canonical.x>>s<<s),l=e.canonical.y-(e.canonical.y>>s<<s),c=t.X>>s;t.aP(o.posMatrix,0,t.X,0,t.X,0,1),t.J(o.posMatrix,o.posMatrix,[a*c,l*c,0]),t.K(o.posMatrix,o.posMatrix,[1/2**s,1/2**s,0]),n[i]=o}}return n}getSourceTile(e,t){const n=this.sourceCache._source;let i=e.overscaledZ-this.deltaZoom;if(i>n.maxzoom&&(i=n.maxzoom),i<n.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(i).key);let r=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!r||!r.dem)&&t)for(;i>=n.minzoom&&(!r||!r.dem);)r=this.sourceCache.getTileByID(e.scaledTo(i--).key);return r}tilesAfterTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Object.values(this._tiles).filter((t=>t.timeAdded>=e))}}class Cr{constructor(e,t,n){this.painter=e,this.sourceCache=new kr(t),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.X;var o;if(!(n>=0&&n<r&&i>=0&&i<r))return 0;const s=this.getTerrainData(e),a=null===(o=s.tile)||void 0===o?void 0:o.dem;if(!a)return 0;const l=function(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e}([],[n/r*t.X,i/r*t.X],s.u_terrain_matrix),c=[l[0]*a.dim,l[1]*a.dim],u=Math.floor(c[0]),h=Math.floor(c[1]),d=c[0]-u,p=c[1]-h;return a.get(u,h)*(1-d)*(1-p)+a.get(u+1,h)*d*(1-p)+a.get(u,h+1)*(1-d)*p+a.get(u+1,h+1)*d*p}getElevationForLngLatZoom(e,n){if(!t.ba(n,e.wrap()))return 0;const{tileID:i,mercatorX:r,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(e,n);return this.getElevation(i,r%t.X,o%t.X,t.X)}getElevation(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.X;return this.getDEMElevation(e,n,i,r)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,n=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new x(e,n,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new x(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.an([])}const n=this.sourceCache.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const e=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new x(e,n.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),n.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const i=n&&n+n.tileID.key+e.key;if(i&&!this._demMatrixCache[i]){const i=this.sourceCache.sourceCache._source.maxzoom;let r=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=i?r=e.canonical.z-i:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>r<<r),s=e.canonical.y-(e.canonical.y>>r<<r),a=t.bb(new Float64Array(16),[1/(t.X<<r),1/(t.X<<r),0]);t.J(a,a,[o*t.X,s*t.X,0]),this._demMatrixCache[e.key]={matrix:a,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:i?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(e){const t=this.painter,n=t.width/devicePixelRatio,i=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===i||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new x(t.context,{width:n,height:i,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new x(t.context,{width:n,height:i,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(n,i,!0,!1),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,n,i))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,o=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,o+=4)n[o+0]=255&e,n[o+1]=255&t,n[o+2]=e>>8<<4|t>>8,n[o+3]=0;const i=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),r=new x(e,i,e.gl.RGBA,{premultiply:!1});return r.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=r,r}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const n=new Uint8Array(4),i=this.painter.context,r=i.gl,o=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),s=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),a=Math.round(this.painter.height/devicePixelRatio);i.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),r.readPixels(o,a-s-1,1,1,r.RGBA,r.UNSIGNED_BYTE,n),i.bindFramebuffer.set(null);const l=n[0]+(n[2]>>4<<8),c=n[1]+((15&n[2])<<8),u=this.coordsIndex[255-n[3]],h=u&&this.sourceCache.getTileByID(u);if(!h)return null;const d=this._coordsTextureSize,p=(1<<h.tileID.canonical.z)*d;return new t.Z((h.tileID.canonical.x*d+l)/p+h.tileID.wrap,(h.tileID.canonical.y*d+c)/p,this.getElevation(h.tileID,l,c,d))}depthAtPoint(e){const t=new Uint8Array(4),n=this.painter.context,i=n.gl;return n.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),i.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,i.RGBA,i.UNSIGNED_BYTE,t),n.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,n=new t.bc,i=new t.aX,r=this.meshSize,o=t.X/r,s=r*r;for(let t=0;t<=r;t++)for(let e=0;e<=r;e++)n.emplaceBack(e*o,t*o,0);for(let t=0;t<s;t+=r+1)for(let e=0;e<r;e++)i.emplaceBack(e+t,r+e+t+1,r+e+t+2),i.emplaceBack(e+t,r+e+t+2,e+t+1);const a=n.length,l=a+2*(r+1);for(const h of[0,1])for(let e=0;e<=r;e++)for(const i of[0,1])n.emplaceBack(e*o,h*t.X,i);for(let t=0;t<2*r;t+=2)i.emplaceBack(l+t,l+t+1,l+t+3),i.emplaceBack(l+t,l+t+3,l+t+2),i.emplaceBack(a+t,a+t+3,a+t+1),i.emplaceBack(a+t,a+t+2,a+t+3);const c=n.length,u=c+2*(r+1);for(const h of[0,1])for(let e=0;e<=r;e++)for(const i of[0,1])n.emplaceBack(h*t.X,e*o,i);for(let t=0;t<2*r;t+=2)i.emplaceBack(c+t,c+t+1,c+t+3),i.emplaceBack(c+t,c+t+3,c+t+2),i.emplaceBack(u+t,u+t+3,u+t+1),i.emplaceBack(u+t,u+t+2,u+t+3);return this._mesh=new di(e.createVertexBuffer(n,Sr.members),e.createIndexBuffer(i),t.a0.simpleSegment(0,0,n.length,i.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*t.bd/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,t){var n;const{tileID:i}=this._getOverscaledTileIDFromLngLatZoom(e,t);return null!==(n=this.getMinMaxElevation(i).minElevation)&&void 0!==n?n:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,n={minElevation:null,maxElevation:null};return t&&t.dem&&(n.minElevation=t.dem.min*this.exaggeration,n.maxElevation=t.dem.max*this.exaggeration),n}_getOverscaledTileIDFromLngLatZoom(e,n){const i=t.Z.fromLngLat(e.wrap()),r=(1<<n)*t.X,o=i.x*r,s=i.y*r,a=Math.floor(o/t.X),l=Math.floor(s/t.X);return{tileID:new t.S(n,0,n,a,l),mercatorX:o,mercatorY:s}}}class Er{constructor(e,t,n){this._context=e,this._size=t,this._tileSize=n,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const t=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),n=new x(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return n.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),t.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),t.colorAttachment.set(n.texture),{id:e,fbo:t,texture:n,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((t=>e.id!==t)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((e=>!e.inUse))}}const Tr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Pr{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new Er(e.context,30,t.sourceCache.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((n=>!e._layers[n].isHidden(t))),this._coordsDescendingInv={};for(const n in e.sourceCaches){this._coordsDescendingInv[n]={};const t=e.sourceCaches[n].getVisibleCoordinates();for(const e of t){const t=this.terrain.sourceCache.getTerrainCoords(e);for(const e in t)this._coordsDescendingInv[n][e]||(this._coordsDescendingInv[n][e]=[]),this._coordsDescendingInv[n][e].push(t[e])}}this._coordsDescendingInvStr={};for(const n of e._order){const t=e._layers[n],i=t.source;if(Tr[t.type]&&!this._coordsDescendingInvStr[i]){this._coordsDescendingInvStr[i]={};for(const e in this._coordsDescendingInv[i])this._coordsDescendingInvStr[i][e]=this._coordsDescendingInv[i][e].map((e=>e.key)).sort().join()}}for(const n of this._renderableTiles)for(const e in this._coordsDescendingInvStr){const t=this._coordsDescendingInvStr[e][n.tileID.key];t&&t!==n.rttCoords[e]&&(n.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const n=e.type,i=this.painter,r=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Tr[n]&&(this._prevType&&Tr[this._prevType]||this._stacks.push([]),this._prevType=n,this._stacks[this._stacks.length-1].push(e.id),!r))return!0;if(Tr[this._prevType]||Tr[n]&&r){this._prevType=n;const e=this._stacks.length-1,r=this._stacks[e]||[];for(const n of this._renderableTiles){if(this.pool.isFull()&&(hi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(n),n.rtt[e]){const t=this.pool.getObjectForId(n.rtt[e].id);if(t.stamp===n.rtt[e].stamp){this.pool.useObject(t);continue}}const o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),n.rtt[e]={id:o.id,stamp:o.stamp},i.context.bindFramebuffer.set(o.fbo.framebuffer),i.context.clear({color:t.aM.transparent,stencil:0}),i.currentStencilSource=void 0;for(let e=0;e<r.length;e++){const t=i.style._layers[r[e]],s=t.source?this._coordsDescendingInv[t.source][n.tileID.key]:[n.tileID];i.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),i._renderTileClippingMasks(t,s),i.renderLayer(i,i.style.sourceCaches[t.source],t,s),t.source&&(n.rttCoords[t.source]=this._coordsDescendingInvStr[t.source][n.tileID.key])}}return hi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Tr[n]}return!1}}const Ir={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Mr=n,Ar={hash:!1,interactive:!0,bearingSnap:7,attributionControl:vr,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Rr=e=>{e.touchstart=e.dragStart,e.touchmoveWindow=e.dragMove,e.touchend=e.dragEnd},zr={showCompass:!0,showZoom:!0,visualizePitch:!1};class Lr{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mousedown=e=>{this.startMouse(t.e({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),s.mousePos(this.element,e)),s.addEventListener(window,"mousemove",this.mousemove),s.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=e=>{this.moveMouse(e,s.mousePos(this.element,e))},this.mouseup=e=>{this.mouseRotate.dragEnd(e),this.mousePitch&&this.mousePitch.dragEnd(e),this.offTemp()},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=s.touchPos(this.element,e.targetTouches)[0],this.startTouch(e,this._startPos),s.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),s.addEventListener(window,"touchend",this.touchend))},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=s.touchPos(this.element,e.targetTouches)[0],this.moveTouch(e,this._lastPos))},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const r=e.dragRotate._mouseRotate.getClickTolerance(),o=e.dragRotate._mousePitch.getClickTolerance();this.element=n,this.mouseRotate=Zi({clickTolerance:r,enable:!0}),this.touchRotate=(e=>{let{enable:t,clickTolerance:n,bearingDegreesPerPixelMoved:i=.8}=e;const r=new qi;return new ji({clickTolerance:n,move:(e,t)=>({bearingDelta:(t.x-e.x)*i}),moveStateManager:r,enable:t,assignEvents:Rr})})({clickTolerance:r,enable:!0}),this.map=e,i&&(this.mousePitch=Hi({clickTolerance:o,enable:!0}),this.touchPitch=(e=>{let{enable:t,clickTolerance:n,pitchDegreesPerPixelMoved:i=-.5}=e;const r=new qi;return new ji({clickTolerance:n,move:(e,t)=>({pitchDelta:(t.y-e.y)*i}),moveStateManager:r,enable:t,assignEvents:Rr})})({clickTolerance:o,enable:!0})),s.addEventListener(n,"mousedown",this.mousedown),s.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),s.addEventListener(n,"touchcancel",this.reset)}startMouse(e,t){this.mouseRotate.dragStart(e,t),this.mousePitch&&this.mousePitch.dragStart(e,t),s.disableDrag()}startTouch(e,t){this.touchRotate.dragStart(e,t),this.touchPitch&&this.touchPitch.dragStart(e,t),s.disableDrag()}moveMouse(e,t){const n=this.map,{bearingDelta:i}=this.mouseRotate.dragMove(e,t)||{};if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const{pitchDelta:i}=this.mousePitch.dragMove(e,t)||{};i&&n.setPitch(n.getPitch()+i)}}moveTouch(e,t){const n=this.map,{bearingDelta:i}=this.touchRotate.dragMove(e,t)||{};if(i&&n.setBearing(n.getBearing()+i),this.touchPitch){const{pitchDelta:i}=this.touchPitch.dragMove(e,t)||{};i&&n.setPitch(n.getPitch()+i)}}off(){const e=this.element;s.removeEventListener(e,"mousedown",this.mousedown),s.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),s.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),s.removeEventListener(window,"touchend",this.touchend),s.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){s.enableDrag(),s.removeEventListener(window,"mousemove",this.mousemove),s.removeEventListener(window,"mouseup",this.mouseup),s.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),s.removeEventListener(window,"touchend",this.touchend)}}let Or;function Dr(e,n,i){const r=new t.N(e.lng,e.lat);if(e=new t.N(e.lng,e.lat),n){const r=new t.N(e.lng-360,e.lat),o=new t.N(e.lng+360,e.lat),s=i.locationPoint(e).distSqr(n);i.locationPoint(r).distSqr(n)<s?e=r:i.locationPoint(o).distSqr(n)<s&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e.lng!==r.lng&&i.locationPoint(e).y>i.height/2-i.getHorizon()?e:r}const Fr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Nr(e,t,n){const i=e.classList;for(const r in Fr)i.remove("maplibregl-".concat(n,"-anchor-").concat(r));i.add("maplibregl-".concat(n,"-anchor-").concat(t))}class Br extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()},this._onMapClick=e=>{const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},this._update=e=>{var t;if(!this._map)return;const n=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!n)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Dr(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let i="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?i="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(i="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));let r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX(".concat(this._map.getPitch(),"deg)")),this._subpixelPositioning||e&&"moveend"!==e.type||(this._pos=this._pos.round()),s.setTransform(this._element,"".concat(Fr[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(r," ").concat(i)),o.frameAsync(new AbortController).then((()=>{this._updateOpacity(e&&"moveend"===e.type)})).catch((()=>{}))},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.k("dragstart"))),this.fire(new t.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.k("dragend")),this._state="inactive"},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=s.create("div");const n=s.createNS("http://www.w3.org/2000/svg","svg"),i=41,r=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height","".concat(i,"px")),n.setAttributeNS(null,"width","".concat(r,"px")),n.setAttributeNS(null,"viewBox","0 0 ".concat(r," ").concat(i));const o=s.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const a=s.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");const l=s.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=s.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=s.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=s.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=s.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=s.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=s.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=s.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=s.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=s.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),a.appendChild(l),a.appendChild(u),a.appendChild(d),a.appendChild(f),a.appendChild(m),n.appendChild(a),n.setAttributeNS(null,"height",i*this._scale+"px"),n.setAttributeNS(null,"width",r*this._scale+"px"),this._element.appendChild(n),this._offset=t.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),Nr(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),s.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,i=Math.abs(n)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-n+i)],"bottom-right":[-i,-1*(t-n+i)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var n,i;if(!(null===(n=this._map)||void 0===n?void 0:n.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const r=this._map,o=r.terrain.depthAtPoint(this._pos),s=r.terrain.getElevationForLngLatZoom(this._lngLat,r.transform.tileZoom);if(r.transform.lngLatToCameraDepth(this._lngLat,s)-o<.006)return void(this._element.style.opacity=this._opacity);const a=-this._offset.y/r.transform._pixelPerMeter,l=Math.sin(r.getPitch()*Math.PI/180)*a,c=r.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),u=r.transform.lngLatToCameraDepth(this._lngLat,s+l)-c>.006;(null===(i=this._popup)||void 0===i?void 0:i.isOpen())&&u&&this._popup.remove(),this._element.style.opacity=u?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return void 0===e&&void 0===t&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const jr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Vr=0,Ur=!1;const qr={maxWidth:100,unit:"metric"};function Gr(e,t,n){const i=n&&n.maxWidth||100,r=e._container.clientHeight/2,o=e.unproject([0,r]),s=e.unproject([i,r]),a=o.distanceTo(s);if(n&&"imperial"===n.unit){const n=3.2808*a;n>5280?Zr(t,i,n/5280,e._getUIString("ScaleControl.Miles")):Zr(t,i,n,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Zr(t,i,a/1852,e._getUIString("ScaleControl.NauticalMiles")):a>=1e3?Zr(t,i,a/1e3,e._getUIString("ScaleControl.Kilometers")):Zr(t,i,a,e._getUIString("ScaleControl.Meters"))}function Zr(e,t,n,i){const r=function(e){const t=Math.pow(10,"".concat(Math.floor(e)).length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n);e.style.width=t*(r/n)+"px",e.innerHTML="".concat(r,"&nbsp;").concat(i)}const Hr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Wr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Kr(e){if(e){if("number"==typeof e){const n=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(n,n),"top-right":new t.P(-n,n),bottom:new t.P(0,-e),"bottom-left":new t.P(n,-n),"bottom-right":new t.P(-n,-n),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const n=t.P.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return Kr(new t.P(0,0))}const Xr=n;e.AJAXError=t.bg,e.Evented=t.E,e.LngLat=t.N,e.MercatorCoordinate=t.Z,e.Point=t.P,e.addProtocol=t.bh,e.config=t.a,e.removeProtocol=t.bi,e.AttributionControl=br,e.BoxZoomHandler=Oi,e.CanvasSource=te,e.CooperativeGesturesHandler=pr,e.DoubleClickZoomHandler=ar,e.DragPanHandler=ur,e.DragRotateHandler=hr,e.EdgeInsets=gi,e.FullscreenControl=class extends t.E{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=s.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){s.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=s.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);s.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},e.GeoJSONSource=$,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const n=new t.N(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.e({bearing:r},this.options.fitBoundsOptions),s=H.fromLngLat(n,i);this._map.fitBounds(s,o,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const n=new t.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Ur)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=s.create("button","maplibregl-ctrl-geolocate",this._container),s.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Br({element:this._dotElement}),this._circleElement=s.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Br({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.k("trackuserlocationend")),this.fire(new t.k("userlocationlostfocus")))}))}},this.options=t.e({},jr,e)}onAdd(e){return this._map=e,this._container=s.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return t._(this,arguments,void 0,(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){if(void 0!==Or&&!e)return Or;if(void 0===window.navigator.permissions)return Or=!!window.navigator.geolocation,Or;try{const e=yield window.navigator.permissions.query({name:"geolocation"});Or="denied"!==e.state}catch(e){Or=!!window.navigator.geolocation}return Or}()}))}().then((e=>this._finishSetupUI(e))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),s.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vr=0,Ur=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}}_updateCircleRadius(){const e=this._map.getBounds(),t=e.getSouthEast(),n=e.getNorthEast(),i=t.distanceTo(n),r=Math.ceil(this._accuracy/(i/this._map._container.clientHeight)*2);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vr--,Ur=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.k("trackuserlocationstart")),this.fire(new t.k("userlocationfocus"));break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vr++,Vr>1?(e={maximumAge:6e5,timeout:0},Ur=!0):(e=this.options.positionOptions,Ur=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},e.Hash=bi,e.ImageSource=Q,e.KeyboardHandler=ir,e.LngLatBounds=H,e.LogoControl=xr,e.Map=class extends _r{constructor(e){t.be.mark(t.bf.create);const n=Object.assign(Object.assign({},Ar),e);if(null!=n.minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=n.maxPitch&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new _i(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new wr,this._controls=[],this._mapId=t.a4(),this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new t.k("webglcontextlost",{originalEvent:e}))},this._contextRestored=e=>{this._setupPainter(),this.resize(),this._update(),this.fire(new t.k("webglcontextrestored",{originalEvent:e}))},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=!0===n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=!0===n.preserveDrawingBuffer,this._antialias=!0===n.antialias,this._trackResize=!0===n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=!0===n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=!0===n.crossSourceCollisions,this._collectResourceTiming=!0===n.collectResourceTiming,this._locale=Object.assign(Object.assign({},Ir),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===n.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=p.addThrottleControl((()=>this.isMoving())),this._requestManager=new f(n.transformRequest),"string"==typeof n.container){if(this._container=document.getElementById(n.container),!this._container)throw new Error("Container '".concat(n.container,"' not found."))}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;const t=vi((e=>{this._trackResize&&!this._removed&&this.resize(e)._update()}),50);this._resizeObserver=new ResizeObserver((n=>{e?t(n):e=!0})),this._resizeObserver.observe(this._container)}this.handlers=new yr(this,n),this._hash=n.hash&&new bi("string"==typeof n.hash&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,t.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new br("boolean"==typeof n.attributionControl?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new xr,n.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.k("".concat(e.dataType,"data"),e))})),this.on("dataloading",(e=>{this.fire(new t.k("".concat(e.dataType,"dataloading"),e))})),this.on("dataabort",(e=>{this.fire(new t.k("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,n,i){return null==i&&this.terrain&&(i=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(e,t,n,i)}resize(e){var n;const i=this._containerDimensions(),r=i[0],o=i[1],s=this._getClampedPixelRatio(r,o);if(this._resizeCanvas(r,o,s),this.painter.resize(r,o,s),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const t=this._getClampedPixelRatio(r,o);this._resizeCanvas(r,o,t),this.painter.resize(r,o,t)}this.transform.resize(r,o),null===(n=this._requestedCameraState)||void 0===n||n.resize(r,o);const a=!this._moving;return a&&(this.stop(),this.fire(new t.k("movestart",e)).fire(new t.k("move",e))),this.fire(new t.k("resize",e)),a&&this.fire(new t.k("moveend",e)),this}_getClampedPixelRatio(e,t){const{0:n,1:i}=this._maxCanvasSize,r=this.getPixelRatio(),o=e*r,s=t*r;return Math.min(o>n?n/o:1,s>i?i/s:1)*r}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(H.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(e){return this.transform.locationPoint(t.N.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.pointLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let i=!1;const r=r=>{const o=this.getLayer(t)?this.queryRenderedFeatures(r.point,{layers:[t]}):[];o.length?i||(i=!0,n.call(this,new Ii(e,this,r.originalEvent,{features:o}))):i=!1};return{layer:t,listener:n,delegates:{mousemove:r,mouseout:()=>{i=!1}}}}if("mouseleave"===e||"mouseout"===e){let i=!1;const r=r=>{(this.getLayer(t)?this.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?i=!0:i&&(i=!1,n.call(this,new Ii(e,this,r.originalEvent)))},o=t=>{i&&(i=!1,n.call(this,new Ii(e,this,t.originalEvent)))};return{layer:t,listener:n,delegates:{mousemove:r,mouseout:o}}}{const i=e=>{const i=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];i.length&&(e.features=i,n.call(this,e),delete e.features)};return{layer:t,listener:n,delegates:{[e]:i}}}}on(e,t,n){if(void 0===n)return super.on(e,t);const i=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(i);for(const r in i.delegates)this.on(r,i.delegates[r]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);const i=this._createDelegatedListener(e,t,n);for(const r in i.delegates)this.once(r,i.delegates[r]);return this}off(e,t,n){return void 0===n?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(i=>{const r=this._delegatedListeners[e];for(let e=0;e<r.length;e++){const i=r[e];if(i.layer===t&&i.listener===n){for(const e in i.delegates)this.off(e,i.delegates[e]);return r.splice(e,1),this}}})(),this)}queryRenderedFeatures(e,n){if(!this.style)return[];let i;const r=e instanceof t.P||Array.isArray(e),o=r?e:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(r?{}:e)||{},o instanceof t.P||"number"==typeof o[0])i=[t.P.convert(o)];else{const e=t.P.convert(o[0]),n=t.P.convert(o[1]);i=[e,new t.P(n.x,e.y),n,new t.P(e.x,n.y),e]}return this.style.queryRenderedFeatures(i,n,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,n){return!1!==(n=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}_updateStyle(e,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(e,t)));const n=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new ht(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,n):this.style.loadJSON(e,t,n),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ht(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const i=this._requestManager.transformRequest(e,"Style");t.h(i,new AbortController).then((e=>{this._updateDiff(e.data,n)})).catch((e=>{e&&this.fire(new t.j(e))}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e,n)&&this._update(!0)}catch(i){t.w("Unable to perform style diff: ".concat(i.message||i.error||i,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.j(new Error("There is no source with ID '".concat(e,"'"))))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const n=this.style.sourceCaches[e.source];if(!n)throw new Error("cannot load terrain, because there exists no source with ID: ".concat(e.source));null===this.terrain&&n.reload();for(const i in this.style._layers){const n=this.style._layers[i];"hillshade"===n.type&&n.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Cr(this.painter,n,e),this.painter.renderToTexture=new Pr(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=t=>{"style"===t.dataType?this.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new t.k("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{pixelRatio:r=1,sdf:s=!1,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h}=i;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||t.b(n))){if(void 0===n.width||void 0===n.height)return this.fire(new t.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:i,height:o,data:d}=n,p=n;return this.style.addImage(e,{data:new t.R({width:i,height:o},new Uint8Array(d)),pixelRatio:r,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:s,version:0,userImage:p}),p.onAdd&&p.onAdd(this,e),this}}{const{width:i,height:d,data:p}=o.getImageData(n);this.style.addImage(e,{data:new t.R({width:i,height:d},p),pixelRatio:r,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:s,version:0})}}updateImage(e,n){const i=this.style.getImage(e);if(!i)return this.fire(new t.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof HTMLImageElement||t.b(n)?o.getImageData(n):n,{width:s,height:a,data:l}=r;if(void 0===s||void 0===a)return this.fire(new t.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(s!==i.data.width||a!==i.data.height)return this.fire(new t.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(n instanceof HTMLImageElement||t.b(n));return i.data.replace(l,c),this.style.updateImage(e,i),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.j(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e){return p.getImage(this._requestManager.transformRequest(e,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,i),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,i),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,n,(e=>{e||this._update(!0)})),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,(e=>{e||this._update(!0)})),this}setLight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(e){return this._lazyInitEmptyStyle(),this.style.setSky(e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=s.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=s.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const n=this._containerDimensions(),i=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],i);const r=this._controlContainer=s.create("div","maplibregl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{o[e]=s.create("div","maplibregl-ctrl-".concat(e," "),r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,t,n){this._canvas.width=Math.floor(n*e),this._canvas.height=Math.floor(n*t),this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(t,"px")}_setupPainter(){const e={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",(n=>{t={requestedAttributes:e},n&&(t.statusMessage=n.statusMessage,t.type=n.type)}),{once:!0});const n=this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e);if(!n){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new pi(n,this.transform),a.testSupport(n)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let i=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,r=o.now();this.style.zoomHistory.update(e,r);const s=new t.z(e,{now:r,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=s.crossFadingFactor();1===a&&a===this._crossFadingFactor||(i=!0,this._crossFadingFactor=a),this.style.update(s)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new t.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.be.mark(t.bf.load),this.fire(new t.k("load"))),this.style&&(this.style.hasTransitions()||i)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const r=this._sourcesDirty||this._styleDirty||this._placementDirty;return r||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.k("idle")),!this._loaded||this._fullyLoaded||r||(this._fullyLoaded=!0,t.be.mark(t.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),p.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==n?void 0:n.loseContext)&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),s.remove(this._canvasContainer),s.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),t.be.clearMetrics(),this._removed=!0,this.fire(new t.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((e=>{t.be.frame(e),this._frameRequest=null,this._render(e)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return Mr}getCameraTargetElevation(){return this.transform.elevation}},e.MapMouseEvent=Ii,e.MapTouchEvent=Mi,e.MapWheelEvent=Ai,e.Marker=Br,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._compassIcon.style.transform=e},this._setButtonTitle=(e,t)=>{const n=this._map._getUIString("NavigationControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)},this.options=t.e({},zr,e),this._container=s.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),s.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),s.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=s.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Lr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){s.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const n=s.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},e.Popup=class extends t.E{constructor(e){super(),this.remove=()=>(this._content&&s.remove(this._content),this._container&&(s.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new t.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var t;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=s.create("div","maplibregl-popup",this._map.getContainer()),this._tip=s.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Dr(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._trackPointer&&!e)return;const n=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let i=this.options.anchor;const r=Kr(this.options.offset);if(!i){const e=this._container.offsetWidth,t=this._container.offsetHeight;let o;o=n.y+r.bottom.y<t?["top"]:n.y>this._map.transform.height-t?["bottom"]:[],n.x<e/2?o.push("left"):n.x>this._map.transform.width-e/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}let o=n.add(r[i]);this.options.subpixelPositioning||(o=o.round()),s.setTransform(this._container,"".concat(Fr[i]," translate(").concat(o.x,"px,").concat(o.y,"px)")),Nr(this._container,i,"popup")},this._onClose=()=>{this.remove()},this.options=t.e(Object.create(Hr),e)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.N.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),n=document.createElement("body");let i;for(n.innerHTML=e;i=n.firstChild,i;)t.appendChild(i);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=s.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._container&&this._container.classList.add(e),this}removeClassName(e){return this._container&&this._container.classList.remove(e),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e}_createCloseButton(){this.options.closeButton&&(this._closeButton=s.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(Wr);e&&e.focus()}},e.RasterDEMTileSource=Y,e.RasterTileSource=X,e.ScaleControl=class{constructor(e){this._onMove=()=>{Gr(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Gr(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},qr),e)}getDefaultPosition(){return"bottom-left"}onAdd(e){return this._map=e,this._container=s.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},e.ScrollZoomHandler=sr,e.Style=ht,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=e}onAdd(e){return this._map=e,this._container=s.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=s.create("button","maplibregl-ctrl-terrain",this._container),s.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){s.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},e.TwoFingersTouchPitchHandler=tr,e.TwoFingersTouchRotateHandler=Qi,e.TwoFingersTouchZoomHandler=$i,e.TwoFingersTouchZoomRotateHandler=dr,e.VectorTileSource=K,e.VideoSource=ee,e.addSourceType=(e,n)=>t._(void 0,void 0,void 0,(function*(){if(ie(e))throw new Error('A source type called "'.concat(e,'" already exists.'));((e,t)=>{ne[e]=t})(e,n)})),e.clearPrewarmedResources=function(){const e=F;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(L),F=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.getMaxParallelImageRequests=function(){return t.a.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return ae().getRTLTextPluginStatus()},e.getVersion=function(){return Xr},e.getWorkerCount=function(){return O.workerCount},e.getWorkerUrl=function(){return t.a.WORKER_URL},e.importScriptInWorkers=function(e){return V().broadcast("IS",e)},e.prewarm=function(){B().acquire(L)},e.setMaxParallelImageRequests=function(e){t.a.MAX_PARALLEL_IMAGE_REQUESTS=e},e.setRTLTextPlugin=function(e,t){return ae().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){O.workerCount=e},e.setWorkerUrl=function(e){t.a.WORKER_URL=e}})),e}()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>i[e]));return s.default=()=>i,n.d(o,s),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{exclude:()=>Xb,extract:()=>qb,parse:()=>Gb,parseUrl:()=>Hb,pick:()=>Kb,stringify:()=>Zb,stringifyUrl:()=>Wb});var t=n(791),i=n.t(t,2);function r(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var o="function"===typeof Symbol&&Symbol.observable||"@@observable",s=function(){return Math.random().toString(36).substring(7).split("").join(".")},a={INIT:"@@redux/INIT"+s(),REPLACE:"@@redux/REPLACE"+s(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+s()}};function l(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var i;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(r(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(r(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(r(2));var s=e,u=t,h=[],d=h,p=!1;function f(){d===h&&(d=h.slice())}function m(){if(p)throw new Error(r(3));return u}function g(e){if("function"!==typeof e)throw new Error(r(4));if(p)throw new Error(r(5));var t=!0;return f(),d.push(e),function(){if(t){if(p)throw new Error(r(6));t=!1,f();var n=d.indexOf(e);d.splice(n,1),h=null}}}function y(e){if(!l(e))throw new Error(r(7));if("undefined"===typeof e.type)throw new Error(r(8));if(p)throw new Error(r(9));try{p=!0,u=s(u,e)}finally{p=!1}for(var t=h=d,n=0;n<t.length;n++){(0,t[n])()}return e}return y({type:a.INIT}),(i={dispatch:y,subscribe:g,getState:m,replaceReducer:function(e){if("function"!==typeof e)throw new Error(r(10));s=e,y({type:a.REPLACE})}})[o]=function(){var e,t=g;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(r(11));function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[o]=function(){return this},e},i}var u=n(248),h=n(327),d=n(164);let p=function(e){e()};const f=()=>p,m=Symbol.for("react-redux-context-".concat(t.version)),g=globalThis;const y=new Proxy({},new Proxy({},{get(e,n){const i=function(){let e=g[m];return e||(e=(0,t.createContext)(null),g[m]=e),e}();return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Reflect[n](i,...r)}}}));function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return function(){return(0,t.useContext)(e)}}const v=_();let b=()=>{throw new Error("uSES not initialized!")};const x=(e,t)=>e===t;function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;const n=e===y?v:_(e);return function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=x,stabilityCheck:o,noopCheck:s}="function"===typeof i?{equalityFn:i}:i;const{store:a,subscription:l,getServerState:c,stabilityCheck:u,noopCheck:h}=n(),d=((0,t.useRef)(!0),(0,t.useCallback)({[e.name]:t=>e(t)}[e.name],[e,u,o])),p=b(l.addNestedSub,a.getState,c||a.getState,d,r);return(0,t.useDebugValue)(p),p}}const S=w();n(110),n(441);const k={notify(){},get:()=>[]};function C(e,t){let n,i=k;function r(){s.onStateChange&&s.onStateChange()}function o(){n||(n=t?t.addNestedSub(r):e.subscribe(r),i=function(){const e=f();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let i=!0,r=n={callback:e,next:null,prev:n};return r.prev?r.prev.next=r:t=r,function(){i&&null!==t&&(i=!1,r.next?r.next.prev=r.prev:n=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}())}const s={addNestedSub:function(e){return o(),i.subscribe(e)},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:r,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,i.clear(),i=k)},getListeners:()=>i};return s}const E=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;let T=null;const P=function(e){let{store:n,context:i,children:r,serverState:o,stabilityCheck:s="once",noopCheck:a="once"}=e;const l=(0,t.useMemo)((()=>{const e=C(n);return{store:n,subscription:e,getServerState:o?()=>o:void 0,stabilityCheck:s,noopCheck:a}}),[n,o,s,a]),c=(0,t.useMemo)((()=>n.getState()),[n]);E((()=>{const{subscription:e}=l;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==n.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,c]);const u=i||y;return t.createElement(u.Provider,{value:l},r)};function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;const t=e===y?v:_(e);return function(){const{store:e}=t();return e}}const M=I();function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;const t=e===y?M:I(e);return function(){return t().dispatch}}const R=A();var z,L;z=h.useSyncExternalStoreWithSelector,b=z,(e=>{T=e})(u.useSyncExternalStore),L=d.unstable_batchedUpdates,p=L;var O=n(250);function D(e){e.stopPropagation()}const F=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},N="propertychange";const B=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function j(e,t){return e>t?1:e<t?-1:0}function V(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if("function"===typeof n){for(let r=1;r<i;++r){const i=e[r];if(i===t)return r;if(i<t)return n(t,e[r-1],i)>0?r-1:r}return i-1}if(n>0){for(let n=1;n<i;++n)if(e[n]<t)return n-1;return i-1}if(n<0){for(let n=1;n<i;++n)if(e[n]<=t)return n;return i-1}for(let r=1;r<i;++r){if(e[r]==t)return r;if(e[r]<t)return e[r-1]-t<t-e[r]?r-1:r}return i-1}function U(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let r=0;r<i;r++)e[e.length]=n[r]}function q(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function G(){return!0}function Z(){return!1}function H(){}function W(e){for(const t in e)delete e[t]}function K(e){let t;for(t in e)return!1;return!t}const X=class extends B{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t="string"===typeof e,n=t?e:e.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const r=t?new F(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});let a;n in o||(o[n]=0,s[n]=0),++o[n];for(let l=0,c=i.length;l<c;++l)if(a="handleEvent"in i[l]?i[l].handleEvent(r):i[l].call(this,r),!1===a||r.propagationStopped){a=!1;break}if(0===--o[n]){let e=s[n];for(delete s[n];e--;)this.removeEventListener(n,H);delete o[n]}return a}disposeInternal(){this.listeners_&&W(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const n=this.listeners_&&this.listeners_[e];if(n){const i=n.indexOf(t);-1!==i&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=H,++this.pendingRemovals_[e]):(n.splice(i,1),0===n.length&&delete this.listeners_[e]))}}},Y="change",$="contextmenu",J="click",Q="dblclick",ee="keydown",te="keypress",ne="touchmove",ie="wheel";function re(e,t,n,i,r){if(i&&i!==e&&(n=n.bind(i)),r){const i=n;n=function(){e.removeEventListener(t,n),i.apply(this,arguments)}}const o={target:e,type:t,listener:n};return e.addEventListener(t,n),o}function oe(e,t,n,i){return re(e,t,n,i,!0)}function se(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),W(e))}class ae extends X{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Y)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=re(this,e[r],t);return i}return re(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const i=e.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=oe(this,e[r],t)}else n=oe(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)le(n);else if(Array.isArray(e))for(let i=0,r=e.length;i<r;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}function le(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)se(e[t]);else se(e)}ae.prototype.on,ae.prototype.once,ae.prototype.un;const ce=ae;function ue(){throw new Error("Unimplemented abstract method.")}let he=0;function de(e){return e.ol_uid||(e.ol_uid=String(++he))}class pe extends F{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}const fe=class extends ce{constructor(e){super(),this.on,this.once,this.un,de(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let n;n="change:".concat(e),this.hasListener(n)&&this.dispatchEvent(new pe(n,e,t)),n=N,this.hasListener(n)&&this.dispatchEvent(new pe(n,e,t))}addChangeListener(e,t){this.addEventListener("change:".concat(e),t)}removeChangeListener(e,t){this.removeEventListener("change:".concat(e),t)}set(e,t,n){const i=this.values_||(this.values_={});if(n)i[e]=t;else{const n=i[e];i[e]=t,n!==t&&this.notify(e,n)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],K(this.values_)&&(this.values_=null),t||this.notify(e,n)}}},me={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class ge extends Error{constructor(e){const t=me[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const ye=ge,_e="add",ve="remove",be="length";class xe extends F{constructor(e,t,n){super(e),this.element=t,this.index=n}}const we=class extends fe{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(be)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new xe(_e,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new xe(ve,t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new xe(ve,n,e)),this.dispatchEvent(new xe(_e,t,e))}updateLength_(){this.set(be,this.array_.length)}assertUnique_(e,t){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==t)throw new ye(58)}};function Se(e,t){if(!e)throw new ye(t)}new Array(6);function ke(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function Ce(e,t,n,i,r,o,s,a){const l=Math.sin(o),c=Math.cos(o);return e[0]=i*c,e[1]=r*l,e[2]=-i*l,e[3]=r*c,e[4]=s*i*c-a*i*l+t,e[5]=s*r*l+a*r*c+n,e}function Ee(e,t){const n=(i=t)[0]*i[3]-i[1]*i[2];var i;Se(0!==n,32);const r=t[0],o=t[1],s=t[2],a=t[3],l=t[4],c=t[5];return e[0]=a/n,e[1]=-o/n,e[2]=-s/n,e[3]=r/n,e[4]=(s*c-a*l)/n,e[5]=-(r*c-o*l)/n,e}const Te={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Pe(e,t,n){let i,r;return i=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0,r=n<e[1]?e[1]-n:e[3]<n?n-e[3]:0,i*i+r*r}function Ie(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function Me(e,t){const n=e[0],i=e[1],r=e[2],o=e[3],s=t[0],a=t[1];let l=Te.UNKNOWN;return s<n?l|=Te.LEFT:s>r&&(l|=Te.RIGHT),a<i?l|=Te.BELOW:a>o&&(l|=Te.ABOVE),l===Te.UNKNOWN&&(l=Te.INTERSECTING),l}function Ae(e,t,n,i,r){return r?(r[0]=e,r[1]=t,r[2]=n,r[3]=i,r):[e,t,n,i]}function Re(e){return Ae(1/0,1/0,-1/0,-1/0,e)}function ze(e,t,n,i,r){return Oe(Re(r),e,t,n,i)}function Le(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function Oe(e,t,n,i,r){for(;n<i;n+=r)De(e,t[n],t[n+1]);return e}function De(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function Fe(e){return[e[0],e[1]]}function Ne(e){return[e[2],e[1]]}function Be(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function je(e,t,n,i,r){const[o,s,a,l,c,u,h,d]=function(e,t,n,i){const r=t*i[0]/2,o=t*i[1]/2,s=Math.cos(n),a=Math.sin(n),l=r*s,c=r*a,u=o*s,h=o*a,d=e[0],p=e[1];return[d-l+h,p-c-u,d-l-h,p-c+u,d+l-h,p+c+u,d+l+h,p+c-u,d-l+h,p-c-u]}(e,t,n,i);return Ae(Math.min(o,a,c,h),Math.min(s,l,u,d),Math.max(o,a,c,h),Math.max(s,l,u,d),r)}function Ve(e){return e[3]-e[1]}function Ue(e,t,n){const i=n||[1/0,1/0,-1/0,-1/0];return He(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):Re(i),i}function qe(e){return[e[0],e[3]]}function Ge(e){return[e[2],e[3]]}function Ze(e){return e[2]-e[0]}function He(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function We(e){return e[2]<e[0]||e[3]<e[1]}function Ke(e,t,n,i){if(We(e))return Re(n);let r=[];if(i>1){const t=e[2]-e[0],n=e[3]-e[1];for(let o=0;o<i;++o)r.push(e[0]+t*o/i,e[1],e[2],e[1]+n*o/i,e[2]-t*o/i,e[3],e[0],e[3]-n*o/i)}else r=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(r,r,2);const o=[],s=[];for(let a=0,l=r.length;a<l;a+=2)o.push(r[a]),s.push(r[a+1]);return function(e,t,n){return Ae(Math.min.apply(null,e),Math.min.apply(null,t),Math.max.apply(null,e),Math.max.apply(null,t),n)}(o,s,n)}function Xe(e,t,n){return Math.min(Math.max(e,t),n)}function Ye(e,t,n,i,r,o){const s=r-n,a=o-i;if(0!==s||0!==a){const l=((e-n)*s+(t-i)*a)/(s*s+a*a);l>1?(n=r,i=o):l>0&&(n+=s*l,i+=a*l)}return $e(e,t,n,i)}function $e(e,t,n,i){const r=n-e,o=i-t;return r*r+o*o}function Je(e,t){const n=e%t;return n*t<0?n+t:n}function Qe(e,t,n){return e+n*(t-e)}const et=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,tt=/^([a-z]*)$|^hsla?\(.*\)$/i;function nt(e){return"string"===typeof e?e:function(e){let t=e[0];t!=(0|t)&&(t=t+.5|0);let n=e[1];n!=(0|n)&&(n=n+.5|0);let i=e[2];i!=(0|i)&&(i=i+.5|0);const r=void 0===e[3]?1:Math.round(100*e[3])/100;return"rgba("+t+","+n+","+i+","+r+")"}(e)}function it(e){const t=document.createElement("div");if(t.style.color=e,""!==t.style.color){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}!function(){const e={};let t=0}();function rt(e){return e[0]=Xe(e[0]+.5|0,0,255),e[1]=Xe(e[1]+.5|0,0,255),e[2]=Xe(e[2]+.5|0,0,255),e[3]=Xe(e[3],0,1),e}class ot{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];0!==(3&e++)||n.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,n){const i=st(e,t,n);return i in this.cache_?this.cache_[i]:null}set(e,t,n,i){const r=st(e,t,n);this.cache_[r]=i,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function st(e,t,n){return t+":"+e+":"+(n?nt(n):"null")}const at=new ot,lt="opacity",ct="visible",ut="extent",ht="zIndex",dt="maxResolution",pt="minResolution",ft="maxZoom",mt="minZoom",gt="source",yt="map";const _t=class extends fe{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);"object"===typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t[lt]=void 0!==e.opacity?e.opacity:1,Se("number"===typeof t[lt],64),t[ct]=void 0===e.visible||e.visible,t[ht]=e.zIndex,t[dt]=void 0!==e.maxResolution?e.maxResolution:1/0,t[pt]=void 0!==e.minResolution?e.minResolution:0,t[mt]=void 0!==e.minZoom?e.minZoom:-1/0,t[ft]=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},n=this.getZIndex();return t.opacity=Xe(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==n||t.managed?n:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ue()}getLayerStatesArray(e){return ue()}getExtent(){return this.get(ut)}getMaxResolution(){return this.get(dt)}getMinResolution(){return this.get(pt)}getMinZoom(){return this.get(mt)}getMaxZoom(){return this.get(ft)}getOpacity(){return this.get(lt)}getSourceState(){return ue()}getVisible(){return this.get(ct)}getZIndex(){return this.get(ht)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ut,e)}setMaxResolution(e){this.set(dt,e)}setMinResolution(e){this.set(pt,e)}setMaxZoom(e){this.set(ft,e)}setMinZoom(e){this.set(mt,e)}setOpacity(e){Se("number"===typeof e,64),this.set(lt,e)}setVisible(e){this.set(ct,e)}setZIndex(e){this.set(ht,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},vt="precompose",bt="postcompose",xt="rendercomplete",wt=0,St=1,kt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Ct={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};const Et=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ct[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Tt=6378137,Pt=Math.PI*Tt,It=[-Pt,-Pt,Pt,Pt],Mt=[-180,-85,180,85],At=Tt*Math.log(Math.tan(Math.PI/2));class Rt extends Et{constructor(e){super({code:e,units:"m",extent:It,global:!0,worldExtent:Mt,getPointResolution:function(e,t){return e/Math.cosh(t[1]/Tt)}})}}const zt=[new Rt("EPSG:3857"),new Rt("EPSG:102100"),new Rt("EPSG:102113"),new Rt("EPSG:900913"),new Rt("http://www.opengis.net/def/crs/EPSG/0/3857"),new Rt("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Lt(e,t,n){const i=e.length;n=n>1?n:2,void 0===t&&(t=n>2?e.slice():new Array(i));for(let r=0;r<i;r+=n){t[r]=Pt*e[r]/180;let n=Tt*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));n>At?n=At:n<-At&&(n=-At),t[r+1]=n}return t}function Ot(e,t,n){const i=e.length;n=n>1?n:2,void 0===t&&(t=n>2?e.slice():new Array(i));for(let r=0;r<i;r+=n)t[r]=180*e[r]/Pt,t[r+1]=360*Math.atan(Math.exp(e[r+1]/Tt))/Math.PI-90;return t}const Dt=[-180,-90,180,90],Ft=6378137*Math.PI/180;class Nt extends Et{constructor(e,t){super({code:e,units:"degrees",extent:Dt,axisOrientation:t,global:!0,metersPerUnit:Ft,worldExtent:Dt})}}const Bt=[new Nt("CRS:84"),new Nt("EPSG:4326","neu"),new Nt("urn:ogc:def:crs:OGC:1.3:CRS84"),new Nt("urn:ogc:def:crs:OGC:2:84"),new Nt("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Nt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Nt("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let jt={};let Vt={};function Ut(e,t,n){const i=e.getCode(),r=t.getCode();i in Vt||(Vt[i]={}),Vt[i][r]=n}function qt(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function Gt(e,t){const n=Math.cos(t),i=Math.sin(t),r=e[0]*n-e[1]*i,o=e[1]*n+e[0]*i;return e[0]=r,e[1]=o,e}function Zt(e,t){if(t.canWrapX()){const n=Ze(t.getExtent()),i=function(e,t,n){const i=t.getExtent();let r=0;t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||Ze(i),r=Math.floor((e[0]-i[0])/n));return r}(e,t,n);i&&(e[0]-=i*n)}return e}const Ht={info:1,warn:2,error:3,none:4};let Wt=Ht.info;function Kt(){Wt>Ht.warn||console.warn(...arguments)}let Xt=!0;function Yt(e){Xt=!(void 0===e||e)}function $t(e,t){if(void 0!==t)for(let n=0,i=e.length;n<i;++n)t[n]=e[n];else t=e.slice();return t}function Jt(e,t){if(void 0!==t&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function Qt(e){!function(e,t){jt[e]=t}(e.getCode(),e),Ut(e,e,$t)}function en(e){return"string"===typeof e?jt[t=e]||jt[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:e||null;var t}function tn(e){!function(e){e.forEach(Qt)}(e),e.forEach((function(t){e.forEach((function(e){t!==e&&Ut(t,e,$t)}))}))}function nn(e,t){return e?"string"===typeof e?en(e):e:en(t)}function rn(e,t){return Yt(),ln(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")}function on(e,t){const n=ln(e,void 0!==t?t:"EPSG:3857","EPSG:4326"),i=n[0];return(i<-180||i>180)&&(n[0]=Je(i+180,360)-180),n}function sn(e,t){let n=function(e,t){let n;return e in Vt&&t in Vt[e]&&(n=Vt[e][t]),n}(e.getCode(),t.getCode());return n||(n=Jt),n}function an(e,t){return sn(en(e),en(t))}function ln(e,t,n){return an(t,n)(e,void 0,e.length)}function cn(e,t,n,i){return Ke(e,an(t,n),void 0,i)}let un=null;function hn(){return un}function dn(e,t){return un?ln(e,t,un):e}function pn(e,t){return un?ln(e,un,t):(Xt&&!qt(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Xt=!1,Kt("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function fn(e,t){return un?cn(e,un,t):e}function mn(e,t,n){return function(i,r,o,s,a){if(!i)return;if(!r&&!t)return i;const l=t?0:o[0]*r,c=t?0:o[1]*r,u=a?a[0]:0,h=a?a[1]:0;let d=e[0]+l/2+u,p=e[2]-l/2+u,f=e[1]+c/2+h,m=e[3]-c/2+h;d>p&&(d=(p+d)/2,p=d),f>m&&(f=(m+f)/2,m=f);let g=Xe(i[0],d,p),y=Xe(i[1],f,m);if(s&&n&&r){const e=30*r;g+=-e*Math.log(1+Math.max(0,d-i[0])/e)+e*Math.log(1+Math.max(0,i[0]-p)/e),y+=-e*Math.log(1+Math.max(0,f-i[1])/e)+e*Math.log(1+Math.max(0,i[1]-m)/e)}return[g,y]}}function gn(e){return e}function yn(e,t,n,i){const r=Ze(t)/n[0],o=Ve(t)/n[1];return i?Math.min(e,Math.max(r,o)):Math.min(e,Math.min(r,o))}function _n(e,t,n){let i=Math.min(e,t);return i*=Math.log(1+50*Math.max(0,e/t-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/e-1))/50+1),Xe(i,n/2,2*t)}function vn(e,t,n,i,r){return n=void 0===n||n,function(o,s,a,l){if(void 0!==o){const s=i?yn(e,i,a,r):e;return n&&l?_n(o,s,t):Xe(o,t,s)}}}function bn(e){if(void 0!==e)return 0}function xn(e){if(void 0!==e)return e}function wn(e){return e=e||5*Math.PI/180,function(t,n){return n?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}function Sn(e){return 1-function(e){return Math.pow(e,3)}(1-e)}function kn(e){return 3*e*e-2*e*e*e}function Cn(e){return e}!function(){var e,t,n;tn(zt),tn(Bt),e=zt,t=Lt,n=Ot,Bt.forEach((function(i){e.forEach((function(e){Ut(i,e,t),Ut(e,i,n)}))}))}();const En=[1,0,0,1,0,0];const Tn=class extends fe{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(e){let t,n,i,r=!1;return function(){const o=Array.prototype.slice.call(arguments);return r&&this===i&&q(o,n)||(r=!0,i=this,n=o,t=e.apply(this,arguments)),t}}((function(e,t,n){if(!n)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(t)}))}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ue()}closestPointXY(e,t,n,i){return ue()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ue()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Re(e),this.extentRevision_=this.getRevision()}return function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}(this.extent_,e)}rotate(e,t){ue()}scale(e,t,n){ue()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ue()}getType(){return ue()}applyTransform(e){ue()}intersectsExtent(e){return ue()}translate(e,t){ue()}transform(e,t){const n=en(e),i="tile-pixels"==n.getUnits()?function(e,i,r){const o=n.getExtent(),s=n.getWorldExtent(),a=Ve(s)/Ve(o);return Ce(En,s[0],s[3],a,-a,0,0,0),function(e,t,n,i,r,o){o=o||[];let s=0;for(let a=t;a<n;a+=i){const t=e[a],n=e[a+1];o[s++]=r[0]*t+r[2]*n+r[4],o[s++]=r[1]*t+r[3]*n+r[5]}o&&o.length!=s&&(o.length=s)}(e,0,e.length,r,En,i),an(n,t)(e,i,r)}:an(n,t);return this.applyTransform(i),this}};function Pn(e){let t;return"XY"==e?t=2:"XYZ"==e||"XYM"==e?t=3:"XYZM"==e&&(t=4),t}const In=class extends Tn{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return ze(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ue()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Pn(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ue()}setLayout(e,t,n){let i;if(e)i=Pn(e);else{for(let e=0;e<n;++e){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}i=t.length,e=function(e){let t;2==e?t="XY":3==e?t="XYZ":4==e&&(t="XYZM");return t}(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(e,t,n,i,r,o,s){s=s||[];const a=Math.cos(r),l=Math.sin(r),c=o[0],u=o[1];let h=0;for(let d=t;d<n;d+=i){const t=e[d]-c,n=e[d+1]-u;s[h++]=c+t*a-n*l,s[h++]=u+t*l+n*a;for(let r=d+2;r<d+i;++r)s[h++]=e[r]}s&&s.length!=h&&(s.length=h)}(n,0,n.length,i,e,t,n),this.changed()}}scale(e,t,n){void 0===t&&(t=e),n||(n=Be(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();!function(e,t,n,i,r,o,s,a){a=a||[];const l=s[0],c=s[1];let u=0;for(let h=t;h<n;h+=i){const t=e[h]-l,n=e[h+1]-c;a[u++]=l+r*t,a[u++]=c+o*n;for(let r=h+2;r<h+i;++r)a[u++]=e[r]}a&&a.length!=u&&(a.length=u)}(i,0,i.length,r,e,t,n,i),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(e,t,n,i,r,o,s){s=s||[];let a=0;for(let l=t;l<n;l+=i){s[a++]=e[l]+r,s[a++]=e[l+1]+o;for(let t=l+2;t<l+i;++t)s[a++]=e[t]}s&&s.length!=a&&(s.length=a)}(n,0,n.length,i,e,t,n),this.changed()}}};function Mn(e,t,n,i,r,o,s){const a=e[t],l=e[t+1],c=e[n]-a,u=e[n+1]-l;let h;if(0===c&&0===u)h=t;else{const d=((r-a)*c+(o-l)*u)/(c*c+u*u);if(d>1)h=n;else{if(d>0){for(let r=0;r<i;++r)s[r]=Qe(e[t+r],e[n+r],d);return void(s.length=i)}h=t}}for(let d=0;d<i;++d)s[d]=e[h+d];s.length=i}function An(e,t,n,i,r){let o=e[t],s=e[t+1];for(t+=i;t<n;t+=i){const n=e[t],i=e[t+1],a=$e(o,s,n,i);a>r&&(r=a),o=n,s=i}return r}function Rn(e,t,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];r=An(e,t,s,i,r),t=s}return r}function zn(e,t,n,i,r,o,s,a,l,c,u){if(t==n)return c;let h,d;if(0===r){if(d=$e(s,a,e[t],e[t+1]),d<c){for(h=0;h<i;++h)l[h]=e[t+h];return l.length=i,d}return c}u=u||[NaN,NaN];let p=t+i;for(;p<n;)if(Mn(e,p-i,p,i,s,a,u),d=$e(s,a,u[0],u[1]),d<c){for(c=d,h=0;h<i;++h)l[h]=u[h];l.length=i,p+=i}else p+=i*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(o&&(Mn(e,n-i,t,i,s,a,u),d=$e(s,a,u[0],u[1]),d<c)){for(c=d,h=0;h<i;++h)l[h]=u[h];l.length=i}return c}function Ln(e,t,n,i,r,o,s,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=n.length;h<d;++h){const d=n[h];c=zn(e,t,d,i,r,o,s,a,l,c,u),t=d}return c}function On(e,t,n,i){for(let r=0,o=n.length;r<o;++r){const o=n[r];for(let n=0;n<i;++n)e[t++]=o[n]}return t}function Dn(e,t,n,i,r){r=r||[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=On(e,t,n[s],i);r[o++]=a,t=a}return r.length=o,r}function Fn(e,t,n,i,r,o,s){const a=(n-t)/i;if(a<3){for(;t<n;t+=i)o[s++]=e[t],o[s++]=e[t+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,n-i];let u=0;for(;c.length>0;){const n=c.pop(),o=c.pop();let s=0;const a=e[o],h=e[o+1],d=e[n],p=e[n+1];for(let t=o+i;t<n;t+=i){const n=Ye(e[t],e[t+1],a,h,d,p);n>s&&(u=t,s=n)}s>r&&(l[(u-t)/i]=1,o+i<u&&c.push(o,u),u+i<n&&c.push(u,n))}for(let h=0;h<a;++h)l[h]&&(o[s++]=e[t+h*i],o[s++]=e[t+h*i+1]);return s}function Nn(e,t,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){const c=n[l];s=Fn(e,t,c,i,r,o,s),a.push(s),t=c}return s}function Bn(e,t){return t*Math.round(e/t)}function jn(e,t,n,i,r,o,s){if(t==n)return s;let a,l,c=Bn(e[t],r),u=Bn(e[t+1],r);t+=i,o[s++]=c,o[s++]=u;do{if(a=Bn(e[t],r),l=Bn(e[t+1],r),(t+=i)==n)return o[s++]=a,o[s++]=l,s}while(a==c&&l==u);for(;t<n;){const n=Bn(e[t],r),h=Bn(e[t+1],r);if(t+=i,n==a&&h==l)continue;const d=a-c,p=l-u,f=n-c,m=h-u;d*m==p*f&&(d<0&&f<d||d==f||d>0&&f>d)&&(p<0&&m<p||p==m||p>0&&m>p)?(a=n,l=h):(o[s++]=a,o[s++]=l,c=a,u=l,a=n,l=h)}return o[s++]=a,o[s++]=l,s}function Vn(e,t,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){const c=n[l];s=jn(e,t,c,i,r,o,s),a.push(s),t=c}return s}function Un(e,t,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=t;s<n;s+=i)r[o++]=e.slice(s,s+i);return r.length=o,r}function qn(e,t,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];r[o++]=Un(e,t,a,i,r[o]),t=a}return r.length=o,r}function Gn(e,t,n,i){let r=0,o=e[n-i],s=e[n-i+1];for(;t<n;t+=i){const n=e[t],i=e[t+1];r+=s*n-o*i,o=n,s=i}return r/2}function Zn(e,t,n,i){let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o];r+=Gn(e,t,s,i),t=s}return r}class Hn extends In{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new Hn(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,i){return i<Pe(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(An(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,i))}getArea(){return Gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Hn(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=On(this.flatCoordinates,0,e,this.stride),this.changed()}}const Wn=Hn;class Kn extends In{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Kn(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){const r=this.flatCoordinates,o=$e(e,t,r[0],r[1]);if(o<i){const e=this.stride;for(let t=0;t<e;++t)n[t]=r[t];return n.length=e,o}return i}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return function(e,t){const n=e[0],i=e[1];return Ae(n,i,n,i,t)}(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Ie(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(e,t,n,i){for(let r=0,o=n.length;r<o;++r)e[t++]=n[r];return t}(this.flatCoordinates,0,e,this.stride),this.changed()}}const Xn=Kn;function Yn(e,t,n,i,r){const o=function(e,t){let n;return n=t(Fe(e)),n||(n=t(Ne(e)),n||(n=t(Ge(e)),n||(n=t(qe(e)),n||!1)))}(r,(function(r){return!$n(e,t,n,i,r[0],r[1])}));return!o}function $n(e,t,n,i,r,o){let s=0,a=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const n=e[t],i=e[t+1];l<=o?i>o&&(n-a)*(o-l)-(r-a)*(i-l)>0&&s++:i<=o&&(n-a)*(o-l)-(r-a)*(i-l)<0&&s--,a=n,l=i}return 0!==s}function Jn(e,t,n,i,r,o){if(0===n.length)return!1;if(!$n(e,t,n[0],i,r,o))return!1;for(let s=1,a=n.length;s<a;++s)if($n(e,n[s-1],n[s],i,r,o))return!1;return!0}function Qn(e,t,n,i,r,o,s){let a,l,c,u,h,d,p;const f=r[o+1],m=[];for(let _=0,v=n.length;_<v;++_){const r=n[_];for(u=e[r-i],d=e[r-i+1],a=t;a<r;a+=i)h=e[a],p=e[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(c=(f-d)/(p-d)*(h-u)+u,m.push(c)),u=h,d=p}let g=NaN,y=-1/0;for(m.sort(j),u=m[0],a=1,l=m.length;a<l;++a){h=m[a];const r=Math.abs(h-u);r>y&&(c=(u+h)/2,Jn(e,t,n,i,c,f)&&(g=c,y=r)),u=h}return isNaN(g)&&(g=r[o]),s?(s.push(g,f,y),s):[g,f,y]}function ei(e,t,n,i,r){let o;for(t+=i;t<n;t+=i)if(o=r(e.slice(t-i,t),e.slice(t,t+i)),o)return o;return!1}function ti(e,t,n,i,r){const o=Oe([1/0,1/0,-1/0,-1/0],e,t,n,i);return!!He(r,o)&&(a=o,(s=r)[0]<=a[0]&&a[2]<=s[2]&&s[1]<=a[1]&&a[3]<=s[3]||(o[0]>=r[0]&&o[2]<=r[2]||(o[1]>=r[1]&&o[3]<=r[3]||ei(e,t,n,i,(function(e,t){return function(e,t,n){let i=!1;const r=Me(e,t),o=Me(e,n);if(r===Te.INTERSECTING||o===Te.INTERSECTING)i=!0;else{const s=e[0],a=e[1],l=e[2],c=e[3],u=t[0],h=t[1],d=n[0],p=n[1],f=(p-h)/(d-u);let m,g;o&Te.ABOVE&&!(r&Te.ABOVE)&&(m=d-(p-c)/f,i=m>=s&&m<=l),i||!(o&Te.RIGHT)||r&Te.RIGHT||(g=p-(d-l)*f,i=g>=a&&g<=c),i||!(o&Te.BELOW)||r&Te.BELOW||(m=d-(p-a)/f,i=m>=s&&m<=l),i||!(o&Te.LEFT)||r&Te.LEFT||(g=p-(d-s)*f,i=g>=a&&g<=c)}return i}(r,e,t)})))));var s,a}function ni(e,t,n,i,r){if(!function(e,t,n,i,r){return!!ti(e,t,n,i,r)||!!$n(e,t,n,i,r[0],r[1])||!!$n(e,t,n,i,r[0],r[3])||!!$n(e,t,n,i,r[2],r[1])||!!$n(e,t,n,i,r[2],r[3])}(e,t,n[0],i,r))return!1;if(1===n.length)return!0;for(let o=1,s=n.length;o<s;++o)if(Yn(e,n[o-1],n[o],i,r)&&!ti(e,n[o-1],n[o],i,r))return!1;return!0}function ii(e,t,n,i){for(;t<n-i;){for(let r=0;r<i;++r){const o=e[t+r];e[t+r]=e[n-i+r],e[n-i+r]=o}t+=i,n-=i}}function ri(e,t,n,i){let r=0,o=e[n-i],s=e[n-i+1];for(;t<n;t+=i){const n=e[t],i=e[t+1];r+=(n-o)*(i+s),o=n,s=i}return 0===r?void 0:r>0}function oi(e,t,n,i,r){r=void 0!==r&&r;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=ri(e,t,s,i);if(0===o){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;t=s}return!0}function si(e,t,n,i,r){r=void 0!==r&&r;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=ri(e,t,s,i);(0===o?r&&a||!r&&!a:r&&!a||!r&&a)&&ii(e,t,s,i),t=s}return t}function ai(e,t,n,i,r){for(let o=0,s=n.length;o<s;++o)t=si(e,t,n[o],i,r);return t}class li extends In{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?U(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new li(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<Pe(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ln(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,i))}containsXY(e,t){return Jn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Zn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),si(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,qn(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Be(this.getExtent());this.flatInteriorPoint_=Qn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Xn(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Wn(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,i=[];let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=new Wn(t.slice(r,s),e);i.push(a),r=s}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;oi(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=si(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Vn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new li(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return ni(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Dn(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const ci=li;function ui(e){const t=e[0],n=e[1],i=e[2],r=e[3],o=[t,n,t,r,i,r,i,n,t,n];return new li(o,"XY",[o.length])}function hi(e,t){setTimeout((function(){e(t)}),0)}function di(e){return!(e.sourceCenter&&e.targetCenter&&!qt(e.sourceCenter,e.targetCenter))&&(e.sourceResolution===e.targetResolution&&e.sourceRotation===e.targetRotation)}function pi(e,t,n,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=e[0]*o-e[1]*s,l=e[1]*o+e[0]*s;a+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,s=-s;return[a*o-l*s,l*o+a*s]}const fi=class extends fe{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=nn(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Yt(),e.center&&(e.center=pn(e.center,this.projection_)),e.extent&&(e.extent=fn(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const s in kt)delete t[s];this.setProperties(t,!0);const n=function(e){let t,n,i;const r=28,o=2;let s=void 0!==e.minZoom?e.minZoom:0,a=void 0!==e.maxZoom?e.maxZoom:r;const l=void 0!==e.zoomFactor?e.zoomFactor:o,c=void 0!==e.multiWorld&&e.multiWorld,u=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,h=void 0!==e.showFullExtent&&e.showFullExtent,d=nn(e.projection,"EPSG:3857"),p=d.getExtent();let f=e.constrainOnlyCenter,m=e.extent;c||m||!d.isGlobal()||(f=!1,m=p);if(void 0!==e.resolutions){const r=e.resolutions;n=r[s],i=void 0!==r[a]?r[a]:r[r.length-1],t=e.constrainResolution?function(e,t,n,i){return t=void 0===t||t,function(r,o,s,a){if(void 0!==r){const l=e[0],c=e[e.length-1],u=n?yn(l,n,s,i):l;if(a)return t?_n(r,u,c):Xe(r,c,u);const h=Math.min(u,r),d=Math.floor(V(e,h,o));return e[d]>u&&d<e.length-1?e[d+1]:e[d]}}}(r,u,!f&&m,h):vn(n,i,u,!f&&m,h)}else{const c=(p?Math.max(Ze(p),Ve(p)):360*Ct.degrees/d.getMetersPerUnit())/256/Math.pow(o,0),g=c/Math.pow(o,r-0);n=e.maxResolution,void 0!==n?s=0:n=c/Math.pow(l,s),i=e.minResolution,void 0===i&&(i=void 0!==e.maxZoom?void 0!==e.maxResolution?n/Math.pow(l,a):c/Math.pow(l,a):g),a=s+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-s),t=e.constrainResolution?function(e,t,n,i,r,o){return i=void 0===i||i,n=void 0!==n?n:0,function(s,a,l,c){if(void 0!==s){const u=r?yn(t,r,l,o):t;if(c)return i?_n(s,u,n):Xe(s,n,u);const h=1e-9,d=Math.ceil(Math.log(t/u)/Math.log(e)-h),p=-a*(.5-h)+.5,f=Math.min(u,s),m=Math.floor(Math.log(t/f)/Math.log(e)+p),g=Math.max(d,m);return Xe(t/Math.pow(e,g),n,u)}}}(l,n,i,u,!f&&m,h):vn(n,i,u,!f&&m,h)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:s,zoomFactor:l}}(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const i=function(e){if(void 0!==e.extent){const t=void 0===e.smoothExtentConstraint||e.smoothExtentConstraint;return mn(e.extent,e.constrainOnlyCenter,t)}const t=nn(e.projection,"EPSG:3857");if(!0!==e.multiWorld&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,mn(e,!1,!1)}return gn}(e),r=n.constraint,o=function(e){const t=void 0===e.enableRotation||e.enableRotation;if(t){const t=e.constrainRotation;return void 0===t||!0===t?wn():!1===t?xn:"number"===typeof t?function(e){const t=2*Math.PI/e;return function(e,n){return n?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}(t):xn}return bn}(e);this.constraints_={center:i,resolution:r,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const i=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution(),o=r/2*(i[3]-t[3]+t[1]-i[1]),s=r/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-s])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let e=arguments[n];e.center&&(e=Object.assign({},e),e.center=pn(e.center,this.getProjection())),e.anchor&&(e=Object.assign({},e),e.anchor=pn(e.anchor,this.getProjection())),t[n]=e}this.animateInternal.apply(this,t)}animateInternal(e){let t,n=arguments.length;n>1&&"function"===typeof arguments[n-1]&&(t=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const e=arguments[i];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation)}if(i===n)return void(t&&hi(t,!0));let r=Date.now(),o=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_;const l=[];for(;i<n;++i){const e=arguments[i],n={start:r,complete:!1,anchor:e.anchor,duration:void 0!==e.duration?e.duration:1e3,easing:e.easing||kn,callback:t};if(e.center&&(n.sourceCenter=o,n.targetCenter=e.center.slice(),o=n.targetCenter),void 0!==e.zoom?(n.sourceResolution=s,n.targetResolution=this.getResolutionForZoom(e.zoom),s=n.targetResolution):e.resolution&&(n.sourceResolution=s,n.targetResolution=e.resolution,s=n.targetResolution),void 0!==e.rotation){n.sourceRotation=a;const t=Je(e.rotation-a+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=a+t,a=n.targetRotation}di(n)?n.complete=!0:r+=n.duration,l.push(n)}this.animations_.push(l),this.setHint(wt,1),this.updateAnimations_()}getAnimating(){return this.hints_[wt]>0}getInteracting(){return this.hints_[St]>0}cancelAnimations(){let e;this.setHint(wt,-this.hints_[wt]);for(let t=0,n=this.animations_.length;t<n;++t){const n=this.animations_[t];if(n[0].callback&&hi(n[0].callback,!1),!e)for(let t=0,i=n.length;t<i;++t){const i=n[t];if(!i.complete){e=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let r=!0;for(let n=0,o=i.length;n<o;++n){const o=i[n];if(o.complete)continue;const s=e-o.start;let a=o.duration>0?s/o.duration:1;a>=1?(o.complete=!0,a=1):r=!1;const l=o.easing(a);if(o.sourceCenter){const e=o.sourceCenter[0],t=o.sourceCenter[1],n=o.targetCenter[0],i=o.targetCenter[1];this.nextCenter_=o.targetCenter;const r=e+l*(n-e),s=t+l*(i-t);this.targetCenter_=[r,s]}if(o.sourceResolution&&o.targetResolution){const e=1===l?o.targetResolution:o.sourceResolution+l*(o.targetResolution-o.sourceResolution);if(o.anchor){const t=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(e,0,t,!0);this.targetCenter_=this.calculateCenterZoom(n,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=e,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const e=1===l?Je(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+l*(o.targetRotation-o.sourceRotation);if(o.anchor){const t=this.constraints_.rotation(e,!0);this.targetCenter_=this.calculateCenterRotate(t,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=e}if(this.applyTargetState_(!0),t=!0,!o.complete)break}if(r){this.animations_[n]=null,this.setHint(wt,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const e=i[0].callback;e&&hi(e,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const i=this.getCenterInternal();var r,o;return void 0!==i&&(n=[i[0]-t[0],i[1]-t[1]],Gt(n,e-this.getRotation()),o=t,(r=n)[0]+=+o[0],r[1]+=+o[1]),n}calculateCenterZoom(e,t){let n;const i=this.getCenterInternal(),r=this.getResolution();if(void 0!==i&&void 0!==r){n=[t[0]-e*(t[0]-i[0])/r,t[1]-e*(t[1]-i[1])/r]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],i=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e?dn(e,this.getProjection()):e}getCenterInternal(){return this.get(kt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return function(e,t){return un?cn(e,t,un):e}(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Se(t,1);const n=this.getResolution();Se(void 0!==n,2);const i=this.getRotation();return Se(void 0!==i,3),je(t,n,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(kt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fn(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Ze(e)/t[0],i=Ve(e)/t[1];return Math.max(n,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(t/n)/Math.log(e);return function(n){return t/Math.pow(e,n*i)}}getRotation(){return this.get(kt.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/t;return function(e){return Math.log(n/e)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const e=this.getViewportSizeMinusPadding_();i=pi(i,this.getViewportSize_(),[e[0]/2+r[3],e[1]/2+r[0]],t,n)}return{center:i.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t,n,i=this.minZoom_||0;if(this.resolutions_){const r=V(this.resolutions_,e,1);i=r,t=this.resolutions_[r],n=r==this.resolutions_.length-1?2:t/this.resolutions_[r+1]}else t=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(t/e)/Math.log(n)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Xe(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,Xe(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(Se(Array.isArray(e)||"function"===typeof e.getSimplifiedGeometry,24),Array.isArray(e)){Se(!We(e),25);n=ui(fn(e,this.getProjection()))}else if("Circle"===e.getType()){const t=fn(e.getExtent(),this.getProjection());n=ui(t),n.rotate(this.getRotation(),Be(t))}else{const t=hn();n=t?e.clone().transform(t,this.getProjection()):e}this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),i=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let s=1/0,a=1/0,l=-1/0,c=-1/0;for(let u=0,h=r.length;u<h;u+=o){const e=r[u]*n-r[u+1]*i,t=r[u]*i+r[u+1]*n;s=Math.min(s,e),a=Math.min(a,t),l=Math.max(l,e),c=Math.max(c,t)}return[s,a,l,c]}fitInternal(e,t){let n=(t=t||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==t.padding?t.padding:[0,0,0,0],r=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const s=this.rotatedExtentForGeometry(e);let a=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),c=Math.sin(l),u=Math.cos(l),h=Be(s);h[0]+=(i[1]-i[3])/2*a,h[1]+=(i[0]-i[2])/2*a;const d=h[0]*u-h[1]*c,p=h[1]*u+h[0]*c,f=this.getConstrainedCenter([d,p],a),m=t.callback?t.callback:H;void 0!==t.duration?this.animateInternal({resolution:a,center:f,duration:t.duration,easing:t.easing},m):(this.targetResolution_=a,this.targetCenter_=f,this.applyTargetState_(!1,!0),hi(m,!0))}centerOn(e,t,n){this.centerOnInternal(pn(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(pi(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,i){let r;const o=this.padding_;if(o&&e){const s=this.getViewportSizeMinusPadding_(-n),a=pi(e,i,[s[0]/2+o[3],s[1]/2+o[0]],t,n);r=[e[0]-a[0],e[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=dn(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&pn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,i,n);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=pn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e?pn(e,this.getProjection()):e)}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,r,n),s=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,i,r));this.get(kt.ROTATION)!==i&&this.set(kt.ROTATION,i),this.get(kt.RESOLUTION)!==o&&(this.set(kt.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),s&&this.get(kt.CENTER)&&qt(this.get(kt.CENTER),s)||this.set(kt.CENTER,s),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=void 0!==e?e:200;const i=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,i,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,r,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&qt(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:s,duration:e,easing:Sn,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(St,1)}endInteraction(e,t,n){n=n&&pn(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(St,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}};function mi(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const gi=class extends _t{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(gt,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get(gt)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(se(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=re(e,Y,this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let t;const n=this.getMapInternal();let i;!e&&n&&(e=n.getView()),t=e instanceof fi?{viewState:e.getState(),extent:e.calculateExtent()}:e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=t.layerStatesArray?t.layerStatesArray.find((e=>e.layer===this)):this.getLayerState();const r=this.getExtent();return mi(i,t.viewState)&&(!r||He(r,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const n=this.getSource();if(n&&(t=n.getAttributions()),!t)return[];let i=t(e instanceof fi?e.getViewStateAndExtent():e);return Array.isArray(i)||(i=[i]),i}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(yt,e)}getMapInternal(){return this.get(yt)}setMap(e){this.mapPrecomposeKey_&&(se(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(se(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=re(e,vt,(function(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);Se(!t.some((function(e){return e.layer===n.layer})),67),t.push(n)}),this),this.mapRenderKey_=re(this,Y,e.render,e),this.changed())}setSource(e){this.set(gt,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function yi(e,t){at.expire()}const _i=class extends B{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ue()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Ce(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Ee(i,n)}forEachFeatureAtCoordinate(e,t,n,i,r,o,s,a){let l;const c=t.viewState;function u(e,t,n,i){return r.call(o,t,e?n:null,i)}const h=c.projection,d=Zt(e.slice(),h),p=[[0,0]];if(h.canWrapX()&&i){const e=Ze(h.getExtent());p.push([-e,0],[e,0])}const f=t.layerStatesArray,m=f.length,g=[],y=[];for(let v=0;v<p.length;v++)for(let i=m-1;i>=0;--i){const r=f[i],o=r.layer;if(o.hasRenderer()&&mi(r,c)&&s.call(a,o)){const i=o.getRenderer(),s=o.getSource();if(i&&s){const o=s.getWrapX()?d:e,a=u.bind(null,r.managed);y[0]=o[0]+p[v][0],y[1]=o[1]+p[v][1],l=i.forEachFeatureAtCoordinate(y,t,n,a,g)}if(l)return l}}if(0===g.length)return;const _=1/g.length;return g.forEach(((e,t)=>e.distanceSq+=t*_)),g.sort(((e,t)=>e.distanceSq-t.distanceSq)),g.some((e=>l=e.callback(e.feature,e.layer,e.geometry))),l}hasFeatureAtCoordinate(e,t,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,n,i,G,this,r,o)}getMap(){return this.map_}renderFrame(e){ue()}scheduleExpireIconCache(e){at.canExpireCache()&&e.postRenderFunctions.push(yi)}};const vi=class extends F{constructor(e,t,n,i){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=i}},bi="ol-hidden",xi="ol-unselectable",wi="ol-control",Si="ol-collapsed",ki=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ci=["style","variant","weight","size","lineHeight","family"],Ei=function(e){const t=e.match(ki);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Ci.length;i<r;++i){const e=t[i+1];void 0!==e&&(n[Ci[i]]=e)}return n.families=n.family.split(/,\s?/),n},Ti="undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent?navigator.userAgent.toLowerCase():"",Pi=Ti.includes("firefox"),Ii=(Ti.includes("safari")&&!Ti.includes("chrom")&&(Ti.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ti)),Ti.includes("webkit")&&!Ti.includes("edge")),Mi=Ti.includes("macintosh"),Ai="undefined"!==typeof devicePixelRatio?devicePixelRatio:1,Ri="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,zi=("undefined"!==typeof Image&&Image.prototype.decode,function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(t){}return e}());function Li(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function Oi(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}const Di=new fe;let Fi,Ni=null;const Bi={};(function(){const e="32px ",t=["monospace","serif"],n=t.length,i="wmytzilWMYTZIL@#/&?$%10\uf013";let r,o;function s(r,s,a){let l=!0;for(let c=0;c<n;++c){const n=t[c];if(Vi(r+" "+s+" "+e+n,i),a!=n){const t=Vi(r+" "+s+" "+e+a+","+n,i);l&&t!=o}}return!!l}function a(){let e=!0;const t=Di.getKeys();for(let n=0,i=t.length;n<i;++n){const e=t[n];Di.get(e)<100&&(s.apply(this,e.split("\n"))?(W(Bi),null,void 0,Di.set(e,100)):(Di.set(e,Di.get(e)+1,!0),!1))}e&&(clearInterval(r),void 0)}})(),function(){let e}();function ji(e,t){return Ni||function(e,t,n,i){let r;return n&&n.length?n.shift():Ri?new OffscreenCanvas(e||300,t||300):document.createElement("canvas"),e&&(r.width=e),t&&(r.height=t),r.getContext("2d",i)}(1,1),e!=Fi&&(Ni.font=e,Ni.font),Ni.measureText(t)}function Vi(e,t){return ji(e,t).width}const Ui=class extends _i{constructor(e){super(e),this.fontChangeListenerKey_=re(Di,N,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=xi+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const i=new vi(e,void 0,t);n.dispatchEvent(i)}}disposeInternal(){se(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(vt,e);const t=e.layerStatesArray.sort((function(e,t){return e.zIndex-t.zIndex})),n=e.viewState;this.children_.length=0;const i=[];let r=null;for(let o=0,s=t.length;o<s;++o){const s=t[o];e.layerIndex=o;const a=s.layer,l=a.getSourceState();if(!mi(s,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const c=a.render(e,r);c&&(c!==r&&(this.children_.push(c),r=c),"getDeclutter"in a&&i.push(a))}for(let o=i.length-1;o>=0;--o)i[o].renderDeclutter(e);!function(e,t){const n=e.childNodes;for(let i=0;;++i){const r=n[i],o=t[i];if(!r&&!o)break;r!==o&&(r?o?e.insertBefore(o,r):(e.removeChild(r),--i):e.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(bt,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class qi extends F{constructor(e,t){super(e),this.layer=t}}const Gi="layers";class Zi extends _t{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Gi,this.handleLayersChanged_),n?Array.isArray(n)?n=new we(n.slice(),{unique:!0}):Se("function"===typeof n.getArray,43):n=new we(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(se),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(re(e,_e,this.handleLayersAdd_,this),re(e,ve,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(se);W(this.listenerKeys_);const t=e.getArray();for(let n=0,i=t.length;n<i;n++){const e=t[n];this.registerLayerListeners_(e),this.dispatchEvent(new qi("addlayer",e))}this.changed()}registerLayerListeners_(e){const t=[re(e,N,this.handleLayerChange_,this),re(e,Y,this.handleLayerChange_,this)];e instanceof Zi&&t.push(re(e,"addlayer",this.handleLayerGroupAdd_,this),re(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[de(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new qi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new qi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new qi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=de(t);this.listenerKeys_[n].forEach(se),delete this.listenerKeys_[n],this.dispatchEvent(new qi("removelayer",t)),this.changed()}getLayers(){return this.get(Gi)}setLayers(e){const t=this.getLayers();if(t){const e=t.getArray();for(let t=0,n=e.length;t<n;++t)this.dispatchEvent(new qi("removelayer",e[t]))}this.set(Gi,e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach((function(t){t.getLayersArray(e)})),e}getLayerStatesArray(e){const t=void 0!==e?e:[],n=t.length;this.getLayers().forEach((function(e){e.getLayerStatesArray(t)}));const i=this.getLayerState();let r=i.zIndex;e||void 0!==i.zIndex||(r=0);for(let o=n,s=t.length;o<s;o++){const e=t[o];e.opacity*=i.opacity,e.visible=e.visible&&i.visible,e.maxResolution=Math.min(e.maxResolution,i.maxResolution),e.minResolution=Math.max(e.minResolution,i.minResolution),e.minZoom=Math.max(e.minZoom,i.minZoom),e.maxZoom=Math.min(e.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==e.extent?e.extent=Ue(e.extent,i.extent):e.extent=i.extent),void 0===e.zIndex&&(e.zIndex=r)}return t}getSourceState(){return"ready"}}const Hi=Zi;const Wi=class extends F{constructor(e,t,n){super(e),this.map=t,this.frameState=void 0!==n?n:null}};const Ki=class extends Wi{constructor(e,t,n,i,r,o){super(e,t,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Xi={SINGLECLICK:"singleclick",CLICK:J,DBLCLICK:Q,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Yi="pointermove",$i="pointerdown",Ji="pointerup";const Qi=class extends X{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=re(n,$i,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=re(n,Yi,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ne,this.boundHandleTouchMove_,!!zi&&{passive:!1})}emulateClick_(e){let t=new Ki(Xi.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Ki(Xi.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const t=new Ki(Xi.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}),250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Xi.POINTERUP||t.type==Xi.POINTERCANCEL){delete this.trackedTouches_[n];for(const e in this.trackedTouches_)if(this.trackedTouches_[e].target!==t.target){delete this.trackedTouches_[e];break}}else t.type!=Xi.POINTERDOWN&&t.type!=Xi.POINTERMOVE||(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Ki(Xi.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new Ki(Xi.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){const e=this.map_.getOwnerDocument();this.dragListenerKeys_.push(re(e,Xi.POINTERMOVE,this.handlePointerMove_,this),re(e,Xi.POINTERUP,this.handlePointerUp_,this),re(this.element_,Xi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==e&&this.dragListenerKeys_.push(re(this.element_.getRootNode(),Xi.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Ki(Xi.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Ki(Xi.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"===typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(se(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ne,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(se(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},er="postrender",tr="movestart",nr="moveend",ir="loadstart",rr="loadend",or="layergroup",sr="size",ar="target",lr="view",cr=1/0;const ur=class{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,W(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(e){Se(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=cr&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,i=t.length,r=t[e],o=n[e],s=e;for(;e<i>>1;){const r=this.getLeftChildIndex_(e),o=this.getRightChildIndex_(e),s=o<i&&n[o]<n[r]?o:r;t[e]=t[s],n[e]=n[s],e=s}t[e]=r,n[e]=o,this.siftDown_(s,e)}siftDown_(e,t){const n=this.elements_,i=this.priorities_,r=n[t],o=i[t];for(;t>e;){const e=this.getParentIndex_(t);if(!(i[e]>o))break;n[t]=n[e],i[t]=i[e],t=e}n[t]=r,i[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let i=0;const r=t.length;let o,s,a;for(s=0;s<r;++s)o=t[s],a=e(o),a==cr?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=a,t[i++]=o);t.length=i,n.length=i,this.heapify_()}},hr=0,dr=2,pr=3,fr=4;const mr=class extends ur{constructor(e,t){super((function(t){return e.apply(null,t)}),(function(e){return e[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);if(t){e[0].addEventListener(Y,this.boundHandleTileChange_)}return t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===dr||n===pr||n===fr){n!==pr&&t.removeEventListener(Y,this.boundHandleTileChange_);const e=t.getKey();e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n,i,r,o=0;for(;this.tilesLoading_<e&&o<t&&this.getCount()>0;)i=this.dequeue()[0],r=i.getKey(),n=i.getState(),n!==hr||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load())}};const gr=class extends fe{constructor(e){super();const t=e.element;!t||e.target||t.style.pointerEvents||(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Oi(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Oi(this.element);for(let t=0,n=this.listenerKeys.length;t<n;++t)se(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){(this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==H&&this.listenerKeys.push(re(e,er,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_="string"===typeof e?document.getElementById(e):e}};const yr=class extends gr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",n=void 0!==e.tipLabel?e.tipLabel:"Attributions",i=void 0!==e.expandClassName?e.expandClassName:t+"-expand",r=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"===typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const s=void 0!==e.label?e.label:"i";"string"===typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(J,this.handleClick_.bind(this),!1);const l=t+" "+xi+" "+wi+(this.collapsed_&&this.collapsible_?" "+Si:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=l,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap((t=>t.getAttributions(e))))),n=!this.getMap().getAllLayers().some((e=>e.getSource()&&!1===e.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(n),t}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!q(t,this.renderedAttributions_)){!function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}(this.ulElement_);for(let e=0,n=t.length;e<n;++e){const n=document.createElement("li");n.innerHTML=t[e],this.ulElement_.appendChild(n)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Si),this.collapsed_?Li(this.collapseLabel_,this.label_):Li(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}};const _r=class extends gr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",n=void 0!==e.label?e.label:"\u21e7",i=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"===typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(J,this.handleClick_.bind(this),!1);const s=t+" "+xi+" "+wi,a=this.element;a.className=s,a.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(bi)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const t=e.getRotation();void 0!==t&&(this.duration_>0&&t%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Sn}):e.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const e="rotate("+n+"rad)";if(this.autoHide_){const e=this.element.classList.contains(bi);e||0!==n?e&&0!==n&&this.element.classList.remove(bi):this.element.classList.add(bi)}this.label_.style.transform=e}this.rotation_=n}};const vr=class extends gr{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",n=void 0!==e.delta?e.delta:1,i=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",r=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",s=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",a=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i,c.setAttribute("type","button"),c.title=a,c.appendChild("string"===typeof o?document.createTextNode(o):o),c.addEventListener(J,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild("string"===typeof s?document.createTextNode(s):s),u.addEventListener(J,this.handleClick_.bind(this,-n),!1);const h=t+" "+xi+" "+wi,d=this.element;d.className=h,d.appendChild(c),d.appendChild(u),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const t=this.getMap().getView();if(!t)return;const n=t.getZoom();if(void 0!==n){const i=t.getConstrainedZoom(n+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:i,duration:this.duration_,easing:Sn})):t.setZoom(i)}}};const br="active";function xr(e,t,n,i){const r=e.getZoom();if(void 0===r)return;const o=e.getConstrainedZoom(r+t),s=e.getResolutionForZoom(o);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:s,anchor:n,duration:void 0!==i?i:250,easing:Sn})}const wr=class extends fe{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(br)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(br,e)}setMap(e){this.map_=e}};const Sr=class extends wr{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==Xi.DBLCLICK){const n=e.originalEvent,i=e.map,r=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_;xr(i.getView(),o,r,this.duration_),n.preventDefault(),t=!0}return!t}};function kr(e){const t=e.length;let n=0,i=0;for(let r=0;r<t;r++)n+=e[r].clientX,i+=e[r].clientY;return{clientX:n/t,clientY:i/t}}const Cr=class extends wr{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Xi.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Xi.POINTERUP){const t=this.handleUpEvent(e);this.handlingDownUpSequence=t&&this.targetPointers.length>0}}else if(e.type==Xi.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Xi.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function Er(e){const t=arguments;return function(e){let n=!0;for(let i=0,r=t.length;i<r&&(n=n&&t[i](e),n);++i);return n}}const Tr=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Pr=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)}(e)},Ir=G,Mr=function(e){const t=e.originalEvent;return 0==t.button&&!(Ii&&Mi&&t.ctrlKey)},Ar=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Rr=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},zr=function(e){const t=e.originalEvent,n=t.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!t.target.isContentEditable},Lr=function(e){const t=e.originalEvent;return Se(void 0!==t,56),"mouse"==t.pointerType},Or=function(e){const t=e.originalEvent;return Se(void 0!==t,56),t.isPrimary&&0===t.button};const Dr=class extends Cr{constructor(e){super({stopDown:Z}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Er(Ar,Or);this.condition_=e.onFocusOnly?Er(Pr,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,i=t.getEventPixel(kr(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const t=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=e.map.getView();!function(e,t){e[0]*=t,e[1]*=t}(t,n.getResolution()),Gt(t,n.getRotation()),n.adjustCenterInternal(t)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const e=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),o=t.getPixelFromCoordinateInternal(r),s=t.getCoordinateFromPixelInternal([o[0]-e*Math.cos(i),o[1]-e*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:Sn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const t=e.map.getView();return this.lastCentroid=null,t.getAnimating()&&t.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};const Fr=class extends Cr{constructor(e){e=e||{},super({stopDown:Z}),this.condition_=e.condition?e.condition:Tr,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!Lr(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===bn)return;const i=t.getSize(),r=e.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const e=o-this.lastAngle_;n.adjustRotationInternal(-e)}this.lastAngle_=o}handleUpEvent(e){if(!Lr(e))return!0;return e.map.getView().endInteraction(this.duration_),!1}handleDownEvent(e){if(!Lr(e))return!1;if(Mr(e)&&this.condition_(e)){return e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}};const Nr=class extends B{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+n,i.top=Math.min(e[1],t[1])+n,i.width=Math.abs(t[0]-e[0])+n,i.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new ci([n])}getGeometry(){return this.geometry_}},Br="boxstart",jr="boxdrag",Vr="boxend",Ur="boxcancel";class qr extends F{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}const Gr=class extends Cr{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Nr(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Mr,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const i=n[0]-t[0],r=n[1]-t[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new qr(jr,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new qr(t?Vr:Ur,e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new qr(Br,e.coordinate,e)),!0)}onBoxEnd(e){}};const Zr=class extends Gr{constructor(e){super({condition:(e=e||{}).condition?e.condition:Rr,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const t=this.getMap().getView();let n=this.getGeometry();if(this.out_){const e=t.rotatedExtentForGeometry(n),i=t.getResolutionForExtentInternal(e),r=t.getResolution()/i;n=n.clone(),n.scale(r*r)}t.fitInternal(n,{duration:this.duration_,easing:Sn})}},Hr="ArrowLeft",Wr="ArrowUp",Kr="ArrowRight",Xr="ArrowDown";const Yr=class extends wr{constructor(e){super(),e=e||{},this.defaultCondition_=function(e){return Ar(e)&&zr(e)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==ee){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==Xr||i==Hr||i==Kr||i==Wr)){const r=e.map.getView(),o=r.getResolution()*this.pixelDelta_;let s=0,a=0;i==Xr?a=-o:i==Hr?s=-o:i==Kr?s=o:a=o;const l=[s,a];Gt(l,r.getRotation()),function(e,t,n){const i=e.getCenterInternal();if(i){const r=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:void 0!==n?n:250,easing:Cn,center:e.getConstrainedCenter(r)})}}(r,l,this.duration_),n.preventDefault(),t=!0}}return!t}};const $r=class extends wr{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:zr,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if(e.type==ee||e.type==te){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&("+"===i||"-"===i)){const r=e.map,o="+"===i?this.delta_:-this.delta_;xr(r.getView(),o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}};const Jr=class{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const i=this.points_[t+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};const Qr=class extends wr{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:Ir;this.condition_=e.onFocusOnly?Er(Pr,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e))return!0;if(e.type!==ie)return!0;const t=e.map,n=e.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==ie&&(i=n.deltaY,Pi&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=Ai),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const o=t.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=i;const s=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,t),s),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Xe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),xr(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}};const eo=class extends Cr{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=Z),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const e=r-this.lastAngle_;this.rotationDelta_+=e,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=e}this.lastAngle_=r;const o=e.map,s=o.getView();s.getConstraints().rotation!==bn&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(kr(this.targetPointers))),this.rotating_&&(o.render(),s.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){if(this.targetPointers.length<2){return e.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};const to=class extends Cr{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=Z),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/s),this.lastDistance_=s;const a=e.map,l=a.getView();1!=t&&(this.lastScaleDelta_=t),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(kr(this.targetPointers))),a.render(),l.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const t=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function no(e){e=e||{};const t=new we,n=new Jr(-.005,.05,100);(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&t.push(new Fr);(void 0===e.doubleClickZoom||e.doubleClickZoom)&&t.push(new Sr({delta:e.zoomDelta,duration:e.zoomDuration}));(void 0===e.dragPan||e.dragPan)&&t.push(new Dr({onFocusOnly:e.onFocusOnly,kinetic:n}));(void 0===e.pinchRotate||e.pinchRotate)&&t.push(new eo);(void 0===e.pinchZoom||e.pinchZoom)&&t.push(new to({duration:e.zoomDuration}));(void 0===e.keyboard||e.keyboard)&&(t.push(new Yr),t.push(new $r({delta:e.zoomDelta,duration:e.zoomDuration})));(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&t.push(new Qr({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));return(void 0===e.shiftDragZoom||e.shiftDragZoom)&&t.push(new Zr({duration:e.zoomDuration})),t}function io(e){return e[0]>0&&e[1]>0}function ro(e){e instanceof gi?e.setMapInternal(null):e instanceof Hi&&e.getLayers().forEach(ro)}function oo(e,t){if(e instanceof gi)e.setMapInternal(t);else if(e instanceof Hi){const n=e.getLayers().getArray();for(let e=0,i=n.length;e<i;++e)oo(n[e],t)}}const so=class extends fe{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=function(e){let t=null;void 0!==e.keyboardEventTarget&&(t="string"===typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&"function"===typeof e.layers.getLayers?e.layers:new Hi({layers:e.layers});let r,o,s;n[or]=i,n[ar]=e.target,n[lr]=e.view instanceof fi?e.view:new fi,void 0!==e.controls&&(Array.isArray(e.controls)?r=new we(e.controls.slice()):(Se("function"===typeof e.controls.getArray,47),r=e.controls));void 0!==e.interactions&&(Array.isArray(e.interactions)?o=new we(e.interactions.slice()):(Se("function"===typeof e.interactions.getArray,48),o=e.interactions));void 0!==e.overlays?Array.isArray(e.overlays)?s=new we(e.overlays.slice()):(Se("function"===typeof e.overlays.getArray,49),s=e.overlays):s=new we;return{controls:r,interactions:o,keyboardEventTarget:t,overlays:s,values:n}}(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Ai,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=t.controls||function(e){e=e||{};const t=new we;return(void 0===e.zoom||e.zoom)&&t.push(new vr(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&t.push(new _r(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&t.push(new yr(e.attributionOptions)),t}(),this.interactions=t.interactions||no({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new mr(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(or,this.handleLayerGroupChanged_),this.addChangeListener(lr,this.handleViewChanged_),this.addChangeListener(sr,this.handleSizeChanged_),this.addChangeListener(ar,this.handleTargetChanged_),this.setProperties(t.values);const n=this;!e.view||e.view instanceof fi||e.view.then((function(e){n.setView(new fi(e))})),this.controls.addEventListener(_e,(e=>{e.element.setMap(this)})),this.controls.addEventListener(ve,(e=>{e.element.setMap(null)})),this.interactions.addEventListener(_e,(e=>{e.element.setMap(this)})),this.interactions.addEventListener(ve,(e=>{e.element.setMap(null)})),this.overlays_.addEventListener(_e,(e=>{this.addOverlayInternal_(e.element)})),this.overlays_.addEventListener(ve,(e=>{const t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)})),this.controls.forEach((e=>{e.setMap(this)})),this.interactions.forEach((e=>{e.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){oo(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:G,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,s,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,(function(e){n.push(e)}),t),n}getAllLayers(){const e=[];return function t(n){n.forEach((function(n){n instanceof Hi?t(n.getLayers()):e.push(n)}))}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e),i=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:G,r=void 0!==t.hitTolerance?t.hitTolerance:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=t.width/n[0],r=t.height/n[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-t.left)/i,(o.clientY-t.top)/r]}getTarget(){return this.get(ar)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return dn(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ke(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(or)}setLayers(e){const t=this.getLayerGroup();if(e instanceof we)return void t.setLayers(e);const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const n=e[t];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(e){const t=pn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ke(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(sr)}getView(){return this.get(lr)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,i){return function(e,t,n,i,r){if(!e||!(n in e.wantedTiles))return cr;if(!e.wantedTiles[n][t.getKey()])return cr;const o=e.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}(this.frameState_,e,t,n,i)}handleBrowserEvent(e,t){t=t||e.type;const n=new Ki(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===$i||n===ie||n===ee){const e=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():e,i=t.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===e?e.documentElement:n).contains(i))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const t=this.getInteractions().getArray().slice();for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;if(!i.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let n=this.maxTilesLoading_,i=n;if(e){const t=e.viewHints;if(t[wt]||t[St]){const t=Date.now()-e.time>8;n=t?0:8,i=t?0:2}}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,i))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener(xt)&&this.renderer_.dispatchRenderEvent(xt,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Wi(rr,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Wi(ir,this,e))));const n=this.postRenderFunctions_;for(let i=0,r=n.length;i<r;++i)n[i](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)se(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener($,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ie,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Oi(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const e=this.targetElement_.getRootNode();e instanceof ShadowRoot&&this.resizeObserver_.unobserve(e.host),this.setSize(void 0)}const e=this.getTarget(),t="string"===typeof e?document.getElementById(e):e;if(this.targetElement_=t,t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Ui(this)),this.mapBrowserEventHandler_=new Qi(this,this.moveTolerance_);for(const t in Xi)this.mapBrowserEventHandler_.addEventListener(Xi[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener($,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ie,this.boundHandleBrowserEvent_,!!zi&&{passive:!1});const e=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[re(e,ee,this.handleBrowserEvent,this),re(e,te,this.handleBrowserEvent,this)];const n=t.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(t)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(se(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(se(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=re(e,N,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=re(e,Y,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(se),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new qi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[re(e,N,this.render,this),re(e,Y,this.render,this),re(e,"addlayer",this.handleLayerAdd_,this),re(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){ro(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==t&&io(t)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:je(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:i,wantedTiles:{},mapId:de(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const e=isNaN(o.nextRotation)?o.rotation:o.nextRotation;r.nextExtent=je(o.nextCenter,o.nextResolution,e,t)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i){(!this.previousExtent_||!We(this.previousExtent_)&&!Le(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Wi(tr,this,i)),this.previousExtent_=Re(this.previousExtent_))}this.previousExtent_&&!r.viewHints[wt]&&!r.viewHints[St]&&!Le(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Wi(nr,this,r)),o=r.extent,(s=this.previousExtent_)?(s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3]):o.slice())}var o,s;this.dispatchEvent(new Wi(er,this,r)),this.renderComplete_=this.hasListener(ir)||this.hasListener(rr)||this.hasListener(xt)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new qi("removelayer",t)),this.set(or,e)}setSize(e){this.set(sr,e)}setTarget(e){this.set(ar,e)}setView(e){if(!e||e instanceof fi)return void this.set(lr,e);this.set(lr,new fi);const t=this;e.then((function(e){t.setView(new fi(e))}))}updateSize(){const e=this.getTargetElement();let t;if(e){const n=getComputedStyle(e),i=e.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=e.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(t=[i,r],!io(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Kt("No map visible because the map container's width or height are 0."))}const n=this.getSize();!t||n&&q(t,n)||(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(t=[parseInt(n.width,10),parseInt(n.height,10)]),e.setViewportSize(t)}}},ao="SET_CENTER",lo="SET_ZOOM",co=e=>({type:ao,data:e}),uo=e=>({type:lo,data:e}),ho=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mapLeft:new so({controls:[],interactions:no({altShiftDragRotate:!1,pinchRotate:!1})}),mapRight:new so({controls:[],interactions:no({altShiftDragRotate:!1,pinchRotate:!1})})},t=arguments.length>1?arguments[1]:void 0;const{data:n}=t;switch(t.type){case ao:return{...e,center:n};case lo:return{...e,zoom:n};default:return e}};n(442);const po={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class fo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||po,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:("string"===typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new fo(this.logger,{prefix:"".concat(this.prefix,":").concat(e,":"),...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new fo(this.logger,e)}}var mo=new fo;class go{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]=this.observers[e]||[],this.observers[e].push(t)})),this}off(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((e=>e!==t)):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.observers[e]){[].concat(this.observers[e]).forEach((e=>{e(...n)}))}if(this.observers["*"]){[].concat(this.observers["*"]).forEach((t=>{t.apply(t,[e,...n])}))}}}function yo(){let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return n.resolve=e,n.reject=t,n}function _o(e){return null==e?"":""+e}function vo(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"===typeof e}const o="string"!==typeof t?[].concat(t):t.split(".");for(;o.length>1;){if(r())return{};const t=i(o.shift());!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{}}return r()?{}:{obj:e,k:i(o.shift())}}function bo(e,t,n){const{obj:i,k:r}=vo(e,t,Object);i[r]=n}function xo(e,t){const{obj:n,k:i}=vo(e,t);if(n)return n[i]}function wo(e,t,n){for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"===typeof e[i]||e[i]instanceof String||"string"===typeof t[i]||t[i]instanceof String?n&&(e[i]=t[i]):wo(e[i],t[i],n):e[i]=t[i]);return e}function So(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var ko={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Co(e){return"string"===typeof e?e.replace(/[&<>"'\/]/g,(e=>ko[e])):e}const Eo=[" ",",","?","!",";"];function To(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const i=t.split(n);let r=e;for(let o=0;o<i.length;++o){if(!r)return;if("string"===typeof r[i[o]]&&o+1<i.length)return;if(void 0===r[i[o]]){let e=2,s=i.slice(o,o+e).join(n),a=r[s];for(;void 0===a&&i.length>o+e;)e++,s=i.slice(o,o+e).join(n),a=r[s];if(void 0===a)return;if(null===a)return null;if(t.endsWith(s)){if("string"===typeof a)return a;if(s&&"string"===typeof a[s])return a[s]}const l=i.slice(o+e).join(n);return l?To(a,l,n):void 0}r=r[i[o]]}return r}function Po(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class Io extends go{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let s=[e,t];n&&"string"!==typeof n&&(s=s.concat(n)),n&&"string"===typeof n&&(s=s.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(s=e.split("."));const a=xo(this.data,s);return a||!o||"string"!==typeof n?a:To(this.data&&this.data[e]&&this.data[e][t],n,r)}addResource(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator;let s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(s=e.split("."),i=t,t=s[1]),this.addNamespaces(t),bo(this.data,s,i),r.silent||this.emit("added",e,t,n,i)}addResources(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const r in n)"string"!==typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),i=n,n=t,t=s[1]),this.addNamespaces(t);let a=xo(this.data,s)||{};i?wo(a,n,r):a={...a,...n},bo(this.data,s,a),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var Mo={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,i,r){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,i,r))})),t}};const Ao={};class Ro extends go{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function(e,t,n){e.forEach((e=>{t[e]&&(n[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=mo.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,s=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!function(e,t,n){t=t||"",n=n||"";const i=Eo.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===i.length)return!0;const r=new RegExp("(".concat(i.map((e=>"?"===e?"\\?":e)).join("|"),")"));let o=!r.test(e);if(!o){const t=e.indexOf(n);t>0&&!r.test(e.substring(0,t))&&(o=!0)}return o}(e,n,i);if(o&&!s){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:r};const o=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(o[0])>-1)&&(r=o.shift()),e=o.join(i)}return"string"===typeof r&&(r=[r]),{key:e,namespaces:r}}translate(e,t,n){if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t={...t}),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],t),a=s[s.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return i?{res:"".concat(a).concat(e).concat(o),usedKey:o,exactUsedKey:o,usedLng:l,usedNS:a}:"".concat(a).concat(e).concat(o)}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:a}:o}const u=this.resolve(e,t);let h=u&&u.res;const d=u&&u.usedKey||o,p=u&&u.exactUsedKey||o,f=Object.prototype.toString.apply(h),m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject;if(g&&h&&("string"!==typeof h&&"boolean"!==typeof h&&"number"!==typeof h)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0&&("string"!==typeof m||"[object Array]"!==f)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,h,{...t,ns:s}):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");return i?(u.res=e,u):e}if(r){const e="[object Array]"===f,n=e?[]:{},i=e?p:d;for(const o in h)if(Object.prototype.hasOwnProperty.call(h,o)){const e="".concat(i).concat(r).concat(o);n[o]=this.translate(e,{...t,joinArrays:!1,ns:s}),n[o]===e&&(n[o]=h[o])}h=n}}else if(g&&"string"===typeof m&&"[object Array]"===f)h=h.join(m),h&&(h=this.extendTranslation(h,e,t,n));else{let i=!1,s=!1;const c=void 0!==t.count&&"string"!==typeof t.count,d=Ro.hasDefaultValue(t),p=c?this.pluralResolver.getSuffix(l,t.count,t):"",f=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",m=t["defaultValue".concat(p)]||t["defaultValue".concat(f)]||t.defaultValue;!this.isValidLookup(h)&&d&&(i=!0,h=m),this.isValidLookup(h)||(s=!0,h=o);const g=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:h,y=d&&m!==h&&this.options.updateMissing;if(s||i||y){if(this.logger.log(y?"updateKey":"missingKey",l,a,o,y?m:h),r){const e=this.resolve(o,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const i=(e,n,i)=>{const r=d&&i!==h?i:g;this.options.missingKeyHandler?this.options.missingKeyHandler(e,a,n,r,y,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,a,n,r,y,t),this.emit("missingKey",e,a,n,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach((e=>{this.pluralResolver.getSuffixes(e,t).forEach((n=>{i([e],o+n,t["defaultValue".concat(n)]||m)}))})):i(e,o,m))}h=this.extendTranslation(h,e,t,u,n),s&&h===o&&this.options.appendNamespaceToMissingKey&&(h="".concat(a,":").concat(o)),(s||i)&&this.options.parseMissingKeyHandler&&(h="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(a,":").concat(o):o,i?h:void 0):this.options.parseMissingKeyHandler(h))}return i?(u.res=h,u):h}extendTranslation(e,t,n,i,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const s="string"===typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(s){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=n.replace&&"string"!==typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),s){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&i&&i.res&&(n.lng=i.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r&&r[0]===i[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null):o.translate(...i,t)}),n)),n.interpolation&&this.interpolator.reset()}const s=n.postProcess||this.options.postProcess,a="string"===typeof s?[s]:s;return void 0!==e&&null!==e&&a&&a.length&&!1!==n.applyPostProcessor&&(e=Mo.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:i,...n}:n,this)),e}resolve(e){let t,n,i,r,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof e&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const a=this.extractFromKey(e,s),l=a.key;n=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==s.count&&"string"!==typeof s.count,h=u&&!s.ordinal&&0===s.count&&this.pluralResolver.shouldUseIntlApi(),d=void 0!==s.context&&("string"===typeof s.context||"number"===typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);c.forEach((e=>{this.isValidLookup(t)||(o=e,!Ao["".concat(p[0],"-").concat(e)]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(Ao["".concat(p[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((n=>{if(this.isValidLookup(t))return;r=n;const o=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,n,e,s);else{let e;u&&(e=this.pluralResolver.getSuffix(n,s.count,s));const t="".concat(this.options.pluralSeparator,"zero"),i="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(u&&(o.push(l+e),s.ordinal&&0===e.indexOf(i)&&o.push(l+e.replace(i,this.options.pluralSeparator)),h&&o.push(l+t)),d){const n="".concat(l).concat(this.options.contextSeparator).concat(s.context);o.push(n),u&&(o.push(n+e),s.ordinal&&0===e.indexOf(i)&&o.push(n+e.replace(i,this.options.pluralSeparator)),h&&o.push(n+t))}}let a;for(;a=o.pop();)this.isValidLookup(t)||(i=a,t=this.getResource(n,e,a,s))})))}))})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}function zo(e){return e.charAt(0).toUpperCase()+e.slice(1)}class Lo{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mo.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Po(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Po(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if("string"===typeof e&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=zo(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=zo(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=zo(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:0===e.indexOf(n)?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),"string"===typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],r=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"===typeof e&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(e))):"string"===typeof e&&r(this.formatLanguageCode(e)),n.forEach((e=>{i.indexOf(e)<0&&r(this.formatLanguageCode(e))})),i}}let Oo=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Do={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};const Fo=["v1","v2","v3"],No=["v4"],Bo={zero:0,one:1,two:2,few:3,many:4,other:5};class jo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=mo.create("pluralResolver"),this.options.compatibilityJSON&&!No.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){const e={};return Oo.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:Do[t.fc]}}))})),e}()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Po(e),{type:t.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>"".concat(t).concat(e)))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>Bo[e]-Bo[t])).map((e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e))):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(i.select(t)):this.getSuffixRetroCompatible(i,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));const r=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return"v1"===this.options.compatibilityJSON?1===i?"":"number"===typeof i?"_plural_".concat(i.toString()):r():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?r():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!Fo.includes(this.options.compatibilityJSON)}}function Vo(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=function(e,t,n){const i=xo(e,n);return void 0!==i?i:xo(t,n)}(e,t,n);return!o&&r&&"string"===typeof n&&(o=To(e,n,i),void 0===o&&(o=To(t,n,i))),o}class Uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=mo.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Co,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?So(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?So(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?So(t.nestingPrefix):t.nestingPrefixEscaped||So("$t("),this.nestingSuffix=t.nestingSuffix?So(t.nestingSuffix):t.nestingSuffixEscaped||So(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");const t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");const n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}interpolate(e,t,n,i){let r,o,s;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(e){return e.replace(/\$/g,"$$$$")}const c=e=>{if(e.indexOf(this.formatSeparator)<0){const r=Vo(t,a,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(r,void 0,n,{...i,...t,interpolationkey:e}):r}const r=e.split(this.formatSeparator),o=r.shift().trim(),s=r.join(this.formatSeparator).trim();return this.format(Vo(t,a,o,this.options.keySeparator,this.options.ignoreJSONStructure),s,n,{...i,...t,interpolationkey:o})};this.resetRegExp();const u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>l(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?l(this.escape(e)):l(e)}].forEach((t=>{for(s=0;r=t.regex.exec(e);){const n=r[1].trim();if(o=c(n),void 0===o)if("function"===typeof u){const t=u(e,r,i);o="string"===typeof t?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))o="";else{if(h){o=r[0];continue}this.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"===typeof o||this.useRawValueToEscape||(o=_o(o));const a=t.safeValue(o);if(e=e.replace(r[0],a),h?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,s++,s>=this.maxReplaces)break}})),e}nest(e,t){let n,i,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function s(e,t){const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const i=e.split(new RegExp("".concat(n,"[ ]*{")));let o="{".concat(i[1]);e=i[0],o=this.interpolate(o,r);const s=o.match(/'/g),a=o.match(/"/g);(s&&s.length%2===0&&!a||a.length%2!==0)&&(o=o.replace(/'/g,'"'));try{r=JSON.parse(o),t&&(r={...t,...r})}catch(l){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),l),"".concat(e).concat(n).concat(o)}return delete r.defaultValue,e}for(;n=this.nestingRegexp.exec(e);){let a=[];r={...o},r=r.replace&&"string"!==typeof r.replace?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),a=e,l=!0}if(i=t(s.call(this,n[1].trim(),r),r),i&&n[0]===e&&"string"!==typeof i)return i;"string"!==typeof i&&(i=_o(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),l&&(i=a.reduce(((e,t)=>this.format(e,t,o.lng,{...o,interpolationkey:n[1].trim()})),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}function qo(e){const t={};return function(n,i,r){const o=i+JSON.stringify(r);let s=t[o];return s||(s=e(i,r),t[o]=s),s(n)}}class Go{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=mo.create("formatter"),this.options=e,this.formats={number:qo(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:qo(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:qo(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:qo(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:qo(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=qo(t)}format(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=t.split(this.formatSeparator).reduce(((e,t)=>{const{formatName:r,formatOptions:o}=function(e){let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);"currency"===t&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((e=>{if(!e)return;const[t,...i]=e.split(":"),r=i.join(":").trim().replace(/^'+|'+$/g,"");n[t.trim()]||(n[t.trim()]=r),"false"===r&&(n[t.trim()]=!1),"true"===r&&(n[t.trim()]=!0),isNaN(r)||(n[t.trim()]=parseInt(r,10))}))}return{formatName:t,formatOptions:n}}(t);if(this.formats[r]){let t=e;try{const s=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},a=s.locale||s.lng||i.locale||i.lng||n;t=this.formats[r](e,a,{...o,...i,...s})}catch(s){this.logger.warn(s)}return t}return this.logger.warn("there was no format function for ".concat(r)),e}),e);return r}}class Zo extends go{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=mo.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(e,t,n,i){const r={},o={},s={},a={};return e.forEach((e=>{let i=!0;t.forEach((t=>{const s="".concat(e,"|").concat(t);!n.reload&&this.store.hasResourceBundle(e,t)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===o[s]&&(o[s]=!0):(this.state[s]=1,i=!1,void 0===o[s]&&(o[s]=!0),void 0===r[s]&&(r[s]=!0),void 0===a[t]&&(a[t]=!0)))})),i||(s[e]=!0)})),(Object.keys(r).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const i=e.split("|"),r=i[0],o=i[1];t&&this.emit("failedLoading",r,o,t),n&&this.store.addResourceBundle(r,o,n),this.state[e]=t?-1:2;const s={};this.queue.forEach((n=>{!function(e,t,n,i){const{obj:r,k:o}=vo(e,t,Object);r[o]=r[o]||[],i&&(r[o]=r[o].concat(n)),i||r[o].push(n)}(n.loaded,[r],o),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{s[e]||(s[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===s[e][t]&&(s[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:r,callback:o});this.readingCalls++;const s=(s,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}s&&a&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,i+1,2*r,o)}),r):o(s,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,s);try{const n=a(e,t);n&&"function"===typeof n.then?n.then((e=>s(null,e))).catch(s):s(null,n)}catch(l){s(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"===typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"===typeof t&&(t=[t]);const r=this.queueLoad(e,t,n,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),i=n[0],r=n[1];this.read(i,r,"read",void 0,void 0,((n,o)=>{n&&this.logger.warn("".concat(t,"loading namespace ").concat(r," for language ").concat(i," failed"),n),!n&&o&&this.logger.log("".concat(t,"loaded namespace ").concat(r," for language ").concat(i),o),this.loaded(e,n,o)}))}saveMissing(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){const l={...o,isUpdate:r},c=this.backend.create.bind(this.backend);if(c.length<6)try{let r;r=5===c.length?c(e,t,n,i,l):c(e,t,n,i),r&&"function"===typeof r.then?r.then((e=>s(null,e))).catch(s):s(null,r)}catch(a){s(a)}else c(e,t,n,i,s,l)}e&&e[0]&&this.store.addResource(e[0],t,n,i)}}}function Ho(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if("object"===typeof e[1]&&(t=e[1]),"string"===typeof e[1]&&(t.defaultValue=e[1]),"string"===typeof e[2]&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:(e,t,n,i)=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Wo(e){return"string"===typeof e.ns&&(e.ns=[e.ns]),"string"===typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"===typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Ko(){}class Xo extends go{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=Wo(e),this.services={},this.logger=mo,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"===typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"===typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=Ho();function r(e){return e?"function"===typeof e?new e:e:null}if(this.options={...i,...this.options,...Wo(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){let t;this.modules.logger?mo.init(r(this.modules.logger),this.options):mo.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!==typeof Intl&&(t=Go);const n=new Lo(this.options);this.store=new Io(this.options.resources,this.options);const o=this.services;o.logger=mo,o.resourceStore=this.store,o.languageUtils=n,o.pluralResolver=new jo(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(o.formatter=r(t),o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new Uo(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new Zo(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit(t,...i)})),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new Ro(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit(t,...i)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=Ko),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const o=yo(),s=()=>{const e=(e,t)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ko;const n="string"===typeof e?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase())return t();const e=[],i=t=>{if(!t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{e.indexOf(t)<0&&e.push(t)}))};if(n)i(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>i(e)))}this.options.preload&&this.options.preload.forEach((e=>i(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const i=yo();return e||(e=this.languages),t||(t=this.options.ns),n||(n=Ko),this.services.backendConnector.reload(e,t,(e=>{i.resolve(),n(e)})),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Mo.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const i=yo();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},o=(e,o)=>{o?(r(o),this.translator.changeLanguage(o),this.isLanguageChangingTo=void 0,this.emit("languageChanged",o),this.logger.log("languageChanged",o)):this.isLanguageChangingTo=void 0,i.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},s=t=>{e||t||!this.services.languageDetector||(t=[]);const n="string"===typeof t?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||r(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{o(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),i}getFixedT(e,t,n){var i=this;const r=function(e,t){let o;if("object"!==typeof t){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];o=i.options.overloadTranslationOptionHandler([e,t].concat(a))}else o={...t};o.lng=o.lng||r.lng,o.lngs=o.lngs||r.lngs,o.ns=o.ns||r.ns,o.keyPrefix=o.keyPrefix||n||r.keyPrefix;const c=i.options.keySeparator||".";let u;return u=o.keyPrefix&&Array.isArray(e)?e.map((e=>"".concat(o.keyPrefix).concat(c).concat(e))):o.keyPrefix?"".concat(o.keyPrefix).concat(c).concat(e):e,i.t(u,o)};return"string"===typeof e?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const o=(e,t)=>{const n=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||2===n};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!o(n,e)||i&&!o(r,e)))}loadNamespaces(e,t){const n=yo();return this.options.ns?("string"===typeof e&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=yo();"string"===typeof e&&(e=[e]);const i=this.options.preload||[],r=e.filter((e=>i.indexOf(e)<0));return r.length?(this.options.preload=i.concat(r),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new Lo(Ho());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Xo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ko;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},r=new Xo(i);void 0===e.debug&&void 0===e.prefix||(r.logger=r.logger.clone(e));return["store","services","language"].forEach((e=>{r[e]=this[e]})),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n&&(r.store=new Io(this.store.data,i),r.services.resourceStore=r.store),r.translator=new Ro(r.services,i),r.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.emit(e,...n)})),r.init(i,t),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Yo=Xo.createInstance();Yo.createInstance=Xo.createInstance;Yo.createInstance,Yo.dir,Yo.init,Yo.loadResources,Yo.reloadResources,Yo.use,Yo.changeLanguage,Yo.getFixedT,Yo.t,Yo.exists,Yo.setDefaultNamespace,Yo.hasLoadedNamespace,Yo.loadNamespaces,Yo.loadLanguages;n(399);Object.create(null);const $o=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Jo={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Qo=e=>Jo[e];let es,ts={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace($o,Qo)};const ns={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ts={...ts,...e}}(e.options.react),function(e){es=e}(e)}};(0,t.createContext)();const is={de:{},en:{}};Yo.use(ns).init({resources:is,lng:"de",keySeperator:!1,interpolation:{escapeValue:!1}});function rs(){return rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rs.apply(this,arguments)}function os(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function ss(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ss(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}const as=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=ss(e))&&(i&&(i+=" "),i+=t);return i};function ls(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i={};return Object.keys(e).forEach((r=>{i[r]=e[r].reduce(((e,i)=>{if(i){const r=t(i);""!==r&&e.push(r),n&&n[i]&&e.push(n[i])}return e}),[]).join(" ")})),i}function cs(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function us(e){if("string"!==typeof e)throw new Error(cs(7));return e.charAt(0).toUpperCase()+e.slice(1)}const hs=us;function ds(){return ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ds.apply(this,arguments)}function ps(e,t){const n=ds({},t);return Object.keys(e).forEach((i=>{if(i.toString().match(/^(components|slots)$/))n[i]=ds({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const r=e[i]||{},o=t[i];n[i]={},o&&Object.keys(o)?r&&Object.keys(r)?(n[i]=ds({},o),Object.keys(r).forEach((e=>{n[i][e]=ps(r[e],o[e])}))):n[i]=o:n[i]=r}else void 0===n[i]&&(n[i]=e[i])})),n}function fs(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?ps(t.components[n].defaultProps,i):i}function ms(){return ms=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ms.apply(this,arguments)}function gs(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function ys(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function _s(e){if(!ys(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=_s(e[n])})),t}function vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=n.clone?ds({},e):e;return ys(e)&&ys(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(ys(t[r])&&r in e&&ys(e[r])?i[r]=vs(e[r],t[r],n):n.clone?i[r]=ys(t[r])?_s(t[r]):t[r]:i[r]=t[r])})),i}const bs=["values","unit","step"],xs=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>ms({},e,{[t.key]:t.val})),{})};const ws={borderRadius:4},Ss={xs:0,sm:600,md:900,lg:1200,xl:1536},ks={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(Ss[e],"px)")};function Cs(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const e=i.breakpoints||ks;return t.reduce(((i,r,o)=>(i[e.up(e.keys[o])]=n(t[o]),i)),{})}if("object"===typeof t){const e=i.breakpoints||ks;return Object.keys(t).reduce(((i,r)=>{if(-1!==Object.keys(e.values||Ss).indexOf(r)){i[e.up(r)]=n(t[r],r)}else{const e=r;i[e]=t[e]}return i}),{})}return n(t)}function Es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const n=null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return n||{}}function Ts(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function Ps(e){let{values:t,breakpoints:n,base:i}=e;const r=i||function(e,t){if("object"!==typeof e)return{};const n={},i=Object.keys(t);return Array.isArray(e)?i.forEach(((t,i)=>{i<e.length&&(n[t]=!0)})):i.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(r);if(0===o.length)return t;let s;return o.reduce(((e,n,i)=>(Array.isArray(t)?(e[n]=null!=t[i]?t[i]:t[s],s=i):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}function Is(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function Ms(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return i="function"===typeof e?e(n):Array.isArray(e)?e[n]||r:Is(e,n)||r,t&&(i=t(i,r,e)),i}const As=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:r}=e,o=e=>{if(null==e[t])return null;const o=e[t],s=Is(e.theme,i)||{};return Cs(e,o,(e=>{let i=Ms(s,r,e);return e===i&&"string"===typeof e&&(i=Ms(s,r,"".concat(t).concat("default"===e?"":us(e)),e)),!1===n?i:{[n]:i}}))};return o.propTypes={},o.filterProps=[t],o};const Rs=function(e,t){return t?vs(e,t,{clone:!1}):e};const zs={m:"margin",p:"padding"},Ls={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Os={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ds=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!Os[e])return[e];e=Os[e]}const[t,n]=e.split(""),i=zs[t],r=Ls[n]||"";return Array.isArray(r)?r.map((e=>i+e)):[i+r]})),Fs=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ns=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Bs=[...Fs,...Ns];function js(e,t,n,i){var r;const o=null!=(r=Is(e,t,!1))?r:n;return"number"===typeof o?e=>"string"===typeof e?e:o*e:Array.isArray(o)?e=>"string"===typeof e?e:o[e]:"function"===typeof o?o:()=>{}}function Vs(e){return js(e,"spacing",8)}function Us(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function qs(e,t,n,i){if(-1===t.indexOf(n))return null;const r=function(e,t){return n=>e.reduce(((e,i)=>(e[i]=Us(t,n),e)),{})}(Ds(n),i);return Cs(e,e[n],r)}function Gs(e,t){const n=Vs(e.theme);return Object.keys(e).map((i=>qs(e,t,i,n))).reduce(Rs,{})}function Zs(e){return Gs(e,Fs)}function Hs(e){return Gs(e,Ns)}function Ws(e){return Gs(e,Bs)}Zs.propTypes={},Zs.filterProps=Fs,Hs.propTypes={},Hs.filterProps=Ns,Ws.propTypes={},Ws.filterProps=Bs;const Ks=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),r=e=>Object.keys(e).reduce(((t,n)=>i[n]?Rs(t,i[n](e)):t),{});return r.propTypes={},r.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),r};function Xs(e){return"number"!==typeof e?e:"".concat(e,"px solid")}const Ys=As({prop:"border",themeKey:"borders",transform:Xs}),$s=As({prop:"borderTop",themeKey:"borders",transform:Xs}),Js=As({prop:"borderRight",themeKey:"borders",transform:Xs}),Qs=As({prop:"borderBottom",themeKey:"borders",transform:Xs}),ea=As({prop:"borderLeft",themeKey:"borders",transform:Xs}),ta=As({prop:"borderColor",themeKey:"palette"}),na=As({prop:"borderTopColor",themeKey:"palette"}),ia=As({prop:"borderRightColor",themeKey:"palette"}),ra=As({prop:"borderBottomColor",themeKey:"palette"}),oa=As({prop:"borderLeftColor",themeKey:"palette"}),sa=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=js(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:Us(t,e)});return Cs(e,e.borderRadius,n)}return null};sa.propTypes={},sa.filterProps=["borderRadius"];Ks(Ys,$s,Js,Qs,ea,ta,na,ia,ra,oa,sa);const aa=e=>{if(void 0!==e.gap&&null!==e.gap){const t=js(e.theme,"spacing",8),n=e=>({gap:Us(t,e)});return Cs(e,e.gap,n)}return null};aa.propTypes={},aa.filterProps=["gap"];const la=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=js(e.theme,"spacing",8),n=e=>({columnGap:Us(t,e)});return Cs(e,e.columnGap,n)}return null};la.propTypes={},la.filterProps=["columnGap"];const ca=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=js(e.theme,"spacing",8),n=e=>({rowGap:Us(t,e)});return Cs(e,e.rowGap,n)}return null};ca.propTypes={},ca.filterProps=["rowGap"];Ks(aa,la,ca,As({prop:"gridColumn"}),As({prop:"gridRow"}),As({prop:"gridAutoFlow"}),As({prop:"gridAutoColumns"}),As({prop:"gridAutoRows"}),As({prop:"gridTemplateColumns"}),As({prop:"gridTemplateRows"}),As({prop:"gridTemplateAreas"}),As({prop:"gridArea"}));function ua(e,t){return"grey"===t?t:e}Ks(As({prop:"color",themeKey:"palette",transform:ua}),As({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ua}),As({prop:"backgroundColor",themeKey:"palette",transform:ua}));function ha(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const da=As({prop:"width",transform:ha}),pa=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,i,r;return{maxWidth:(null==(n=e.theme)||null==(i=n.breakpoints)||null==(r=i.values)?void 0:r[t])||Ss[t]||ha(t)}};return Cs(e,e.maxWidth,t)}return null};pa.filterProps=["maxWidth"];const fa=As({prop:"minWidth",transform:ha}),ma=As({prop:"height",transform:ha}),ga=As({prop:"maxHeight",transform:ha}),ya=As({prop:"minHeight",transform:ha}),_a=(As({prop:"size",cssProperty:"width",transform:ha}),As({prop:"size",cssProperty:"height",transform:ha}),Ks(da,pa,fa,ma,ga,ya,As({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Xs},borderTop:{themeKey:"borders",transform:Xs},borderRight:{themeKey:"borders",transform:Xs},borderBottom:{themeKey:"borders",transform:Xs},borderLeft:{themeKey:"borders",transform:Xs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:sa},color:{themeKey:"palette",transform:ua},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ua},backgroundColor:{themeKey:"palette",transform:ua},p:{style:Hs},pt:{style:Hs},pr:{style:Hs},pb:{style:Hs},pl:{style:Hs},px:{style:Hs},py:{style:Hs},padding:{style:Hs},paddingTop:{style:Hs},paddingRight:{style:Hs},paddingBottom:{style:Hs},paddingLeft:{style:Hs},paddingX:{style:Hs},paddingY:{style:Hs},paddingInline:{style:Hs},paddingInlineStart:{style:Hs},paddingInlineEnd:{style:Hs},paddingBlock:{style:Hs},paddingBlockStart:{style:Hs},paddingBlockEnd:{style:Hs},m:{style:Zs},mt:{style:Zs},mr:{style:Zs},mb:{style:Zs},ml:{style:Zs},mx:{style:Zs},my:{style:Zs},margin:{style:Zs},marginTop:{style:Zs},marginRight:{style:Zs},marginBottom:{style:Zs},marginLeft:{style:Zs},marginX:{style:Zs},marginY:{style:Zs},marginInline:{style:Zs},marginInlineStart:{style:Zs},marginInlineEnd:{style:Zs},marginBlock:{style:Zs},marginBlockStart:{style:Zs},marginBlockEnd:{style:Zs},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:aa},rowGap:{style:ca},columnGap:{style:la},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ha},maxWidth:{style:pa},minWidth:{transform:ha},height:{transform:ha},maxHeight:{transform:ha},minHeight:{transform:ha},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const va=function(){function e(e,t,n,i){const r={[e]:t,theme:n},o=i[e];if(!o)return{[e]:t};const{cssProperty:s=e,themeKey:a,transform:l,style:c}=o;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const u=Is(n,a)||{};if(c)return c(r);return Cs(r,t,(t=>{let n=Ms(u,l,t);return t===n&&"string"===typeof t&&(n=Ms(u,l,"".concat(e).concat("default"===t?"":us(t)),t)),!1===s?n:{[s]:n}}))}return function t(n){var i;const{sx:r,theme:o={}}=n||{};if(!r)return null;const s=null!=(i=o.unstable_sxConfig)?i:_a;function a(n){let i=n;if("function"===typeof n)i=n(o);else if("object"!==typeof n)return n;if(!i)return null;const r=Es(o.breakpoints),a=Object.keys(r);let l=r;return Object.keys(i).forEach((n=>{const r=(a=i[n],c=o,"function"===typeof a?a(c):a);var a,c;if(null!==r&&void 0!==r)if("object"===typeof r)if(s[n])l=Rs(l,e(n,r,o,s));else{const e=Cs({theme:o},r,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),r=new Set(i);return t.every((e=>r.size===Object.keys(e).length))}(e,r)?l=Rs(l,e):l[n]=t({sx:r,theme:o})}else l=Rs(l,e(n,r,o,s))})),Ts(a,l)}return Array.isArray(r)?r.map(a):a(r)}}();va.filterProps=["sx"];const ba=va,xa=["breakpoints","palette","spacing","shape"];const wa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:i,shape:r={}}=e,o=gs(e,xa),s=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=e,r=gs(e,bs),o=xs(t),s=Object.keys(o);function a(e){const i="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(i).concat(n,")")}function l(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-i/100).concat(n,")")}function c(e,r){const o=s.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==o&&"number"===typeof t[s[o]]?t[s[o]]:r)-i/100).concat(n,")")}return ms({keys:s,values:o,up:a,down:l,between:c,only:function(e){return s.indexOf(e)+1<s.length?c(e,s[s.indexOf(e)+1]):a(e)},not:function(e){const t=s.indexOf(e);return 0===t?a(s[1]):t===s.length-1?l(s[t]):c(e,s[s.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},r)}(t),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=Vs({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(i);let l=vs({breakpoints:s,direction:"ltr",components:{},palette:ms({mode:"light"},n),spacing:a,shape:ms({},ws,r)},o);for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];return l=u.reduce(((e,t)=>vs(e,t)),l),l.unstable_sxConfig=ms({},_a,null==o?void 0:o.unstable_sxConfig),l.unstable_sx=function(e){return ba({sx:e,theme:this})},l};var Sa=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(i){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),ka=Math.abs,Ca=String.fromCharCode,Ea=Object.assign;function Ta(e){return e.trim()}function Pa(e,t,n){return e.replace(t,n)}function Ia(e,t){return e.indexOf(t)}function Ma(e,t){return 0|e.charCodeAt(t)}function Aa(e,t,n){return e.slice(t,n)}function Ra(e){return e.length}function za(e){return e.length}function La(e,t){return t.push(e),e}var Oa=1,Da=1,Fa=0,Na=0,Ba=0,ja="";function Va(e,t,n,i,r,o,s){return{value:e,root:t,parent:n,type:i,props:r,children:o,line:Oa,column:Da,length:s,return:""}}function Ua(e,t){return Ea(Va("",null,null,"",null,null,0),e,{length:-e.length},t)}function qa(){return Ba=Na>0?Ma(ja,--Na):0,Da--,10===Ba&&(Da=1,Oa--),Ba}function Ga(){return Ba=Na<Fa?Ma(ja,Na++):0,Da++,10===Ba&&(Da=1,Oa++),Ba}function Za(){return Ma(ja,Na)}function Ha(){return Na}function Wa(e,t){return Aa(ja,e,t)}function Ka(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Xa(e){return Oa=Da=1,Fa=Ra(ja=e),Na=0,[]}function Ya(e){return ja="",e}function $a(e){return Ta(Wa(Na-1,el(91===e?e+2:40===e?e+1:e)))}function Ja(e){for(;(Ba=Za())&&Ba<33;)Ga();return Ka(e)>2||Ka(Ba)>3?"":" "}function Qa(e,t){for(;--t&&Ga()&&!(Ba<48||Ba>102||Ba>57&&Ba<65||Ba>70&&Ba<97););return Wa(e,Ha()+(t<6&&32==Za()&&32==Ga()))}function el(e){for(;Ga();)switch(Ba){case e:return Na;case 34:case 39:34!==e&&39!==e&&el(Ba);break;case 40:41===e&&el(e);break;case 92:Ga()}return Na}function tl(e,t){for(;Ga()&&e+Ba!==57&&(e+Ba!==84||47!==Za()););return"/*"+Wa(t,Na-1)+"*"+Ca(47===e?e:Ga())}function nl(e){for(;!Ka(Za());)Ga();return Wa(e,Na)}var il="-ms-",rl="-moz-",ol="-webkit-",sl="comm",al="rule",ll="decl",cl="@keyframes";function ul(e,t){for(var n="",i=za(e),r=0;r<i;r++)n+=t(e[r],r,e,t)||"";return n}function hl(e,t,n,i){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ll:return e.return=e.return||e.value;case sl:return"";case cl:return e.return=e.value+"{"+ul(e.children,i)+"}";case al:e.value=e.props.join(",")}return Ra(n=ul(e.children,i))?e.return=e.value+"{"+n+"}":""}function dl(e){return Ya(pl("",null,null,null,[""],e=Xa(e),0,[0],e))}function pl(e,t,n,i,r,o,s,a,l){for(var c=0,u=0,h=s,d=0,p=0,f=0,m=1,g=1,y=1,_=0,v="",b=r,x=o,w=i,S=v;g;)switch(f=_,_=Ga()){case 40:if(108!=f&&58==Ma(S,h-1)){-1!=Ia(S+=Pa($a(_),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=$a(_);break;case 9:case 10:case 13:case 32:S+=Ja(f);break;case 92:S+=Qa(Ha()-1,7);continue;case 47:switch(Za()){case 42:case 47:La(ml(tl(Ga(),Ha()),t,n),l);break;default:S+="/"}break;case 123*m:a[c++]=Ra(S)*y;case 125*m:case 59:case 0:switch(_){case 0:case 125:g=0;case 59+u:-1==y&&(S=Pa(S,/\f/g,"")),p>0&&Ra(S)-h&&La(p>32?gl(S+";",i,n,h-1):gl(Pa(S," ","")+";",i,n,h-2),l);break;case 59:S+=";";default:if(La(w=fl(S,t,n,c,u,r,a,v,b=[],x=[],h),o),123===_)if(0===u)pl(S,t,w,w,b,o,h,a,x);else switch(99===d&&110===Ma(S,3)?100:d){case 100:case 108:case 109:case 115:pl(e,w,w,i&&La(fl(e,w,w,0,0,r,a,v,r,b=[],h),x),r,x,h,a,i?b:x);break;default:pl(S,w,w,w,[""],x,0,a,x)}}c=u=p=0,m=y=1,v=S="",h=s;break;case 58:h=1+Ra(S),p=f;default:if(m<1)if(123==_)--m;else if(125==_&&0==m++&&125==qa())continue;switch(S+=Ca(_),_*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(Ra(S)-1)*y,y=1;break;case 64:45===Za()&&(S+=$a(Ga())),d=Za(),u=h=Ra(v=S+=nl(Ha())),_++;break;case 45:45===f&&2==Ra(S)&&(m=0)}}return o}function fl(e,t,n,i,r,o,s,a,l,c,u){for(var h=r-1,d=0===r?o:[""],p=za(d),f=0,m=0,g=0;f<i;++f)for(var y=0,_=Aa(e,h+1,h=ka(m=s[f])),v=e;y<p;++y)(v=Ta(m>0?d[y]+" "+_:Pa(_,/&\f/g,d[y])))&&(l[g++]=v);return Va(e,t,n,0===r?al:a,l,c,u)}function ml(e,t,n){return Va(e,t,n,sl,Ca(Ba),Aa(e,2,-2),0)}function gl(e,t,n,i){return Va(e,t,n,ll,Aa(e,0,i),Aa(e,i+1,-1),i)}var yl=function(e,t,n){for(var i=0,r=0;i=r,r=Za(),38===i&&12===r&&(t[n]=1),!Ka(r);)Ga();return Wa(e,Na)},_l=function(e,t){return Ya(function(e,t){var n=-1,i=44;do{switch(Ka(i)){case 0:38===i&&12===Za()&&(t[n]=1),e[n]+=yl(Na-1,t,n);break;case 2:e[n]+=$a(i);break;case 4:if(44===i){e[++n]=58===Za()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Ca(i)}}while(i=Ga());return e}(Xa(e),t))},vl=new WeakMap,bl=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||vl.get(n))&&!i){vl.set(e,!0);for(var r=[],o=_l(t,r),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=r[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},xl=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function wl(e,t){switch(function(e,t){return 45^Ma(e,0)?(((t<<2^Ma(e,0))<<2^Ma(e,1))<<2^Ma(e,2))<<2^Ma(e,3):0}(e,t)){case 5103:return ol+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ol+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ol+e+rl+e+il+e+e;case 6828:case 4268:return ol+e+il+e+e;case 6165:return ol+e+il+"flex-"+e+e;case 5187:return ol+e+Pa(e,/(\w+).+(:[^]+)/,ol+"box-$1$2"+il+"flex-$1$2")+e;case 5443:return ol+e+il+"flex-item-"+Pa(e,/flex-|-self/,"")+e;case 4675:return ol+e+il+"flex-line-pack"+Pa(e,/align-content|flex-|-self/,"")+e;case 5548:return ol+e+il+Pa(e,"shrink","negative")+e;case 5292:return ol+e+il+Pa(e,"basis","preferred-size")+e;case 6060:return ol+"box-"+Pa(e,"-grow","")+ol+e+il+Pa(e,"grow","positive")+e;case 4554:return ol+Pa(e,/([^-])(transform)/g,"$1"+ol+"$2")+e;case 6187:return Pa(Pa(Pa(e,/(zoom-|grab)/,ol+"$1"),/(image-set)/,ol+"$1"),e,"")+e;case 5495:case 3959:return Pa(e,/(image-set\([^]*)/,ol+"$1$`$1");case 4968:return Pa(Pa(e,/(.+:)(flex-)?(.*)/,ol+"box-pack:$3"+il+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ol+e+e;case 4095:case 3583:case 4068:case 2532:return Pa(e,/(.+)-inline(.+)/,ol+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ra(e)-1-t>6)switch(Ma(e,t+1)){case 109:if(45!==Ma(e,t+4))break;case 102:return Pa(e,/(.+:)(.+)-([^]+)/,"$1"+ol+"$2-$3$1"+rl+(108==Ma(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ia(e,"stretch")?wl(Pa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Ma(e,t+1))break;case 6444:switch(Ma(e,Ra(e)-3-(~Ia(e,"!important")&&10))){case 107:return Pa(e,":",":"+ol)+e;case 101:return Pa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ol+(45===Ma(e,14)?"inline-":"")+"box$3$1"+ol+"$2$3$1"+il+"$2box$3")+e}break;case 5936:switch(Ma(e,t+11)){case 114:return ol+e+il+Pa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ol+e+il+Pa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ol+e+il+Pa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ol+e+il+e+e}return e}var Sl=[function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case ll:e.return=wl(e.value,e.length);break;case cl:return ul([Ua(e,{value:Pa(e.value,"@","@"+ol)})],i);case al:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ul([Ua(e,{props:[Pa(t,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return ul([Ua(e,{props:[Pa(t,/:(plac\w+)/,":"+ol+"input-$1")]}),Ua(e,{props:[Pa(t,/:(plac\w+)/,":-moz-$1")]}),Ua(e,{props:[Pa(t,/:(plac\w+)/,il+"input-$1")]})],i)}return""}))}}],kl=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||Sl;var r,o,s={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;a.push(e)}));var l,c,u=[hl,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=za(e);return function(n,i,r,o){for(var s="",a=0;a<t;a++)s+=e[a](n,i,r,o)||"";return s}}([bl,xl].concat(i,u));o=function(e,t,n,i){l=n,function(e){ul(dl(e),h)}(e?e+"{"+t.styles+"}":t.styles),i&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new Sa({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return d.sheet.hydrate(a),d};var Cl={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function El(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Tl=/[A-Z]|^ms/g,Pl=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Il=function(e){return 45===e.charCodeAt(1)},Ml=function(e){return null!=e&&"boolean"!==typeof e},Al=El((function(e){return Il(e)?e:e.replace(Tl,"-$&").toLowerCase()})),Rl=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Pl,(function(e,t,n){return Ll={name:t,styles:n,next:Ll},t}))}return 1===Cl[e]||Il(e)||"number"!==typeof t||0===t?t:t+"px"};function zl(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ll={name:n.name,styles:n.styles,next:Ll},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)Ll={name:i.name,styles:i.styles,next:Ll},i=i.next;return n.styles+";"}return function(e,t,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=zl(e,t,n[r])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?i+=o+"{"+t[s]+"}":Ml(s)&&(i+=Al(o)+":"+Rl(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=zl(e,t,s);switch(o){case"animation":case"animationName":i+=Al(o)+":"+a+";";break;default:i+=o+"{"+a+"}"}}else for(var l=0;l<s.length;l++)Ml(s[l])&&(i+=Al(o)+":"+Rl(o,s[l])+";")}return i}(e,t,n);case"function":if(void 0!==e){var r=Ll,o=n(e);return Ll=r,zl(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var Ll,Ol=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Dl=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,r="";Ll=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,r+=zl(n,t,o)):r+=o[0];for(var s=1;s<e.length;s++)r+=zl(n,t,e[s]),i&&(r+=o[s]);Ol.lastIndex=0;for(var a,l="";null!==(a=Ol.exec(r));)l+="-"+a[1];var c=function(e){for(var t,n=0,i=0,r=e.length;r>=4;++i,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&e.charCodeAt(i+2))<<16;case 2:n^=(255&e.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+l;return{name:c,styles:r,next:Ll}},Fl=!!i.useInsertionEffect&&i.useInsertionEffect,Nl=Fl||function(e){return e()},Bl=Fl||t.useLayoutEffect,jl=t.createContext("undefined"!==typeof HTMLElement?kl({key:"css"}):null);jl.Provider;var Vl=function(e){return(0,t.forwardRef)((function(n,i){var r=(0,t.useContext)(jl);return e(n,r,i)}))};var Ul=t.createContext({});const ql=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(Ul);return n&&(i=n,0!==Object.keys(i).length)?n:e;var i},Gl=wa();const Zl=function(){return ql(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gl)};function Hl(e,t){return rs({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}function Wl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Kl(e){if(e.type)return e;if("#"===e.charAt(0))return Kl(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(cs(9,e));let i,r=e.substring(t+1,e.length-1);if("color"===n){if(r=r.split(" "),i=r.shift(),4===r.length&&"/"===r[3].charAt(0)&&(r[3]=r[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error(cs(10,i))}else r=r.split(",");return r=r.map((e=>parseFloat(e))),{type:n,values:r,colorSpace:i}}function Xl(e){const{type:t,colorSpace:n}=e;let{values:i}=e;return-1!==t.indexOf("rgb")?i=i.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),i=-1!==t.indexOf("color")?"".concat(n," ").concat(i.join(" ")):"".concat(i.join(", ")),"".concat(t,"(").concat(i,")")}function Yl(e){let t="hsl"===(e=Kl(e)).type||"hsla"===e.type?Kl(function(e){e=Kl(e);const{values:t}=e,n=t[0],i=t[1]/100,r=t[2]/100,o=i*Math.min(r,1-r),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return r-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),Xl({type:a,values:l})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function $l(e,t){return e=Kl(e),t=Wl(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Xl(e)}function Jl(e,t){if(e=Kl(e),t=Wl(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Xl(e)}function Ql(e,t){if(e=Kl(e),t=Wl(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Xl(e)}const ec={black:"#000",white:"#fff"},tc={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},nc={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ic={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},rc={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},oc={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},sc={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ac={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},lc=["mode","contrastThreshold","tonalOffset"],cc={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ec.white,default:ec.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},uc={text:{primary:ec.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ec.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function hc(e,t,n,i){const r=i.light||i,o=i.dark||1.5*i;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Ql(e.main,r):"dark"===t&&(e.dark=Jl(e.main,o)))}function dc(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:i=.2}=e,r=os(e,lc),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oc[200],light:oc[50],dark:oc[400]}:{main:oc[700],light:oc[400],dark:oc[800]}}(t),s=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:nc[200],light:nc[50],dark:nc[400]}:{main:nc[500],light:nc[300],dark:nc[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ic[500],light:ic[300],dark:ic[700]}:{main:ic[700],light:ic[400],dark:ic[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:sc[400],light:sc[300],dark:sc[700]}:{main:sc[700],light:sc[500],dark:sc[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ac[400],light:ac[300],dark:ac[700]}:{main:ac[800],light:ac[500],dark:ac[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:rc[400],light:rc[300],dark:rc[700]}:{main:"#ed6c02",light:rc[500],dark:rc[900]}}(t);function h(e){const t=function(e,t){const n=Yl(e),i=Yl(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}(e,uc.text.primary)>=n?uc.text.primary:cc.text.primary;return t}const d=e=>{let{color:t,name:n,mainShade:r=500,lightShade:o=300,darkShade:s=700}=e;if(t=rs({},t),!t.main&&t[r]&&(t.main=t[r]),!t.hasOwnProperty("main"))throw new Error(cs(11,n?" (".concat(n,")"):"",r));if("string"!==typeof t.main)throw new Error(cs(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return hc(t,"light",o,i),hc(t,"dark",s,i),t.contrastText||(t.contrastText=h(t.main)),t},p={dark:uc,light:cc};return vs(rs({common:rs({},ec),mode:t,primary:d({color:o,name:"primary"}),secondary:d({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:tc,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:i},p[t]),r)}const pc=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const fc={textTransform:"uppercase"},mc='"Roboto", "Helvetica", "Arial", sans-serif';function gc(e,t){const n="function"===typeof t?t(e):t,{fontFamily:i=mc,fontSize:r=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=n,d=os(n,pc);const p=r/14,f=h||(e=>"".concat(e/c*p,"rem")),m=(e,t,n,r,o)=>{return rs({fontFamily:i,fontWeight:e,fontSize:f(t),lineHeight:n},i===mc?{letterSpacing:"".concat((s=r/t,Math.round(1e5*s)/1e5),"em")}:{},o,u);var s},g={h1:m(o,96,1.167,-1.5),h2:m(o,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(a,14,1.75,.4,fc),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,fc),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return vs(rs({htmlFontSize:c,pxToRem:f,fontFamily:i,fontSize:r,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l},g),d,{clone:!1})}function yc(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const _c=["none",yc(0,2,1,-1,0,1,1,0,0,1,3,0),yc(0,3,1,-2,0,2,2,0,0,1,5,0),yc(0,3,3,-2,0,3,4,0,0,1,8,0),yc(0,2,4,-1,0,4,5,0,0,1,10,0),yc(0,3,5,-1,0,5,8,0,0,1,14,0),yc(0,3,5,-1,0,6,10,0,0,1,18,0),yc(0,4,5,-2,0,7,10,1,0,2,16,1),yc(0,5,5,-3,0,8,10,1,0,3,14,2),yc(0,5,6,-3,0,9,12,1,0,3,16,2),yc(0,6,6,-3,0,10,14,1,0,4,18,3),yc(0,6,7,-4,0,11,15,1,0,4,20,3),yc(0,7,8,-4,0,12,17,2,0,5,22,4),yc(0,7,8,-4,0,13,19,2,0,5,24,4),yc(0,7,9,-4,0,14,21,2,0,5,26,4),yc(0,8,9,-5,0,15,22,2,0,6,28,5),yc(0,8,10,-5,0,16,24,2,0,6,30,5),yc(0,8,11,-5,0,17,26,2,0,6,32,5),yc(0,9,11,-5,0,18,28,2,0,7,34,6),yc(0,9,12,-6,0,19,29,2,0,7,36,6),yc(0,10,13,-6,0,20,31,3,0,8,38,7),yc(0,10,13,-6,0,21,33,3,0,8,40,7),yc(0,10,14,-6,0,22,35,3,0,8,42,7),yc(0,11,14,-7,0,23,36,3,0,9,44,8),yc(0,11,15,-7,0,24,38,3,0,9,46,8)],vc=["duration","easing","delay"],bc={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},xc={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function wc(e){return"".concat(Math.round(e),"ms")}function Sc(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function kc(e){const t=rs({},bc,e.easing),n=rs({},xc,e.duration);return rs({getAutoHeightDuration:Sc,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:r=n.standard,easing:o=t.easeInOut,delay:s=0}=i;os(i,vc);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof r?r:wc(r)," ").concat(o," ").concat("string"===typeof s?s:wc(s)))).join(",")}},e,{easing:t,duration:n})}const Cc={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Ec=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Tc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:i={},typography:r={}}=e,o=os(e,Ec);if(e.vars)throw new Error(cs(18));const s=dc(n),a=wa(e);let l=vs(a,{mixins:Hl(a.breakpoints,t),palette:s,shadows:_c.slice(),typography:gc(s,r),transitions:kc(i),zIndex:rs({},Cc)});l=vs(l,o);for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];return l=u.reduce(((e,t)=>vs(e,t)),l),l.unstable_sxConfig=rs({},_a,null==o?void 0:o.unstable_sxConfig),l.unstable_sx=function(e){return ba({sx:e,theme:this})},l}const Pc=Tc(),Ic="$$material";function Mc(e){let{props:t,name:n}=e;return function(e){let{props:t,name:n,defaultTheme:i,themeId:r}=e,o=Zl(i);return r&&(o=o[r]||o),fs({theme:o,name:n,props:t})}({props:t,name:n,defaultTheme:Pc,themeId:Ic})}function Ac(){return Ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ac.apply(this,arguments)}var Rc=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;var zc=function(e,t,n){var i=e.key+"-"+t.name;!1===n&&void 0===e.registered[i]&&(e.registered[i]=t.styles)},Lc=function(e,t,n){zc(e,t,n);var i=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var r=t;do{e.insert(t===r?"."+i:"",r,e.sheet,!0),r=r.next}while(void 0!==r)}},Oc=El((function(e){return Rc.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Dc=function(e){return"theme"!==e},Fc=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Oc:Dc},Nc=function(e,t,n){var i;if(t){var r=t.shouldForwardProp;i=e.__emotion_forwardProp&&r?function(t){return e.__emotion_forwardProp(t)&&r(t)}:r}return"function"!==typeof i&&n&&(i=e.__emotion_forwardProp),i},Bc=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return zc(t,n,i),Nl((function(){return Lc(t,n,i)})),null},jc=function e(n,i){var r,o,s=n.__emotion_real===n,a=s&&n.__emotion_base||n;void 0!==i&&(r=i.label,o=i.target);var l=Nc(n,i,s),c=l||Fc(a),u=!c("as");return function(){var h=arguments,d=s&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==r&&d.push("label:"+r+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{0,d.push(h[0][0]);for(var p=h.length,f=1;f<p;f++)d.push(h[f],h[0][f])}var m=Vl((function(e,n,i){var r=u&&e.as||a,s="",h=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=t.useContext(Ul)}"string"===typeof e.className?s=function(e,t,n){var i="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):i+=n+" "})),i}(n.registered,h,e.className):null!=e.className&&(s=e.className+" ");var m=Dl(d.concat(h),n.registered,p);s+=n.key+"-"+m.name,void 0!==o&&(s+=" "+o);var g=u&&void 0===l?Fc(r):c,y={};for(var _ in e)u&&"as"===_||g(_)&&(y[_]=e[_]);return y.className=s,y.ref=i,t.createElement(t.Fragment,null,t.createElement(Bc,{cache:n,serialized:m,isStringTag:"string"===typeof r}),t.createElement(r,y))}));return m.displayName=void 0!==r?r:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",m.defaultProps=n.defaultProps,m.__emotion_real=m,m.__emotion_base=a,m.__emotion_styles=d,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(t,n){return e(t,Ac({},i,n,{shouldForwardProp:Nc(m,n,!0)})).apply(void 0,d)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){jc[e]=jc(e)}));const Vc=["variant"];function Uc(e){return 0===e.length}function qc(e){const{variant:t}=e,n=gs(e,Vc);let i=t||"";return Object.keys(n).sort().forEach((t=>{i+="color"===t?Uc(i)?e[t]:us(e[t]):"".concat(Uc(i)?t:us(t)).concat(us(e[t].toString()))})),i}const Gc=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Zc(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const Hc=wa();function Wc(e){let{defaultTheme:t,theme:n,themeId:i}=e;return r=n,0===Object.keys(r).length?t:n[i]||n;var r}const Kc=e=>Zc(e)&&"classes"!==e,Xc=Zc,Yc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=Hc,rootShouldForwardProp:i=Zc,slotShouldForwardProp:r=Zc}=e,o=e=>ba(ms({},e,{theme:Wc(ms({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};((e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))})(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:h}=s,d=gs(s,Gc),p=void 0!==c?c:l&&"Root"!==l||!1,f=u||!1;let m=Zc;"Root"===l?m=i:l?m=r:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=function(e,t){return jc(e,t)}(e,ms({shouldForwardProp:m,label:undefined},d)),y=function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];const c=s?s.map((e=>"function"===typeof e&&e.__emotion_real!==e?i=>e(ms({},i,{theme:Wc(ms({},i,{defaultTheme:n,themeId:t}))})):e)):[];let u=i;a&&h&&c.push((e=>{const i=Wc(ms({},e,{defaultTheme:n,themeId:t})),r=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(a,i);if(r){const t={};return Object.entries(r).forEach((n=>{let[r,o]=n;t[r]="function"===typeof o?o(ms({},e,{theme:i})):o})),h(e,t)}return null})),a&&!p&&c.push((e=>{const i=Wc(ms({},e,{defaultTheme:n,themeId:t}));return((e,t,n,i)=>{var r,o;const{ownerState:s={}}=e,a=[],l=null==n||null==(r=n.components)||null==(o=r[i])?void 0:o.variants;return l&&l.forEach((n=>{let i=!0;Object.keys(n.props).forEach((t=>{s[t]!==n.props[t]&&e[t]!==n.props[t]&&(i=!1)})),i&&a.push(t[qc(n.props)])})),a})(e,((e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const i={};return n.forEach((e=>{const t=qc(e.props);i[t]=e.style})),i})(a,i),i,a)})),f||c.push(o);const d=c.length-s.length;if(Array.isArray(i)&&d>0){const e=new Array(d).fill("");u=[...i,...e],u.raw=[...i.raw,...e]}else"function"===typeof i&&i.__emotion_real!==i&&(u=e=>i(ms({},e,{theme:Wc(ms({},e,{defaultTheme:n,themeId:t}))})));const m=g(u,...c);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(y.withConfig=g.withConfig),y}}({themeId:Ic,defaultTheme:Pc,rootShouldForwardProp:Kc}),$c=Yc,Jc=e=>e,Qc=(()=>{let e=Jc;return{configure(t){e=t},generate:t=>e(t),reset(){e=Jc}}})(),eu={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function tu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i=eu[t];return i?"".concat(n,"-").concat(i):"".concat(Qc.generate(e),"-").concat(t)}function nu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=tu(e,t,n)})),i}function iu(e){return tu("MuiSvgIcon",e)}nu("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var ru=n(184);const ou=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],su=$c("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(hs(n.color))],t["fontSize".concat(hs(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var i,r,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(i=t.transitions)||null==(r=i.create)?void 0:r.call(i,"fill",{duration:null==(o=t.transitions)||null==(s=o.duration)?void 0:s.shorter}),fontSize:{inherit:"inherit",small:(null==(a=t.typography)||null==(l=a.pxToRem)?void 0:l.call(a,20))||"1.25rem",medium:(null==(c=t.typography)||null==(u=c.pxToRem)?void 0:u.call(c,24))||"1.5rem",large:(null==(h=t.typography)||null==(d=h.pxToRem)?void 0:d.call(h,35))||"2.1875rem"}[n.fontSize],color:null!=(p=null==(f=(t.vars||t).palette)||null==(m=f[n.color])?void 0:m.main)?p:{action:null==(g=(t.vars||t).palette)||null==(y=g.action)?void 0:y.active,disabled:null==(_=(t.vars||t).palette)||null==(v=_.action)?void 0:v.disabled,inherit:void 0}[n.color]}})),au=t.forwardRef((function(e,n){const i=Mc({props:e,name:"MuiSvgIcon"}),{children:r,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:d="0 0 24 24"}=i,p=os(i,ou),f=t.isValidElement(r)&&"svg"===r.type,m=rs({},i,{color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:f}),g={};u||(g.viewBox=d);const y=(e=>{const{color:t,fontSize:n,classes:i}=e;return ls({root:["root","inherit"!==t&&"color".concat(hs(t)),"fontSize".concat(hs(n))]},iu,i)})(m);return(0,ru.jsxs)(su,rs({as:a,className:as(y.root,o),focusable:"false",color:c,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:n},g,p,f&&r.props,{ownerState:m,children:[f?r.props.children:r,h?(0,ru.jsx)("title",{children:h}):null]}))}));au.muiName="SvgIcon";const lu=au;function cu(e,n){function i(t,i){return(0,ru.jsx)(lu,rs({"data-testid":"".concat(n,"Icon"),ref:i},t,{children:e}))}return i.muiName=lu.muiName,t.memo(t.forwardRef(i))}const uu=cu((0,ru.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");function hu(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function du(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.useMemo((()=>n.every((e=>null==e))?null:e=>{n.forEach((t=>{hu(t,e)}))}),n)}const pu=du,fu="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function mu(e){const n=t.useRef(e);return fu((()=>{n.current=e})),t.useCallback((function(){return(0,n.current)(...arguments)}),[])}const gu=mu;let yu,_u=!0,vu=!1;const bu={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function xu(e){e.metaKey||e.altKey||e.ctrlKey||(_u=!0)}function wu(){_u=!1}function Su(){"hidden"===this.visibilityState&&vu&&(_u=!0)}function ku(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return _u||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!bu[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const Cu=function(){const e=t.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",xu,!0),t.addEventListener("mousedown",wu,!0),t.addEventListener("pointerdown",wu,!0),t.addEventListener("touchstart",wu,!0),t.addEventListener("visibilitychange",Su,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(e){return!!ku(e)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(vu=!0,window.clearTimeout(yu),yu=window.setTimeout((()=>{vu=!1}),100),n.current=!1,!0)},ref:e}};function Eu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Tu(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function Pu(){return Pu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pu.apply(this,arguments)}function Iu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mu(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n(37);const Au=t.createContext(null);function Ru(e,n){var i=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){i[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),i}function zu(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Lu(e,n,i){var r=Ru(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var i,r=Object.create(null),o=[];for(var s in e)s in t?o.length&&(r[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(r[l])for(i=0;i<r[l].length;i++){var c=r[l][i];a[r[l][i]]=n(c)}a[l]=n(l)}for(i=0;i<o.length;i++)a[o[i]]=n(o[i]);return a}(n,r);return Object.keys(o).forEach((function(s){var a=o[s];if((0,t.isValidElement)(a)){var l=s in n,c=s in r,u=n[s],h=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,t.isValidElement)(u)&&(o[s]=(0,t.cloneElement)(a,{onExited:i.bind(null,a),in:u.props.in,exit:zu(a,"exit",e),enter:zu(a,"enter",e)})):o[s]=(0,t.cloneElement)(a,{in:!1}):o[s]=(0,t.cloneElement)(a,{onExited:i.bind(null,a),in:!0,exit:zu(a,"exit",e),enter:zu(a,"enter",e)})}})),o}var Ou=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Du=function(e){function n(t,n){var i,r=(i=e.call(this,t,n)||this).handleExited.bind(Iu(i));return i.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},i}Mu(n,e);var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var i,r,o=n.children,s=n.handleExited;return{children:n.firstRender?(i=e,r=s,Ru(i.children,(function(e){return(0,t.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:zu(e,"appear",i),enter:zu(e,"enter",i),exit:zu(e,"exit",i)})}))):Lu(e,o,s),firstRender:!1}},i.handleExited=function(e,t){var n=Ru(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Pu({},t.children);return delete n[e.key],{children:n}})))},i.render=function(){var e=this.props,n=e.component,i=e.childFactory,r=Tu(e,["component","childFactory"]),o=this.state.contextValue,s=Ou(this.state.children).map(i);return delete r.appear,delete r.enter,delete r.exit,null===n?t.createElement(Au.Provider,{value:o},s):t.createElement(Au.Provider,{value:o},t.createElement(n,r,s))},n}(t.Component);Du.propTypes={},Du.defaultProps={component:"div",childFactory:function(e){return e}};const Fu=Du;var Nu=Vl((function(e,n){var i=e.styles,r=Dl([i],void 0,t.useContext(Ul)),o=t.useRef();return Bl((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),i=!1,s=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==s&&(i=!0,s.setAttribute("data-emotion",e),t.hydrate([s])),o.current=[t,i],function(){t.flush()}}),[n]),Bl((function(){var e=o.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&Lc(n,r.next,!0),t.tags.length){var i=t.tags[t.tags.length-1].nextElementSibling;t.before=i,t.flush()}n.insert("",r,t,!1)}}),[n,r.name]),null}));function Bu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dl(t)}var ju=function(){var e=Bu.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};const Vu=function(e){const{className:n,classes:i,pulsate:r=!1,rippleX:o,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:u}=e,[h,d]=t.useState(!1),p=as(n,i.ripple,i.rippleVisible,r&&i.ripplePulsate),f={width:a,height:a,top:-a/2+s,left:-a/2+o},m=as(i.child,h&&i.childLeaving,r&&i.childPulsate);return l||h||d(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,ru.jsx)("span",{className:p,style:f,children:(0,ru.jsx)("span",{className:m})})};const Uu=nu("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var qu,Gu,Zu,Hu;const Wu=["center","classes","className"];let Ku,Xu,Yu,$u;const Ju=ju(Ku||(Ku=qu||(qu=Eu(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Qu=ju(Xu||(Xu=Gu||(Gu=Eu(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),eh=ju(Yu||(Yu=Zu||(Zu=Eu(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),th=$c("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),nh=$c(Vu,{name:"MuiTouchRipple",slot:"Ripple"})($u||($u=Hu||(Hu=Eu(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Uu.rippleVisible,Ju,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Uu.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),Uu.child,Uu.childLeaving,Qu,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Uu.childPulsate,eh,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),ih=t.forwardRef((function(e,n){const i=Mc({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:o={},className:s}=i,a=os(i,Wu),[l,c]=t.useState([]),u=t.useRef(0),h=t.useRef(null);t.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[l]);const d=t.useRef(!1),p=t.useRef(0),f=t.useRef(null),m=t.useRef(null);t.useEffect((()=>()=>{p.current&&clearTimeout(p.current)}),[]);const g=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:i,rippleSize:r,cb:s}=e;c((e=>[...e,(0,ru.jsx)(nh,{classes:{ripple:as(o.ripple,Uu.ripple),rippleVisible:as(o.rippleVisible,Uu.rippleVisible),ripplePulsate:as(o.ripplePulsate,Uu.ripplePulsate),child:as(o.child,Uu.child),childLeaving:as(o.childLeaving,Uu.childLeaving),childPulsate:as(o.childPulsate,Uu.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:i,rippleSize:r},u.current)])),u.current+=1,h.current=s}),[o]),y=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&d.current)return void(d.current=!1);"touchstart"===(null==e?void 0:e.type)&&(d.current=!0);const a=s?null:m.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;h=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:i,rippleX:c,rippleY:u,rippleSize:h,cb:n})},p.current=setTimeout((()=>{f.current&&(f.current(),f.current=null)}),80)):g({pulsate:i,rippleX:c,rippleY:u,rippleSize:h,cb:n})}),[r,g]),_=t.useCallback((()=>{y({},{pulsate:!0})}),[y]),v=t.useCallback(((e,t)=>{if(clearTimeout(p.current),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void(p.current=setTimeout((()=>{v(e,t)})));f.current=null,c((e=>e.length>0?e.slice(1):e)),h.current=t}),[]);return t.useImperativeHandle(n,(()=>({pulsate:_,start:y,stop:v})),[_,y,v]),(0,ru.jsx)(th,rs({className:as(Uu.root,o.root,s),ref:m},a,{children:(0,ru.jsx)(Fu,{component:null,exit:!0,children:l})}))})),rh=ih;function oh(e){return tu("MuiButtonBase",e)}const sh=nu("MuiButtonBase",["root","disabled","focusVisible"]),ah=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],lh=$c("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(sh.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ch=t.forwardRef((function(e,n){const i=Mc({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:y,onFocus:_,onFocusVisible:v,onKeyDown:b,onKeyUp:x,onMouseDown:w,onMouseLeave:S,onMouseUp:k,onTouchEnd:C,onTouchMove:E,onTouchStart:T,tabIndex:P=0,TouchRippleProps:I,touchRippleRef:M,type:A}=i,R=os(i,ah),z=t.useRef(null),L=t.useRef(null),O=pu(L,M),{isFocusVisibleRef:D,onFocus:F,onBlur:N,ref:B}=Cu(),[j,V]=t.useState(!1);c&&j&&V(!1),t.useImperativeHandle(r,(()=>({focusVisible:()=>{V(!0),z.current.focus()}})),[]);const[U,q]=t.useState(!1);t.useEffect((()=>{q(!0)}),[]);const G=U&&!u&&!c;function Z(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return gu((i=>{t&&t(i);return!n&&L.current&&L.current[e](i),!0}))}t.useEffect((()=>{j&&d&&!u&&U&&L.current.pulsate()}),[u,d,j,U]);const H=Z("start",w),W=Z("stop",g),K=Z("stop",y),X=Z("stop",k),Y=Z("stop",(e=>{j&&e.preventDefault(),S&&S(e)})),$=Z("start",T),J=Z("stop",C),Q=Z("stop",E),ee=Z("stop",(e=>{N(e),!1===D.current&&V(!1),f&&f(e)}),!1),te=gu((e=>{z.current||(z.current=e.currentTarget),F(e),!0===D.current&&(V(!0),v&&v(e)),_&&_(e)})),ne=()=>{const e=z.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},ie=t.useRef(!1),re=gu((e=>{d&&!ie.current&&j&&L.current&&" "===e.key&&(ie.current=!0,L.current.stop(e,(()=>{L.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),b&&b(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),oe=gu((e=>{d&&" "===e.key&&L.current&&j&&!e.defaultPrevented&&(ie.current=!1,L.current.stop(e,(()=>{L.current.pulsate(e)}))),x&&x(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let se=l;"button"===se&&(R.href||R.to)&&(se=p);const ae={};"button"===se?(ae.type=void 0===A?"button":A,ae.disabled=c):(R.href||R.to||(ae.role="button"),c&&(ae["aria-disabled"]=c));const le=pu(n,B,z);const ce=rs({},i,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:P,focusVisible:j}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:i,classes:r}=e,o=ls({root:["root",t&&"disabled",n&&"focusVisible"]},oh,r);return n&&i&&(o.root+=" ".concat(i)),o})(ce);return(0,ru.jsxs)(lh,rs({as:se,className:as(ue.root,a),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:W,onFocus:te,onKeyDown:re,onKeyUp:oe,onMouseDown:H,onMouseLeave:Y,onMouseUp:X,onDragLeave:K,onTouchEnd:J,onTouchMove:Q,onTouchStart:$,ref:le,tabIndex:c?-1:P,type:A},ae,R,{children:[s,G?(0,ru.jsx)(rh,rs({ref:O,center:o},I)):null]}))})),uh=ch;function hh(e){return tu("MuiIconButton",e)}const dh=nu("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),ph=["edge","children","className","color","disabled","disableFocusRipple","size"],fh=$c(uh,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat(hs(n.color))],n.edge&&t["edge".concat(hs(n.edge))],t["size".concat(hs(n.size))]]}})((e=>{let{theme:t,ownerState:n}=e;return rs({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):$l(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var i;const r=null==(i=(t.vars||t).palette)?void 0:i[n.color];return rs({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&rs({color:null==r?void 0:r.main},!n.disableRipple&&{"&:hover":rs({},r&&{backgroundColor:t.vars?"rgba(".concat(r.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):$l(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{["&.".concat(dh.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),mh=t.forwardRef((function(e,t){const n=Mc({props:e,name:"MuiIconButton"}),{edge:i=!1,children:r,className:o,color:s="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=os(n,ph),h=rs({},n,{edge:i,color:s,disabled:a,disableFocusRipple:l,size:c}),d=(e=>{const{classes:t,disabled:n,color:i,edge:r,size:o}=e;return ls({root:["root",n&&"disabled","default"!==i&&"color".concat(hs(i)),r&&"edge".concat(hs(r)),"size".concat(hs(o))]},hh,t)})(h);return(0,ru.jsx)(fh,rs({className:as(d.root,o),centerRipple:!0,focusRipple:!l,disabled:a,ref:t,ownerState:h},u,{children:r}))})),gh=mh,yh=["sx"];function _h(e){const{sx:t}=e,n=gs(e,yh),{systemProps:i,otherProps:r}=(e=>{var t,n;const i={systemProps:{},otherProps:{}},r=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:_a;return Object.keys(e).forEach((t=>{r[t]?i.systemProps[t]=e[t]:i.otherProps[t]=e[t]})),i})(n);let o;return o=Array.isArray(t)?[i,...t]:"function"===typeof t?function(){const e=t(...arguments);return ys(e)?ms({},i,e):i}:ms({},i,t),ms({},r,{sx:o})}function vh(){const e=Zl(Pc);return e[Ic]||e}const bh=t.createContext();function xh(e){return tu("MuiGrid",e)}const wh=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Sh=nu("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>"spacing-xs-".concat(e))),...["column-reverse","column","row-reverse","row"].map((e=>"direction-xs-".concat(e))),...["nowrap","wrap-reverse","wrap"].map((e=>"wrap-xs-".concat(e))),...wh.map((e=>"grid-xs-".concat(e))),...wh.map((e=>"grid-sm-".concat(e))),...wh.map((e=>"grid-md-".concat(e))),...wh.map((e=>"grid-lg-".concat(e))),...wh.map((e=>"grid-xl-".concat(e)))]),kh=Sh,Ch=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Eh(e){const t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function Th(e){let{breakpoints:t,values:n}=e,i="";Object.keys(n).forEach((e=>{""===i&&0!==n[e]&&(i=e)}));const r=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return r.slice(0,r.indexOf(i))}const Ph=$c("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:i,direction:r,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];i&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];const i=[];return t.forEach((t=>{const r=e[t];Number(r)>0&&i.push(n["spacing-".concat(t,"-").concat(String(r))])})),i}(s,c,t));const h=[];return c.forEach((e=>{const i=n[e];i&&h.push(t["grid-".concat(e,"-").concat(String(i))])})),[t.root,i&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,"row"!==r&&t["direction-xs-".concat(String(r))],"wrap"!==a&&t["wrap-xs-".concat(String(a))],...h]}})((e=>{let{ownerState:t}=e;return rs({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;return Cs({theme:t},Ps({values:n.direction,breakpoints:t.breakpoints.values}),(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(kh.item)]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:i,rowSpacing:r}=n;let o={};if(i&&0!==r){const e=Ps({values:r,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=Th({breakpoints:t.breakpoints.values,values:e})),o=Cs({theme:t},e,((e,i)=>{var r;const o=t.spacing(e);return"0px"!==o?{marginTop:"-".concat(Eh(o)),["& > .".concat(kh.item)]:{paddingTop:Eh(o)}}:null!=(r=n)&&r.includes(i)?{}:{marginTop:0,["& > .".concat(kh.item)]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:i,columnSpacing:r}=n;let o={};if(i&&0!==r){const e=Ps({values:r,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=Th({breakpoints:t.breakpoints.values,values:e})),o=Cs({theme:t},e,((e,i)=>{var r;const o=t.spacing(e);return"0px"!==o?{width:"calc(100% + ".concat(Eh(o),")"),marginLeft:"-".concat(Eh(o)),["& > .".concat(kh.item)]:{paddingLeft:Eh(o)}}:null!=(r=n)&&r.includes(i)?{}:{width:"100%",marginLeft:0,["& > .".concat(kh.item)]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:i}=e;return n.breakpoints.keys.reduce(((e,r)=>{let o={};if(i[r]&&(t=i[r]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=Ps({values:i.columns,breakpoints:n.breakpoints.values}),a="object"===typeof s?s[r]:s;if(void 0===a||null===a)return e;const l="".concat(Math.round(t/a*1e8)/1e6,"%");let c={};if(i.container&&i.item&&0!==i.columnSpacing){const e=n.spacing(i.columnSpacing);if("0px"!==e){const t="calc(".concat(l," + ").concat(Eh(e),")");c={flexBasis:t,maxWidth:t}}}o=rs({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[r]?Object.assign(e,o):e[n.breakpoints.up(r)]=o,e}),{})}));const Ih=e=>{const{classes:t,container:n,direction:i,item:r,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];const n=[];return t.forEach((t=>{const i=e[t];if(Number(i)>0){const e="spacing-".concat(t,"-").concat(String(i));n.push(e)}})),n}(o,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push("grid-".concat(t,"-").concat(String(n)))}));return ls({root:["root",n&&"container",r&&"item",a&&"zeroMinWidth",...c,"row"!==i&&"direction-xs-".concat(String(i)),"wrap"!==s&&"wrap-xs-".concat(String(s)),...u]},xh,t)},Mh=t.forwardRef((function(e,n){const i=Mc({props:e,name:"MuiGrid"}),{breakpoints:r}=vh(),o=_h(i),{className:s,columns:a,columnSpacing:l,component:c="div",container:u=!1,direction:h="row",item:d=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=o,y=os(o,Ch),_=p||f,v=l||f,b=t.useContext(bh),x=u?a||12:b,w={},S=rs({},y);r.keys.forEach((e=>{null!=y[e]&&(w[e]=y[e],delete S[e])}));const k=rs({},o,{columns:x,container:u,direction:h,item:d,rowSpacing:_,columnSpacing:v,wrap:m,zeroMinWidth:g,spacing:f},w,{breakpoints:r.keys}),C=Ih(k);return(0,ru.jsx)(bh.Provider,{value:x,children:(0,ru.jsx)(Ph,rs({ownerState:k,className:as(C.root,s),as:c,ref:n},S))})}));const Ah=Mh;function Rh(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function zh(){return zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zh.apply(this,arguments)}var Lh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};const Oh="object"===("undefined"===typeof window?"undefined":Lh(window))&&"object"===("undefined"===typeof document?"undefined":Lh(document))&&9===document.nodeType;function Dh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Fh(e,t,n){return t&&Dh(e.prototype,t),n&&Dh(e,n),e}var Nh={}.constructor;function Bh(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(Bh);if(e.constructor!==Nh)return e;var t={};for(var n in e)t[n]=Bh(e[n]);return t}function jh(e,t,n){void 0===e&&(e="unnamed");var i=n.jss,r=Bh(t),o=i.plugins.onCreateRule(e,r,n);return o||(e[0],null)}var Vh=function(e,t){for(var n="",i=0;i<e.length&&"!important"!==e[i];i++)n&&(n+=t),n+=e[i];return n},Uh=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=Vh(e[n]," ");else t=Vh(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function qh(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function Gh(e,t){for(var n="",i=0;i<t;i++)n+="  ";return n+e}function Zh(e,t,n){void 0===n&&(n={});var i="";if(!t)return i;var r=n.indent,o=void 0===r?0:r,s=t.fallbacks;!1===n.format&&(o=-1/0);var a=qh(n),l=a.linebreak,c=a.space;if(e&&o++,s)if(Array.isArray(s))for(var u=0;u<s.length;u++){var h=s[u];for(var d in h){var p=h[d];null!=p&&(i&&(i+=l),i+=Gh(d+":"+c+Uh(p)+";",o))}}else for(var f in s){var m=s[f];null!=m&&(i&&(i+=l),i+=Gh(f+":"+c+Uh(m)+";",o))}for(var g in t){var y=t[g];null!=y&&"fallbacks"!==g&&(i&&(i+=l),i+=Gh(g+":"+c+Uh(y)+";",o))}return(i||n.allowEmpty)&&e?(i&&(i=""+l+i+l),Gh(""+e+c+"{"+i,--o)+Gh("}",o)):i}var Hh=/([[\].#*$><+~=|^:(),"'`\s])/g,Wh="undefined"!==typeof CSS&&CSS.escape,Kh=function(e){return Wh?Wh(e):e.replace(Hh,"\\$1")},Xh=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var i=n.sheet,r=n.Renderer;this.key=e,this.options=n,this.style=t,i?this.renderer=i.renderer:r&&(this.renderer=new r)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var i=!!n&&n.force;if(!i&&this.style[e]===t)return this;var r=t;n&&!1===n.process||(r=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==r||!1===r,s=e in this.style;if(o&&!s&&!i)return this;var a=o&&s;if(a?delete this.style[e]:this.style[e]=r,this.renderable&&this.renderer)return a?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,r),this;var l=this.options.sheet;return l&&l.attached,this},e}(),Yh=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var o=i.selector,s=i.scoped,a=i.sheet,l=i.generateId;return o?r.selectorText=o:!1!==s&&(r.id=l(Iu(Iu(r)),a),r.selectorText="."+Kh(r.id)),r}Mu(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var i in n)t.setProperty(e,i,n[i])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=Uh(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Pu({},e,{allowEmpty:!0}):e;return Zh(this.selectorText,this.style,n)},Fh(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(Xh),$h={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new Yh(e,t,n)}},Jh={indent:1,children:!0},Qh=/@([\w-]+)/,ed=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var i=e.match(Qh);for(var r in this.at=i?i[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new kd(Pu({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),i):null},t.replaceRule=function(e,t,n){var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.toString=function(e){void 0===e&&(e=Jh);var t=qh(e).linebreak;if(null==e.indent&&(e.indent=Jh.indent),null==e.children&&(e.children=Jh.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),td=/@container|@media|@supports\s+/,nd={onCreateRule:function(e,t,n){return td.test(e)?new ed(e,t,n):null}},id={indent:1,children:!0},rd=/@keyframes\s+([\w-]+)/,od=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=e.match(rd);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var r=n.scoped,o=n.sheet,s=n.generateId;for(var a in this.id=!1===r?this.name:Kh(s(this,o)),this.rules=new kd(Pu({},n,{parent:this})),t)this.rules.add(a,t[a],Pu({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=id);var t=qh(e).linebreak;if(null==e.indent&&(e.indent=id.indent),null==e.children&&(e.children=id.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),sd=/@keyframes\s+/,ad=/\$([\w-]+)/g,ld=function(e,t){return"string"===typeof e?e.replace(ad,(function(e,n){return n in t?t[n]:e})):e},cd=function(e,t,n){var i=e[t],r=ld(i,n);r!==i&&(e[t]=r)},ud={onCreateRule:function(e,t,n){return"string"===typeof e&&sd.test(e)?new od(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&cd(e,"animation-name",n.keyframes),"animation"in e&&cd(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var i=n.options.sheet;if(!i)return e;switch(t){case"animation":case"animation-name":return ld(e,i.keyframes);default:return e}}},hd=function(e){function t(){return e.apply(this,arguments)||this}return Mu(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Pu({},e,{allowEmpty:!0}):e;return Zh(this.key,this.style,n)},t}(Xh),dd={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new hd(e,t,n):null}},pd=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=qh(e).linebreak;if(Array.isArray(this.style)){for(var n="",i=0;i<this.style.length;i++)n+=Zh(this.at,this.style[i]),this.style[i+1]&&(n+=t);return n}return Zh(this.at,this.style,e)},e}(),fd=/@font-face/,md={onCreateRule:function(e,t,n){return fd.test(e)?new pd(e,t,n):null}},gd=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Zh(this.key,this.style,e)},e}(),yd={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new gd(e,t,n):null}},_d=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),vd={"@charset":!0,"@import":!0,"@namespace":!0},bd={onCreateRule:function(e,t,n){return e in vd?new _d(e,t,n):null}},xd=[$h,nd,ud,dd,md,yd,bd],wd={process:!0},Sd={force:!0,process:!0},kd=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var i=this.options,r=i.parent,o=i.sheet,s=i.jss,a=i.Renderer,l=i.generateId,c=i.scoped,u=Pu({classes:this.classes,parent:r,sheet:o,jss:s,Renderer:a,generateId:l,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(u.selector="."+Kh(this.classes[h]));var d=jh(h,t,u);if(!d)return null;this.register(d);var p=void 0===u.index?this.index.length:u.index;return this.index.splice(p,0,d),d},t.replace=function(e,t,n){var i=this.get(e),r=this.index.indexOf(i);i&&this.remove(i);var o=n;return-1!==r&&(o=Pu({},n,{index:r})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Yh?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof od&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Yh?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof od&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var i=0;i<this.index.length;i++)this.updateOne(this.index[i],t,n)},t.updateOne=function(t,n,i){void 0===i&&(i=wd);var r=this.options,o=r.jss.plugins,s=r.sheet;if(t.rules instanceof e)t.rules.update(n,i);else{var a=t.style;if(o.onUpdate(n,t,s,i),i.process&&a&&a!==t.style){for(var l in o.onProcessStyle(t.style,t,s),t.style){var c=t.style[l];c!==a[l]&&t.prop(l,c,Sd)}for(var u in a){var h=t.style[u],d=a[u];null==h&&h!==d&&t.prop(u,null,Sd)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,i=!!n&&n.options.link,r=qh(e).linebreak,o=0;o<this.index.length;o++){var s=this.index[o].toString(e);(s||i)&&(t&&(t+=r),t+=s)}return t},e}(),Cd=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Pu({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new kd(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var i=this.queue;this.attached&&!i&&(this.queue=[]);var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(i?i.push(r):(this.insertRule(r),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),r):r:(this.deployed=!1,r)):null},t.replaceRule=function(e,t,n){var i=this.rules.get(e);if(!i)return this.addRule(e,t,n);var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(this.renderer&&(r?i.renderable&&this.renderer.replaceRule(i.renderable,r):this.renderer.deleteRule(i)),r):r:(this.deployed=!1,r)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var i in e){var r=this.addRule(i,e[i],t);r&&n.push(r)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),Ed=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var i=0;i<this.registry.onCreateRule.length;i++){var r=this.registry.onCreateRule[i](e,t,n);if(r)return r}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var i=0;i<this.registry.onProcessStyle.length;i++)t.style=this.registry.onProcessStyle[i](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,i){for(var r=0;r<this.registry.onUpdate.length;r++)this.registry.onUpdate[r](e,t,n,i)},t.onChangeValue=function(e,t,n){for(var i=e,r=0;r<this.registry.onChangeValue.length;r++)i=this.registry.onChangeValue[r](i,t,n);return i},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),Td=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var i=0;i<t.length;i++)if(t[i].options.index>n)return void t.splice(i,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,i=Tu(t,["attached"]),r=qh(i).linebreak,o="",s=0;s<this.registry.length;s++){var a=this.registry[s];null!=n&&a.attached!==n||(o&&(o+=r),o+=a.toString(i))}return o},Fh(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),Pd=new Td,Id="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),Md="2f1acc6c3a606b082e5eef5e54414ffb";null==Id[Md]&&(Id[Md]=0);var Ad=Id[Md]++,Rd=function(e){void 0===e&&(e={});var t=0;return function(n,i){t+=1;var r="",o="";return i&&(i.options.classNamePrefix&&(o=i.options.classNamePrefix),null!=i.options.jss.id&&(r=String(i.options.jss.id))),e.minify?""+(o||"c")+Ad+r+t:o+n.key+"-"+Ad+(r?"-"+r:"")+"-"+t}},zd=function(e){var t;return function(){return t||(t=e()),t}},Ld=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Od=function(e,t,n){try{var i=n;if(Array.isArray(n)&&(i=Uh(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,i);else{var r=i?i.indexOf("!important"):-1,o=r>-1?i.substr(0,r-1):i;e.style.setProperty(t,o,r>-1?"important":"")}}catch(s){return!1}return!0},Dd=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Fd=function(e,t){return e.selectorText=t,e.selectorText===t},Nd=zd((function(){return document.querySelector("head")}));function Bd(e){var t=Pd.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.attached&&i.options.index>t.index&&i.options.insertionPoint===t.insertionPoint)return i}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.attached&&i.options.insertionPoint===t.insertionPoint)return i}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var i=e.insertionPoint;if(i&&"string"===typeof i){var r=function(e){for(var t=Nd(),n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(8===i.nodeType&&i.nodeValue.trim()===e)return i}return null}(i);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}var jd=zd((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Vd=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(i){return!1}return e.cssRules[n]},Ud=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},qd=function(){function e(e){this.getPropertyValue=Ld,this.setProperty=Od,this.removeProperty=Dd,this.setSelector=Fd,this.hasInsertedRules=!1,this.cssRules=[],e&&Pd.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,i=t.meta,r=t.element;this.element=r||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),i&&this.element.setAttribute("data-meta",i);var o=jd();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,i=Bd(t);if(!1!==i&&i.parent)i.parent.insertBefore(e,i.node);else if(n&&"number"===typeof n.nodeType){var r=n,o=r.parentNode;o&&o.insertBefore(e,r.nextSibling)}else Nd().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var i=e,r=n;if("conditional"===e.type||"keyframes"===e.type){var o=Ud(n,t);if(!1===(r=Vd(n,i.toString({children:!1}),o)))return!1;this.refCssRule(e,o,r)}return this.insertRules(i.rules,r),r}var s=e.toString();if(!s)return!1;var a=Ud(n,t),l=Vd(n,s,a);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,a,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof Cd&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Gd=0,Zd=function(){function e(e){this.id=Gd++,this.version="10.10.0",this.plugins=new Ed,this.options={id:{minify:!1},createGenerateId:Rd,Renderer:Oh?qd:null,plugins:[]},this.generateId=Rd({minify:!1});for(var t=0;t<xd.length;t++)this.plugins.use(xd[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Pu({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===Pd.index?0:Pd.index+1);var i=new Cd(e,Pu({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(i),i},t.removeStyleSheet=function(e){return e.detach(),Pd.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var i=Pu({},n,{name:e,jss:this,Renderer:this.options.Renderer});i.generateId||(i.generateId=this.generateId),i.classes||(i.classes={}),i.keyframes||(i.keyframes={});var r=jh(e,t,i);return r&&this.plugins.onProcessRule(r),r},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Hd=function(e){return new Zd(e)},Wd="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Kd(e){var t=null;for(var n in e){var i=e[n],r=typeof i;if("function"===r)t||(t={}),t[n]=i;else if("object"===r&&null!==i&&!Array.isArray(i)){var o=Kd(i);o&&(t||(t={}),t[n]=o)}}return t}Hd();function Xd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{baseClasses:t,newClasses:n,Component:i}=e;if(!n)return t;const r=zh({},t);return Object.keys(n).forEach((e=>{n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}const Yd={set:(e,t,n,i)=>{let r=e.get(t);r||(r=new Map,e.set(t,r)),r.set(n,i)},get:(e,t,n)=>{const i=e.get(t);return i?i.get(n):void 0},delete:(e,t,n)=>{e.get(t).delete(n)}},$d=Yd;const Jd=t.createContext(null);function Qd(){var e;const n=t.useContext(Jd);return null!=(e=null==n?void 0:n.$$material)?e:n}const ep="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",tp=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var np=Date.now(),ip="fnValues"+np,rp="fnStyle"+ ++np;const op=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var i=jh(e,{},n);return i[rp]=t,i},onProcessStyle:function(e,t){if(ip in t||rp in t)return e;var n={};for(var i in e){var r=e[i];"function"===typeof r&&(delete e[i],n[i]=r)}return t[ip]=n,e},onUpdate:function(e,t,n,i){var r=t,o=r[rp];o&&(r.style=o(e)||{});var s=r[ip];if(s)for(var a in s)r.prop(a,s[a](e),i)}}};var sp="@global",ap="@global ",lp=function(){function e(e,t,n){for(var i in this.type="global",this.at=sp,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new kd(Pu({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var i=this.rules.add(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.replaceRule=function(e,t,n){var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),cp=function(){function e(e,t,n){this.type="global",this.at=sp,this.isProcessed=!1,this.key=e,this.options=n;var i=e.substr(8);this.rule=n.jss.createRule(i,t,Pu({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),up=/\s*,\s*/g;function hp(e,t){for(var n=e.split(up),i="",r=0;r<n.length;r++)i+=t+" "+n[r].trim(),n[r+1]&&(i+=", ");return i}const dp=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===sp)return new lp(e,t,n);if("@"===e[0]&&e.substr(0,8)===ap)return new cp(e,t,n);var i=n.parent;return i&&("global"===i.type||i.options.parent&&"global"===i.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,i=e.style,r=i?i[sp]:null;if(r){for(var o in r)t.addRule(o,r[o],Pu({},n,{selector:hp(o,e.selector)}));delete i[sp]}}(e,t),function(e,t){var n=e.options,i=e.style;for(var r in i)if("@"===r[0]&&r.substr(0,sp.length)===sp){var o=hp(r.substr(sp.length),e.selector);t.addRule(o,i[r],Pu({},n,{selector:o})),delete i[r]}}(e,t))}}};var pp=/\s*,\s*/g,fp=/&/g,mp=/\$([\w-]+)/g;const gp=function(){function e(e,t){return function(n,i){var r=e.getRule(i)||t&&t.getRule(i);return r?r.selector:i}}function t(e,t){for(var n=t.split(pp),i=e.split(pp),r="",o=0;o<n.length;o++)for(var s=n[o],a=0;a<i.length;a++){var l=i[a];r&&(r+=", "),r+=-1!==l.indexOf("&")?l.replace(fp,s):s+" "+l}return r}function n(e,t,n){if(n)return Pu({},n,{index:n.index+1});var i=e.options.nestingLevel;i=void 0===i?1:i+1;var r=Pu({},e.options,{nestingLevel:i,index:t.indexOf(e)+1});return delete r.name,r}return{onProcessStyle:function(i,r,o){if("style"!==r.type)return i;var s,a,l=r,c=l.options.parent;for(var u in i){var h=-1!==u.indexOf("&"),d="@"===u[0];if(h||d){if(s=n(l,c,s),h){var p=t(u,l.selector);a||(a=e(c,o)),p=p.replace(mp,a);var f=l.key+"-"+u;"replaceRule"in c?c.replaceRule(f,i[u],Pu({},s,{selector:p})):c.addRule(f,i[u],Pu({},s,{selector:p}))}else d&&c.addRule(u,{},s).addRule(l.key,i[u],{selector:l.selector});delete i[u]}}return i}}};var yp=/[A-Z]/g,_p=/^ms-/,vp={};function bp(e){return"-"+e.toLowerCase()}const xp=function(e){if(vp.hasOwnProperty(e))return vp[e];var t=e.replace(yp,bp);return vp[e]=_p.test(t)?"-"+t:t};function wp(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:xp(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(wp):t.fallbacks=wp(e.fallbacks)),t}const Sp=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=wp(e[t]);return e}return wp(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var i=xp(t);return t===i?e:(n.prop(i,e),null)}}};var kp=Wd&&CSS?CSS.px:"px",Cp=Wd&&CSS?CSS.ms:"ms",Ep=Wd&&CSS?CSS.percent:"%";function Tp(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},i={};for(var r in e)i[r]=e[r],i[r.replace(t,n)]=e[r];return i}var Pp=Tp({"animation-delay":Cp,"animation-duration":Cp,"background-position":kp,"background-position-x":kp,"background-position-y":kp,"background-size":kp,border:kp,"border-bottom":kp,"border-bottom-left-radius":kp,"border-bottom-right-radius":kp,"border-bottom-width":kp,"border-left":kp,"border-left-width":kp,"border-radius":kp,"border-right":kp,"border-right-width":kp,"border-top":kp,"border-top-left-radius":kp,"border-top-right-radius":kp,"border-top-width":kp,"border-width":kp,"border-block":kp,"border-block-end":kp,"border-block-end-width":kp,"border-block-start":kp,"border-block-start-width":kp,"border-block-width":kp,"border-inline":kp,"border-inline-end":kp,"border-inline-end-width":kp,"border-inline-start":kp,"border-inline-start-width":kp,"border-inline-width":kp,"border-start-start-radius":kp,"border-start-end-radius":kp,"border-end-start-radius":kp,"border-end-end-radius":kp,margin:kp,"margin-bottom":kp,"margin-left":kp,"margin-right":kp,"margin-top":kp,"margin-block":kp,"margin-block-end":kp,"margin-block-start":kp,"margin-inline":kp,"margin-inline-end":kp,"margin-inline-start":kp,padding:kp,"padding-bottom":kp,"padding-left":kp,"padding-right":kp,"padding-top":kp,"padding-block":kp,"padding-block-end":kp,"padding-block-start":kp,"padding-inline":kp,"padding-inline-end":kp,"padding-inline-start":kp,"mask-position-x":kp,"mask-position-y":kp,"mask-size":kp,height:kp,width:kp,"min-height":kp,"max-height":kp,"min-width":kp,"max-width":kp,bottom:kp,left:kp,top:kp,right:kp,inset:kp,"inset-block":kp,"inset-block-end":kp,"inset-block-start":kp,"inset-inline":kp,"inset-inline-end":kp,"inset-inline-start":kp,"box-shadow":kp,"text-shadow":kp,"column-gap":kp,"column-rule":kp,"column-rule-width":kp,"column-width":kp,"font-size":kp,"font-size-delta":kp,"letter-spacing":kp,"text-decoration-thickness":kp,"text-indent":kp,"text-stroke":kp,"text-stroke-width":kp,"word-spacing":kp,motion:kp,"motion-offset":kp,outline:kp,"outline-offset":kp,"outline-width":kp,perspective:kp,"perspective-origin-x":Ep,"perspective-origin-y":Ep,"transform-origin":Ep,"transform-origin-x":Ep,"transform-origin-y":Ep,"transform-origin-z":Ep,"transition-delay":Cp,"transition-duration":Cp,"vertical-align":kp,"flex-basis":kp,"shape-margin":kp,size:kp,gap:kp,grid:kp,"grid-gap":kp,"row-gap":kp,"grid-row-gap":kp,"grid-column-gap":kp,"grid-template-rows":kp,"grid-template-columns":kp,"grid-auto-rows":kp,"grid-auto-columns":kp,"box-shadow-x":kp,"box-shadow-y":kp,"box-shadow-blur":kp,"box-shadow-spread":kp,"font-line-height":kp,"text-shadow-x":kp,"text-shadow-y":kp,"text-shadow-blur":kp});function Ip(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]=Ip(e,t[i],n);else if("object"===typeof t)if("fallbacks"===e)for(var r in t)t[r]=Ip(r,t[r],n);else for(var o in t)t[o]=Ip(e+"-"+o,t[o],n);else if("number"===typeof t&&!1===isNaN(t)){var s=n[e]||Pp[e];return!s||0===t&&s===kp?t.toString():"function"===typeof s?s(t).toString():""+t+s}return t}const Mp=function(e){void 0===e&&(e={});var t=Tp(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var i in e)e[i]=Ip(i,e[i],t);return e},onChangeValue:function(e,n){return Ip(n,e,t)}}};function Ap(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Rp(e){return function(e){if(Array.isArray(e))return Ap(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return Ap(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ap(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zp="",Lp="",Op="",Dp="",Fp=Oh&&"ontouchstart"in document.documentElement;if(Oh){var Np={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Bp=document.createElement("p").style;for(var jp in Np)if(jp+"Transform"in Bp){zp=jp,Lp=Np[jp];break}"Webkit"===zp&&"msHyphens"in Bp&&(zp="ms",Lp=Np.ms,Dp="edge"),"Webkit"===zp&&"-apple-trailing-word"in Bp&&(Op="apple")}var Vp={js:zp,css:Lp,vendor:Op,browser:Dp,isTouch:Fp};var Up={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Vp.js?"-webkit-"+e:Vp.css+e)}},qp={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Vp.js?Vp.css+"print-"+e:e)}},Gp=/[-\s]+(.)?/g;function Zp(e,t){return t?t.toUpperCase():""}function Hp(e){return e.replace(Gp,Zp)}function Wp(e){return Hp("-"+e)}var Kp,Xp={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Vp.js){var n="mask-image";if(Hp(n)in t)return e;if(Vp.js+Wp(n)in t)return Vp.css+e}return e}},Yp={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Vp.vendor||Vp.isTouch?e:Vp.css+e)}},$p={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Vp.css+e)}},Jp={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Vp.css+e)}},Qp={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Vp.js||"ms"===Vp.js&&"edge"!==Vp.browser?Vp.css+e:e)}},ef={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Vp.js||"ms"===Vp.js||"apple"===Vp.vendor?Vp.css+e:e)}},tf={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Vp.js?"WebkitColumn"+Wp(e)in t&&Vp.css+"column-"+e:"Moz"===Vp.js&&("page"+Wp(e)in t&&"page-"+e))}},nf={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Vp.js)return e;var n=e.replace("-inline","");return Vp.js+Wp(n)in t&&Vp.css+n}},rf={supportedProperty:function(e,t){return Hp(e)in t&&e}},of={supportedProperty:function(e,t){var n=Wp(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Vp.js+n in t?Vp.css+e:"Webkit"!==Vp.js&&"Webkit"+n in t&&"-webkit-"+e}},sf={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Vp.js?""+Vp.css+e:e)}},af={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Vp.js?Vp.css+"scroll-chaining":e)}},lf={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},cf={supportedProperty:function(e,t){var n=lf[e];return!!n&&(Vp.js+Wp(n)in t&&Vp.css+n)}},uf={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},hf=Object.keys(uf),df=function(e){return Vp.css+e},pf={supportedProperty:function(e,t,n){var i=n.multiple;if(hf.indexOf(e)>-1){var r=uf[e];if(!Array.isArray(r))return Vp.js+Wp(r)in t&&Vp.css+r;if(!i)return!1;for(var o=0;o<r.length;o++)if(!(Vp.js+Wp(r[0])in t))return!1;return r.map(df)}return!1}},ff=[Up,qp,Xp,Yp,$p,Jp,Qp,ef,tf,nf,rf,of,sf,af,cf,pf],mf=ff.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),gf=ff.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Rp(t.noPrefill)),e}),[]),yf={};if(Oh){Kp=document.createElement("p");var _f=window.getComputedStyle(document.documentElement,"");for(var vf in _f)isNaN(vf)||(yf[_f[vf]]=_f[vf]);gf.forEach((function(e){return delete yf[e]}))}function bf(e,t){if(void 0===t&&(t={}),!Kp)return e;if(null!=yf[e])return yf[e];"transition"!==e&&"transform"!==e||(t[e]=e in Kp.style);for(var n=0;n<mf.length&&(yf[e]=mf[n](e,Kp.style,t),!yf[e]);n++);try{Kp.style[e]=""}catch(i){return!1}return yf[e]}var xf,wf={},Sf={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},kf=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Cf(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var i=t?bf(t):", "+bf(n);return i||(t||n)}function Ef(e,t){var n=t;if(!xf||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var i=e+n;if(null!=wf[i])return wf[i];try{xf.style[e]=n}catch(r){return wf[i]=!1,!1}if(Sf[e])n=n.replace(kf,Cf);else if(""===xf.style[e]&&("-ms-flex"===(n=Vp.css+n)&&(xf.style[e]="-ms-flexbox"),xf.style[e]=n,""===xf.style[e]))return wf[i]=!1,!1;return xf.style[e]="",wf[i]=n,wf[i]}Oh&&(xf=document.createElement("p"));const Tf=function(){function e(t){for(var n in t){var i=t[n];if("fallbacks"===n&&Array.isArray(i))t[n]=i.map(e);else{var r=!1,o=bf(n);o&&o!==n&&(r=!0);var s=!1,a=Ef(o,Uh(i));a&&a!==i&&(s=!0),(r||s)&&(r&&delete t[n],t[o||n]=a||i)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Vp.js?e:"@"+Vp.css+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return Ef(t,Uh(e))||e}}};const Pf=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var i={},r=Object.keys(t).sort(e),o=0;o<r.length;o++)i[r[o]]=t[r[o]];return i}}};const If=Hd({plugins:[op(),dp(),gp(),Sp(),Mp(),"undefined"===typeof window?null:Tf(),Pf()]}),Mf={disableGeneration:!1,generateClassName:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{disableGlobal:t=!1,productionPrefix:n="jss",seed:i=""}=e,r=""===i?"":"".concat(i,"-");let o=0;const s=()=>(o+=1,o);return(e,o)=>{const a=o.options.name;if(a&&0===a.indexOf("Mui")&&!o.options.link&&!t){if(-1!==tp.indexOf(e.key))return"Mui-".concat(e.key);const t="".concat(r).concat(a,"-").concat(e.key);return o.options.theme[ep]&&""===i?"".concat(t,"-").concat(s()):t}return"".concat(r).concat(n).concat(s())}}(),jss:If,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},Af=t.createContext(Mf);let Rf=-1e9;const zf=["variant"];function Lf(e){return 0===e.length}function Of(e){const t="function"===typeof e;return{create:(n,i)=>{let r;try{r=t?e(n):e}catch(l){throw l}if(!i||!n.components||!n.components[i]||!n.components[i].styleOverrides&&!n.components[i].variants)return r;const o=n.components[i].styleOverrides||{},s=n.components[i].variants||[],a=zh({},r);return Object.keys(o).forEach((e=>{a[e]=vs(a[e]||{},o[e])})),s.forEach((e=>{const t=function(e){const{variant:t}=e,n=Rh(e,zf);let i=t||"";return Object.keys(n).sort().forEach((t=>{i+="color"===t?Lf(i)?e[t]:us(e[t]):"".concat(Lf(i)?t:us(t)).concat(us(e[t].toString()))})),i}(e.props);a[t]=vs(a[t]||{},e.style)})),a},options:{}}}const Df={},Ff=["name","classNamePrefix","Component","defaultTheme"];function Nf(e,t){let{state:n,theme:i,stylesOptions:r,stylesCreator:o,name:s}=e;if(r.disableGeneration)return;let a=$d.get(r.sheetsManager,o,i);a||(a={refs:0,staticSheet:null,dynamicStyles:null},$d.set(r.sheetsManager,o,i,a));const l=zh({},o.options,r,{theme:i,flip:"boolean"===typeof r.flip?r.flip:"rtl"===i.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;const c=r.sheetsRegistry;if(0===a.refs){let e;r.sheetsCache&&(e=$d.get(r.sheetsCache,o,i));const t=o.create(i,s);e||(e=r.jss.createStyleSheet(t,zh({link:!1},l)),e.attach(),r.sheetsCache&&$d.set(r.sheetsCache,o,i,e)),c&&c.add(e),a.staticSheet=e,a.dynamicStyles=Kd(t)}if(a.dynamicStyles){const e=r.jss.createStyleSheet(a.dynamicStyles,zh({link:!0},l));e.update(t),e.attach(),n.dynamicSheet=e,n.classes=Xd({baseClasses:a.staticSheet.classes,newClasses:e.classes}),c&&c.add(e)}else n.classes=a.staticSheet.classes;a.refs+=1}function Bf(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{name:i,classNamePrefix:r,Component:o,defaultTheme:s=Df}=n,a=Rh(n,Ff),l=Of(e),c=i||r||"makeStyles";l.options={index:(Rf+=1,Rf),name:i,meta:c,classNamePrefix:c};return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Qd()||s,r=zh({},t.useContext(Af),a),c=t.useRef(),u=t.useRef();!function(e,n){const i=t.useRef([]);let r;const o=t.useMemo((()=>({})),n);i.current!==o&&(i.current=o,r=e()),t.useEffect((()=>()=>{r&&r()}),[o])}((()=>{const t={name:i,state:{},stylesCreator:l,stylesOptions:r,theme:n};return Nf(t,e),u.current=!1,c.current=t,()=>{!function(e){let{state:t,theme:n,stylesOptions:i,stylesCreator:r}=e;if(i.disableGeneration)return;const o=$d.get(i.sheetsManager,r,n);o.refs-=1;const s=i.sheetsRegistry;0===o.refs&&($d.delete(i.sheetsManager,r,n),i.jss.removeStyleSheet(o.staticSheet),s&&s.remove(o.staticSheet)),t.dynamicSheet&&(i.jss.removeStyleSheet(t.dynamicSheet),s&&s.remove(t.dynamicSheet))}(t)}}),[n,l]),t.useEffect((()=>{u.current&&function(e,t){let{state:n}=e;n.dynamicSheet&&n.dynamicSheet.update(t)}(c.current,e),u.current=!0}));const h=function(e,t,n){let{state:i,stylesOptions:r}=e;if(r.disableGeneration)return t||{};i.cacheClasses||(i.cacheClasses={value:null,lastProp:null,lastJSS:{}});let o=!1;return i.classes!==i.cacheClasses.lastJSS&&(i.cacheClasses.lastJSS=i.classes,o=!0),t!==i.cacheClasses.lastProp&&(i.cacheClasses.lastProp=t,o=!0),o&&(i.cacheClasses.value=Xd({baseClasses:i.cacheClasses.lastJSS,newClasses:t,Component:n})),i.cacheClasses.value}(c.current,e.classes,o);return h}}var jf=n(596);function Vf(e){return e?Array.isArray(e)?function(t){return e}:"function"===typeof e?e:function(t){return[e]}:null}const Uf=class extends fe{constructor(e){super(),this.projection=en(e.projection),this.attributions_=Vf(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise((function(e,n){t.viewResolver=e,t.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Vf(e),this.changed()}setState(e){this.state_=e,this.changed()}};class qf extends fe{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if("function"===typeof e.getSimplifiedGeometry){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new qf(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(se(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=re(e,Y,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function(e){if("function"===typeof e)return e;let t;if(Array.isArray(e))t=e;else{Se("function"===typeof e.getZIndex,41);t=[e]}return function(){return t}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const Gf=qf;class Zf extends Tn{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(se),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(re(this.geometries_[e],Y,this.changed,this))}clone(){const e=new Zf(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,n,i){if(i<Pe(this.getExtent(),e,t))return i;const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)i=r[o].closestPointXY(e,t,n,i);return i}containsXY(e,t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].containsXY(e,t))return!0;return!1}computeExtent(e){Re(e);const t=this.geometries_;for(let r=0,o=t.length;r<o;++r)n=e,(i=t[r].getExtent())[0]<n[0]&&(n[0]=i[0]),i[2]>n[2]&&(n[2]=i[2]),i[1]<n[1]&&(n[1]=i[1]),i[3]>n[3]&&(n[3]=i[3]);var n,i;return e}getGeometries(){return Hf(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let i=!1;for(let r=0,o=n.length;r<o;++r){const o=n[r],s=o.getSimplifiedGeometry(e);t.push(s),s!==o&&(i=!0)}if(i){const e=new Zf(null);return e.setGeometriesArray(t),e}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Be(this.getExtent()));const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(Hf(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Hf(e){const t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].clone());return t}const Wf=Zf;const Kf=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?en(t.dataProjection):this.readProjection(e);t.extent&&n&&"tile-pixels"===n.getUnits()&&(n=en(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return ue()}readFeature(e,t){return ue()}readFeatures(e,t){return ue()}readGeometry(e,t){return ue()}readProjection(e){return ue()}writeFeature(e,t){return ue()}writeFeatures(e,t){return ue()}writeGeometry(e,t){return ue()}};function Xf(e,t,n){const i=n?en(n.featureProjection):null,r=n?en(n.dataProjection):null;let o;if(o=i&&r&&!function(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||sn(e,t)===$t)&&n}(i,r)?(t?e.clone():e).transform(t?i:r,t?r:i):e,t&&n&&void 0!==n.decimals){const t=Math.pow(10,n.decimals),i=function(e){for(let n=0,i=e.length;n<i;++n)e[n]=Math.round(e[n]*t)/t;return e};o===e&&(o=e.clone()),o.applyTransform(i)}return o}function Yf(e){if("string"===typeof e){const t=JSON.parse(e);return t||null}return null!==e?e:null}const $f=class extends Kf{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Yf(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Yf(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ue()}readFeaturesFromObject(e,t){return ue()}readGeometry(e,t){return this.readGeometryFromObject(Yf(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ue()}readProjection(e){return this.readProjectionFromObject(Yf(e))}readProjectionFromObject(e){return ue()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ue()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ue()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ue()}};function Jf(e,t,n,i,r,o,s){let a,l;const c=(n-t)/i;if(1===c)a=t;else if(2===c)a=t,l=r;else if(0!==c){let o=e[t],s=e[t+1],c=0;const u=[0];for(let r=t+i;r<n;r+=i){const t=e[r],n=e[r+1];c+=Math.sqrt((t-o)*(t-o)+(n-s)*(n-s)),u.push(c),o=t,s=n}const h=r*c,d=function(e,t,n){let i,r;n=n||j;let o=0,s=e.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+n(e[i],t),r<0?o=i+1:(s=i,a=!r);return a?o:~o}(u,h);d<0?(l=(h-u[-d-2])/(u[-d-1]-u[-d-2]),a=t+(-d-2)*i):a=t+d*i}s=s>1?s:2,o=o||new Array(s);for(let u=0;u<s;++u)o[u]=void 0===a?NaN:void 0===l?e[a+u]:Qe(e[a+u],e[a+i+u],l);return o}function Qf(e,t,n,i,r,o){if(n==t)return null;let s;if(r<e[t+i-1])return o?(s=e.slice(t,t+i),s[i-1]=r,s):null;if(e[n-1]<r)return o?(s=e.slice(n-i,n),s[i-1]=r,s):null;if(r==e[t+i-1])return e.slice(t,t+i);let a=t/i,l=n/i;for(;a<l;){const t=a+l>>1;r<e[(t+1)*i-1]?l=t:a=t+1}const c=e[a*i-1];if(r==c)return e.slice((a-1)*i,(a-1)*i+i);const u=(r-c)/(e[(a+1)*i-1]-c);s=[];for(let h=0;h<i-1;++h)s.push(Qe(e[(a-1)*i+h],e[a*i+h],u));return s.push(r),s}function em(e,t,n,i){let r=e[t],o=e[t+1],s=0;for(let a=t+i;a<n;a+=i){const t=e[a],n=e[a+1];s+=Math.sqrt((t-r)*(t-r)+(n-o)*(n-o)),r=t,o=n}return s}class tm extends In{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}appendCoordinate(e){this.flatCoordinates?U(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new tm(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<Pe(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(An(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,i))}forEachSegment(e){return ei(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(t=void 0!==t&&t,Qf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Jf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return em(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new tm(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return ti(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=On(this.flatCoordinates,0,e,this.stride),this.changed()}}const nm=tm;class im extends In{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(void 0!==t&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{let t=this.getLayout();const n=e,i=[],r=[];for(let e=0,o=n.length;e<o;++e){const o=n[e];0===e&&(t=o.getLayout()),U(i,o.getFlatCoordinates()),r.push(i.length)}this.setFlatCoordinates(t,i),this.ends_=r}}appendLineString(e){this.flatCoordinates?U(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new im(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<Pe(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ln(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,i))}getCoordinateAtM(e,t,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(t=void 0!==t&&t,n=void 0!==n&&n,function(e,t,n,i,r,o,s){if(s)return Qf(e,t,n[n.length-1],i,r,o);let a;if(r<e[i-1])return o?(a=e.slice(0,i),a[i-1]=r,a):null;if(e[e.length-1]<r)return o?(a=e.slice(e.length-i),a[i-1]=r,a):null;for(let l=0,c=n.length;l<c;++l){const o=n[l];if(t!=o){if(r<e[t+i-1])return null;if(r<=e[o-1])return Qf(e,t,o,i,r,!1);t=o}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return qn(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new nm(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,i=[];let r=0;for(let o=0,s=t.length;o<s;++o){const s=t[o],a=new nm(e.slice(r,s),n);i.push(a),r=s}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const i=this.ends_,r=this.stride;for(let o=0,s=i.length;o<s;++o){const s=i[o];U(e,Jf(t,n,s,r,.5)),n=s}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Nn(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new im(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return function(e,t,n,i,r){for(let o=0,s=n.length;o<s;++o){if(ti(e,t,n[o],i,r))return!0;t=n[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Dn(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const rm=im;class om extends In{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?U(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new om(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){if(i<Pe(this.getExtent(),e,t))return i;const r=this.flatCoordinates,o=this.stride;for(let s=0,a=r.length;s<a;s+=o){const a=$e(e,t,r[s],r[s+1]);if(a<i){i=a;for(let e=0;e<o;++e)n[e]=r[s+e];n.length=o}}return i}getCoordinates(){return Un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new Xn(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,i=[];for(let r=0,o=e.length;r<o;r+=n){const o=new Xn(e.slice(r,r+n),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let i=0,r=t.length;i<r;i+=n){if(Ie(e,t[i],t[i+1]))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=On(this.flatCoordinates,0,e,this.stride),this.changed()}}const sm=om;class am extends In{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){let i=this.getLayout();const r=e,o=[],s=[];for(let e=0,t=r.length;e<t;++e){const t=r[e];0===e&&(i=t.getLayout());const n=o.length,a=t.getEnds();for(let e=0,i=a.length;e<i;++e)a[e]+=n;U(o,t.getFlatCoordinates()),s.push(a)}t=i,e=o,n=s}void 0!==t&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(this.flatCoordinates){const n=this.flatCoordinates.length;U(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let e=0,i=t.length;e<i;++e)t[e]+=n}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const n=new am(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,i){return i<Pe(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(e,t,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];r=Rn(e,t,s,i,r),t=s[s.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(e,t,n,i,r,o,s,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=n.length;h<d;++h){const d=n[h];c=Ln(e,t,d,i,r,o,s,a,l,c,u),t=d[d.length-1]}return c}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,i))}containsXY(e,t){return function(e,t,n,i,r,o){if(0===n.length)return!1;for(let s=0,a=n.length;s<a;++s){const a=n[s];if(Jn(e,t,a,i,r,o))return!0;t=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return function(e,t,n,i){let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o];r+=Zn(e,t,s,i),t=s[s.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),ai(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,function(e,t,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];r[o++]=1===a.length&&a[0]===t?[]:qn(e,t,a,i,r[o]),t=a[a.length-1]}return r.length=o,r}(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=function(e,t,n,i){const r=[];let o=[1/0,1/0,-1/0,-1/0];for(let s=0,a=n.length;s<a;++s){const a=n[s];o=ze(e,t,a[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(e,t,n,i,r){let o=[];for(let s=0,a=n.length;s<a;++s){const a=n[s];o=Qn(e,t,a,i,r,2*s,o),t=a[a.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new sm(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function(e,t,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];if(!oi(e,t,s,i,r))return!1;s.length&&(t=s[s.length-1])}return!0}(e,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ai(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=function(e,t,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){const c=n[l],u=[];s=Vn(e,t,c,i,r,o,s,u),a.push(u),t=c[c.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new am(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const n=this.endss_[e-1];t=n[n.length-1]}const n=this.endss_[e].slice(),i=n[n.length-1];if(0!==t)for(let r=0,o=n.length;r<o;++r)n[r]-=t;return new ci(this.flatCoordinates.slice(t,i),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,i=[];let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o].slice(),a=s[s.length-1];if(0!==r)for(let e=0,t=s.length;e<t;++e)s[e]-=r;const l=new ci(t.slice(r,a),e,s);i.push(l),r=a}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return function(e,t,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];if(ni(e,t,s,i,r))return!0;t=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=function(e,t,n,i,r){r=r||[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=Dn(e,t,n[s],i,r[o]);0===a.length&&(a[0]=t),r[o++]=a,t=a[a.length-1]}return r.length=o,r}(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const e=n[n.length-1];this.flatCoordinates.length=0===e.length?0:e[e.length-1]}this.changed()}}const lm=am;function cm(e,t){if(!e)return null;let n;switch(e.type){case"Point":n=function(e){return new Xn(e.coordinates)}(e);break;case"LineString":n=function(e){return new nm(e.coordinates)}(e);break;case"Polygon":n=function(e){return new ci(e.coordinates)}(e);break;case"MultiPoint":n=function(e){return new sm(e.coordinates)}(e);break;case"MultiLineString":n=function(e){return new rm(e.coordinates)}(e);break;case"MultiPolygon":n=function(e){return new lm(e.coordinates)}(e);break;case"GeometryCollection":n=function(e,t){const n=e.geometries.map((function(e){return cm(e,t)}));return new Wf(n)}(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return Xf(n,!1,t)}function um(e,t){const n=(e=Xf(e,!0,t)).getType();let i;switch(n){case"Point":i=function(e,t){return{type:"Point",coordinates:e.getCoordinates()}}(e);break;case"LineString":i=function(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}(e);break;case"Polygon":i=function(e,t){let n;t&&(n=t.rightHanded);return{type:"Polygon",coordinates:e.getCoordinates(n)}}(e,t);break;case"MultiPoint":i=function(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}(e);break;case"MultiLineString":i=function(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}(e);break;case"MultiPolygon":i=function(e,t){let n;t&&(n=t.rightHanded);return{type:"MultiPolygon",coordinates:e.getCoordinates(n)}}(e,t);break;case"GeometryCollection":i=function(e,t){t=Object.assign({},t),delete t.featureProjection;const n=e.getGeometriesArray().map((function(e){return um(e,t)}));return{type:"GeometryCollection",geometries:n}}(e,t);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}const hm=class extends $f{constructor(e){e=e||{},super(),this.dataProjection=en(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=en(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;n="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const i=cm(n.geometry,t),r=new Gf;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&r.setGeometryName(n.geometry_name),r.setGeometry(i),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r}readFeaturesFromObject(e,t){let n=null;if("FeatureCollection"===e.type){n=[];const i=e.features;for(let e=0,r=i.length;e<r;++e)n.push(this.readFeatureFromObject(i[e],t))}else n=[this.readFeatureFromObject(e,t)];return n}readGeometryFromObject(e,t){return cm(e,t)}readProjectionFromObject(e){const t=e.crs;let n;return t?"name"==t.type?n=en(t.properties.name):"EPSG"===t.type?n=en("EPSG:"+t.properties.code):Se(!1,36):n=this.dataProjection,n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},i=e.getId();if(void 0!==i&&(n.id=i),!e.hasProperties())return n;const r=e.getProperties(),o=e.getGeometry();return o&&(n.geometry=um(o,t),delete r[e.getGeometryName()]),K(r)||(n.properties=r),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let i=0,r=e.length;i<r;++i)n.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return um(e,this.adaptOptions(t))}},dm=(e,t)=>{const n=new URL(e),i=t||{};return Object.entries(i).forEach((e=>{let[t,i]=e;void 0!==i&&null!==i&&n.searchParams.set(t,i)})),n},pm=e=>{const t=e.filter((e=>void 0!==e&&null!==e&&e.trim&&e.trim())),n=t.map((e=>e.toLowerCase()));return[...new Set(n)].map((e=>t.find((t=>t.toLowerCase()===e))))},fm=e=>{if(!e)return[];const{style:t}=e;if(!t)return[];const{sourceCaches:n}=t;let i=[];return Object.values(n).forEach((e=>{if(e.used){const t=e.getSource(),n=t.attribution||t.options&&t.options.attribution;n&&(i=i.concat(n.replace(/&copy;/g,"\xa9").split(/(<a.*?<\/a>)/)))}})),pm(i)},mm={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let gm;const ym=new Uint8Array(16);function _m(){if(!gm&&(gm="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gm(ym)}const vm=[];for(let n=0;n<256;++n)vm.push((n+256).toString(16).slice(1));function bm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(vm[e[t+0]]+vm[e[t+1]]+vm[e[t+2]]+vm[e[t+3]]+"-"+vm[e[t+4]]+vm[e[t+5]]+"-"+vm[e[t+6]]+vm[e[t+7]]+"-"+vm[e[t+8]]+vm[e[t+9]]+"-"+vm[e[t+10]]+vm[e[t+11]]+vm[e[t+12]]+vm[e[t+13]]+vm[e[t+14]]+vm[e[t+15]]).toLowerCase()}const xm=function(e,t,n){if(mm.randomUUID&&!t&&!e)return mm.randomUUID();const i=(e=e||{}).random||(e.rng||_m)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return bm(i)},wm=e=>{let t=e;Array.isArray(t)||(t=[e]);let n=[];return t.forEach((e=>{n.push(e);const{children:t}=e;n=n.concat(wm(t||[]))})),n},Sm=wm;class km extends fe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.properties={},this.options={},this.defineProperties(e),e.properties&&this.setProperties(e.properties),this.options=e,this.visible=void 0===e.visible||!!e.visible,this.group=e.group,this.copyrights=e.copyrights,this.children=e.children,this.on("change:visible:group",(e=>{this.group===e.target.group&&this!==e.target&&this.visible?this.visible=!1:this.children&&this.children.forEach((t=>t.dispatchEvent(e)))}))}defineProperties(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:t,key:n,properties:i,hitTolerance:r}=Object.assign({},e),o=xm();Object.defineProperties(this,{name:{value:t},key:{value:n||t||o},group:{get:()=>this.get("group"),set:e=>{this.set("group",e)}},copyrights:{get:()=>this.get("copyrights"),set:e=>{const t=e&&!Array.isArray(e)?[e]:e;this.set("copyrights",t||[])}},options:{value:e},map:{writable:!0},visible:{get:()=>this.get("visible"),set:e=>{if(e!==this.visible)if(this.set("visible",e),this.visible){if(this.parent&&(this.parent.visible=!0),this.children&&!this.children.some((e=>e.visible))&&this.children.forEach((e=>{e.visible=!0})),this.parent&&this.group){let e=this.parent;for(;e.parent;)e=e.parent;const t=new F("change:visible:group");t.target=this,e.dispatchEvent(t)}}else this.visible||(this.children&&this.children.forEach((e=>{e.visible=!1})),this.parent&&this.parent.visible&&this.parent.children&&!this.parent.children.find((e=>e.visible))&&(this.parent.visible=!1))}},disabled:{get:()=>this.get("disabled"),set:e=>{this.set("disabled",e)}},parent:{value:null,writable:!0},children:{get:()=>this.get("children")||[],set:e=>{(this.children||[]).forEach((e=>{e.parent=void 0})),Array.isArray(e)&&e.forEach((e=>{e.parent=this})),this.set("children",e||[])}},hitTolerance:{value:r||5,writable:!0},properties:{value:Object.assign({},i||{})}})}attachToMap(e){this.detachFromMap(),this.map=e,this.children&&this.children.forEach((t=>{t.attachToMap(e)}))}detachFromMap(){this.map=void 0}getFeatureInfoAtCoordinate(e,t){return console.error("getFeatureInfoAtCoordinate must be implemented by inheriting layers",this.key),Promise.resolve({layer:this,features:[],coordinate:e})}flat(){return Sm(this)}}const Cm=function(e){return class extends e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e);const{userInteractions:t=!0,userClickInteractions:n=!0,userHoverInteractions:i=!0,defaultUserInteractions:r=!0}=e;this.userInteractions=t,this.userClickInteractions=n,this.userHoverInteractions=i,this.defaultUserInteractions=r,this.userClickCallbacks=[],this.userHoverCallbacks=[],this.userClickEventsKeys=[],this.userHoverEventsKeys=[],this.onUserClickCallback=this.onUserClickCallback.bind(this),this.onUserMoveCallback=this.onUserMoveCallback.bind(this);const{onClick:o,onHover:s}=e;this.userInteractions&&this.userClickInteractions&&o&&this.onClick(o),this.userInteractions&&this.userHoverInteractions&&s&&this.onHover(s)}attachToMap(e){super.attachToMap(e),this.userInteractions&&this.defaultUserInteractions&&this.userClickInteractions&&this.onFeatureClick&&this.onClick(this.onFeatureClick),this.userInteractions&&this.defaultUserInteractions&&this.userHoverInteractions&&this.onFeatureHover&&this.onHover(this.onFeatureHover),this.listenEvents()}detachFromMap(){this.unlistenEvents(),super.detachFromMap()}listenEvents(){this.unlistenEvents(),this.userClickCallbacks.forEach((e=>{this.userClickEventsKeys.push(this.on("user:click",(t=>{let{target:{features:n,layer:i,coordinate:r,event:o}}=t;e(n,i,r,o)})))})),this.userHoverCallbacks.forEach((e=>{this.userHoverEventsKeys.push(this.on("user:hover",(t=>{let{target:{features:n,layer:i,coordinate:r,event:o}}=t;e(n,i,r,o)})))}))}unlistenEvents(){le(this.userClickEventsKeys),le(this.userHoverEventsKeys),this.userClickEventsKeys=[],this.userHoverEventsKeys=[]}onClick(e){this.userClickCallbacks.push(e),this.activateUserInteractions(),this.map&&this.listenEvents()}onHover(e){this.userHoverCallbacks.push(e),this.activateUserInteractions(),this.map&&this.listenEvents()}unClick(e){const t=this.userClickCallbacks.indexOf(e);-1===t&&(this.userClickCallbacks=this.userClickCallbacks.slice(t,1),this.map&&this.listenEvents())}unHover(e){const t=this.userHoverCallbacks.indexOf(e);-1===t&&(this.userHoverCallbacks=this.userHoverCallbacks.slice(t,1),this.map&&this.listenEvents())}onUserClickCallback(e){const t=e.coordinate||rn(e.lngLat.toArray()),n={features:[],layer:this,coordinate:t,event:e};return this.getFeatureInfoAtCoordinate(t).then((e=>{const t=new F("user:click");return t.target=e,this.dispatchEvent(t),e})).catch((()=>n))}onUserMoveCallback(e){const t=e.coordinate||rn(e.lngLat.toArray()),n={features:[],layer:this,coordinate:t,event:e};return this.getFeatureInfoAtCoordinate(t).then((e=>{const t=new F("user:hover");return t.target=e,this.dispatchEvent(t),e})).catch((()=>n))}activateUserInteractions(){}deactivateUserInteractions(){}}};class Em extends(Cm(km)){constructor(e){var t;super(e),null===(t=this.olLayer)||void 0===t||t.setVisible(this.visible)}defineProperties(e){super.defineProperties(e),Object.defineProperties(this,{olLayer:{value:e.olLayer,writable:!0},olListenersKeys:{value:[]}})}attachToMap(e){var t,n,i,r,o;if(super.attachToMap(e),this.map&&(null===(t=this.olLayer)||void 0===t||t.setVisible(this.visible),this.olLayer&&!(null===(r=null===(i=null===(n=this.map)||void 0===n?void 0:n.getLayers())||void 0===i?void 0:i.getArray())||void 0===r?void 0:r.includes(this.olLayer))&&this.map.addLayer(this.olLayer),this.olListenersKeys.push(this.on("change:visible",(()=>{this.olLayer&&this.olLayer.setVisible(this.visible)}))),this.olListenersKeys.push(this.map.getLayers().on("remove",(e=>{e.element===this.olLayer&&this.detachFromMap()}))),this.toggleVisibleListeners(),this.olListenersKeys.push(this.on("change:visible",this.toggleVisibleListeners)),this.copyrights&&this.olLayer)){const e=this.copyrights||[];this.olLayer.getLayers?this.olLayer.getLayers().getArray().forEach((t=>{var n;t.getSource&&(null===(n=t.getSource())||void 0===n||n.setAttributions(e))})):this.olLayer.getSource&&(null===(o=this.olLayer.getSource())||void 0===o||o.setAttributions(e))}}detachFromMap(){var e,t,n;this.deactivateUserInteractions(),le(this.olListenersKeys),this.olLayer&&(null===(n=null===(t=null===(e=this.map)||void 0===e?void 0:e.getLayers())||void 0===t?void 0:t.getArray())||void 0===n?void 0:n.includes(this.olLayer))&&this.map.removeLayer(this.olLayer),super.detachFromMap()}activateUserInteractions(){var e,t;this.deactivateUserInteractions(),this.map&&this.userInteractions&&this.userClickInteractions&&(null===(e=this.userClickCallbacks)||void 0===e?void 0:e.length)&&(this.singleClickListenerKey=this.map.on("singleclick",this.onUserClickCallback),this.olListenersKeys.push(this.singleClickListenerKey)),this.map&&this.userInteractions&&this.userHoverInteractions&&(null===(t=this.userHoverCallbacks)||void 0===t?void 0:t.length)&&(this.pointerMoveListenerKey=this.map.on("pointermove",this.onUserMoveCallback))}deactivateUserInteractions(){le([this.pointerMoveListenerKey,this.singleClickListenerKey])}toggleVisibleListeners(){this.visible?this.activateUserInteractions():this.deactivateUserInteractions()}clone(e){return new Em(Object.assign(Object.assign({},this.options),e))}}const Tm=Em;const Pm=class extends Tm{constructor(e){super(e),this.olLayer=new gi({source:new Uf({}),render:this.getOlLayerRender()}),this.styleUrl=e.url,this.apiKey=e.apiKey,this.apiKeyName=e.apiKeyName||"key",this.updateAttribution=this.updateAttribution.bind(this)}attachToMap(e){super.attachToMap(e),this.map&&(this.format=new hm({featureProjection:this.map.getView().getProjection()}),this.loadMbMap())}detachFromMap(){this.mbMap&&(this.mbMap.off("idle",this.updateAttribution),this.mbMap.triggerRepaint=()=>{},this.mbMap.remove(),this.mbMap=void 0),this.loaded=!1,super.detachFromMap()}loadMbMap(){var e,t,n;if(this.olListenersKeys.push(null===(e=this.map)||void 0===e?void 0:e.on("change:target",(()=>{this.loadMbMap()}))),!(null===(t=this.map)||void 0===t?void 0:t.getTargetElement()))return;if(!this.visible)return void this.olListenersKeys.push(this.once("change:visible",(()=>{this.loadMbMap()})));const i=document.createElement("div");if(i.style.position="absolute",i.style.width="100%",i.style.height="100%",!this.styleUrl)return void console.error("No styleUrl defined for mapbox layer: ".concat(this.styleUrl));this.apiKey||(null===(n=this.styleUrl)||void 0===n?void 0:n.includes(this.apiKeyName))||console.error("No apiKey defined for mapbox layer with style url to ".concat(this.styleUrl));const r=this.getMapboxMapClass();this.mbMap=new r(Object.assign({style:dm(this.styleUrl,{[this.apiKeyName]:this.apiKey}).toString(),container:i,interactive:!1,trackResize:!1,attributionControl:!1},this.options.mapOptions||{})),this.mbMap.once("load",(()=>{this.loaded=!0,this.dispatchEvent(new F("load"))})),this.mbMap.on("idle",this.updateAttribution)}updateAttribution(e){var t,n,i;const r=fm(e.target)||[];(null===(t=this.copyrights)||void 0===t?void 0:t.toString())!==r.toString()&&(this.copyrights=r,null===(i=null===(n=this.olLayer)||void 0===n?void 0:n.getSource())||void 0===i||i.setAttributions(r))}getFeatureInfoAtCoordinate(e,t){if(!t||!this.format||!this.mbMap||!this.mbMap.isStyleLoaded())return Promise.resolve({coordinate:e,features:[],layer:this});const n=e&&this.mbMap.project(on(e));let i;if(this.hitTolerance){const{x:e,y:t}=n;i=[{x:e-this.hitTolerance,y:t-this.hitTolerance},{x:e+this.hitTolerance,y:t+this.hitTolerance}]}const r=this.mbMap.queryRenderedFeatures(i||n,t).map((e=>{const t=this.format.readFeature(e);return t&&t.set("mapboxFeature",e),t}));return Promise.resolve({layer:this,features:r,coordinate:e})}getOlLayerRender(){console.error("This function must be implemented in subclasses");const e=document.createElement("div");return()=>e}getMapboxMapClass(){return console.error("This function must be implemented in subclasses"),null}};class Im extends Pm{getOlLayerRender(){return function(e){let t;return n=>{const{map:i,mbMap:r,olLayer:o}=e;if(!i||!r)return t||(t=document.createElement("div")),t;const s=r.getCanvas(),{viewState:a}=n,l=(null===o||void 0===o?void 0:o.getOpacity())||1;var c;return s.style.opacity="".concat(l),r.jumpTo({center:on(a.center),zoom:a.zoom-1,bearing:(c=-a.rotation,180*c/Math.PI)}),s.isConnected?s.width===n.size[0]&&s.height===n.size[1]||r.resize():i.render(),r.redraw(),r.getContainer()}}(this)}getMapboxMapClass(){return jf.Map}clone(e){return new Im(Object.assign(Object.assign({},this.options),e))}}var Mm=n(7),Am=n.n(Mm),Rm=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),zm="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,Lm="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),Om="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(Lm):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Dm=["top","right","bottom","left","width","height","size","weight"],Fm="undefined"!==typeof MutationObserver,Nm=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function o(){n&&(n=!1,e()),i&&a()}function s(){Om(o)}function a(){var e=Date.now();if(n){if(e-r<2)return;i=!0}else n=!0,i=!1,setTimeout(s,t);r=e}return a}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){zm&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Fm?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){zm&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,i=Dm.some((function(e){return!!~n.indexOf(e)}));i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Bm=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},jm=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Lm},Vm=Wm(0,0,0,0);function Um(e){return parseFloat(e)||0}function qm(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Um(e["border-"+n+"-width"])}),0)}function Gm(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Vm;var i=jm(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=e["padding-"+r];t[r]=Um(o)}return t}(i),o=r.left+r.right,s=r.top+r.bottom,a=Um(i.width),l=Um(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=qm(i,"left","right")+o),Math.round(l+s)!==n&&(l-=qm(i,"top","bottom")+s)),!function(e){return e===jm(e).document.documentElement}(e)){var c=Math.round(a+o)-t,u=Math.round(l+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(u)&&(l-=u)}return Wm(r.left,r.top,a,l)}var Zm="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof jm(e).SVGGraphicsElement}:function(e){return e instanceof jm(e).SVGElement&&"function"===typeof e.getBBox};function Hm(e){return zm?Zm(e)?function(e){var t=e.getBBox();return Wm(0,0,t.width,t.height)}(e):Gm(e):Vm}function Wm(e,t,n,i){return{x:e,y:t,width:n,height:i}}var Km=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Wm(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Hm(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Xm=function(e,t){var n=function(e){var t=e.x,n=e.y,i=e.width,r=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return Bm(s,{x:t,y:n,width:i,height:r,top:n,right:t+i,bottom:r+n,left:t}),s}(t);Bm(this,{target:e,contentRect:n})},Ym=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Rm,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof jm(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Km(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof jm(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Xm(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),$m="undefined"!==typeof WeakMap?new WeakMap:new Rm,Jm=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Nm.getInstance(),i=new Ym(t,n,this);$m.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){Jm.prototype[e]=function(){var t;return(t=$m.get(this))[e].apply(t,arguments)}}));const Qm="undefined"!==typeof Lm.ResizeObserver?Lm.ResizeObserver:Jm,eg={observe:Am().oneOfType([Am().string,Am().node,Am().instanceOf(t.Component),Am().shape({current:Am().node}),Am().shape({current:Am().instanceOf(t.Component)})]),maxHeightBrkpts:Am().objectOf(Am().number),maxWidthBrkpts:Am().objectOf(Am().number),stylePropHeight:Am().string,onResize:Am().func,forceUpdate:Am().oneOfType([Am().string,Am().number,Am().bool])},tg={observe:null,maxHeightBrkpts:{xs:576,s:768,m:992,l:1200,xl:1/0},maxWidthBrkpts:{xs:576,s:768,m:992,l:1200,xl:1/0},stylePropHeight:null,onResize:null,forceUpdate:null};class ng extends t.PureComponent{static applyBreakpoints(e,t,n,i){let r,o=!1;return Object.entries(t).forEach((t=>{const s="rs-".concat(i,"-").concat(t[0]);e.target.classList.remove(s),!o&&n<=t[1]&&(o=!0,[r]=t,e.target.classList.add(s))})),r}constructor(e){super(e),this.observer=new Qm((e=>this.onResize(e))),this.nodes=[]}componentDidMount(){this.observe()}componentDidUpdate(e){const{observe:t,forceUpdate:n}=this.props;t===e.observe&&n===e.forceUpdate||this.observe()}componentWillUnmount(){this.observer.disconnect()}onResize(e){const{maxHeightBrkpts:t,maxWidthBrkpts:n,stylePropHeight:i,onResize:r}=this.props;if(i){const e=.01*window.innerHeight;document.documentElement.style.setProperty(i,"".concat(e,"px"))}if(!n&&!t)return void r(e);let o,s;for(let a=0;a<e.length;a+=1){const i=e[a],r=i.contentRect,{height:l,width:c}=r;n&&(o=ng.applyBreakpoints(i,n,c,"w")),t&&(s=ng.applyBreakpoints(i,t,l,"h"))}r&&r(e,o,s)}observe(){this.observer.disconnect();const{observe:e}=this.props;e&&("string"===typeof e||e instanceof String?this.nodes=document.querySelectorAll(e):e instanceof t.Component?this.nodes.push(d.findDOMNode(e)):e instanceof Element?this.nodes.push(e):e.current instanceof Element?this.nodes.push(e.current):e.current instanceof t.Component&&this.nodes.push(d.findDOMNode(e.current)),this.nodes.length&&this.nodes.forEach((e=>this.observer.observe(e))))}render(){return null}}ng.propTypes=eg,ng.defaultProps=tg;const ig=ng,rg={animationOptions:Am().shape({center:Am().arrayOf(Am().number),resolution:Am().number,zoom:Am().number}),center:Am().arrayOf(Am().number),className:Am().string,extent:Am().arrayOf(Am().number),fitOptions:Am().object,interactions:Am().oneOfType([Am().arrayOf(Am().instanceOf(wr)),Am().instanceOf(we)]),layers:Am().arrayOf(Am().instanceOf(Tm)),map:Am().instanceOf(so),onFeaturesClick:Am().func,featuresClickOptions:Am().shape({layerFilter:Am().func,hitTolerance:Am().number,checkWrapped:Am().bool}),onFeaturesHover:Am().func,onMapMoved:Am().func,resolution:Am().number,tabIndex:Am().number,style:Am().object,ariaLabel:Am().string,viewOptions:Am().shape({minZoom:Am().number,maxZoom:Am().number,extent:Am().array,projection:Am().string}),zoom:Am().number};class og extends t.PureComponent{constructor(e){super(e);const{map:t,interactions:n}=this.props;this.map=t||new so({controls:[],interactions:n||no({altShiftDragRotate:!1,pinchRotate:!1})}),this.state={node:null},this.layers=[],this.moveEndRef=null,this.singleClickRef=null,this.pointerMoveRef=null,this.setNode=this.setNode.bind(this)}componentDidMount(){const{layers:e,extent:t,viewOptions:n,center:i,zoom:r,resolution:o}=this.props,{node:s}=this.state;this.map.setTarget(s),this.map.setView(new fi({...n,center:i,zoom:r,resolution:o}));const a=this.map.getViewport();a.style.touchAction="none",a.style.msTouchAction="none",a.setAttribute("touch-action","none"),this.map.getSize()&&t&&this.map.getView().fit(t),this.setLayers(e),this.listenMoveEnd(),this.listenSingleClick(),this.listenPointerMove()}componentDidUpdate(e,t){const{animationOptions:n,center:i,extent:r,fitOptions:o,layers:s,resolution:a,viewOptions:l,zoom:c,onMapMoved:u,onFeaturesClick:h,onFeaturesHover:d}=this.props,{node:p}=this.state;t.node!==p&&(this.map.setTarget(p),!t.node&&p&&r&&this.map.getView().fit(r)),e.layers!==s&&this.setLayers(s,e.layers),l&&JSON.stringify(l)!==JSON.stringify(e.viewOptions)&&this.map.setView(new fi({...l,center:i,resolution:a,zoom:c}));const f=this.map.getView();n&&e.animationOptions!==n&&f.animate(n),e.center!==i&&f.setCenter(i),c!==e.zoom&&f.setZoom(c),a!==e.resolution&&f.setResolution(a),r&&!Le(r,e.extent||[])&&f.fit(r,o),u!==e.onMapMoved&&this.listenMoveEnd(),h!==e.onFeaturesClick&&this.listenSingleClick(),d!==e.onFeaturesHover&&this.listenPointerMove()}componentWillUnmount(){le([this.moveEndRef,this.singleClickRef,this.pointerMoveRef])}setNode(e){this.setState({node:e})}setLayers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let n=0;n<t.length;n+=1)this.terminateLayer(t[n]);for(let n=0;n<e.length;n+=1)this.initLayer(e[n]);this.layers=e}initLayer(e){e.attachToMap&&e.attachToMap(this.map),e.init&&e.init(this.map),e.olLayer&&this.map.getLayers()&&!this.map.getLayers().getArray().includes(e.olLayer)&&this.map.addLayer(e.olLayer);const t=e.children||[];for(let n=0;n<t.length;n+=1)this.initLayer(t[n])}terminateLayer(e){const t=e.children||[];for(let n=0;n<t.length;n+=1)this.terminateLayer(t[n]);e.olLayer&&this.map.getLayers()&&this.map.getLayers().getArray().includes(e.olLayer)&&this.map.removeLayer(e.olLayer),e.terminate&&e.terminate(this.map),e.detachFromMap&&e.detachFromMap(this.map)}listenMoveEnd(){const{onMapMoved:e}=this.props;le(this.moveEndRef),e&&(this.moveEndRef=this.map.on("moveend",(t=>e(t))))}listenSingleClick(){const{onFeaturesClick:e,featuresClickOptions:t}=this.props;le(this.singleClickRef),e&&(this.singleClickRef=this.map.on("singleclick",(n=>{const i=n.map.getFeaturesAtPixel(n.pixel,t);e(i||[],n)})))}listenPointerMove(){const{onFeaturesHover:e}=this.props;le(this.pointerMoveRef),e&&(this.pointerMoveRef=this.map.on("pointermove",(t=>{const n=t.map.getFeaturesAtPixel(t.pixel);e(n||[],t)})))}render(){const{className:e,tabIndex:n,ariaLabel:i,style:r}=this.props,{node:o}=this.state;return t.createElement("div",{className:e,ref:this.setNode,role:"presentation","aria-label":i,tabIndex:n,style:r},t.createElement(ig,{maxHeightBrkpts:null,maxWidthBrkpts:null,observe:o,onResize:()=>{this.map.updateSize()}}))}}og.propTypes=rg,og.defaultProps={animationOptions:void 0,center:[0,0],className:"rs-map",extent:void 0,fitOptions:{duration:1e3,padding:[20,20,20,20],maxZoom:23},style:void 0,interactions:null,layers:[],map:null,onFeaturesClick:void 0,featuresClickOptions:{hitTolerance:0},onFeaturesHover:void 0,onMapMoved:void 0,resolution:void 0,tabIndex:void 0,ariaLabel:"map",viewOptions:{minZoom:0,maxZoom:22,extent:void 0,projection:"EPSG:3857"},zoom:1};const sg=og;let ag=0;const lg=i["useId".toString()];function cg(e){if(void 0!==lg){const t=lg();return null!=e?e:t}return function(e){const[n,i]=t.useState(e),r=e||n;return t.useEffect((()=>{null==n&&(ag+=1,i("mui-".concat(ag)))}),[n]),r}(e)}function ug(){return ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ug.apply(this,arguments)}function hg(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function dg(e){return e&&e.ownerDocument||document}function pg(e){return dg(e).defaultView||window}function fg(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,r)}),n)}return i.clear=()=>{clearTimeout(t)},i}const mg=["onChange","maxRows","minRows","style","value"];function gg(e){return parseInt(e,10)||0}const yg={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function _g(e){return void 0===e||null===e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflow}const vg=t.forwardRef((function(e,n){const{onChange:i,maxRows:r,minRows:o=1,style:s,value:a}=e,l=hg(e,mg),{current:c}=t.useRef(null!=a),u=t.useRef(null),h=du(n,u),p=t.useRef(null),f=t.useRef(0),[m,g]=t.useState({outerHeightStyle:0}),y=t.useCallback((()=>{const t=u.current,n=pg(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0};const i=p.current;i.style.width=n.width,i.value=t.value||e.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");const s=n.boxSizing,a=gg(n.paddingBottom)+gg(n.paddingTop),l=gg(n.borderBottomWidth)+gg(n.borderTopWidth),c=i.scrollHeight;i.value="x";const h=i.scrollHeight;let d=c;o&&(d=Math.max(Number(o)*h,d)),r&&(d=Math.min(Number(r)*h,d)),d=Math.max(d,h);return{outerHeightStyle:d+("border-box"===s?a+l:0),overflow:Math.abs(d-c)<=1}}),[r,o,e.placeholder]),_=(e,t)=>{const{outerHeightStyle:n,overflow:i}=t;return f.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==i)?(f.current+=1,{overflow:i,outerHeightStyle:n}):e},v=t.useCallback((()=>{const e=y();_g(e)||g((t=>_(t,e)))}),[y]);t.useEffect((()=>{const e=fg((()=>{f.current=0,u.current&&(()=>{const e=y();_g(e)||d.flushSync((()=>{g((t=>_(t,e)))}))})()}));let t;const n=u.current,i=pg(n);return i.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),t.observe(n)),()=>{e.clear(),i.removeEventListener("resize",e),t&&t.disconnect()}})),fu((()=>{v()})),t.useEffect((()=>{f.current=0}),[a]);return(0,ru.jsxs)(t.Fragment,{children:[(0,ru.jsx)("textarea",ug({value:a,onChange:e=>{f.current=0,c||v(),i&&i(e)},ref:h,rows:o,style:ug({height:m.outerHeightStyle,overflow:m.overflow?"hidden":void 0},s)},l)),(0,ru.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:ug({},yg,s,{padding:0})})]})})),bg=vg;function xg(e){return"string"===typeof e}function wg(e){let{props:t,states:n,muiFormControl:i}=e;return n.reduce(((e,n)=>(e[n]=t[n],i&&"undefined"===typeof t[n]&&(e[n]=i[n]),e)),{})}const Sg=t.createContext(void 0);function kg(){return t.useContext(Sg)}const Cg=fu;function Eg(e){const{styles:t,defaultTheme:n={}}=e,i="function"===typeof t?e=>{return t(void 0===(i=e)||null===i||0===Object.keys(i).length?n:e);var i}:t;return(0,ru.jsx)(Nu,{styles:i})}const Tg=function(e){let{styles:t,themeId:n,defaultTheme:i={}}=e;const r=Zl(i),o="function"===typeof t?t(n&&r[n]||r):t;return(0,ru.jsx)(Eg,{styles:o})};const Pg=function(e){return(0,ru.jsx)(Tg,rs({},e,{defaultTheme:Pc,themeId:Ic}))};function Ig(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Mg(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Ig(e.value)&&""!==e.value||t&&Ig(e.defaultValue)&&""!==e.defaultValue)}function Ag(e){return tu("MuiInputBase",e)}const Rg=nu("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),zg=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Lg=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(hs(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Og=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Dg=$c("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Lg})((e=>{let{theme:t,ownerState:n}=e;return rs({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(Rg.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&rs({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Fg=$c("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Og})((e=>{let{theme:t,ownerState:n}=e;const i="light"===t.palette.mode,r=rs({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return rs({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(Rg.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(Rg.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Ng=(0,ru.jsx)(Pg,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Bg=t.forwardRef((function(e,n){var i;const r=Mc({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:y="input",inputProps:_={},inputRef:v,maxRows:b,minRows:x,multiline:w=!1,name:S,onBlur:k,onChange:C,onClick:E,onFocus:T,onKeyDown:P,onKeyUp:I,placeholder:M,readOnly:A,renderSuffix:R,rows:z,slotProps:L={},slots:O={},startAdornment:D,type:F="text",value:N}=r,B=os(r,zg),j=null!=_.value?_.value:N,{current:V}=t.useRef(null!=j),U=t.useRef(),q=t.useCallback((e=>{0}),[]),G=pu(U,v,_.ref,q),[Z,H]=t.useState(!1),W=kg();const K=wg({props:r,muiFormControl:W,states:["color","disabled","error","hiddenLabel","size","required","filled"]});K.focused=W?W.focused:Z,t.useEffect((()=>{!W&&d&&Z&&(H(!1),k&&k())}),[W,d,Z,k]);const X=W&&W.onFilled,Y=W&&W.onEmpty,$=t.useCallback((e=>{Mg(e)?X&&X():Y&&Y()}),[X,Y]);Cg((()=>{V&&$({value:j})}),[j,$,V]);t.useEffect((()=>{$(U.current)}),[]);let J=y,Q=_;w&&"input"===J&&(Q=rs(z?{type:void 0,minRows:z,maxRows:z}:{type:void 0,maxRows:b,minRows:x},Q),J=bg);t.useEffect((()=>{W&&W.setAdornedStart(Boolean(D))}),[W,D]);const ee=rs({},r,{color:K.color||"primary",disabled:K.disabled,endAdornment:f,error:K.error,focused:K.focused,formControl:W,fullWidth:m,hiddenLabel:K.hiddenLabel,multiline:w,size:K.size,startAdornment:D,type:F}),te=(e=>{const{classes:t,color:n,disabled:i,error:r,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:p,type:f}=e;return ls({root:["root","color".concat(hs(n)),i&&"disabled",r&&"error",l&&"fullWidth",s&&"focused",a&&"formControl","small"===d&&"sizeSmall",u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",i&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===d&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]},Ag,t)})(ee),ne=O.root||c.Root||Dg,ie=L.root||u.root||{},re=O.input||c.Input||Fg;return Q=rs({},Q,null!=(i=L.input)?i:u.input),(0,ru.jsxs)(t.Fragment,{children:[!p&&Ng,(0,ru.jsxs)(ne,rs({},ie,!xg(ne)&&{ownerState:rs({},ee,ie.ownerState)},{ref:n,onClick:e=>{U.current&&e.currentTarget===e.target&&U.current.focus(),E&&!K.disabled&&E(e)}},B,{className:as(te.root,ie.className,l,A&&"MuiInputBase-readOnly"),children:[D,(0,ru.jsx)(Sg.Provider,{value:null,children:(0,ru.jsx)(re,rs({ownerState:ee,"aria-invalid":K.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:h,disabled:K.disabled,id:g,onAnimationStart:e=>{$("mui-auto-fill-cancel"===e.animationName?U.current:{value:"x"})},name:S,placeholder:M,readOnly:A,required:K.required,rows:z,value:j,onKeyDown:P,onKeyUp:I,type:F},Q,!xg(re)&&{as:J,ownerState:rs({},ee,Q.ownerState)},{ref:G,className:as(te.input,Q.className,A&&"MuiInputBase-readOnly"),onBlur:e=>{k&&k(e),_.onBlur&&_.onBlur(e),W&&W.onBlur?W.onBlur(e):H(!1)},onChange:function(e){if(!V){const t=e.target||U.current;if(null==t)throw new Error(cs(1));$({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];_.onChange&&_.onChange(e,...n),C&&C(e,...n)},onFocus:e=>{K.disabled?e.stopPropagation():(T&&T(e),_.onFocus&&_.onFocus(e),W&&W.onFocus?W.onFocus(e):H(!0))}}))}),f,R?R(rs({},K,{startAdornment:D})):null]}))]})})),jg=Bg;function Vg(e){return tu("MuiInput",e)}const Ug=rs({},Rg,nu("MuiInput",["root","underline","input"])),qg=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Gg=$c(Dg,{shouldForwardProp:e=>Kc(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Lg(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let i="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(i="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),rs({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Ug.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Ug.error)]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&:before":{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Ug.disabled,", .").concat(Ug.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}},["&.".concat(Ug.disabled,":before")]:{borderBottomStyle:"dotted"}})})),Zg=$c(Fg,{name:"MuiInput",slot:"Input",overridesResolver:Og})({}),Hg=t.forwardRef((function(e,t){var n,i,r,o;const s=Mc({props:e,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:h="input",multiline:d=!1,slotProps:p,slots:f={},type:m="text"}=s,g=os(s,qg),y=(e=>{const{classes:t,disableUnderline:n}=e;return rs({},t,ls({root:["root",!n&&"underline"],input:["input"]},Vg,t))})(s),_={root:{ownerState:{disableUnderline:a}}},v=(null!=p?p:c)?vs(null!=p?p:c,_):_,b=null!=(n=null!=(i=f.root)?i:l.Root)?n:Gg,x=null!=(r=null!=(o=f.input)?o:l.Input)?r:Zg;return(0,ru.jsx)(jg,rs({slots:{root:b,input:x},slotProps:v,fullWidth:u,inputComponent:h,multiline:d,ref:t,type:m},g,{classes:y}))}));Hg.muiName="Input";const Wg=Hg;function Kg(e){return tu("MuiFilledInput",e)}const Xg=rs({},Rg,nu("MuiFilledInput",["root","underline","input"])),Yg=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],$g=$c(Dg,{shouldForwardProp:e=>Kc(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Lg(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var i;const r="light"===t.palette.mode,o=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return rs({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},["&.".concat(Xg.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},["&.".concat(Xg.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat(null==(i=(t.vars||t).palette[n.color||"primary"])?void 0:i.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Xg.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Xg.error)]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&:before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Xg.disabled,", .").concat(Xg.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(Xg.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&rs({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),Jg=$c(Fg,{name:"MuiFilledInput",slot:"Input",overridesResolver:Og})((e=>{let{theme:t,ownerState:n}=e;return rs({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),Qg=t.forwardRef((function(e,t){var n,i,r,o;const s=Mc({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:h=!1,slotProps:d,slots:p={},type:f="text"}=s,m=os(s,Yg),g=rs({},s,{fullWidth:c,inputComponent:u,multiline:h,type:f}),y=(e=>{const{classes:t,disableUnderline:n}=e;return rs({},t,ls({root:["root",!n&&"underline"],input:["input"]},Kg,t))})(s),_={root:{ownerState:g},input:{ownerState:g}},v=(null!=d?d:l)?vs(null!=d?d:l,_):_,b=null!=(n=null!=(i=p.root)?i:a.Root)?n:$g,x=null!=(r=null!=(o=p.input)?o:a.Input)?r:Jg;return(0,ru.jsx)(jg,rs({slots:{root:b,input:x},componentsProps:v,fullWidth:c,inputComponent:u,multiline:h,ref:t,type:f},m,{classes:y}))}));Qg.muiName="Input";const ey=Qg;var ty;const ny=["children","classes","className","label","notched"],iy=$c("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ry=$c("legend")((e=>{let{ownerState:t,theme:n}=e;return rs({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&rs({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function oy(e){return tu("MuiOutlinedInput",e)}const sy=rs({},Rg,nu("MuiOutlinedInput",["root","notchedOutline","input"])),ay=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],ly=$c(Dg,{shouldForwardProp:e=>Kc(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Lg})((e=>{let{theme:t,ownerState:n}=e;const i="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return rs({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(sy.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(sy.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):i}},["&.".concat(sy.focused," .").concat(sy.notchedOutline)]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},["&.".concat(sy.error," .").concat(sy.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(sy.disabled," .").concat(sy.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&rs({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),cy=$c((function(e){const{className:t,label:n,notched:i}=e,r=os(e,ny),o=null!=n&&""!==n,s=rs({},e,{notched:i,withLabel:o});return(0,ru.jsx)(iy,rs({"aria-hidden":!0,className:t,ownerState:s},r,{children:(0,ru.jsx)(ry,{ownerState:s,children:o?(0,ru.jsx)("span",{children:n}):ty||(ty=(0,ru.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),uy=$c(Fg,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Og})((e=>{let{theme:t,ownerState:n}=e;return rs({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),hy=t.forwardRef((function(e,n){var i,r,o,s,a;const l=Mc({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:h="input",label:d,multiline:p=!1,notched:f,slots:m={},type:g="text"}=l,y=os(l,ay),_=(e=>{const{classes:t}=e;return rs({},t,ls({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},oy,t))})(l),v=kg(),b=wg({props:l,muiFormControl:v,states:["required"]}),x=rs({},l,{color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:v,fullWidth:u,hiddenLabel:b.hiddenLabel,multiline:p,size:b.size,type:g}),w=null!=(i=null!=(r=m.root)?r:c.Root)?i:ly,S=null!=(o=null!=(s=m.input)?s:c.Input)?o:uy;return(0,ru.jsx)(jg,rs({slots:{root:w,input:S},renderSuffix:e=>(0,ru.jsx)(cy,{ownerState:x,className:_.notchedOutline,label:null!=d&&""!==d&&b.required?a||(a=(0,ru.jsxs)(t.Fragment,{children:[d,"\u2009","*"]})):d,notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:h,multiline:p,ref:n,type:g},y,{classes:rs({},_,{notchedOutline:null})}))}));hy.muiName="Input";const dy=hy;function py(e){return tu("MuiFormLabel",e)}const fy=nu("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),my=["children","className","color","component","disabled","error","filled","focused","required"],gy=$c("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return rs({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return rs({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(fy.focused)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(fy.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(fy.error)]:{color:(t.vars||t).palette.error.main}})})),yy=$c("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{["&.".concat(fy.error)]:{color:(t.vars||t).palette.error.main}}})),_y=t.forwardRef((function(e,t){const n=Mc({props:e,name:"MuiFormLabel"}),{children:i,className:r,component:o="label"}=n,s=os(n,my),a=wg({props:n,muiFormControl:kg(),states:["color","required","focused","disabled","error","filled"]}),l=rs({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,color:n,focused:i,disabled:r,error:o,filled:s,required:a}=e;return ls({root:["root","color".concat(hs(n)),r&&"disabled",o&&"error",s&&"filled",i&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]},py,t)})(l);return(0,ru.jsxs)(gy,rs({as:o,ownerState:l,className:as(c.root,r),ref:t},s,{children:[i,a.required&&(0,ru.jsxs)(yy,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),vy=_y;function by(e){return tu("MuiInputLabel",e)}nu("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const xy=["disableAnimation","margin","shrink","variant","className"],wy=$c(vy,{shouldForwardProp:e=>Kc(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(fy.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return rs({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&rs({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&rs({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&rs({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Sy=t.forwardRef((function(e,t){const n=Mc({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:r,className:o}=n,s=os(n,xy),a=kg();let l=r;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=wg({props:n,muiFormControl:a,states:["size","variant","required"]}),u=rs({},n,{disableAnimation:i,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required}),h=(e=>{const{classes:t,formControl:n,size:i,shrink:r,disableAnimation:o,variant:s,required:a}=e;return rs({},t,ls({root:["root",n&&"formControl",!o&&"animated",r&&"shrink","small"===i&&"sizeSmall",s],asterisk:[a&&"asterisk"]},by,t))})(u);return(0,ru.jsx)(wy,rs({"data-shrink":l,ownerState:u,ref:t,className:as(h.root,o)},s,{classes:h}))}));const ky=function(e,n){return t.isValidElement(e)&&-1!==n.indexOf(e.type.muiName)};function Cy(e){return tu("MuiFormControl",e)}nu("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ey=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Ty=$c("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return rs({},t.root,t["margin".concat(hs(n.margin))],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return rs({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Py=t.forwardRef((function(e,n){const i=Mc({props:e,name:"MuiFormControl"}),{children:r,className:o,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined"}=i,y=os(i,Ey),_=rs({},i,{color:s,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:p,required:f,size:m,variant:g}),v=(e=>{const{classes:t,margin:n,fullWidth:i}=e;return ls({root:["root","none"!==n&&"margin".concat(hs(n)),i&&"fullWidth"]},Cy,t)})(_),[b,x]=t.useState((()=>{let e=!1;return r&&t.Children.forEach(r,(t=>{if(!ky(t,["Input","Select"]))return;const n=ky(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[w,S]=t.useState((()=>{let e=!1;return r&&t.Children.forEach(r,(t=>{ky(t,["Input","Select"])&&(Mg(t.props,!0)||Mg(t.props.inputProps,!0))&&(e=!0)})),e})),[k,C]=t.useState(!1);l&&k&&C(!1);const E=void 0===u||l?k:u;let T;const P=t.useMemo((()=>({adornedStart:b,setAdornedStart:x,color:s,disabled:l,error:c,filled:w,focused:E,fullWidth:h,hiddenLabel:d,size:m,onBlur:()=>{C(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{C(!0)},registerEffect:T,required:f,variant:g})),[b,s,l,c,w,E,h,d,T,f,m,g]);return(0,ru.jsx)(Sg.Provider,{value:P,children:(0,ru.jsx)(Ty,rs({as:a,ownerState:_,className:as(v.root,o),ref:n},y,{children:r}))})})),Iy=Py;function My(e){return tu("MuiFormHelperText",e)}const Ay=nu("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Ry;const zy=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Ly=$c("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat(hs(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return rs({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(Ay.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(Ay.error)]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),Oy=t.forwardRef((function(e,t){const n=Mc({props:e,name:"MuiFormHelperText"}),{children:i,className:r,component:o="p"}=n,s=os(n,zy),a=wg({props:n,muiFormControl:kg(),states:["variant","size","disabled","error","filled","focused","required"]}),l=rs({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,contained:n,size:i,disabled:r,error:o,filled:s,focused:a,required:l}=e;return ls({root:["root",r&&"disabled",o&&"error",i&&"size".concat(hs(i)),n&&"contained",a&&"focused",s&&"filled",l&&"required"]},My,t)})(l);return(0,ru.jsx)(Ly,rs({as:o,ownerState:l,className:as(c.root,r),ref:t},s,{children:" "===i?Ry||(Ry=(0,ru.jsx)("span",{className:"notranslate",children:"\u200b"})):i}))})),Dy=Oy,Fy=dg;const Ny=t.createContext({});function By(e){return tu("MuiList",e)}nu("MuiList",["root","padding","dense","subheader"]);const jy=["children","className","component","dense","disablePadding","subheader"],Vy=$c("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return rs({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),Uy=t.forwardRef((function(e,n){const i=Mc({props:e,name:"MuiList"}),{children:r,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=i,u=os(i,jy),h=t.useMemo((()=>({dense:a})),[a]),d=rs({},i,{component:s,dense:a,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:n,dense:i,subheader:r}=e;return ls({root:["root",!n&&"padding",i&&"dense",r&&"subheader"]},By,t)})(d);return(0,ru.jsx)(Ny.Provider,{value:h,children:(0,ru.jsxs)(Vy,rs({as:s,className:as(p.root,o),ref:n,ownerState:d},u,{children:[c,r]}))})}));function qy(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const Gy=qy,Zy=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Hy(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Wy(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Ky(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function Xy(e,t,n,i,r,o){let s=!1,a=r(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!i&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&Ky(a,o)&&!t)return a.focus(),!0;a=r(e,a,n)}return!1}const Yy=t.forwardRef((function(e,n){const{actions:i,autoFocus:r=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu"}=e,d=os(e,Zy),p=t.useRef(null),f=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Cg((()=>{r&&p.current.focus()}),[r]),t.useImperativeHandle(i,(()=>({adjustStyleForScrollbar:(e,t)=>{const n=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&n){const n="".concat(Gy(Fy(e)),"px");p.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,p.current.style.width="calc(100% + ".concat(n,")")}return p.current}})),[]);const m=pu(p,n);let g=-1;t.Children.forEach(s,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===g)&&(g=n),g===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=s.length&&(g=-1))):g===n&&(g+=1,g>=s.length&&(g=-1))}));const y=t.Children.map(s,((e,n)=>{if(n===g){const n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===h&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,ru.jsx)(Uy,rs({role:"menu",ref:m,className:a,onKeyDown:e=>{const t=p.current,n=e.key,i=Fy(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Xy(t,i,c,l,Hy);else if("ArrowUp"===n)e.preventDefault(),Xy(t,i,c,l,Wy);else if("Home"===n)e.preventDefault(),Xy(t,null,c,l,Hy);else if("End"===n)e.preventDefault(),Xy(t,null,c,l,Wy);else if(1===n.length){const r=f.current,o=n.toLowerCase(),s=performance.now();r.keys.length>0&&(s-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&o!==r.keys[0]&&(r.repeating=!1)),r.lastTime=s,r.keys.push(o);const a=i&&!r.repeating&&Ky(i,r);r.previousKeyMatched&&(a||Xy(t,i,!1,l,Hy,r))?e.preventDefault():r.previousKeyMatched=!1}u&&u(e)},tabIndex:r?0:-1},d,{children:y}))})),$y=Yy;function Jy(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}function Qy(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:o}=e;if(!t){const e=as(null==r?void 0:r.className,null==i?void 0:i.className,o,null==n?void 0:n.className),t=ug({},null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),s=ug({},n,r,i);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}(ug({},r,i)),a=Jy(i),l=Jy(r),c=t(s),u=as(null==c?void 0:c.className,null==n?void 0:n.className,o,null==r?void 0:r.className,null==i?void 0:i.className),h=ug({},null==c?void 0:c.style,null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),d=ug({},c,n,l,a);return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}}function e_(e,t){return"function"===typeof e?e(t):e}const t_=["elementType","externalSlotProps","ownerState"];function n_(e){var t;const{elementType:n,externalSlotProps:i,ownerState:r}=e,o=hg(e,t_),s=e_(i,r),{props:a,internalRef:l}=Qy(ug({},o,{externalSlotProps:s})),c=function(e,t,n){return void 0===e||xg(e)?t:ug({},t,{ownerState:ug({},t.ownerState,n)})}(n,ug({},a,{ref:du(l,null==s?void 0:s.ref,null==(t=e.additionalProps)?void 0:t.ref)}),r);return c}const i_=fg,r_=pg,o_=!1;var s_="unmounted",a_="exited",l_="entering",c_="entered",u_="exiting",h_=function(e){function n(t,n){var i;i=e.call(this,t,n)||this;var r,o=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?o?(r=a_,i.appearStatus=l_):r=c_:r=t.unmountOnExit||t.mountOnEnter?s_:a_,i.state={status:r},i.nextCallback=null,i}Mu(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===s_?{status:a_}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==l_&&n!==c_&&(t=l_):n!==l_&&n!==c_||(t=u_)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,i=this.props.timeout;return e=t=n=i,null!=i&&"number"!==typeof i&&(e=i.exit,t=i.enter,n=void 0!==i.appear?i.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===l_){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:d.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===a_&&this.setState({status:s_})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,r=this.props.nodeRef?[i]:[d.findDOMNode(this),i],o=r[0],s=r[1],a=this.getTimeouts(),l=i?a.appear:a.enter;!e&&!n||o_?this.safeSetState({status:c_},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:l_},(function(){t.props.onEntering(o,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:c_},(function(){t.props.onEntered(o,s)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:d.findDOMNode(this);t&&!o_?(this.props.onExit(i),this.safeSetState({status:u_},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:a_},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:a_},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:d.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=r[0],s=r[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===s_)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,Tu(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Au.Provider,{value:null},"function"===typeof i?i(e,r):t.cloneElement(t.Children.only(i),r))},n}(t.Component);function d_(){}h_.contextType=Au,h_.propTypes={},h_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:d_,onEntering:d_,onEntered:d_,onExit:d_,onExiting:d_,onExited:d_},h_.UNMOUNTED=s_,h_.EXITED=a_,h_.ENTERING=l_,h_.ENTERED=c_,h_.EXITING=u_;const p_=h_,f_=e=>e.scrollTop;function m_(e,t){var n,i;const{timeout:r,easing:o,style:s={}}=e;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof r?r:r[t.mode]||0,easing:null!=(i=s.transitionTimingFunction)?i:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}const g_=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function y_(e){return"scale(".concat(e,", ").concat(e**2,")")}const __={entering:{opacity:1,transform:y_(1)},entered:{opacity:1,transform:"none"}},v_="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),b_=t.forwardRef((function(e,n){const{addEndListener:i,appear:r=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=p_}=e,y=os(e,g_),_=t.useRef(),v=t.useRef(),b=vh(),x=t.useRef(null),w=pu(x,o.ref,n),S=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},k=S(u),C=S(((e,t)=>{f_(e);const{duration:n,delay:i,easing:r}=m_({style:f,timeout:m,easing:s},{mode:"enter"});let o;"auto"===m?(o=b.transitions.getAutoHeightDuration(e.clientHeight),v.current=o):o=n,e.style.transition=[b.transitions.create("opacity",{duration:o,delay:i}),b.transitions.create("transform",{duration:v_?o:.666*o,delay:i,easing:r})].join(","),l&&l(e,t)})),E=S(c),T=S(p),P=S((e=>{const{duration:t,delay:n,easing:i}=m_({style:f,timeout:m,easing:s},{mode:"exit"});let r;"auto"===m?(r=b.transitions.getAutoHeightDuration(e.clientHeight),v.current=r):r=t,e.style.transition=[b.transitions.create("opacity",{duration:r,delay:n}),b.transitions.create("transform",{duration:v_?r:.666*r,delay:v_?n:n||.333*r,easing:i})].join(","),e.style.opacity=0,e.style.transform=y_(.75),h&&h(e)})),I=S(d);return t.useEffect((()=>()=>{clearTimeout(_.current)}),[]),(0,ru.jsx)(g,rs({appear:r,in:a,nodeRef:x,onEnter:C,onEntered:E,onEntering:k,onExit:P,onExited:I,onExiting:T,addEndListener:e=>{"auto"===m&&(_.current=setTimeout(e,v.current||0)),i&&i(x.current,e)},timeout:"auto"===m?null:m},y,{children:(e,n)=>t.cloneElement(o,rs({style:rs({opacity:0,transform:y_(.75),visibility:"exited"!==e||a?void 0:"hidden"},__[e],f,o.props.style),ref:w},n))}))}));b_.muiSupportAuto=!0;const x_=b_;function w_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i),t.apply(this,i)}),(()=>{}))}const S_=t.forwardRef((function(e,n){const{children:i,container:r,disablePortal:o=!1}=e,[s,a]=t.useState(null),l=du(t.isValidElement(i)?i.ref:null,n);if(fu((()=>{o||a(function(e){return"function"===typeof e?e():e}(r)||document.body)}),[r,o]),fu((()=>{if(s&&!o)return hu(n,s),()=>{hu(n,null)}}),[n,s,o]),o){if(t.isValidElement(i)){const e={ref:l};return t.cloneElement(i,e)}return(0,ru.jsx)(t.Fragment,{children:i})}return(0,ru.jsx)(t.Fragment,{children:s?d.createPortal(i,s):s})}));const k_=S_;function C_(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function E_(e){return parseInt(pg(e).getComputedStyle(e).paddingRight,10)||0}function T_(e,t,n,i,r){const o=[t,n,...i];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&C_(e,r)}))}function P_(e,t){let n=-1;return e.some(((e,i)=>!!t(e)&&(n=i,!0))),n}function I_(e,t){const n=[],i=e.container;if(!t.disableScrollLock){if(function(e){const t=dg(e);return t.body===e?pg(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(i)){const e=qy(dg(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight="".concat(E_(i)+e,"px");const t=dg(i).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(E_(t)+e,"px")}))}let e;if(i.parentNode instanceof DocumentFragment)e=dg(i).body;else{const t=i.parentElement,n=pg(i);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:i}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:i}=e;t?n.style.setProperty(i,t):n.style.removeProperty(i)}))}}const M_=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function A_(e){const t=[],n=[];return Array.from(e.querySelectorAll(M_)).forEach(((e,i)=>{const r=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==r&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===r?t.push(e):n.push({documentOrder:i,tabIndex:r,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function R_(){return!0}const z_=function(e){const{children:n,disableAutoFocus:i=!1,disableEnforceFocus:r=!1,disableRestoreFocus:o=!1,getTabbable:s=A_,isEnabled:a=R_,open:l}=e,c=t.useRef(!1),u=t.useRef(null),h=t.useRef(null),d=t.useRef(null),p=t.useRef(null),f=t.useRef(!1),m=t.useRef(null),g=du(n.ref,m),y=t.useRef(null);t.useEffect((()=>{l&&m.current&&(f.current=!i)}),[i,l]),t.useEffect((()=>{if(!l||!m.current)return;const e=dg(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{o||(d.current&&d.current.focus&&(c.current=!0,d.current.focus()),d.current=null)}}),[l]),t.useEffect((()=>{if(!l||!m.current)return;const e=dg(m.current),t=t=>{const{current:n}=m;if(null!==n)if(e.hasFocus()&&!r&&a()&&!c.current){if(!n.contains(e.activeElement)){if(t&&p.current!==t.target||e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let r=[];if(e.activeElement!==u.current&&e.activeElement!==h.current||(r=s(m.current)),r.length>0){var i,o;const e=Boolean((null==(i=y.current)?void 0:i.shiftKey)&&"Tab"===(null==(o=y.current)?void 0:o.key)),t=r[0],n=r[r.length-1];"string"!==typeof t&&"string"!==typeof n&&(e?n.focus():t.focus())}else n.focus()}}else c.current=!1},n=t=>{y.current=t,!r&&a()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,h.current&&h.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);const i=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&t(null)}),50);return()=>{clearInterval(i),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}),[i,r,o,a,l,s]);const _=e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0};return(0,ru.jsxs)(t.Fragment,{children:[(0,ru.jsx)("div",{tabIndex:l?0:-1,onFocus:_,ref:u,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:g,onFocus:e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0,p.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,ru.jsx)("div",{tabIndex:l?0:-1,onFocus:_,ref:h,"data-testid":"sentinelEnd"})]})};function L_(e){return tu("MuiModal",e)}nu("MuiModal",["root","hidden","backdrop"]);const O_={disableDefaultClasses:!1},D_=t.createContext(O_);const F_=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],N_=e=>{const{open:n,exited:i}=e;return ls({root:["root",!n&&i&&"hidden"],backdrop:["backdrop"]},function(e){const{disableDefaultClasses:n}=t.useContext(D_);return t=>n?"":e(t)}(L_))};const B_=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&C_(e.modalRef,!1);const i=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);T_(t,e.mount,e.modalRef,i,!0);const r=P_(this.containers,(e=>e.container===t));return-1!==r?(this.containers[r].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),n)}mount(e,t){const n=P_(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[n];i.restore||(i.restore=I_(i,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const i=P_(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[i];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(n,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&C_(e.modalRef,t),T_(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(i,1);else{const e=r.modals[r.modals.length-1];e.modalRef&&C_(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}},j_=t.forwardRef((function(e,n){var i,r;const{children:o,closeAfterTransition:s=!1,container:a,disableAutoFocus:l=!1,disableEnforceFocus:c=!1,disableEscapeKeyDown:u=!1,disablePortal:h=!1,disableRestoreFocus:d=!1,disableScrollLock:p=!1,hideBackdrop:f=!1,keepMounted:m=!1,manager:g=B_,onBackdropClick:y,onClose:_,onKeyDown:v,open:b,onTransitionEnter:x,onTransitionExited:w,slotProps:S={},slots:k={}}=e,C=hg(e,F_),E=g,[T,P]=t.useState(!b),I=t.useRef({}),M=t.useRef(null),A=t.useRef(null),R=du(A,n),z=function(e){return!!e&&e.props.hasOwnProperty("in")}(o),L=null==(i=e["aria-hidden"])||i,O=()=>(I.current.modalRef=A.current,I.current.mountNode=M.current,I.current),D=()=>{E.mount(O(),{disableScrollLock:p}),A.current&&(A.current.scrollTop=0)},F=mu((()=>{const e=function(e){return"function"===typeof e?e():e}(a)||dg(M.current).body;E.add(O(),e),A.current&&D()})),N=t.useCallback((()=>E.isTopModal(O())),[E]),B=mu((e=>{M.current=e,e&&A.current&&(b&&N()?D():C_(A.current,L))})),j=t.useCallback((()=>{E.remove(O(),L)}),[E,L]);t.useEffect((()=>()=>{j()}),[j]),t.useEffect((()=>{b?F():z&&s||j()}),[b,j,z,s,F]);const V=ug({},e,{closeAfterTransition:s,disableAutoFocus:l,disableEnforceFocus:c,disableEscapeKeyDown:u,disablePortal:h,disableRestoreFocus:d,disableScrollLock:p,exited:T,hideBackdrop:f,keepMounted:m}),U=N_(V),q=()=>{P(!1),x&&x()},G=()=>{P(!0),w&&w(),s&&j()},Z={};void 0===o.props.tabIndex&&(Z.tabIndex="-1"),z&&(Z.onEnter=w_(q,o.props.onEnter),Z.onExited=w_(G,o.props.onExited));const H=null!=(r=k.root)?r:"div",W=n_({elementType:H,externalSlotProps:S.root,externalForwardedProps:C,additionalProps:{ref:R,role:"presentation",onKeyDown:e=>{v&&v(e),"Escape"===e.key&&N()&&(u||(e.stopPropagation(),_&&_(e,"escapeKeyDown")))}},className:U.root,ownerState:V}),K=k.backdrop,X=n_({elementType:K,externalSlotProps:S.backdrop,additionalProps:{"aria-hidden":!0,onClick:e=>{e.target===e.currentTarget&&(y&&y(e),_&&_(e,"backdropClick"))},open:b},className:U.backdrop,ownerState:V});return m||b||z&&!T?(0,ru.jsx)(k_,{ref:B,container:a,disablePortal:h,children:(0,ru.jsxs)(H,ug({},W,{children:[!f&&K?(0,ru.jsx)(K,ug({},X)):null,(0,ru.jsx)(z_,{disableEnforceFocus:c,disableAutoFocus:l,disableRestoreFocus:d,isEnabled:N,open:b,children:t.cloneElement(o,Z)})]}))}):null})),V_=j_,U_=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],q_={entering:{opacity:1},entered:{opacity:1}},G_=t.forwardRef((function(e,n){const i=vh(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:p,onExited:f,onExiting:m,style:g,timeout:y=r,TransitionComponent:_=p_}=e,v=os(e,U_),b=t.useRef(null),x=pu(b,a.ref,n),w=e=>t=>{if(e){const n=b.current;void 0===t?e(n):e(n,t)}},S=w(d),k=w(((e,t)=>{f_(e);const n=m_({style:g,timeout:y,easing:l},{mode:"enter"});e.style.webkitTransition=i.transitions.create("opacity",n),e.style.transition=i.transitions.create("opacity",n),u&&u(e,t)})),C=w(h),E=w(m),T=w((e=>{const t=m_({style:g,timeout:y,easing:l},{mode:"exit"});e.style.webkitTransition=i.transitions.create("opacity",t),e.style.transition=i.transitions.create("opacity",t),p&&p(e)})),P=w(f);return(0,ru.jsx)(_,rs({appear:s,in:c,nodeRef:b,onEnter:k,onEntered:C,onEntering:S,onExit:T,onExited:P,onExiting:E,addEndListener:e=>{o&&o(b.current,e)},timeout:y},v,{children:(e,n)=>t.cloneElement(a,rs({style:rs({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},q_[e],g,a.props.style),ref:x},n))}))})),Z_=G_;function H_(e){return tu("MuiBackdrop",e)}nu("MuiBackdrop",["root","invisible"]);const W_=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],K_=$c("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return rs({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),X_=t.forwardRef((function(e,t){var n,i,r;const o=Mc({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:h=!1,open:d,slotProps:p={},slots:f={},TransitionComponent:m=Z_,transitionDuration:g}=o,y=os(o,W_),_=rs({},o,{component:l,invisible:h}),v=(e=>{const{classes:t,invisible:n}=e;return ls({root:["root",n&&"invisible"]},H_,t)})(_),b=null!=(n=p.root)?n:u.root;return(0,ru.jsx)(m,rs({in:d,timeout:g},y,{children:(0,ru.jsx)(K_,rs({"aria-hidden":!0},b,{as:null!=(i=null!=(r=f.root)?r:c.Root)?i:l,className:as(v.root,a,null==b?void 0:b.className),ownerState:rs({},_,null==b?void 0:b.ownerState),classes:v,ref:t,children:s}))}))})),Y_=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],$_=$c("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return rs({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),J_=$c(X_,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Q_=t.forwardRef((function(e,n){var i,r,o,s,a,l;const c=Mc({name:"MuiModal",props:e}),{BackdropComponent:u=J_,BackdropProps:h,classes:d,className:p,closeAfterTransition:f=!1,children:m,container:g,component:y,components:_={},componentsProps:v={},disableAutoFocus:b=!1,disableEnforceFocus:x=!1,disableEscapeKeyDown:w=!1,disablePortal:S=!1,disableRestoreFocus:k=!1,disableScrollLock:C=!1,hideBackdrop:E=!1,keepMounted:T=!1,onBackdropClick:P,onClose:I,open:M,slotProps:A,slots:R,theme:z}=c,L=os(c,Y_),[O,D]=t.useState(!0),F={container:g,closeAfterTransition:f,disableAutoFocus:b,disableEnforceFocus:x,disableEscapeKeyDown:w,disablePortal:S,disableRestoreFocus:k,disableScrollLock:C,hideBackdrop:E,keepMounted:T,onBackdropClick:P,onClose:I,open:M},N=rs({},c,F,{exited:O}),B=null!=(i=null!=(r=null==R?void 0:R.root)?r:_.Root)?i:$_,j=null!=(o=null!=(s=null==R?void 0:R.backdrop)?s:_.Backdrop)?o:u,V=null!=(a=null==A?void 0:A.root)?a:v.root,U=null!=(l=null==A?void 0:A.backdrop)?l:v.backdrop;return(0,ru.jsx)(V_,rs({slots:{root:B,backdrop:j},slotProps:{root:()=>rs({},e_(V,N),!xg(B)&&{as:y,theme:z},{className:as(p,null==V?void 0:V.className,null==d?void 0:d.root,!N.open&&N.exited&&(null==d?void 0:d.hidden))}),backdrop:()=>rs({},h,e_(U,N),{className:as(null==U?void 0:U.className,null==h?void 0:h.className,null==d?void 0:d.backdrop)})},onTransitionEnter:()=>D(!1),onTransitionExited:()=>D(!0),ref:n},L,F,{children:m}))})),ev=Q_,tv=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function nv(e){return tu("MuiPaper",e)}nu("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const iv=["className","component","elevation","square","variant"],rv=$c("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((e=>{let{theme:t,ownerState:n}=e;var i;return rs({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&rs({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat($l("#fff",tv(n.elevation)),", ").concat($l("#fff",tv(n.elevation)),")")},t.vars&&{backgroundImage:null==(i=t.vars.overlays)?void 0:i[n.elevation]}))})),ov=t.forwardRef((function(e,t){const n=Mc({props:e,name:"MuiPaper"}),{className:i,component:r="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=os(n,iv),c=rs({},n,{component:r,elevation:o,square:s,variant:a}),u=(e=>{const{square:t,elevation:n,variant:i,classes:r}=e;return ls({root:["root",i,!t&&"rounded","elevation"===i&&"elevation".concat(n)]},nv,r)})(c);return(0,ru.jsx)(rv,rs({as:r,ownerState:c,className:as(u.root,i),ref:t},l))}));function sv(e){return tu("MuiPopover",e)}nu("MuiPopover",["root","paper"]);const av=["onEntering"],lv=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"],cv=["slotProps"];function uv(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function hv(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function dv(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function pv(e){return"function"===typeof e?e():e}const fv=$c(ev,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),mv=$c(ov,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),gv=t.forwardRef((function(e,n){var i,r,o;const s=Mc({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:h="anchorEl",children:d,className:p,container:f,elevation:m=8,marginThreshold:g=16,open:y,PaperProps:_={},slots:v,slotProps:b,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:w=x_,transitionDuration:S="auto",TransitionProps:{onEntering:k}={}}=s,C=os(s.TransitionProps,av),E=os(s,lv),T=null!=(i=null==b?void 0:b.paper)?i:_,P=t.useRef(),I=pu(P,T.ref),M=rs({},s,{anchorOrigin:c,anchorReference:h,elevation:m,marginThreshold:g,externalPaperSlotProps:T,transformOrigin:x,TransitionComponent:w,transitionDuration:S,TransitionProps:C}),A=(e=>{const{classes:t}=e;return ls({root:["root"],paper:["paper"]},sv,t)})(M),R=t.useCallback((()=>{if("anchorPosition"===h)return u;const e=pv(l),t=(e&&1===e.nodeType?e:Fy(P.current).body).getBoundingClientRect();return{top:t.top+uv(t,c.vertical),left:t.left+hv(t,c.horizontal)}}),[l,c.horizontal,c.vertical,u,h]),z=t.useCallback((e=>({vertical:uv(e,x.vertical),horizontal:hv(e,x.horizontal)})),[x.horizontal,x.vertical]),L=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=z(t);if("none"===h)return{top:null,left:null,transformOrigin:dv(n)};const i=R();let r=i.top-n.vertical,o=i.left-n.horizontal;const s=r+t.height,a=o+t.width,c=r_(pv(l)),u=c.innerHeight-g,d=c.innerWidth-g;if(r<g){const e=r-g;r-=e,n.vertical+=e}else if(s>u){const e=s-u;r-=e,n.vertical+=e}if(o<g){const e=o-g;o-=e,n.horizontal+=e}else if(a>d){const e=a-d;o-=e,n.horizontal+=e}return{top:"".concat(Math.round(r),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:dv(n)}}),[l,h,R,z,g]),[O,D]=t.useState(y),F=t.useCallback((()=>{const e=P.current;if(!e)return;const t=L(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,D(!0)}),[L]);t.useEffect((()=>{y&&F()})),t.useImperativeHandle(a,(()=>y?{updatePosition:()=>{F()}}:null),[y,F]),t.useEffect((()=>{if(!y)return;const e=i_((()=>{F()})),t=r_(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,y,F]);let N=S;"auto"!==S||w.muiSupportAuto||(N=void 0);const B=f||(l?Fy(pv(l)).body:void 0),j=null!=(r=null==v?void 0:v.root)?r:fv,V=null!=(o=null==v?void 0:v.paper)?o:mv,U=n_({elementType:V,externalSlotProps:rs({},T,{style:O?T.style:rs({},T.style,{opacity:0})}),additionalProps:{elevation:m,ref:I},ownerState:M,className:as(A.paper,null==T?void 0:T.className)}),q=n_({elementType:j,externalSlotProps:(null==b?void 0:b.root)||{},externalForwardedProps:E,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:B,open:y},ownerState:M,className:as(A.root,p)}),{slotProps:G}=q,Z=os(q,cv);return(0,ru.jsx)(j,rs({},Z,!xg(j)&&{slotProps:G},{children:(0,ru.jsx)(w,rs({appear:!0,in:y,onEntering:(e,t)=>{k&&k(e,t),F()},onExited:()=>{D(!1)},timeout:N},C,{children:(0,ru.jsx)(V,rs({},U,{children:d}))}))}))})),yv=gv;function _v(e){return tu("MuiMenu",e)}nu("MuiMenu",["root","paper","list"]);const vv=["onEntering"],bv=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],xv={vertical:"top",horizontal:"right"},wv={vertical:"top",horizontal:"left"},Sv=$c(yv,{shouldForwardProp:e=>Kc(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),kv=$c(mv,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Cv=$c($y,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Ev=t.forwardRef((function(e,n){const i=Mc({props:e,name:"MuiMenu"}),{autoFocus:r=!0,children:o,disableAutoFocusItem:s=!1,MenuListProps:a={},onClose:l,open:c,PaperProps:u={},PopoverClasses:h,transitionDuration:d="auto",TransitionProps:{onEntering:p}={},variant:f="selectedMenu"}=i,m=os(i.TransitionProps,vv),g=os(i,bv),y=vh(),_="rtl"===y.direction,v=rs({},i,{autoFocus:r,disableAutoFocusItem:s,MenuListProps:a,onEntering:p,PaperProps:u,transitionDuration:d,TransitionProps:m,variant:f}),b=(e=>{const{classes:t}=e;return ls({root:["root"],paper:["paper"],list:["list"]},_v,t)})(v),x=r&&!s&&c,w=t.useRef(null);let S=-1;return t.Children.map(o,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===f&&e.props.selected||-1===S)&&(S=n))})),(0,ru.jsx)(Sv,rs({onClose:l,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?xv:wv,slots:{paper:kv},slotProps:{paper:rs({},u,{classes:rs({},u.classes,{root:b.paper})})},className:b.root,open:c,ref:n,transitionDuration:d,TransitionProps:rs({onEntering:(e,t)=>{w.current&&w.current.adjustStyleForScrollbar(e,y),p&&p(e,t)}},m),ownerState:v},g,{classes:h,children:(0,ru.jsx)(Cv,rs({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),l&&l(e,"tabKeyDown"))},actions:w,autoFocus:r&&(-1===S||s),autoFocusItem:x,variant:f},a,{className:as(b.list,a.className),children:o}))}))})),Tv=Ev;function Pv(e){return tu("MuiNativeSelect",e)}const Iv=nu("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Mv=["className","disabled","error","IconComponent","inputRef","variant"],Av=e=>{let{ownerState:t,theme:n}=e;return rs({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":rs({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(Iv.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},Rv=$c("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Kc,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(Iv.multiple)]:t.multiple}]}})(Av),zv=e=>{let{ownerState:t,theme:n}=e;return rs({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(Iv.disabled)]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},Lv=$c("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(hs(n.variant))],n.open&&t.iconOpen]}})(zv),Ov=t.forwardRef((function(e,n){const{className:i,disabled:r,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=e,c=os(e,Mv),u=rs({},e,{disabled:r,variant:l,error:o}),h=(e=>{const{classes:t,variant:n,disabled:i,multiple:r,open:o,error:s}=e;return ls({select:["select",n,i&&"disabled",r&&"multiple",s&&"error"],icon:["icon","icon".concat(hs(n)),o&&"iconOpen",i&&"disabled"]},Pv,t)})(u);return(0,ru.jsxs)(t.Fragment,{children:[(0,ru.jsx)(Rv,rs({ownerState:u,className:as(h.select,i),disabled:r,ref:a||n},c)),e.multiple?null:(0,ru.jsx)(Lv,{as:s,ownerState:u,className:h.icon})]})})),Dv=Ov;const Fv=function(e){let{controlled:n,default:i,name:r,state:o="value"}=e;const{current:s}=t.useRef(void 0!==n),[a,l]=t.useState(i);return[s?n:a,t.useCallback((e=>{s||l(e)}),[])]};function Nv(e){return tu("MuiSelect",e)}const Bv=nu("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var jv;const Vv=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Uv=$c("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(Bv.select)]:t.select},{["&.".concat(Bv.select)]:t[n.variant]},{["&.".concat(Bv.error)]:t.error},{["&.".concat(Bv.multiple)]:t.multiple}]}})(Av,{["&.".concat(Bv.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),qv=$c("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(hs(n.variant))],n.open&&t.iconOpen]}})(zv),Gv=$c("input",{shouldForwardProp:e=>Xc(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Zv(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Hv(e){return null==e||"string"===typeof e&&!e.trim()}const Wv=t.forwardRef((function(e,n){const{"aria-describedby":i,"aria-label":r,autoFocus:o,autoWidth:s,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:h,displayEmpty:d,error:p=!1,IconComponent:f,inputRef:m,labelId:g,MenuProps:y={},multiple:_,name:v,onBlur:b,onChange:x,onClose:w,onFocus:S,onOpen:k,open:C,readOnly:E,renderValue:T,SelectDisplayProps:P={},tabIndex:I,value:M,variant:A="standard"}=e,R=os(e,Vv),[z,L]=Fv({controlled:M,default:u,name:"Select"}),[O,D]=Fv({controlled:C,default:c,name:"Select"}),F=t.useRef(null),N=t.useRef(null),[B,j]=t.useState(null),{current:V}=t.useRef(null!=C),[U,q]=t.useState(),G=pu(n,m),Z=t.useCallback((e=>{N.current=e,e&&j(e)}),[]),H=null==B?void 0:B.parentNode;t.useImperativeHandle(G,(()=>({focus:()=>{N.current.focus()},node:F.current,value:z})),[z]),t.useEffect((()=>{c&&O&&B&&!V&&(q(s?null:H.clientWidth),N.current.focus())}),[B,s]),t.useEffect((()=>{o&&N.current.focus()}),[o]),t.useEffect((()=>{if(!g)return;const e=Fy(N.current).getElementById(g);if(e){const t=()=>{getSelection().isCollapsed&&N.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[g]);const W=(e,t)=>{e?k&&k(t):w&&w(t),V||(q(s?null:H.clientWidth),D(e))},K=t.Children.toArray(a),X=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(_){n=Array.isArray(z)?z.slice():[];const t=z.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),z!==n&&(L(n),x)){const i=t.nativeEvent||t,r=new i.constructor(i.type,i);Object.defineProperty(r,"target",{writable:!0,value:{value:n,name:v}}),x(r,e)}_||W(!1,t)}},Y=null!==B&&O;let $,J;delete R["aria-invalid"];const Q=[];let ee=!1,te=!1;(Mg({value:z})||d)&&(T?$=T(z):ee=!0);const ne=K.map((e=>{if(!t.isValidElement(e))return null;let n;if(_){if(!Array.isArray(z))throw new Error(cs(2));n=z.some((t=>Zv(t,e.props.value))),n&&ee&&Q.push(e.props.children)}else n=Zv(z,e.props.value),n&&ee&&(J=e.props.children);return n&&(te=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:X(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));ee&&($=_?0===Q.length?null:Q.reduce(((e,t,n)=>(e.push(t),n<Q.length-1&&e.push(", "),e)),[]):J);let ie,re=U;!s&&V&&B&&(re=H.clientWidth),ie="undefined"!==typeof I?I:h?null:0;const oe=P.id||(v?"mui-component-select-".concat(v):void 0),se=rs({},e,{variant:A,value:z,open:Y,error:p}),ae=(e=>{const{classes:t,variant:n,disabled:i,multiple:r,open:o,error:s}=e;return ls({select:["select",n,i&&"disabled",r&&"multiple",s&&"error"],icon:["icon","icon".concat(hs(n)),o&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]},Nv,t)})(se);return(0,ru.jsxs)(t.Fragment,{children:[(0,ru.jsx)(Uv,rs({ref:Z,tabIndex:ie,role:"button","aria-disabled":h?"true":void 0,"aria-expanded":Y?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[g,oe].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:e=>{if(!E){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),W(!0,e))}},onMouseDown:h||E?null:e=>{0===e.button&&(e.preventDefault(),N.current.focus(),W(!0,e))},onBlur:e=>{!Y&&b&&(Object.defineProperty(e,"target",{writable:!0,value:{value:z,name:v}}),b(e))},onFocus:S},P,{ownerState:se,className:as(P.className,ae.select,l),id:oe,children:Hv($)?jv||(jv=(0,ru.jsx)("span",{className:"notranslate",children:"\u200b"})):$})),(0,ru.jsx)(Gv,rs({"aria-invalid":p,value:Array.isArray(z)?z.join(","):z,name:v,ref:F,"aria-hidden":!0,onChange:e=>{const t=K.find((t=>t.props.value===e.target.value));void 0!==t&&(L(t.props.value),x&&x(e,t))},tabIndex:-1,disabled:h,className:ae.nativeInput,autoFocus:o,ownerState:se},R)),(0,ru.jsx)(qv,{as:f,className:ae.icon,ownerState:se}),(0,ru.jsx)(Tv,rs({id:"menu-".concat(v||""),anchorEl:H,open:Y,onClose:e=>{W(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:rs({"aria-labelledby":g,role:"listbox",disableListWrap:!0},y.MenuListProps),PaperProps:rs({},y.PaperProps,{style:rs({minWidth:re},null!=y.PaperProps?y.PaperProps.style:null)}),children:ne}))]})})),Kv=Wv,Xv=cu((0,ru.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Yv=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],$v={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Kc(e)&&"variant"!==e,slot:"Root"},Jv=$c(Wg,$v)(""),Qv=$c(dy,$v)(""),eb=$c(ey,$v)(""),tb=t.forwardRef((function(e,n){const i=Mc({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=Xv,id:h,input:d,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:y=!1,native:_=!1,onClose:v,onOpen:b,open:x,renderValue:w,SelectDisplayProps:S,variant:k="outlined"}=i,C=os(i,Yv),E=_?Dv:Kv,T=wg({props:i,muiFormControl:kg(),states:["variant","error"]}),P=T.variant||k,I=rs({},i,{variant:P,classes:s}),M=(e=>{const{classes:t}=e;return t})(I),A=d||{standard:(0,ru.jsx)(Jv,{ownerState:I}),outlined:(0,ru.jsx)(Qv,{label:f,ownerState:I}),filled:(0,ru.jsx)(eb,{ownerState:I})}[P],R=pu(n,A.ref);return(0,ru.jsx)(t.Fragment,{children:t.cloneElement(A,rs({inputComponent:E,inputProps:rs({children:o,error:T.error,IconComponent:u,variant:P,type:void 0,multiple:y},_?{id:h}:{autoWidth:r,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:v,onOpen:b,open:x,renderValue:w,SelectDisplayProps:rs({id:h},S)},p,{classes:p?vs(M,p.classes):M},d?d.props.inputProps:{})},y&&_&&"outlined"===P?{notched:!0}:{},{ref:R,className:as(A.props.className,a)},!d&&{variant:P},C))})}));tb.muiName="Select";const nb=tb;function ib(e){return tu("MuiTextField",e)}nu("MuiTextField",["root"]);const rb=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],ob={standard:Wg,filled:ey,outlined:dy},sb=$c(Iy,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ab=t.forwardRef((function(e,t){const n=Mc({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:r=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:h,fullWidth:d=!1,helperText:p,id:f,InputLabelProps:m,inputProps:g,InputProps:y,inputRef:_,label:v,maxRows:b,minRows:x,multiline:w=!1,name:S,onBlur:k,onChange:C,onClick:E,onFocus:T,placeholder:P,required:I=!1,rows:M,select:A=!1,SelectProps:R,type:z,value:L,variant:O="outlined"}=n,D=os(n,rb),F=rs({},n,{autoFocus:r,color:a,disabled:c,error:u,fullWidth:d,multiline:w,required:I,select:A,variant:O}),N=(e=>{const{classes:t}=e;return ls({root:["root"]},ib,t)})(F);const B={};"outlined"===O&&(m&&"undefined"!==typeof m.shrink&&(B.notched=m.shrink),B.label=v),A&&(R&&R.native||(B.id=void 0),B["aria-describedby"]=void 0);const j=cg(f),V=p&&j?"".concat(j,"-helper-text"):void 0,U=v&&j?"".concat(j,"-label"):void 0,q=ob[O],G=(0,ru.jsx)(q,rs({"aria-describedby":V,autoComplete:i,autoFocus:r,defaultValue:l,fullWidth:d,multiline:w,name:S,rows:M,maxRows:b,minRows:x,type:z,value:L,id:j,inputRef:_,onBlur:k,onChange:C,onFocus:T,onClick:E,placeholder:P,inputProps:g},B,y));return(0,ru.jsxs)(sb,rs({className:as(N.root,s),disabled:c,error:u,fullWidth:d,ref:t,required:I,color:a,variant:O,ownerState:F},D,{children:[null!=v&&""!==v&&(0,ru.jsx)(Sy,rs({htmlFor:j,id:U},m,{children:v})),A?(0,ru.jsx)(nb,rs({"aria-describedby":V,id:j,labelId:U,value:L,input:G},R,{children:o})):G,p&&(0,ru.jsx)(Dy,rs({id:V},h,{children:p}))]}))})),lb=ab;var cb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ub=t.createContext&&t.createContext(cb),hb=function(){return hb=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},hb.apply(this,arguments)},db=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function pb(e){return e&&e.map((function(e,n){return t.createElement(e.tag,hb({key:n},e.attr),pb(e.child))}))}function fb(e){return function(n){return t.createElement(mb,hb({attr:hb({},e.attr)},n),pb(e.child))}}function mb(e){var n=function(n){var i,r=e.attr,o=e.size,s=e.title,a=db(e,["attr","size","title"]),l=o||n.size||"1em";return n.className&&(i=n.className),e.className&&(i=(i?i+" ":"")+e.className),t.createElement("svg",hb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:i,style:hb(hb({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&t.createElement("title",null,s),e.children)};return void 0!==ub?t.createElement(ub.Consumer,null,(function(e){return n(e)})):n(cb)}function gb(e){return fb({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function yb(e){return fb({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}const _b=0,vb=1;const bb=class extends gr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=_b,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;const t=void 0!==e.className?e.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=t+"-thumb "+xi;const i=this.element;i.className=t+" "+xi+" "+wi,i.appendChild(n),i.addEventListener($i,this.handleDraggerStart_.bind(this),!1),i.addEventListener(Yi,this.handleDraggerDrag_.bind(this),!1),i.addEventListener(Ji,this.handleDraggerEnd_.bind(this),!1),i.addEventListener(J,this.handleContainerClick_.bind(this),!1),n.addEventListener(J,D,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,n=e.offsetHeight;if(0===t&&0===n)return this.sliderInitialized_=!1;const i=getComputedStyle(e);t-=parseFloat(i.paddingRight)+parseFloat(i.paddingLeft),n-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);const r=e.firstElementChild,o=getComputedStyle(r),s=r.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),a=r.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[s,a],t>n?(this.direction_=vb,this.widthLimit_=t-s):(this.direction_=_b,this.heightLimit_=n-a),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),n=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(n),r=t.getConstrainedZoom(t.getZoomForResolution(i));t.animateInternal({zoom:r,duration:this.duration_,easing:Sn})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const e=this.handleDraggerDrag_,t=this.handleDraggerEnd_,n=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(re(n,Yi,e,this),re(n,Ji,t,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,n=e.clientY-this.startY_,i=this.getRelativePosition_(t,n);this.currentResolution_=this.getResolutionForPosition_(i),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){if(this.dragging_){this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0}}setThumbPosition_(e){const t=this.getPositionForResolution_(e),n=this.element.firstElementChild;this.direction_==vb?n.style.left=this.widthLimit_*t+"px":n.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let n;return n=this.direction_===vb?e/this.widthLimit_:t/this.heightLimit_,Xe(n,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){return Xe(1-this.getMap().getView().getValueForResolutionFunction()(e),0,1)}render(e){if(!e.frameState)return;if(!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}},xb={map:Am().instanceOf(so).isRequired,delta:Am().number,titles:Am().shape({zoomIn:Am().string,zoomOut:Am().string}),zoomInChildren:Am().node,zoomOutChildren:Am().node,zoomSlider:Am().bool},wb={titles:{zoomIn:"Zoom in",zoomOut:"Zoom out"},zoomInChildren:t.createElement(yb,{focusable:!1}),zoomOutChildren:t.createElement(gb,{focusable:!1}),zoomSlider:!1,delta:1},Sb=(e,t)=>{const n=e.getView(),i=n.getZoom()+t,r=n.getConstrainedZoom(i);n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:250,easing:Sn})};function kb(e){let{map:n,titles:i,zoomInChildren:r,zoomOutChildren:o,zoomSlider:s,delta:a,...l}=e;const c=(0,t.useRef)(),[u,h]=(0,t.useState)(),d=(0,t.useCallback)((e=>{e.which&&13!==e.which||Sb(n,a)}),[a,n]),p=(0,t.useCallback)((e=>{e.which&&13!==e.which||Sb(n,-a)}),[a,n]),f=(0,t.useMemo)((()=>u>=n.getView().getConstrainedZoom(n.getView().getMaxZoom())),[u,n]),m=(0,t.useMemo)((()=>u<=n.getView().getConstrainedZoom(n.getView().getMinZoom())),[u,n]);return(0,t.useEffect)((()=>{const e=n.on("moveend",(()=>{h(n.getView().getZoom())}));let t;return s&&c.current&&(t=new bb,t.element.firstElementChild.tabIndex=-1,t.setTarget(c.current),n.addControl(t)),()=>{le(e),t&&n.removeControl(t)}}),[n,s]),t.createElement("div",{className:"rs-zooms-bar",...l},t.createElement("button",{type:"button",tabIndex:0,className:"rs-zoom-in",title:i.zoomIn,onClick:d,onKeyPress:d,disabled:f},r),s?t.createElement("div",{className:"rs-zoomslider-wrapper",ref:c}):null,t.createElement("button",{type:"button",tabIndex:0,className:"rs-zoom-out",title:i.zoomOut,onClick:p,onKeyPress:p,disabled:m},o))}kb.propTypes=xb,kb.defaultProps=wb;const Cb=t.memo(kb),Eb="%[a-f0-9]{2}",Tb=new RegExp("("+Eb+")|([^%]+?)","gi"),Pb=new RegExp("("+Eb+")+","gi");function Ib(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(1===e.length)return e;t=t||1;const n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],Ib(n),Ib(i))}function Mb(e){try{return decodeURIComponent(e)}catch{let t=e.match(Tb)||[];for(let n=1;n<t.length;n++)t=(e=Ib(t,n).join("")).match(Tb)||[];return e}}function Ab(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return function(e){const t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"};let n=Pb.exec(e);for(;n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{const e=Mb(n[0]);e!==n[0]&&(t[n[0]]=e)}n=Pb.exec(e)}t["%C2"]="\ufffd";const i=Object.keys(t);for(const r of i)e=e.replace(new RegExp(r,"g"),t[r]);return e}(e)}}function Rb(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===t)return[];const n=e.indexOf(t);return-1===n?[]:[e.slice(0,n),e.slice(n+t.length)]}function zb(e,t){const n={};if(Array.isArray(t))for(const i of t){const t=Object.getOwnPropertyDescriptor(e,i);null!==t&&void 0!==t&&t.enumerable&&Object.defineProperty(n,i,t)}else for(const i of Reflect.ownKeys(e)){const r=Object.getOwnPropertyDescriptor(e,i);if(r.enumerable){t(i,e[i],e)&&Object.defineProperty(n,i,r)}}return n}const Lb=e=>null===e||void 0===e,Ob=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%".concat(e.charCodeAt(0).toString(16).toUpperCase()))),Db=Symbol("encodeFragmentIdentifier");function Fb(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function Nb(e,t){return t.encode?t.strict?Ob(e):encodeURIComponent(e):e}function Bb(e,t){return t.decode?Ab(e):e}function jb(e){return Array.isArray(e)?e.sort():"object"===typeof e?jb(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function Vb(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function Ub(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function qb(e){const t=(e=Vb(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function Gb(e,t){Fb((t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t}).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,i)=>{t=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=n):i[e]=n};case"bracket":return(e,n,i)=>{t=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),t?void 0!==i[e]?i[e]=[...i[e],n]:i[e]=[n]:i[e]=n};case"colon-list-separator":return(e,n,i)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==i[e]?i[e]=[...i[e],n]:i[e]=[n]:i[e]=n};case"comma":case"separator":return(t,n,i)=>{const r="string"===typeof n&&n.includes(e.arrayFormatSeparator),o="string"===typeof n&&!r&&Bb(n,e).includes(e.arrayFormatSeparator);n=o?Bb(n,e):n;const s=r||o?n.split(e.arrayFormatSeparator).map((t=>Bb(t,e))):null===n?n:Bb(n,e);i[t]=s};case"bracket-separator":return(t,n,i)=>{const r=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!r)return void(i[t]=n?Bb(n,e):n);const o=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>Bb(t,e)));void 0!==i[t]?i[t]=[...i[t],...o]:i[t]=o};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[...[n[e]].flat(),t]:n[e]=t}}}(t),i=Object.create(null);if("string"!==typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const r of e.split("&")){if(""===r)continue;const e=t.decode?r.replace(/\+/g," "):r;let[o,s]=Rb(e,"=");void 0===o&&(o=e),s=void 0===s?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:Bb(s,t),n(Bb(o,t),s,i)}for(const[r,o]of Object.entries(i))if("object"===typeof o&&null!==o)for(const[e,n]of Object.entries(o))o[e]=Ub(n,t);else i[r]=Ub(o,t);return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=jb(n):e[t]=n,e}),Object.create(null))}function Zb(e,t){if(!e)return"";Fb((t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t}).arrayFormatSeparator);const n=n=>t.skipNull&&Lb(e[n])||t.skipEmptyString&&""===e[n],i=function(e){switch(e.arrayFormat){case"index":return t=>(n,i)=>{const r=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[Nb(t,e),"[",r,"]"].join("")]:[...n,[Nb(t,e),"[",Nb(r,e),"]=",Nb(i,e)].join("")]};case"bracket":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[Nb(t,e),"[]"].join("")]:[...n,[Nb(t,e),"[]=",Nb(i,e)].join("")];case"colon-list-separator":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[Nb(t,e),":list="].join("")]:[...n,[Nb(t,e),":list=",Nb(i,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(i,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:(r=null===r?"":r,0===i.length?[[Nb(n,e),t,Nb(r,e)].join("")]:[[i,Nb(r,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,Nb(t,e)]:[...n,[Nb(t,e),"=",Nb(i,e)].join("")]}}(t),r={};for(const[s,a]of Object.entries(e))n(s)||(r[s]=a);const o=Object.keys(r);return!1!==t.sort&&o.sort(t.sort),o.map((n=>{const r=e[n];return void 0===r?"":null===r?Nb(n,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?Nb(n,t)+"[]":r.reduce(i(n),[]).join("&"):Nb(n,t)+"="+Nb(r,t)})).filter((e=>e.length>0)).join("&")}function Hb(e,t){var n,i,r;t={decode:!0,...t};let[o,s]=Rb(e,"#");return void 0===o&&(o=e),{url:null!==(n=null===(i=o)||void 0===i||null===(r=i.split("?"))||void 0===r?void 0:r[0])&&void 0!==n?n:"",query:Gb(qb(e),t),...t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:Bb(s,t)}:{}}}function Wb(e,t){t={encode:!0,strict:!0,[Db]:!0,...t};const n=Vb(e.url).split("?")[0]||"";let i=Zb({...Gb(qb(e.url),{sort:!1}),...e.query},t);i&&(i="?".concat(i));let r=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);if(e.fragmentIdentifier){const i=new URL(n);i.hash=e.fragmentIdentifier,r=t[Db]?i.hash:"#".concat(e.fragmentIdentifier)}return"".concat(n).concat(i).concat(r)}function Kb(e,t,n){n={parseFragmentIdentifier:!0,[Db]:!1,...n};const{url:i,query:r,fragmentIdentifier:o}=Hb(e,n);return Wb({url:i,query:zb(r,t),fragmentIdentifier:o},n)}function Xb(e,t,n){const i=Array.isArray(t)?e=>!t.includes(e):(e,n)=>!t(e,n);return Kb(e,i,n)}const Yb=e,$b=Bf((()=>({map:{width:"100%",height:"100%"},inputWrapper:{background:"white",position:"absolute",top:0,left:0,padding:15,paddingTop:8}})));function Jb(e){let{map:n,permalinkParam:i}=e;const r=S((e=>e.center)),o=S((e=>e.zoom)),[s,a]=(0,t.useState)(Yb.parse(window.location.search)[i]||""),l=R(),c=$b(),u=(0,t.useMemo)((()=>{const e=Yb.parse(window.location.search);return e[i]=s,window.history.replaceState(void 0,void 0,"".concat(window.location.pathname,"?").concat(Yb.stringify(e))),new Im({url:s})}),[s,i]),h=(0,t.useMemo)((()=>[u]),[u]);return(0,ru.jsxs)(ru.Fragment,{children:[(0,ru.jsx)(sg,{map:n,className:c.map,layers:h,center:r,zoom:o,onMapMoved:e=>{l(co(e.map.getView().getCenter())),l(uo(e.map.getView().getZoom()))}}),(0,ru.jsx)(Ah,{container:!0,className:c.inputWrapper,children:(0,ru.jsx)(Ah,{item:!0,xs:12,children:(0,ru.jsx)(lb,{id:"outlined-full-width",label:"GL Style URL",value:s,placeholder:"Paste the URL to a GL Style JSON here",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:e=>{a(e.target.value)}})})}),(0,ru.jsx)(Cb,{map:n})]})}Jb.defaultProps={permalinkParam:"left",map:null};const Qb=Jb;var ex=n(318);const tx={history:Am().shape({replace:Am().func}),layers:Am().arrayOf(Am().instanceOf(Tm)),map:Am().instanceOf(so),params:Am().object,coordinateDecimals:Am().number,isLayerHidden:Am().func,isBaseLayer:Am().func,replace:Am().func};class nx extends t.PureComponent{constructor(e){super(e),this.state={revision:0},this.onMoveEndRef=null,this.onPropertyChangeKeys=[]}componentDidMount(){const{map:e,layers:t,isLayerHidden:n,isBaseLayer:i}=this.props;if(e&&(this.moveEndRef=e.on("moveend",(()=>{this.onMapMoved()}))),t){const e=ex.parse(window.location.search);if(e.layers){const r=e.layers.split(",");Sm(t).forEach((e=>{r.includes(e.key)?e.setVisible?e.setVisible(!0):e.visible=!0:i(e)||n(e)||e.children.some((e=>e.visible))||(e.setVisible?e.setVisible(!1):e.visible=!1)}))}const r=(e.baselayers||"").split(",")[0];r&&Sm(t).filter(i).forEach((e=>{const t=e.key===r;e.setVisible?e.setVisible(t):e.visible=t})),this.updateLayers()}}componentDidUpdate(e,t){const{map:n,layers:i}=this.props,{revision:r}=this.state;i===e.layers&&r===t.revision||this.updateLayers(),n!==e.map&&(le(this.moveEndRef),this.moveEndRef=n.on("moveend",(()=>this.onMapMoved()))),this.updateHistory()}componentWillUnmount(){const{map:e}=this.props;e&&le(this.moveEndRef),le(this.onPropertyChangeKeys),this.onPropertyChangeKeys=[]}onMapMoved(){const{map:e}=this.props,t=e.getView(),n=t.getCenter(),i={};void 0!==n&&void 0!==n[0]&&void 0!==n[1]&&(i.x=this.roundCoord(n[0]),i.y=this.roundCoord(n[1])),this.setState({...i,z:+"".concat(Math.round("".concat(parseFloat(t.getZoom()),"e+2")),"e-2")})}roundCoord(e){const{coordinateDecimals:t}=this.props;return parseFloat(e.toFixed(t))}updateLayers(){const{layers:e,isLayerHidden:t,isBaseLayer:n}=this.props,{revision:i}=this.state;let r,o;le(this.onPropertyChangeKeys),this.onPropertyChangeKeys=Sm(e).map((e=>e.on("change:visible",(()=>{this.setState({revision:i+1})})))),e.length&&(r=Sm(e).filter((e=>{const i=e.children||[],r=i.every((e=>t(e))),o=i.some((e=>e.visible));return!n(e)&&!t(e)&&e.visible&&(!o||r)})).map((e=>e.key)).join());const s=Sm(e).filter(n);if(s.length){o=[...(s.filter((e=>e.visible))||[]).reverse(),...s.filter((e=>!e.visible))||[]].sort(((e,t)=>e.visible===t.visible?0:e.visible&&!t.visible?-1:1)).map((e=>e.key)).join()}this.setState({layers:r,baselayers:o})}updateHistory(){const{params:e,history:t,replace:n}=this.props,i={...ex.parse(window.location.search),...this.state,...e};delete i.revision,Object.entries(i).forEach((e=>{let[t,n]=e;void 0!==n&&null!==n||delete i[t]}));const r=encodeURI(ex.stringify(i,{encode:!1})),o=r?"?".concat(r):"";if(!r&&window.location.search||r&&o!==window.location.search)if(n)n({parameters:i,search:o});else if(t)t.replace({search:o});else{const{hash:e}=window.location;window.history.replaceState(void 0,void 0,"".concat(o).concat(e||""))}}render(){return null}}nx.propTypes=tx,nx.defaultProps={history:null,replace:null,layers:[],map:null,params:{},coordinateDecimals:2,isLayerHidden:()=>!1,isBaseLayer:e=>e.get("isBaseLayer")};const ix=nx;const rx=function(e){let{map:n}=e;const i=R();return(0,t.useEffect)((()=>{const e={...Yb.parse(window.location.search)},t=parseFloat(e.z),n=parseFloat(e.x),r=parseFloat(e.y);n&&r&&i(co([n,r])),t&&i(uo(t))}),[]),(0,ru.jsx)(ix,{map:n})},ox=Bf((()=>({container:{height:"100%","& > .MuiGrid-item":{borderLeft:"1px solid lightgray",borderRight:"1px solid lightgray"}},button:{position:"absolute !important",inset:"25px 0 0 ",bottom:"unset",width:50,margin:"auto !important",zIndex:1e3},mapLeft:{position:"relative"},mapRight:{position:"relative"}})));const sx=function(){const e=ox(),n=S((e=>e.mapLeft)),i=S((e=>e.mapRight)),[r,o]=(0,t.useState)(!1);return(0,ru.jsxs)(ru.Fragment,{children:[(0,ru.jsx)(gh,{className:e.button,onClick:()=>{o(!r)},children:(0,ru.jsx)(uu,{})}),(0,ru.jsxs)(Ah,{container:!0,direction:r?"row-reverse":"row",className:e.container,children:[(0,ru.jsx)(Ah,{item:!0,xs:6,className:e.mapLeft,children:(0,ru.jsx)(Qb,{permalinkParam:"left",map:n})}),(0,ru.jsx)(Ah,{item:!0,xs:6,className:e.mapRight,children:(0,ru.jsx)(Qb,{permalinkParam:"right",map:i})})]}),(0,ru.jsx)(rx,{map:n})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));const ax=c(ho,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());ax.subscribe((()=>{}));const lx=document.getElementById("root");(0,O.s)(lx).render((0,ru.jsx)(P,{store:ax,children:(0,ru.jsx)(sx,{})})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)}))})()})();
//# sourceMappingURL=main.d01efd78.js.map